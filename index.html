<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-React-Native" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/12/React-Native/" class="article-date">
  <time class="dt-published" datetime="2025-07-12T15:17:05.000Z" itemprop="datePublished">2025-07-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/12/React-Native/">React Native</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="/../img/deepseek_mermaid_20250712_a06989.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/07/12/React-Native/" data-id="cmd16uadt000058uregyqgr04" data-title="React Native" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ä¸šåŠ¡" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/04/%E4%B8%9A%E5%8A%A1/" class="article-date">
  <time class="dt-published" datetime="2025-07-04T02:58:27.000Z" itemprop="datePublished">2025-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/04/%E4%B8%9A%E5%8A%A1/">ä¸šåŠ¡</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h1><p><img src="/../img/31365.jpg"></p>
<h2 id="å¤šä¸ªé¡µé¢è·¨åŸŸï¼Œæ€ä¹ˆå®ç°å…±äº«localstorage"><a href="#å¤šä¸ªé¡µé¢è·¨åŸŸï¼Œæ€ä¹ˆå®ç°å…±äº«localstorage" class="headerlink" title="å¤šä¸ªé¡µé¢è·¨åŸŸï¼Œæ€ä¹ˆå®ç°å…±äº«localstorage"></a>å¤šä¸ªé¡µé¢è·¨åŸŸï¼Œæ€ä¹ˆå®ç°å…±äº«localstorage</h2><p>å®ç°è·¨åŸŸé¡µé¢å…±äº« <code>localStorage</code> çš„æ ¸å¿ƒæŒ‘æˆ˜æ˜¯æµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¯è¡Œçš„è§£å†³æ–¹æ¡ˆï¼ŒæŒ‰æ¨èç¨‹åº¦æ’åºï¼š</p>
<hr>
<h3 id="æ–¹æ¡ˆ-1ï¼šä½¿ç”¨-postMessage-iframeï¼ˆæ¨èï¼‰"><a href="#æ–¹æ¡ˆ-1ï¼šä½¿ç”¨-postMessage-iframeï¼ˆæ¨èï¼‰" class="headerlink" title="æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ postMessage + iframeï¼ˆæ¨èï¼‰"></a>æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ <code>postMessage</code> + <code>iframe</code>ï¼ˆæ¨èï¼‰</h3><p>é€šè¿‡éšè—çš„ <code>iframe</code> ä½œä¸ºæ¡¥æ¢ï¼Œåˆ©ç”¨ <code>window.postMessage</code> å®ç°è·¨åŸŸé€šä¿¡ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¸»é¡µé¢ (a.com) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// å‘é€æ•°æ®åˆ° iframe</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">sendToStorage</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> iframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;storage-iframe&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    iframe.<span class="property">contentWindow</span>.<span class="title function_">postMessage</span>(</span></span><br><span class="line"><span class="language-javascript">      &#123; <span class="attr">type</span>: <span class="string">&#x27;SET_LS&#x27;</span>, <span class="attr">key</span>: <span class="string">&#x27;sharedData&#x27;</span>, <span class="attr">value</span>: data &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&#x27;https://b.com&#x27;</span> <span class="comment">// ç›®æ ‡åŸŸ</span></span></span><br><span class="line"><span class="language-javascript">    );</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// æ¥æ”¶æ¥è‡ª iframe çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (event.<span class="property">origin</span> !== <span class="string">&#x27;https://b.com&#x27;</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">type</span> === <span class="string">&#x27;GET_LS_RESULT&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Received data:&#x27;</span>, event.<span class="property">data</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;storage-iframe&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://b.com/storage-proxy.html&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- b.com/storage-proxy.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// ç›‘å¬ä¸»é¡µé¢æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (event.<span class="property">origin</span> !== <span class="string">&#x27;https://a.com&#x27;</span>) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">type</span> === <span class="string">&#x27;SET_LS&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// å­˜å‚¨åˆ°å½“å‰åŸŸ(b.com)çš„ localStorage</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(event.<span class="property">data</span>.<span class="property">key</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(event.<span class="property">data</span>.<span class="property">value</span>));</span></span><br><span class="line"><span class="language-javascript">      </span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// å¯é€‰ï¼šå‘é€å›æ‰§</span></span></span><br><span class="line"><span class="language-javascript">      event.<span class="property">source</span>.<span class="title function_">postMessage</span>(</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">type</span>: <span class="string">&#x27;SET_SUCCESS&#x27;</span>, <span class="attr">key</span>: event.<span class="property">data</span>.<span class="property">key</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        event.<span class="property">origin</span></span></span><br><span class="line"><span class="language-javascript">      );</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">data</span>.<span class="property">type</span> === <span class="string">&#x27;GET_LS&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// è¯»å–æ•°æ®å¹¶è¿”å›</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> data = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(event.<span class="property">data</span>.<span class="property">key</span>);</span></span><br><span class="line"><span class="language-javascript">      event.<span class="property">source</span>.<span class="title function_">postMessage</span>(</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">type</span>: <span class="string">&#x27;GET_LS_RESULT&#x27;</span>, <span class="attr">value</span>: data &#125;,</span></span><br><span class="line"><span class="language-javascript">        event.<span class="property">origin</span></span></span><br><span class="line"><span class="language-javascript">      );</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ–¹æ¡ˆ-2ï¼šå…±äº«å­åŸŸï¼ˆåŒä¸»åŸŸé€‚ç”¨ï¼‰"><a href="#æ–¹æ¡ˆ-2ï¼šå…±äº«å­åŸŸï¼ˆåŒä¸»åŸŸé€‚ç”¨ï¼‰" class="headerlink" title="æ–¹æ¡ˆ 2ï¼šå…±äº«å­åŸŸï¼ˆåŒä¸»åŸŸé€‚ç”¨ï¼‰"></a>æ–¹æ¡ˆ 2ï¼šå…±äº«å­åŸŸï¼ˆåŒä¸»åŸŸé€‚ç”¨ï¼‰</h3><p>å¦‚æœé¡µé¢å±äºåŒä¸€ä¸»åŸŸï¼ˆå¦‚ <code>app1.example.com</code> å’Œ <code>app2.example.com</code>ï¼‰ï¼š</p>
<ol>
<li><p>åœ¨æ‰€æœ‰é¡µé¢è®¾ç½®ç›¸åŒçš„ä¸€çº§åŸŸï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">domain</span> = <span class="string">&quot;example.com&quot;</span>; <span class="comment">// éœ€æ‰€æœ‰é¡µé¢åŒæ­¥è®¾ç½®</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>é€šè¿‡ <code>iframe</code> æˆ– <code>window.open()</code> ç›´æ¥è®¿é—®çˆ¶&#x2F;å­çª—å£çš„ <code>localStorage</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶çª—å£è®¿é—® iframe</span></span><br><span class="line"><span class="keyword">const</span> iframe = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;my-iframe&#x27;</span>);</span><br><span class="line">iframe.<span class="property">contentWindow</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<hr>
<h3 id="æ–¹æ¡ˆ-3ï¼šæœåŠ¡ç«¯ä»£ç†åŒæ­¥"><a href="#æ–¹æ¡ˆ-3ï¼šæœåŠ¡ç«¯ä»£ç†åŒæ­¥" class="headerlink" title="æ–¹æ¡ˆ 3ï¼šæœåŠ¡ç«¯ä»£ç†åŒæ­¥"></a>æ–¹æ¡ˆ 3ï¼šæœåŠ¡ç«¯ä»£ç†åŒæ­¥</h3><ol>
<li>é¡µé¢ A å°†æ•°æ®å‘é€åˆ°è‡ªå·±çš„æœåŠ¡å™¨ï¼ˆA.com&#x2F;api&#x2F;saveï¼‰</li>
<li>æœåŠ¡å™¨å°†æ•°æ®åŒæ­¥åˆ°é¡µé¢ B çš„æœåŠ¡å™¨ï¼ˆB.com&#x2F;api&#x2F;syncï¼‰</li>
<li>é¡µé¢ B ä»è‡ªå·±çš„æœåŠ¡å™¨è·å–æ•°æ®ï¼ˆéœ€è½®è¯¢æˆ– WebSocketï¼‰</li>
</ol>
<hr>
<h3 id="æ–¹æ¡ˆ-4ï¼šç¬¬ä¸‰æ–¹åº“"><a href="#æ–¹æ¡ˆ-4ï¼šç¬¬ä¸‰æ–¹åº“" class="headerlink" title="æ–¹æ¡ˆ 4ï¼šç¬¬ä¸‰æ–¹åº“"></a>æ–¹æ¡ˆ 4ï¼šç¬¬ä¸‰æ–¹åº“</h3><ul>
<li><p><strong>cross-storage</strong>ï¼š<br>æä¾›ä¸€ä¸ªä¸­å¿ƒåŒ–çš„ <code>Hub</code> ç®¡ç†è·¨åŸŸå­˜å‚¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">const</span> storage = <span class="keyword">new</span> <span class="title class_">CrossStorageClient</span>(<span class="string">&#x27;https://b.com/hub.html&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å†™æ•°æ®</span></span><br><span class="line">storage.<span class="title function_">onConnect</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  storage.<span class="title function_">set</span>(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>); <span class="comment">// å†™å…¥ b.com</span></span><br><span class="line">  storage.<span class="title function_">get</span>(<span class="string">&#x27;key&#x27;</span>);          <span class="comment">// è¯»å– b.com</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="å…³é”®æ³¨æ„äº‹é¡¹"><a href="#å…³é”®æ³¨æ„äº‹é¡¹" class="headerlink" title="å…³é”®æ³¨æ„äº‹é¡¹"></a>å…³é”®æ³¨æ„äº‹é¡¹</h3><ol>
<li><strong>å®‰å…¨æ€§</strong>ï¼š<ul>
<li>ä½¿ç”¨ <code>postMessage</code> æ—¶ä¸¥æ ¼éªŒè¯ <code>event.origin</code></li>
<li>é¿å…ä¼ è¾“æ•æ„Ÿæ•°æ®</li>
</ul>
</li>
<li><strong>æ€§èƒ½</strong>ï¼š<ul>
<li>è·¨åŸŸé€šä¿¡æœ‰å»¶è¿Ÿï¼Œé«˜é¢‘æ“ä½œéœ€ä¼˜åŒ–</li>
</ul>
</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼š<ul>
<li><code>postMessage</code> å…¼å®¹ IE8+ï¼Œä½†å¤æ‚åœºæ™¯éœ€æµ‹è¯•</li>
</ul>
</li>
<li><strong>å­˜å‚¨é™åˆ¶</strong>ï¼š<ul>
<li>æ¯ä¸ªåŸŸçš„ <code>localStorage</code> ä»å—å•ç‹¬é…é¢é™åˆ¶ï¼ˆé€šå¸¸ 5MBï¼‰</li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/07/04/%E4%B8%9A%E5%8A%A1/" data-id="cmcygiiyv000fvgur8ak34ij9" data-title="ä¸šåŠ¡" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1/" rel="tag">åœºæ™¯è®¾è®¡</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Vue" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/03/Vue/" class="article-date">
  <time class="dt-published" datetime="2025-07-03T06:56:58.000Z" itemprop="datePublished">2025-07-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/03/Vue/">Vue</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Vue3-å’Œ-Vue2-çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿè¯´å‡ ä¸ªä¸»è¦çš„"><a href="#Vue3-å’Œ-Vue2-çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿè¯´å‡ ä¸ªä¸»è¦çš„" class="headerlink" title="Vue3 å’Œ Vue2 çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿè¯´å‡ ä¸ªä¸»è¦çš„"></a>Vue3 å’Œ Vue2 çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿè¯´å‡ ä¸ªä¸»è¦çš„</h2><p>Vue 3 æä¾›äº†æ›´ç°ä»£åŒ–ã€æ›´é«˜æ€§èƒ½çš„æ¶æ„ï¼Œé€šè¿‡ <code>Composition API</code> å’Œ <code>Proxy</code> å“åº”å¼ç³»ç»Ÿç­‰æ”¹è¿›æå‡äº†å¼€å‘ä½“éªŒ ğŸ‰ğŸ‰ğŸ‰ã€‚ç›¸æ¯”äº Vue 2ï¼Œå®ƒçš„ä¼˜åŠ¿å¦‚ä¸‹:</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">æ€§èƒ½ä¼˜åŒ–</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">è™šæ‹Ÿ DOM é‡æ„</strong>ï¼šVue3çš„è™šæ‹ŸDOMé‡‡ç”¨äº†æ›´é«˜æ•ˆçš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Diffç®—æ³•</code>ï¼Œå‡å°‘äº†æ¸²æŸ“å’Œæ›´æ–°çš„å¼€é”€ã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Tree-shaking æ”¯æŒ</strong>ï¼šVue3çš„ä»£ç ç»“æ„æ¨¡å—åŒ–ï¼Œæ”¯æŒæŒ‰éœ€å¼•å…¥ï¼Œå‡å°äº†æ‰“åŒ…ä½“ç§¯ã€‚</p></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Composition API</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">Vue3å¼•å…¥äº†Composition APIï¼Œä½¿ä»£ç æ›´æ¨¡å—åŒ–ã€å¤ç”¨æ€§æ›´å¼ºã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setup()</code><span>&nbsp;</span>æ–¹æ³•ä»£æ›¿äº†éƒ¨åˆ†é€‰é¡¹å¼ APIï¼Œé€šè¿‡å‡½æ•°çš„æ–¹å¼ç»„ç»‡é€»è¾‘ï¼Œä»£ç æ›´åŠ æ¸…æ™°ç®€æ´ã€‚</p></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">å“åº”å¼ç³»ç»Ÿæ”¹è¿›</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">Vue3ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Proxy</code><span>&nbsp;</span>å®ç°å“åº”å¼ï¼Œè§£å†³äº† Vue2ä½¿ç”¨Object.definePropertyå®ç°å“åº”å¼çš„ä¸€äº›å±€é™æ€§ï¼Œå¦‚æ— æ³•ç›‘å¬æ–°å¢å±æ€§å’Œæ•°ç»„ç´¢å¼•å˜åŒ–ã€‚</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">æ–°ç‰¹æ€§å’Œæ”¹è¿›</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Teleport</strong>ï¼šå¯ä»¥å°†ç»„ä»¶çš„DOMæ¸²æŸ“åˆ°æŒ‡å®šçš„DOMèŠ‚ç‚¹ä¹‹å¤–ï¼Œä¾‹å¦‚æ¨¡æ€æ¡†ã€é€šçŸ¥ç­‰ã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Fragment æ”¯æŒ</strong>ï¼šVue3æ”¯æŒç»„ä»¶è¿”å›å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œä¸å†éœ€è¦å•ä¸€æ ¹èŠ‚ç‚¹ã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">Vue3åŸç”Ÿæ”¯æŒ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">TypeScript</code>ï¼Œæä¾›æ›´å®Œå–„çš„ç±»å‹æ¨å¯¼å’Œå¼€å‘ä½“éªŒã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">Vue3æ”¯æŒä¸ºä¸€ä¸ªç»„ä»¶ç»‘å®šå¤šä¸ª<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code>ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">prop</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">event</code><span>&nbsp;</span>åç§°ã€‚</p></li></ul></details>

<h2 id="ğŸ”¥Vue-ç»„ä»¶çš„é€šè®¯æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#ğŸ”¥Vue-ç»„ä»¶çš„é€šè®¯æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ğŸ”¥Vue ç»„ä»¶çš„é€šè®¯æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>ğŸ”¥Vue ç»„ä»¶çš„é€šè®¯æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h2><p>ç»„ä»¶ä¹‹é—´çš„é€šè®¯é€šå¸¸åˆ†ä¸ºçˆ¶å­ç»„ä»¶é€šè®¯å’Œè·¨ç»„ä»¶é€šè®¯ã€‚è¦æ³¨æ„ï¼Œvue3 ç»„ä»¶çš„é€šè®¯æ–¹å¼å’Œ vue2 æœ‰ä¸€å®šçš„åŒºåˆ«ã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">çˆ¶å­ç»„ä»¶é€šä¿¡</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">Propsï¼šçˆ¶ç»„ä»¶é€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">props</code><span>&nbsp;</span>å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">$emitï¼šå­ç»„ä»¶é€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">$emit</code><span>&nbsp;</span>å‘çˆ¶ç»„ä»¶å‘é€äº‹ä»¶ï¼Œå¹¶å¯ä»¥ä¼ é€’æ•°æ®ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">è·å–ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼Œè°ƒç”¨å±æ€§æˆ–æ–¹æ³•ï¼š ğŸ’¡ Vue 2ï¼šé€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">this.$parent</code><span>&nbsp;</span>è·å–çˆ¶ç»„ä»¶å®ä¾‹ï¼Œæˆ–é€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">this.$children</code><span>&nbsp;</span>è·å–å­ç»„ä»¶å®ä¾‹ã€‚ ğŸ’¡ Vue 3ï¼šé€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>å¼•ç”¨å­ç»„ä»¶ï¼Œç›´æ¥è®¿é—®å…¶å±æ€§å’Œæ–¹æ³•ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">Vue 3 ç»„ä»¶æ”¯æŒå¤šä¸ª<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>ç»‘å®šå’Œè‡ªå®šä¹‰å±æ€§åï¼Œçˆ¶å­ä¹‹é—´çš„åŒå‘ç»‘å®šæ›´åŠ çµæ´»ã€‚</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">è·¨ç»„ä»¶é€šä¿¡</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">Provide / Injectï¼šçˆ¶ç»„ä»¶é€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">provide</code><span>&nbsp;</span>å‘åä»£ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œåä»£ç»„ä»¶ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">inject</code><span>&nbsp;</span>æ¥æ”¶æ•°æ®ï¼Œé€‚ç”¨äºæ·±å±‚åµŒå¥—ç»„ä»¶é—´çš„é€šä¿¡ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">vuexï¼šé€šè¿‡å…¨å±€çŠ¶æ€ç®¡ç†åº“ Vuex å…±äº«çŠ¶æ€ï¼Œå®ç°è·¨ç»„ä»¶é€šä¿¡ï¼ˆvue2ï¼‰ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">piniaï¼šPinia æ˜¯ Vue 3 æ¨èçš„å…¨å±€çŠ¶æ€ç®¡ç†åº“ï¼Œæ›¿ä»£äº† Vuexã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">äº‹ä»¶æ€»çº¿ï¼ˆVue 2ï¼‰ï¼šVue 2 ä¸­å¯ä»¥é€šè¿‡<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Event Bus</code>å®ç°ç»„ä»¶é—´çš„é€šä¿¡ï¼Œä½†åœ¨ Vue 3 ä¸­ä¸æ¨èä½¿ç”¨ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å…¨å±€äº‹ä»¶å¤„ç†å™¨ï¼šé€šè¿‡åœ¨æ ¹ç»„ä»¶$rootæˆ–å…¨å±€å¯¹è±¡ä¸Šç›‘å¬äº‹ä»¶ï¼Œè¿›è¡Œè·¨ç»„ä»¶é€šä¿¡ï¼ˆVue 3 æ¨èä½¿ç”¨å¤–éƒ¨åº“ï¼Œå¦‚<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mitt</code>ï¼‰ã€‚</li></ul></details>

<h2 id="Vue-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#Vue-ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ"></a>Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç»„ä»¶çš„åˆå§‹åŒ–ã€æ¸²æŸ“ã€æ›´æ–°å’Œé”€æ¯ç­‰é˜¶æ®µã€‚åœ¨Vue2å’ŒVue3ä¸­ï¼Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸€äº›åŒºåˆ«ã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">åˆ›å»ºé˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeCreate</strong>ï¼šç»„ä»¶å®ä¾‹åˆšè¢«åˆ›å»ºï¼Œæ•°æ®è§‚æµ‹å’Œäº‹ä»¶/ç›‘å¬å™¨è®¾ç½®ä¹‹å‰ã€‚æ­¤æ—¶æ— æ³•è®¿é—®<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">data</code><span>&nbsp;</span>ã€<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">computed</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">methods</code><span>&nbsp;</span>ç­‰ã€‚ 2ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">created</strong>ï¼šç»„ä»¶å®ä¾‹å·²åˆ›å»ºï¼Œæ•°æ®è§‚æµ‹ã€äº‹ä»¶/ç›‘å¬å™¨è®¾ç½®å®Œæˆï¼Œæ­¤æ—¶å¯ä»¥è®¿é—®<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">data</code><span>&nbsp;</span>ã€<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">computed</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">methods</code><span>&nbsp;</span>ç­‰ï¼Œé€šå¸¸ç”¨äºæ•°æ®åˆå§‹åŒ–ã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">æŒ‚è½½é˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeMount</strong>ï¼šåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰ï¼Œæ¨¡æ¿å·²ç¼–è¯‘ï¼Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">el</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">template</code><span>&nbsp;</span>å·²ç»ç¡®å®šï¼Œä½†å°šæœªæ¸²æŸ“ã€‚ 4ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">mounted</strong>ï¼šç»„ä»¶å®ä¾‹æŒ‚è½½åˆ° DOM ä¸Šä¹‹åï¼Œæ­¤æ—¶å¯ä»¥è®¿é—®å’Œæ“ä½œ DOMã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">æ›´æ–°é˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">5ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeUpdate</strong>ï¼šæ•°æ®å‘ç”Ÿå˜åŒ–ï¼ŒDOM å°šæœªæ›´æ–°ã€‚å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›æ•°æ®å¤„ç†ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ 6ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">updated</strong>ï¼šæ•°æ®å˜åŒ–ï¼ŒDOM æ›´æ–°åè°ƒç”¨ã€‚æ­¤æ—¶ç»„ä»¶çš„ DOM å·²ç»æ›´æ–°ï¼Œå¯ä»¥è®¿é—®å’Œæ“ä½œæ–°çš„ DOMã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">é”€æ¯é˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">7ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">beforeDestroy</strong>ï¼šç»„ä»¶å®ä¾‹é”€æ¯ä¹‹å‰ã€‚å¯ä»¥åœ¨æ­¤é˜¶æ®µè¿›è¡Œæ¸…ç†å·¥ä½œï¼Œä¾‹å¦‚ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ã€å®šæ—¶å™¨ç­‰ã€‚ 8ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">destroyed</strong>ï¼šç»„ä»¶å®ä¾‹é”€æ¯ä¹‹åã€‚æ­¤æ—¶ï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶å·²è¢«é”€æ¯ã€‚</p></details>

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">åˆ›å»ºé˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onBeforeMount</strong>ï¼šç­‰æ•ˆäº Vue 2 ä¸­çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code><span>&nbsp;</span>ï¼Œåœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰è°ƒç”¨ã€‚ 2ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onMounted</strong>ï¼šç­‰æ•ˆäº Vue 2 ä¸­çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code><span>&nbsp;</span>ï¼Œåœ¨ç»„ä»¶æŒ‚è½½ä¹‹åè°ƒç”¨ã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">æ›´æ–°é˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onBeforeUpdate</strong>ï¼šç­‰æ•ˆäº Vue 2 ä¸­çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>ï¼Œåœ¨æ•°æ®æ›´æ–°ä¹‹å‰è°ƒç”¨ã€‚ 4ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onUpdated</strong>ï¼šç­‰æ•ˆäº Vue 2 ä¸­çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code><span>&nbsp;</span>ï¼Œåœ¨æ•°æ®æ›´æ–°å¹¶æ¸²æŸ“ä¹‹åè°ƒç”¨ã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">é”€æ¯é˜¶æ®µ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">5ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onBeforeUnmount</strong>ï¼šç­‰æ•ˆäº Vue 2 ä¸­çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>ï¼Œåœ¨ç»„ä»¶å¸è½½å‰è°ƒç”¨ã€‚ 6ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">onUnmounted</strong>ï¼šç­‰æ•ˆäº Vue 2 ä¸­çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code><span>&nbsp;</span>ï¼Œåœ¨ç»„ä»¶å¸è½½åè°ƒç”¨ã€‚</p></details>

<p>setupä¸ç”Ÿå‘½å‘¨æœŸ</p>
<p>setup ä½œä¸º Vue3 çš„ Composition API çš„ä¸€éƒ¨åˆ†, å…¶å†…éƒ¨å‡½æ•°çš„æ‰§è¡Œæ—¶æœºæ—©äºMountedé’©å­ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">  console.log(&quot;setup&quot;);</span><br><span class="line">  onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;onMounted&#x27;);</span><br><span class="line">  &#125;);</span><br><span class="line">  // æ‰§è¡Œç»“æœ:setup onMounted</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Vue-ç»„ä»¶åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸå‘é€-ajax-è¯·æ±‚ï¼Ÿ"><a href="#Vue-ç»„ä»¶åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸå‘é€-ajax-è¯·æ±‚ï¼Ÿ" class="headerlink" title="Vue ç»„ä»¶åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸå‘é€ ajax è¯·æ±‚ï¼Ÿ"></a>Vue ç»„ä»¶åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸå‘é€ ajax è¯·æ±‚ï¼Ÿ</h2><p>åœ¨ Vueä¸­ï¼Œæ¥å£è¯·æ±‚ä¸€èˆ¬æ”¾åœ¨ <code>created</code> æˆ– <code>mounted</code> ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­ã€‚</p>
<details class="details custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong><strong style="box-sizing: border-box; font-weight: 600;"></strong></p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"></p></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong></p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;"></strong><strong style="box-sizing: border-box; font-weight: 600;"></strong><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;"></code></p></li></ul></details>

<h2 id="Vue-çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåº"><a href="#Vue-çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåº" class="headerlink" title="Vue çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåº"></a>Vue çˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåº</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1ï¸âƒ£ åˆ›å»ºé˜¶æ®µ</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>â¡ï¸<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å­ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>â¡ï¸<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">é¡ºåºï¼š çˆ¶ç»„ä»¶çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code><span>&nbsp;</span>å…ˆæ‰§è¡Œ ï¼Œå­ç»„ä»¶çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code><span>&nbsp;</span>åæ‰§è¡Œã€‚<blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">åŸå› ï¼šçˆ¶ç»„ä»¶éœ€è¦å…ˆå®Œæˆè‡ªèº«çš„åˆå§‹åŒ–ï¼ˆå¦‚ dataã€computed ç­‰ï¼‰ï¼Œæ‰èƒ½è§£ææ¨¡æ¿ä¸­çš„å­ç»„ä»¶å¹¶è§¦å‘å­ç»„ä»¶çš„åˆå§‹åŒ–ã€‚</p></blockquote></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">2ï¸âƒ£ æŒ‚è½½é˜¶æ®µ</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å­ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code><span>&nbsp;</span>â¡ï¸<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">é¡ºåºï¼š çˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code><span>&nbsp;</span>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeMount</code>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code><span>&nbsp;</span>â†’ çˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mounted</code><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">åŸå› ï¼šçˆ¶ç»„ä»¶åœ¨æŒ‚è½½å‰ï¼ˆbeforeMountï¼‰éœ€è¦å…ˆå®Œæˆå­ç»„ä»¶çš„æ¸²æŸ“å’ŒæŒ‚è½½ï¼Œå› ä¸ºå­ç»„ä»¶æ˜¯çˆ¶ç»„ä»¶æ¨¡æ¿çš„ä¸€éƒ¨åˆ†ã€‚åªæœ‰å½“æ‰€æœ‰å­ç»„ä»¶æŒ‚è½½å®Œæˆåï¼Œçˆ¶ç»„ä»¶æ‰ä¼šè§¦å‘è‡ªèº«çš„ mountedã€‚</p></blockquote></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3ï¸âƒ£ æ›´æ–°é˜¶æ®µ</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å­ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>â¡ï¸<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">é¡ºåºï¼š çˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeUpdate</code><span>&nbsp;</span>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code><span>&nbsp;</span>â†’ çˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">updated</code><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">åŸå› ï¼šçˆ¶ç»„ä»¶çš„æ•°æ®å˜åŒ–ä¼šè§¦å‘è‡ªèº«æ›´æ–°æµç¨‹ï¼Œä½†å­ç»„ä»¶çš„æ›´æ–°å¿…é¡»åœ¨çˆ¶ç»„ä»¶æ›´æ–°å‰å®Œæˆï¼ˆå› ä¸ºå­ç»„ä»¶å¯èƒ½ä¾èµ–çˆ¶ç»„ä»¶çš„æ•°æ®ï¼‰ï¼Œæœ€ç»ˆçˆ¶ç»„ä»¶çš„è§†å›¾æ›´æ–°å®Œæˆã€‚</p></blockquote></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">4ï¸âƒ£ é”€æ¯é˜¶æ®µ</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å­ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>â¡ï¸<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">çˆ¶ç»„ä»¶ï¼š<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">é¡ºåºï¼š çˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeDestroy</code><span>&nbsp;</span>â†’ å­<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code><span>&nbsp;</span>â†’ çˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">destroyed</code><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">åŸå› ï¼šçˆ¶ç»„ä»¶é”€æ¯å‰éœ€è¦å…ˆé”€æ¯æ‰€æœ‰å­ç»„ä»¶ï¼Œç¡®ä¿å­ç»„ä»¶çš„èµ„æºé‡Šæ”¾å’Œäº‹ä»¶è§£ç»‘ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p></blockquote></li></ul><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">TIP</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">æ³¨ï¼švue3ä¸­ï¼Œ<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setup()</code><span>&nbsp;</span>æ›¿ä»£äº†<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">beforeCreate</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">created</code>ï¼Œä½†çˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé¡ºåºä¸å˜ã€‚</p></div></details>

<h2 id="ğŸ”¥v-show-å’Œ-v-if-çš„åŒºåˆ«"><a href="#ğŸ”¥v-show-å’Œ-v-if-çš„åŒºåˆ«" class="headerlink" title="ğŸ”¥v-show å’Œ v-if çš„åŒºåˆ«"></a>ğŸ”¥v-show å’Œ v-if çš„åŒºåˆ«</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">æ¸²æŸ“æ–¹å¼ï¼š</strong><span>&nbsp;</span>ğŸ’¡v-ifï¼šæ¡ä»¶ä¸º true æ—¶æ‰ä¼šæ¸²æŸ“å…ƒç´ ï¼Œæ¡ä»¶ä¸º false æ—¶é”€æ¯å…ƒç´ ã€‚ ğŸ’¡v-showï¼šå§‹ç»ˆæ¸²æŸ“å…ƒç´ ï¼Œåªæ˜¯é€šè¿‡ CSS æ§åˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">display å±æ€§</code>æ¥æ˜¾ç¤ºæˆ–éšè—ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><strong style="box-sizing: border-box; font-weight: 600;">é€‚ç”¨åœºæ™¯ï¼š</strong><span>&nbsp;</span>ğŸ’¡v-ifï¼šé€‚ç”¨äºæ¡ä»¶å˜åŒ–ä¸é¢‘ç¹çš„åœºæ™¯ã€‚ ğŸ’¡v-showï¼šé€‚ç”¨äºæ¡ä»¶å˜åŒ–é¢‘ç¹çš„åœºæ™¯ã€‚</li></ul></details>

<h2 id="ä¸ºä½•v-ifå’Œv-forä¸èƒ½ä¸€èµ·ä½¿ç”¨ï¼Ÿ"><a href="#ä¸ºä½•v-ifå’Œv-forä¸èƒ½ä¸€èµ·ä½¿ç”¨ï¼Ÿ" class="headerlink" title="ä¸ºä½•v-ifå’Œv-forä¸èƒ½ä¸€èµ·ä½¿ç”¨ï¼Ÿ"></a>ä¸ºä½•v-ifå’Œv-forä¸èƒ½ä¸€èµ·ä½¿ç”¨ï¼Ÿ</h2><p><code>v-if</code> å’Œ <code>v-for</code> ä¸èƒ½ç›´æ¥ä¸€èµ·ä½¿ç”¨çš„åŸå› ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒä»¬åœ¨ <strong>è§£æä¼˜å…ˆçº§</strong> å’Œ <strong>é€»è¾‘å¤„ç†</strong> ä¸Šå­˜åœ¨å†²çªã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ç”±äº<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>çš„è§£æä¼˜å…ˆçº§é«˜äº<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code>ï¼ŒåŒæ—¶ä½¿ç”¨ v-if å’Œ v-forï¼ŒVue é¦–å…ˆä¼šå¾ªç¯åˆ›å»ºæ‰€æœ‰domå…ƒç´ ï¼Œç„¶åæ ¹æ®æ¡ä»¶æ¥åˆ¤æ–­æ˜¯å¦æ¸²æŸ“æ¯ä¸ªå…ƒç´ ï¼Œè¿™ç§æ–¹å¼å¯èƒ½å¯¼è‡´ Vue è¿›è¡Œå¤§é‡çš„ DOM æ“ä½œï¼Œæ€§èƒ½è¾ƒå·®ã€‚å…¶æ¬¡ï¼Œ<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>ä¼šä¸ºæ¯ä¸ªå¾ªç¯é¡¹åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œè€Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>çš„æ¡ä»¶å¦‚æœä¾èµ–äºè¿™ä¸ªä½œç”¨åŸŸå†…çš„æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´åˆ¤æ–­é€»è¾‘å¼‚å¸¸ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ä¸ºé¿å…ä¸Šè¿°é—®é¢˜ï¼Œvueå®˜æ–¹æ¨èæˆ‘ä»¬å°†<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>æ”¾åˆ°<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>å¤–å±‚ï¼Œæˆ–è€…å°†<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>æ”¾ç½®åˆ°<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>å†…éƒ¨çš„å•ä¸ªèŠ‚ç‚¹ä¸Šã€‚</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"show"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-for</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"item in list"</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> :key="item.id"&gt;&#123;&#123;</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> item.name</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> &#125;&#125;&lt;/div&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;">&lt;/div&gt;</span></span></code></pre></div></details>

<h2 id="computed-å’Œ-watch-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#computed-å’Œ-watch-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="computed å’Œ watch æœ‰ä»€ä¹ˆåŒºåˆ«"></a>computed å’Œ watch æœ‰ä»€ä¹ˆåŒºåˆ«</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">computed</strong>ç”¨äºè®¡ç®—åŸºäºå“åº”å¼æ•°æ®çš„å€¼ï¼Œå¹¶ç¼“å­˜ç»“æœ:</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;åŸå§‹å€¼ï¼š&#123;&#123; count &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;è®¡ç®—åçš„æ•°å€¼ï¼š&#123;&#123; doubledCount &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref, computed &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// è®¡ç®—å±æ€§</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> doubledCount</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> computed</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> count.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">*</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">watch</strong>ç”¨äºç›‘å¬æ•°æ®å˜åŒ–å¹¶æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;åŸå§‹æ•°å€¼ï¼š&#123;&#123; count &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"count++"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;å¢åŠ æ•°å€¼&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref, watch &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ç›‘å¬å™¨</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(count, (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newVal</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">oldVal</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`æ•°å€¼ä» $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">oldVal</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125; å˜ä¸º $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">newVal</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125;`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><table tabindex="0" style="box-sizing: border-box; border-collapse: collapse; display: block; margin: 20px 0px; overflow-x: auto;"><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">ç‰¹æ€§</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">computed</code></th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code></th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">ç”¨é€”</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">ç”¨äºè®¡ç®—åŸºäºå“åº”å¼æ•°æ®çš„å€¼ï¼Œå¹¶ç¼“å­˜ç»“æœ</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">ç”¨äºç›‘å¬æ•°æ®å˜åŒ–å¹¶æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">è¿”å›å€¼</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">è¿”å›è®¡ç®—ç»“æœ</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">ä¸è¿”å›å€¼ï¼Œæ‰§è¡Œå‰¯ä½œç”¨</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">ç¼“å­˜æœºåˆ¶</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">åªæœ‰åœ¨è®¿é—®æ—¶æ‰ä¼šè®¡ç®—ï¼Œä¼šç¼“å­˜è®¡ç®—ç»“æœï¼Œä»…å½“ä¾èµ–å˜åŒ–æ—¶é‡æ–°è®¡ç®—</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ•°æ®å˜åŒ–æ—¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œä¸ç¼“å­˜ï¼Œæ¯æ¬¡æ•°æ®å˜åŒ–éƒ½ä¼šè§¦å‘å›è°ƒ</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">é€‚ç”¨åœºæ™¯</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">è®¡ç®—æ´¾ç”Ÿæ•°æ®ï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ‰§è¡Œå¼‚æ­¥æ“ä½œã€å¤„ç†å‰¯ä½œç”¨æ“ä½œï¼Œå¦‚ API è¯·æ±‚</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">æ€§èƒ½</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ€§èƒ½è¾ƒå¥½ï¼Œé¿å…é‡å¤è®¡ç®—</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ¯æ¬¡æ•°æ®å˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°</td></tr></tbody></table></details>

<h2 id="ğŸ”¥watch-å’Œ-watchEffect-çš„åŒºåˆ«"><a href="#ğŸ”¥watch-å’Œ-watchEffect-çš„åŒºåˆ«" class="headerlink" title="ğŸ”¥watch å’Œ watchEffect çš„åŒºåˆ«"></a>ğŸ”¥watch å’Œ watchEffect çš„åŒºåˆ«</h2><p><code>watch</code> å’Œ <code>watchEffect</code> éƒ½æ˜¯ Vue 3 ä¸­ç”¨äºå“åº”å¼æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå‰¯ä½œç”¨çš„ APIï¼Œå®ƒä»¬çš„ä½¿ç”¨åœºæ™¯å’Œå·¥ä½œæœºåˆ¶å­˜åœ¨åŒºåˆ«ï¼š</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">ä¾èµ–è¿½è¸ªæ–¹å¼</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code><span>&nbsp;</span>ï¼šéœ€è¦æ˜¾å¼å£°æ˜ä¾èµ–ï¼Œç›‘å¬æŒ‡å®šçš„æ•°æ®æºï¼›å¯ä»¥ç›‘å¬å¤šä¸ªæ•°æ®æºæˆ–è¿›è¡Œæ·±åº¦ç›‘å¬ã€‚</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; watch, reactive &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> state</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state.count, </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// æ˜¾å¼å£°æ˜ç›‘å¬çš„ä¾èµ–</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">oldCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`æ–°å€¼ $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">newCount</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125; è€å€¼ $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">oldCount</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125;`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watchEffect</code><span>&nbsp;</span>ï¼šä¼šè‡ªåŠ¨è¿½è¸ª<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">ä½œç”¨åŸŸå†…æ‰€æœ‰çš„å“åº”å¼ä¾èµ–</strong>ï¼Œä¸éœ€è¦æ˜¾å¼å£°æ˜ä¾èµ–ã€‚</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; watchEffect, reactive &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> state</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watchEffect</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`Count å˜åŒ–äº†: $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">state</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">.</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">count</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125;`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// è‡ªåŠ¨è¿½è¸ª `state.count`</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">æ‰§è¡Œæ—¶æœº</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code><span>&nbsp;</span>ï¼šåœ¨ç›‘å¬çš„å“åº”å¼æ•°æ®å˜åŒ–åç«‹å³æ‰§è¡Œã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watchEffect</code><span>&nbsp;</span>ï¼šåœ¨<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">ç»„ä»¶æŒ‚è½½æ—¶</strong><span>&nbsp;</span>æ‰§è¡Œä¸€æ¬¡å‰¯ä½œç”¨ï¼Œå¹¶åœ¨<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶</strong><span>&nbsp;</span>å†æ¬¡æ‰§è¡Œã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">é€‚ç”¨åœºæ™¯</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watch</code><span>&nbsp;</span>ï¼šé€‚ç”¨äº<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">ç›‘å¬ç‰¹å®šæ•°æ®</strong><span>&nbsp;</span>å˜åŒ–å¹¶æ‰§è¡Œå‰¯ä½œç”¨çš„åœºæ™¯ï¼Œå¦‚ API è¯·æ±‚ã€ä¿å­˜æ“ä½œç­‰ã€‚é€‚åˆéœ€è¦<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">è®¿é—®æ–°å€¼å’Œæ—§å€¼</strong><span>&nbsp;</span>è¿›è¡Œæ¯”è¾ƒçš„åœºæ™¯ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">watchEffect</code><span>&nbsp;</span>ï¼šä¸éœ€è¦è®¿é—®æ—§å€¼ï¼Œé€‚ç”¨äº<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">è‡ªåŠ¨è¿½è¸ªå¤šä¸ªå“åº”å¼ä¾èµ–</strong><span>&nbsp;</span>çš„å‰¯ä½œç”¨ï¼Œå¦‚æ¸²æŸ“ã€è‡ªåŠ¨ä¿å­˜ç­‰ã€‚</p></details>

<blockquote>
<p>Vueå®˜æ–¹APIï¼š <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/reactivity-core.html#watcheffect">watchEffect</a></p>
</blockquote>
<h2 id="ğŸ”¥Vue3-ref-å’Œ-reactive-å¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#ğŸ”¥Vue3-ref-å’Œ-reactive-å¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="ğŸ”¥Vue3 ref å’Œ reactive å¦‚ä½•é€‰æ‹©ï¼Ÿ"></a>ğŸ”¥Vue3 ref å’Œ reactive å¦‚ä½•é€‰æ‹©ï¼Ÿ</h2><p><code>ref</code> å’Œ <code>reactive</code> éƒ½æ˜¯ Vue 3 ä¸­ç”¨æ¥åˆ›å»ºå“åº”å¼æ•°æ®çš„ APIï¼Œä»–ä»¬çš„åŒºåˆ«åŠä½¿ç”¨åœºæ™¯å¦‚ä¸‹ã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">reactiveçš„å®ç°ï¼š</strong><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>é€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Proxy</code><span>&nbsp;</span>å¯¹å¯¹è±¡æˆ–æ•°ç»„çš„æ¯ä¸ªå±æ€§è¿›è¡Œæ·±åº¦ä»£ç†ï¼Œå®ç°å“åº”å¼ã€‚è¿™ç§è®¾è®¡ä½¿å¾—<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>èƒ½è‡ªåŠ¨è¿½è¸ªæ‰€æœ‰åµŒå¥—å±æ€§çš„å˜åŒ–ï¼Œä½†ç”±äº<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Proxy</code><span>&nbsp;</span>æ— æ³•ç›´æ¥å¤„ç†åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">number</code><span>&nbsp;</span>ã€<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">string</code><span>&nbsp;</span>ã€<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">boolean</code><span>&nbsp;</span>ï¼‰ï¼Œå› æ­¤ï¼Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>ä¸é€‚ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">refçš„å®ç°ï¼š</strong><span>&nbsp;</span>ä¸ºäº†å®ç°åŸºæœ¬æ•°æ®ç±»å‹çš„å“åº”å¼ï¼ŒVue è®¾è®¡äº†<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>ã€‚<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>ä¼šå°†åŸºæœ¬æ•°æ®ç±»å‹å°è£…ä¸ºä¸€ä¸ªåŒ…å«<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">value</code><span>&nbsp;</span>å±æ€§çš„å¯¹è±¡ï¼Œé€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">getter</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setter</code><span>&nbsp;</span>å®ç°å“åº”å¼ä¾èµ–è¿½è¸ªå’Œæ›´æ–°ã€‚å½“è®¿é—®æˆ–ä¿®æ”¹<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref.value</code><span>&nbsp;</span>æ—¶ï¼ŒVue å†…éƒ¨ä¼šè§¦å‘ä¾èµ–æ›´æ–°ã€‚æ­¤å¤–ï¼Œå¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼ˆå¦‚å¯¹è±¡æˆ–æ•°ç»„ï¼‰ï¼Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>çš„å†…éƒ¨å®ç°ä¼šç›´æ¥è°ƒç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>ï¼Œå°†å¤æ‚æ•°æ®ç±»å‹å˜ä¸ºå“åº”å¼ã€‚</p></li></ul><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">å¦‚ä½•é€‰æ‹©</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">Vueå®˜æ–¹å»ºè®®</strong>ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref()</code><span>&nbsp;</span>ä½œä¸ºå£°æ˜å“åº”å¼çŠ¶æ€çš„ä¸»è¦ï¼Œå› ä¸º<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">reactive</code><span>&nbsp;</span>å­˜åœ¨ä»¥ä¸‹å±€é™æ€§ï¼š</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡æœ‰é™çš„å€¼ç±»å‹ï¼šå®ƒåªèƒ½ç”¨äºå¯¹è±¡ç±»å‹ (å¯¹è±¡ã€æ•°ç»„å’Œå¦‚ Mapã€Set è¿™æ ·çš„é›†åˆç±»å‹)ã€‚å®ƒä¸èƒ½æŒæœ‰å¦‚ stringã€number æˆ– boolean è¿™æ ·çš„åŸå§‹ç±»å‹ã€‚ ğŸ’¡ä¸èƒ½æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼šç”±äº Vue çš„å“åº”å¼è·Ÿè¸ªæ˜¯é€šè¿‡å±æ€§è®¿é—®å®ç°çš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å§‹ç»ˆä¿æŒå¯¹å“åº”å¼å¯¹è±¡çš„ç›¸åŒå¼•ç”¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½è½»æ˜“åœ°â€œæ›¿æ¢â€å“åº”å¼å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·çš„è¯ä¸ç¬¬ä¸€ä¸ªå¼•ç”¨çš„å“åº”æ€§è¿æ¥å°†ä¸¢å¤±ï¼š</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgba(60, 60, 67, 0.78); background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">let</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ä¸Šé¢çš„ (&#123; count: 0 &#125;) å¼•ç”¨å°†ä¸å†è¢«è¿½è¸ª</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// (å“åº”æ€§è¿æ¥å·²ä¸¢å¤±ï¼)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">state </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡å¯¹è§£æ„æ“ä½œä¸å‹å¥½ï¼šå½“æˆ‘ä»¬å°†å“åº”å¼å¯¹è±¡çš„åŸå§‹ç±»å‹å±æ€§è§£æ„ä¸ºæœ¬åœ°å˜é‡æ—¶ï¼Œæˆ–è€…å°†è¯¥å±æ€§ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°†ä¸¢å¤±å“åº”æ€§è¿æ¥</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgba(60, 60, 67, 0.78); background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> state</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reactive</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å½“è§£æ„æ—¶ï¼Œcount å·²ç»ä¸ state.count æ–­å¼€è¿æ¥</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">let</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; count &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ä¸ä¼šå½±å“åŸå§‹çš„ state</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// è¯¥å‡½æ•°æ¥æ”¶åˆ°çš„æ˜¯ä¸€ä¸ªæ™®é€šçš„æ•°å­—</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å¹¶ä¸”æ— æ³•è¿½è¸ª state.count çš„å˜åŒ–</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// æˆ‘ä»¬å¿…é¡»ä¼ å…¥æ•´ä¸ªå¯¹è±¡ä»¥ä¿æŒå“åº”æ€§</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">callSomeFunction</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(state.count)</span></span></code></pre></div></div></details>

<h2 id="ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŠ¨æ€ç»„ä»¶ï¼Ÿå¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åŠ¨æ€ç»„ä»¶æ˜¯ Vue æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå…è®¸æˆ‘ä»¬æ ¹æ®æ¡ä»¶åŠ¨æ€åˆ‡æ¢æ¸²æŸ“çš„ç»„ä»¶ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹æ¨¡æ¿ã€‚ åœ¨Vueä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;component&gt;</code><span>&nbsp;</span>æ ‡ç­¾çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">:is</code><span>&nbsp;</span>å±æ€§æŒ‡å®šéœ€è¦æ¸²æŸ“çš„ç»„ä»¶ï¼š</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- åŠ¨æ€æ¸²æŸ“ç»„ä»¶ --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">component</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :is</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"currentComponent"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">component</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- æ§åˆ¶ç»„ä»¶åˆ‡æ¢ --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"currentComponent = 'ComponentA'"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æ˜¾ç¤ºç»„ä»¶A&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"currentComponent = 'ComponentB'"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æ˜¾ç¤ºç»„ä»¶B&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> ComponentA </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './ComponentA.vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> ComponentB </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './ComponentB.vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å½“å‰æ˜¾ç¤ºçš„ç»„ä»¶</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> currentComponent</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'ComponentA'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;component&gt;</code><span>&nbsp;</span>æ ‡ç­¾çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">:is</code><span>&nbsp;</span>å±æ€§å€¼å¯ä»¥æ˜¯ï¼š</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">è¢«æ³¨å†Œçš„ç»„ä»¶å</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å¯¼å…¥çš„ç»„ä»¶å¯¹è±¡</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">ä¸€èˆ¬çš„ HTML å…ƒç´ </li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å½“ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;component :is="..."&gt;</code><span>&nbsp;</span>æ¥åœ¨å¤šä¸ªç»„ä»¶é—´ä½œåˆ‡æ¢æ—¶ï¼Œè¢«åˆ‡æ¢æ‰çš„ç»„ä»¶ä¼šè¢«å¸è½½ã€‚å¦‚æœéœ€è¦ä¿ç•™åŠ¨æ€ç»„ä»¶çŠ¶æ€ï¼Œä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;KeepAlive&gt;</code><span>&nbsp;</span>ç»„ä»¶å³å¯ã€‚</p></details>

<h2 id="ä»€ä¹ˆæ˜¯-slot-ï¼Œæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-slot-ï¼Œæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ slot ï¼Œæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ slot ï¼Œæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ</h2><p>slot æ˜¯ Vue ä¸­çš„ä¸€ç§ç”¨äº ç»„ä»¶å†…å®¹åˆ†å‘ çš„æœºåˆ¶ã€‚å®ƒå…è®¸çˆ¶ç»„ä»¶å‘å­ç»„ä»¶æ’å…¥å†…å®¹ï¼Œä»è€Œä½¿ç»„ä»¶æ›´åŠ çµæ´»å’Œå¯å¤ç”¨ã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨Vueä¸­ï¼Œæ’æ§½çš„ä½¿ç”¨æ–¹å¼å¯ä»¥åˆ†ä¸ºå››ç§ï¼š<strong style="box-sizing: border-box; font-weight: 600;">é»˜è®¤æ’æ§½</strong>ã€<strong style="box-sizing: border-box; font-weight: 600;">å…·åæ’æ§½</strong>ã€<strong style="box-sizing: border-box; font-weight: 600;">æ¡ä»¶æ’æ§½</strong>å’Œ<strong style="box-sizing: border-box; font-weight: 600;">ä½œç”¨åŸŸæ’æ§½</strong>ã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">é»˜è®¤æ’æ§½</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">é»˜è®¤æ’æ§½æ˜¯æœ€ç®€å•çš„æ’æ§½å½¢å¼ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†ç»„ä»¶çš„å†…å®¹ä¼ é€’åˆ°ç»„ä»¶å†…éƒ¨çš„ä¸€ä¸ªå ä½ç¬¦ä¸­ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å­ç»„ä»¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ˜¯å­ç»„ä»¶çš„æ ‡é¢˜&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">çˆ¶ç»„ä»¶</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;è¿™æ˜¯æ’æ§½å†…å®¹ï¼Œç”±çˆ¶ç»„ä»¶ä¼ å…¥&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">è¾“å‡ºç»“æœï¼š</p><div class="language-html vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ˜¯å­ç»„ä»¶çš„æ ‡é¢˜&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;è¿™æ˜¯æ’æ§½å†…å®¹ï¼Œç”±çˆ¶ç»„ä»¶ä¼ å…¥&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">å…·åæ’æ§½</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å½“å­ç»„ä»¶éœ€è¦å¤šä¸ªæ’æ§½æ—¶ï¼Œå¯ä»¥ä¸ºæ’æ§½å‘½åï¼Œå¹¶ç”±çˆ¶ç»„ä»¶æŒ‡å®šå†…å®¹æ”¾ç½®åˆ°å“ªä¸ªæ’æ§½ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å­ç»„ä»¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"header"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;é»˜è®¤æ ‡é¢˜&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;é»˜è®¤å†…å®¹&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"footer"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;é»˜è®¤é¡µè„š&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">çˆ¶ç»„ä»¶</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">:</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">header</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ¥ç»„æˆå¤´éƒ¨&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- éšå¼çš„é»˜è®¤æ’æ§½ --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ¥ç»„æˆèº«ä½“&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">:</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">footer</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ¥ç»„æˆå°¾éƒ¨&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">è¾“å‡ºç»“æœï¼š</p><div class="language-html vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ¥ç»„æˆå¤´éƒ¨&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ¥ç»„æˆèº«ä½“&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;æˆ‘æ¥ç»„æˆå°¾éƒ¨&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-slot</code><span>&nbsp;</span>æœ‰å¯¹åº”çš„ç®€å†™<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">#</code><span>&nbsp;</span>ï¼Œå› æ­¤<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;template v-slot:header&gt;</code><span>&nbsp;</span>å¯ä»¥ç®€å†™ä¸º<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">&lt;template #header&gt;</code><span>&nbsp;</span>ã€‚å…¶æ„æ€å°±æ˜¯â€œå°†è¿™éƒ¨åˆ†æ¨¡æ¿ç‰‡æ®µä¼ å…¥å­ç»„ä»¶çš„ header æ’æ§½ä¸­â€ã€‚</p></blockquote><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">æ¡ä»¶æ’æ§½</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">æˆ‘ä»¬å¯ä»¥æ ¹æ®æ’æ§½æ˜¯å¦å­˜åœ¨æ¥æ¸²æŸ“æŸäº›å†…å®¹:</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å­ç»„ä»¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$slots.header"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card-header"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"header"</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> /</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$slots.default"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card-content"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> /</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$slots.footer"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> class</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"card-footer"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> name</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"footer"</span><span style="box-sizing: border-box; color: rgb(179, 29, 40); --shiki-light: #B31D28; --shiki-light-font-style: italic; --shiki-dark: #FDAEB7; --shiki-dark-font-style: italic;"> /</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">ä½œç”¨åŸŸæ’æ§½</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ä½œç”¨åŸŸæ’æ§½å¯ä»¥è®©å­ç»„ä»¶åœ¨æ¸²æŸ“æ—¶å°†ä¸€éƒ¨åˆ†æ•°æ®æä¾›ç»™æ’æ§½ï¼Œä»è€Œå®ç°çˆ¶ç»„ä»¶çš„æ’æ§½è®¿é—®åˆ°å­ç»„ä»¶çš„çŠ¶æ€ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å­ç»„ä»¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">MyComponent.vue</code></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- å®šä¹‰ä½œç”¨åŸŸæ’æ§½ï¼Œå¹¶å°† items æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :items</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"items"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">slot</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å®šä¹‰æ•°æ® items</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> items</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'åä¸º'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'å°ç±³'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'è‹¹æœ'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">])</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: -8px 0px 8px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    &lt;!-- ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½ï¼Œæ¥æ”¶å­ç»„ä»¶ä¼ é€’çš„ items æ•°æ® --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> #</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#123; items &#125;</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-for</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"(item, index) in items"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :key</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"index"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">        &#123;&#123; item &#125;&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">MyComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> MyComponent </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './MyComponent.vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">è¾“å‡ºç»“æœï¼š</p><div class="language-html vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;åä¸º&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;å°ç±³&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;è‹¹æœ&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">li</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ul</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">Vueå®˜æ–¹APIï¼š<span>&nbsp;</span><a href="https://cn.vuejs.org/guide/components/slots.html#scoped-slots" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">æ’æ§½ Slots</a></p></blockquote><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">åº”ç”¨åœºæ™¯</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡çµæ´»çš„ç»„ä»¶å†…å®¹æ’å…¥ï¼š æ’æ§½å…è®¸æˆ‘æˆ‘ä»¬å°†å†…å®¹æ’å…¥ç»„ä»¶ä¸­ï¼Œè€Œæ— éœ€ä¿®æ”¹å­ç»„ä»¶å†…éƒ¨é€»è¾‘ï¼Œæå¤§æé«˜äº†ç»„ä»¶çš„çµæ´»æ€§ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡æ„å»ºé€šç”¨ç»„ä»¶ï¼š æ¯”å¦‚å¼€å‘å¡ç‰‡ã€æ¨¡æ€æ¡†ã€åˆ—è¡¨ç­‰ç»„ä»¶ï¼Œä½¿ç”¨æ’æ§½å¯ä»¥è½»æ¾å®ç°å†…å®¹çš„è‡ªå®šä¹‰ã€‚æ¨¡æ€æ¡†ç»„ä»¶å¯é€šè¿‡æ’æ§½è‡ªå®šä¹‰æ ‡é¢˜ã€æ­£æ–‡å’ŒæŒ‰é’®ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡å‡å°‘é‡å¤ä»£ç ï¼š é€šè¿‡æ’æ§½ï¼Œå°†å…¬å…±é€»è¾‘å°è£…åˆ°å­ç»„ä»¶ä¸­ï¼Œè€Œåœ¨çˆ¶ç»„ä»¶ä¸­åªéœ€æ’å…¥å˜åŒ–çš„å†…å®¹ã€‚</p></div></details>

<h2 id="ğŸš€Vue-é¡¹ç›®å¯åšå“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ"><a href="#ğŸš€Vue-é¡¹ç›®å¯åšå“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="ğŸš€Vue é¡¹ç›®å¯åšå“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ"></a>ğŸš€Vue é¡¹ç›®å¯åšå“ªäº›æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h2><p>ğŸ”åœ¨ Vue é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Vue ç‰¹æœ‰çš„åŠŸèƒ½å’Œæœºåˆ¶å®ç°æ€§èƒ½ä¼˜åŒ–ã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">1ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">æ¨¡æ¿å’ŒæŒ‡ä»¤ä¼˜åŒ–</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">åˆç†çš„ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-if</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-show</code><span>&nbsp;</span>æŒ‡ä»¤ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code><span>&nbsp;</span>æ—¶ï¼Œå°½é‡æä¾›å”¯ä¸€çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">key</code><span>&nbsp;</span>ï¼Œé¿å…é‡å¤æ¸²æŸ“ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-once</code><span>&nbsp;</span>æŒ‡ä»¤ï¼Œåªæ¸²æŸ“ä¸€æ¬¡ï¼Œé¿å…ä¸å¿…è¦çš„è®¡ç®—ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-memo</code><span>&nbsp;</span>æŒ‡ä»¤ï¼Œå¯¹ä½¿ç”¨<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-for</code>ç”Ÿæˆçš„åˆ—è¡¨è¿›è¡Œæ¸²æŸ“ä¼˜åŒ–ã€‚<code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">(vue3.2æ–°å¢)</code></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">2ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">ç»„ä»¶ä¼˜åŒ–</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">åˆç†ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">keep-alive</code><span>&nbsp;</span>ç»„ä»¶ï¼Œç¼“å­˜ç»„ä»¶å®ä¾‹ï¼Œé¿å…é‡å¤æ¸²æŸ“ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">ä½¿ç”¨å¼‚æ­¥ç»„ä»¶åŠ è½½ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</li></ul><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> AsyncComponent</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineAsyncComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'./MyComponent.vue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">))</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">é…åˆ Vue Router ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½ï¼Œå®ç°è·¯ç”±é¡µé¢æŒ‰éœ€åŠ è½½ã€‚</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">åˆç†åˆ’åˆ†ç»„ä»¶ï¼Œæå‡å¤ç”¨æ€§å’Œæ¸²æŸ“æ€§èƒ½ã€‚</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">3ï¸âƒ£<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">å“åº”å¼ä¼˜åŒ–</strong></p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Object.freeze</code><span>&nbsp;</span>å†»ç»“å¯¹è±¡ï¼Œé¿å…ä¸å¿…è¦çš„å“åº”å¼ã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">ä½¿ç”¨ stop åœæ­¢ ä¸å¿…è¦çš„watchEffectå‰¯ä½œç”¨æ‰§è¡Œï¼Œä»¥å‡å°‘æ€§èƒ½æ¶ˆè€—ã€‚</p></li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px;">watchçš„ä¼˜åŒ–</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡ é¿å…æ»¥ç”¨æ·±åº¦ç›‘å¬ï¼Œé™ä½æ€§èƒ½å¼€é”€ã€‚</p><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡ å¯¹äºé¢‘ç¹è§¦å‘çš„å“åº”å¼æ•°æ®å˜åŒ–ï¼Œå¯ä»¥é€šè¿‡é˜²æŠ–å’ŒèŠ‚æµä¼˜åŒ–ç›‘å¬é€»è¾‘ã€‚</p></li></ul><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; debounce &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'lodash'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> searchQuery,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  debounce</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newQuery</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    fetchSearchResults</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(newQuery)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">300</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡ å¯ä»¥é€šè¿‡è¿”å›å‡½æ•°åªç›‘å¬å…·ä½“çš„ä¾èµ–ï¼Œå‡å°‘ä¸å¿…è¦çš„è§¦å‘ã€‚</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.name, () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.age], ([</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newName</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newAge</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">]) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  //...</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡ å½“ç›‘å¬å™¨åœ¨æŸäº›æ¡ä»¶ä¸‹ä¸å†éœ€è¦æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿”å›çš„ stop æ–¹æ³•æ‰‹åŠ¨åœæ­¢ç›‘å¬ï¼Œä»¥èŠ‚çœèµ„æº</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> stop</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> data.value,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newValue</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (newValue </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">===</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'done'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      stop</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// åœæ­¢ç›‘å¬</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ’¡ å½“å¤šä¸ªç›‘å¬å™¨çš„å›è°ƒé€»è¾‘ç±»ä¼¼æ—¶ï¼Œå¯ä»¥åˆå¹¶ç›‘å¬</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">watch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.name, () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> user.age], ([</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newName</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">newAge</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">]) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  //...</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div></details>

<h2 id="ä»€ä¹ˆæ˜¯-nextTick-å¦‚ä½•åº”ç”¨å®ƒ"><a href="#ä»€ä¹ˆæ˜¯-nextTick-å¦‚ä½•åº”ç”¨å®ƒ" class="headerlink" title="ä»€ä¹ˆæ˜¯ nextTick å¦‚ä½•åº”ç”¨å®ƒ"></a>ä»€ä¹ˆæ˜¯ nextTick å¦‚ä½•åº”ç”¨å®ƒ</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨ Vue.js ä¸­ï¼Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">nextTick</code><span>&nbsp;</span>æ˜¯ä¸€ä¸ªæ ¸å¿ƒå·¥å…·æ–¹æ³•ï¼Œç”¨äºå¤„ç† DOM æ›´æ–°æ—¶æœºé—®é¢˜ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼š<strong style="box-sizing: border-box; font-weight: 600;">åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸåæ‰§è¡Œå›è°ƒï¼Œç¡®ä¿æˆ‘ä»¬èƒ½æ“ä½œåˆ°æœ€æ–°çš„ DOM çŠ¶æ€ã€‚</strong><span>&nbsp;</span>å®ƒçš„ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">æ•°æ®å˜åŒ–åæ“ä½œ DOM</li></ul><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">async</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  count.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // DOM è¿˜æœªæ›´æ–°</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(document.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getElementById</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'counter'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">).textContent) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 0</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  await</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> nextTick</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // DOM æ­¤æ—¶å·²ç»æ›´æ–°</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(document.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getElementById</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'counter'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">).textContent) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 1</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> id</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"counter"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"increment"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&#123;&#123; count &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­æ“ä½œ DOM</li></ul><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref, onMounted, nextTick &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// åˆ›å»º DOM å¼•ç”¨</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> element</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">onMounted</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // ç›´æ¥è®¿é—®å¯èƒ½æœªæ¸²æŸ“å®Œæˆ</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(element.value.offsetHeight) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// 0 æˆ–æœªå®šä¹‰</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // ä½¿ç”¨ nextTick ç¡®ä¿ DOM å·²æ¸²æŸ“</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  nextTick</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(element.value.offsetHeight) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å®é™…é«˜åº¦</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">æ³¨æ„ï¼Œåœ¨vue2ä¸­å’Œvue3çš„é€‰é¡¹å¼ APIä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨this.$nextTick(callback)çš„æ–¹å¼è°ƒç”¨ã€‚</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">$nextTick</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$refs.text.innerText) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// "æ›´æ–°åçš„æ–‡æœ¬"</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div></details>

<h2 id="ä½¿ç”¨-Vue3-Composable-ç»„åˆå¼å‡½æ•°ï¼Œå®ç°-useCount"><a href="#ä½¿ç”¨-Vue3-Composable-ç»„åˆå¼å‡½æ•°ï¼Œå®ç°-useCount" class="headerlink" title="ä½¿ç”¨ Vue3 Composable ç»„åˆå¼å‡½æ•°ï¼Œå®ç° useCount"></a>ä½¿ç”¨ Vue3 Composable ç»„åˆå¼å‡½æ•°ï¼Œå®ç° useCount</h2><p>TIP</p>
<p>åœ¨ Vue åº”ç”¨çš„æ¦‚å¿µä¸­ï¼Œâ€œ<strong>ç»„åˆå¼å‡½æ•°</strong>â€(Composables) æ˜¯ä¸€ä¸ªåˆ©ç”¨ Vue çš„ç»„åˆå¼ API æ¥å°è£…å’Œå¤ç”¨æœ‰çŠ¶æ€é€»è¾‘çš„å‡½æ•°ã€‚å®ƒå’Œè‡ªå®šä¹‰ <code>React hooks</code> éå¸¸ç›¸ä¼¼ã€‚</p>
<p>ä½¿ç”¨ç»„åˆå¼å‡½æ•°å®ç°å¦‚ä¸‹éœ€æ±‚ï¼šuseCount æ˜¯ä¸€ä¸ªè®¡æ•°é€»è¾‘ç®¡ç†çš„ç»„åˆå¼å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ª <code>count</code> å˜é‡å’Œå¢åŠ ã€å‡å°‘ã€é‡ç½®countçš„æ–¹æ³•ã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å®ç° useCount ç»„åˆå¼å‡½æ•°</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> increment</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> decrement</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">--</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> reset</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 0</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  return</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    increment,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    decrement,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    reset,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ä½¿ç”¨ useCount ç»„åˆå¼å‡½æ•°</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">count</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">decrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">reset</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;è®¡æ•°å™¨: &#123;&#123; count &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"increment"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;å¢åŠ &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"decrement"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;å‡å°‘&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"reset"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;é‡ç½®&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div></details>

<h2 id="ä½¿ç”¨-Vue3-Composable-ç»„åˆå¼å‡½æ•°ï¼Œå®ç°-useRequest"><a href="#ä½¿ç”¨-Vue3-Composable-ç»„åˆå¼å‡½æ•°ï¼Œå®ç°-useRequest" class="headerlink" title="ä½¿ç”¨ Vue3 Composable ç»„åˆå¼å‡½æ•°ï¼Œå®ç° useRequest"></a>ä½¿ç”¨ Vue3 Composable ç»„åˆå¼å‡½æ•°ï¼Œå®ç° useRequest</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123; loading, data, error &#125; = useRequest(url) // å¯åªè€ƒè™‘ get è¯·æ±‚</span><br></pre></td></tr></table></figure>

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><div class="language-ts vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; ref, computed &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> axios </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'axios'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å®ç° useRequest ç»„åˆå¼å‡½æ•°</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useRequest</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">url</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> loading</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">false</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">); </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// è¯·æ±‚çŠ¶æ€</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> data</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">); </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å“åº”æ•°æ®</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> error</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> ref</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">); </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// é”™è¯¯ä¿¡æ¯</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> fetchData</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> async</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    loading.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> true</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    error.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> null</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    try</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">      const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> response</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> await</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> axios.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">get</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(url); </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">/</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      data.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> response.data;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">catch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (err) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      error.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> err.message </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">||</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'è¯·æ±‚å¤±è´¥'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">/</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">finally</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      loading.value </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> false</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // è‡ªåŠ¨è§¦å‘è¯·æ±‚</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  fetchData</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">();</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  return</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    loading,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    data,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    error,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> useRequest;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ä½¿ç”¨</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> useRequest </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './useRequest'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> url</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'https://www.mianshipai.com/'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">loading</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">data</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">error</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useRequest</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(url)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;è¯·æ±‚æ•°æ®&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"loading"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;åŠ è½½ä¸­...&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-else-if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"error"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&#123;&#123; error &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-else</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;&#123;&#123; data &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">p</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div></details>

<h2 id="è‡ªå®šä¹‰ç»„ä»¶å¦‚ä½•å®ç°-v-model"><a href="#è‡ªå®šä¹‰ç»„ä»¶å¦‚ä½•å®ç°-v-model" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶å¦‚ä½•å®ç° v-model"></a>è‡ªå®šä¹‰ç»„ä»¶å¦‚ä½•å®ç° v-model</h2><p><code>v-model</code> å¯ä»¥åœ¨ç»„ä»¶ä¸Šä½¿ç”¨ä»¥å®ç°åŒå‘ç»‘å®šã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨vue2ä¸­ï¼Œè‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>ï¼Œéœ€è¦åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">value</code><span>&nbsp;</span>propï¼Œç„¶åé€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">this.$emit('input', newValue)</code><span>&nbsp;</span>è§¦å‘æ›´æ–°å³å¯ã€‚</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- CustomInput.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">input</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :value</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"value"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @input</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$emit('input', $event.target.value)"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  props: [</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'value'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">],</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ä½¿ç”¨æ–¹å¼ï¼š</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">CustomInput</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">searchText</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span></code></pre></div></details>

<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ä¸vue2ç±»ä¼¼ï¼Œvue3è‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>ï¼Œéœ€è¦åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">modelValue</code><span>&nbsp;</span>propï¼Œç„¶åé€šè¿‡<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">emit('update:modelValue', newValue)</code><span>&nbsp;</span>è§¦å‘æ›´æ–°</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- CustomInput.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">input</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> :value</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"modelValue"</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @input</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"$emit('update:modelValue', $event.target.value)"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">defineProps</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'modelValue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">])</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">defineEmits</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">([</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'update:modelValue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">])</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ä½¿ç”¨æ–¹å¼ï¼š</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">CustomInput</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">searchText</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span></code></pre></div><hr style="box-sizing: border-box; margin: 16px 0px; border-right: none; border-bottom: none; border-left: none; border-image: initial; border-top: 0.8px solid rgb(226, 226, 227);"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">ğŸ‘‰æ³¨æ„ï¼Œä» Vue 3.4 å¼€å§‹ï¼Œå®˜æ–¹æ¨èçš„å®ç°æ–¹å¼æ˜¯ä½¿ç”¨ defineModel() å®ï¼š</strong></p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- Child.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> model</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineModel</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">function</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> update</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  model.value</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;çˆ¶ç»„ä»¶çš„ v-model å€¼ä¸º: &#123;&#123; model &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"update"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;Increment&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">çˆ¶ç»„ä»¶ä½¿ç”¨ v-model ç»‘å®šä¸€ä¸ªå€¼ï¼š</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">&lt;!-- Parent.vue --&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">Child</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">countModel</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">defineModel</code><span>&nbsp;</span>æ˜¯ä¸€ä¸ªä¾¿åˆ©å®ï¼Œå…¶è¿”å›çš„å€¼æ˜¯ä¸€ä¸ª<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>ã€‚å®ƒå¯ä»¥åƒå…¶ä»–<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>ä¸€æ ·è¢«è®¿é—®ä»¥åŠä¿®æ”¹ï¼Œä¸è¿‡å®ƒèƒ½èµ·åˆ°åœ¨çˆ¶ç»„ä»¶å’Œå½“å‰å˜é‡ä¹‹é—´çš„åŒå‘ç»‘å®šçš„ä½œç”¨ï¼š</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">å®ƒçš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">.value</code><span>&nbsp;</span>å’Œçˆ¶ç»„ä»¶çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>çš„å€¼åŒæ­¥ï¼›</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">å½“å®ƒè¢«å­ç»„ä»¶å˜æ›´äº†ï¼Œä¼šè§¦å‘çˆ¶ç»„ä»¶ç»‘å®šçš„å€¼ä¸€èµ·æ›´æ–°ã€‚ æ ¹æ®<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">defineModel</code><span>&nbsp;</span>çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">v-model</code><span>&nbsp;</span>æŠŠè¿™ä¸ª<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ref</code><span>&nbsp;</span>ç»‘å®šåˆ°ä¸€ä¸ªåŸç”Ÿ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">input</code><span>&nbsp;</span>å…ƒç´ ä¸Šï¼š</li></ul><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> model</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineModel</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">input</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> v-model</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"model"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">æ­¤å¤–ï¼Œv-model å¯ä»¥æ¥å—è‡ªå®šä¹‰å‚æ•°ã€æ·»åŠ ä¿®é¥°ç¬¦ï¼Œç»„ä»¶ä¹Ÿå¯ä»¥ç»‘å®šå¤šä¸ª v-model ï¼Œå…·ä½“ç”¨æ³•è¯·å‚è€ƒ å®˜ç½‘æ–‡æ¡£ï¼š<a href="https://cn.vuejs.org/guide/components/v-model" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">ç»„ä»¶ v-model</a></p></blockquote></details>

<h2 id="å¦‚ä½•ç»Ÿä¸€ç›‘å¬-Vue-ç»„ä»¶æŠ¥é”™"><a href="#å¦‚ä½•ç»Ÿä¸€ç›‘å¬-Vue-ç»„ä»¶æŠ¥é”™" class="headerlink" title="å¦‚ä½•ç»Ÿä¸€ç›‘å¬ Vue ç»„ä»¶æŠ¥é”™"></a>å¦‚ä½•ç»Ÿä¸€ç›‘å¬ Vue ç»„ä»¶æŠ¥é”™</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨ Vue 3 ä¸­ï¼Œå¯ä»¥é€šè¿‡ å…¨å±€é”™è¯¯å¤„ç†å™¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">ï¼ˆerrorHandlerï¼‰</code><span>&nbsp;</span>å’Œ ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆä¾‹å¦‚<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">onErrorCaptured</code><span>&nbsp;</span>ï¼‰æ¥ç»Ÿä¸€ç›‘å¬å’Œå¤„ç†ç»„ä»¶ä¸­çš„é”™è¯¯ã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">é€šè¿‡å…¨å±€é”™è¯¯å¤„ç†å™¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">app.config.errorHandler</code></strong></li></ul><div class="language-TypeScript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; createApp &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> app</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createApp</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(App);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// è®¾ç½®å…¨å±€é”™è¯¯å¤„ç†å™¨</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">app.config.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">errorHandler</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">err</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">instance</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">info</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">error</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'æ•è·åˆ°ç»„ä»¶é”™è¯¯: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, err);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, instance);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'é”™è¯¯ä¿¡æ¯: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, info);</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">app.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">mount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'#app'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">);</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">å±€éƒ¨é”™è¯¯æ•è·ï¼ˆonErrorCapturedï¼‰</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">onErrorCaptured</code><span>&nbsp;</span>é’©å­å¯ä»¥æ•è·åä»£ç»„ä»¶ä¼ é€’è¿‡ç¨‹ä¸­çš„é”™è¯¯ä¿¡æ¯</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; onErrorCaptured &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vue'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">onErrorCaptured</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">err</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">instance</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">info</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">error</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'å±€éƒ¨æ•è·åˆ°é”™è¯¯: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, err)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'é”™è¯¯æ¥æºç»„ä»¶: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, instance)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'é”™è¯¯ä¿¡æ¯: '</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, info)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // è¿™ä¸ªé’©å­å¯ä»¥é€šè¿‡è¿”å› false æ¥é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šä¼ é€’ã€‚</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  return</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> false</span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;"> // å¦‚æœéœ€è¦è®©é”™è¯¯å†’æ³¡åˆ°å…¨å±€ï¼Œçœç•¥æˆ–è¿”å› true</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;å±€éƒ¨é”™è¯¯æ•è·ç¤ºä¾‹&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">ErrorProneComponent</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> /&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">div</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><blockquote style="box-sizing: border-box; margin: 16px 0px; border-left: 1.6px solid rgb(226, 226, 227); padding-left: 16px; transition: border-color 0.5s; color: rgba(60, 60, 67, 0.78);"><p style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; line-height: 24px; font-size: 14px; transition: color 0.5s; color: inherit;">Vueå®˜æ–¹APIï¼š<span>&nbsp;</span><a href="https://cn.vuejs.org/api/composition-api-lifecycle.html#onerrorcaptured" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">onErrorCaptured</a>ã€<a href="https://cn.vuejs.org/api/application.html#app-config-errorhandler" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">errorHandler</a></p></blockquote></details>

<h2 id="Vuex-ä¸­-mutation-å’Œ-action-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Vuex-ä¸­-mutation-å’Œ-action-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Vuex ä¸­ mutation å’Œ action æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Vuex ä¸­ mutation å’Œ action æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>åœ¨ Vuex ä¸­ï¼Œ <code>mutation</code> å’Œ <code>action</code> æ˜¯ç”¨äºç®¡ç†çŠ¶æ€çš„ä¸¤ç§æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mutation</code><span>&nbsp;</span>å¯ä»¥ç›´æ¥ä¿®æ”¹<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">store</code><span>&nbsp;</span>ä¸­çš„<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">state</strong>å€¼ï¼Œå®ƒåªæ”¯æŒåŒæ­¥æ“ä½œã€‚<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Action</code><span>&nbsp;</span>ä¸èƒ½ç›´æ¥ä¿®æ”¹<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">state</strong>ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">mutation</code><span>&nbsp;</span>æ¥é—´æ¥ä¿®æ”¹ï¼Œå®ƒç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œã€‚</p><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> store</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  state: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å®šä¹‰çŠ¶æ€</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  mutations: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // Mutation ç¤ºä¾‹ï¼ˆåŒæ­¥ï¼‰</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">payload</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">+=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> payload</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ç»„ä»¶ä¸­è°ƒç”¨</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">5</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><div class="language-js vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: -8px 0px 8px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> store</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  state: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å®šä¹‰çŠ¶æ€</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  mutations: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // Mutationï¼šåŒæ­¥ä¿®æ”¹çŠ¶æ€</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">payload</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">+=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> payload</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  actions: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // Actionï¼šå¼‚æ­¥æ“ä½œï¼Œå»¶è¿Ÿ1ç§’åè°ƒç”¨ mutation</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123; </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#125;, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">payload</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      setTimeout</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">        commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, payload) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// æäº¤ mutation ä¿®æ”¹çŠ¶æ€</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &#125;, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1000</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ç»„ä»¶ä¸­è°ƒç”¨</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">dispatch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'asyncIncrement'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">5</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><strong style="box-sizing: border-box; font-weight: 600;">æ€»ç»“ï¼š</strong></p><table tabindex="0" style="box-sizing: border-box; border-collapse: collapse; display: block; margin: 20px 0px; overflow-x: auto;"><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">ç‰¹æ€§</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">Mutation</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">Action</th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ˜¯å¦åŒæ­¥</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">âœ… åŒæ­¥</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">â³ å¼‚æ­¥ï¼ˆä¹Ÿå¯ä»¥å¤„ç†åŒæ­¥ï¼‰</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ˜¯å¦ç›´æ¥ä¿®æ”¹ state</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">âœ… ç›´æ¥ä¿®æ”¹</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">âŒ é€šè¿‡è°ƒç”¨ mutation ä¿®æ”¹</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">è°ƒç”¨æ–¹å¼</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">commit('mutationName')</code></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">dispatch('actionName')</code></td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">é€‚ç”¨åœºæ™¯</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">ç®€å•çš„çŠ¶æ€ä¿®æ”¹</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">å¼‚æ­¥æ“ä½œï¼ˆå¦‚ API è°ƒç”¨ï¼‰</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">è°ƒè¯•æ”¯æŒ</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">å®Œå…¨æ”¯æŒï¼Œæ˜“äºè¿½è¸ª</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">ä¾èµ–äº mutation çš„æ—¥å¿—</td></tr></tbody></table><div class="tip custom-block" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(100, 108, 255, 0.14); margin: 16px 0px;"><p class="custom-block-title" style="box-sizing: border-box; margin: 0px; overflow-wrap: break-word; font-weight: 600; line-height: 24px;">âš ï¸ ä¸ºä»€ä¹ˆè¦æœ‰è¿™æ ·çš„åŒºåˆ†ï¼Ÿ</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">æ•°æ®å¯é¢„æµ‹æ€§ï¼šé€šè¿‡å¼ºåˆ¶<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Mutation</code><span>&nbsp;</span>åŒæ­¥ä¿®æ”¹<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">State</strong>ï¼Œä½¿å¾—çŠ¶æ€å˜æ›´å¯è¿½è¸ª</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">è°ƒè¯•å‹å¥½æ€§ï¼šDevTools å¯ä»¥å‡†ç¡®æ•æ‰æ¯æ¬¡çŠ¶æ€å¿«ç…§</li><li style="box-sizing: border-box; overflow-wrap: break-word; margin-top: 8px;">ä»£ç ç»„ç»‡ï¼šå°†åŒæ­¥é€»è¾‘ä¸å¼‚æ­¥é€»è¾‘åˆ†ç¦»ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</li></ul></div></details>

<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/7249033891809329212">VueXç”¨æ³•å¿«é€Ÿå›é¡¾</a></p>
<h2 id="Vuex-å’Œ-Pinia-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Vuex-å’Œ-Pinia-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Vuex å’Œ Pinia æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Vuex å’Œ Pinia æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Pinia</code><span>&nbsp;</span>å’Œ<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Vuex</code><span>&nbsp;</span>éƒ½æ˜¯ Vue çš„ä¸“å±çŠ¶æ€ç®¡ç†åº“ï¼Œå…è®¸ç”¨æˆ·è·¨ç»„ä»¶æˆ–é¡µé¢å…±äº«çŠ¶æ€ã€‚</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">åŒºåˆ«</strong></li></ul><table tabindex="0" style="box-sizing: border-box; border-collapse: collapse; display: block; margin: 20px 0px; overflow-x: auto;"><thead style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);">ç‰¹æ€§</th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><strong style="box-sizing: border-box; font-weight: 600;">Vuex</strong></th><th style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; text-align: left; font-size: 14px; font-weight: 600; color: inherit; background-color: rgb(246, 246, 247);"><strong style="box-sizing: border-box; font-weight: 600;">Pinia</strong></th></tr></thead><tbody style="box-sizing: border-box;"><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">ç‰ˆæœ¬æ”¯æŒ</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">Vue 2 å’Œ Vue 3</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">ä»…æ”¯æŒ Vue 3ï¼ˆåŸºäº<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">Composition API</code><span>&nbsp;</span>ï¼‰</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">API é£æ ¼</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">åŸºäºä¼ ç»Ÿçš„å¯¹è±¡å¼ API</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">åŸºäº Composition APIï¼Œç±»ä¼¼äº<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">setup</code><br style="box-sizing: border-box;">è¯­æ³•</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">æ¨¡å—ç®¡ç†</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ”¯æŒæ¨¡å—åŒ–ï¼ˆmodulesï¼‰ï¼Œä½†è¯­æ³•è¾ƒå¤æ‚</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ¨¡å—åŒ–ç®€å•ï¼Œ<strong style="box-sizing: border-box; font-weight: 600;">æ¯ä¸ª store å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—</strong></td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">TypeScript æ”¯æŒ</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">TypeScript</code><span>&nbsp;</span>æ”¯æŒä¸å®Œå–„ï¼Œéœ€æ‰‹åŠ¨å®šä¹‰ç±»å‹</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">å¼€ç®±å³ç”¨çš„<span>&nbsp;</span><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">TypeScript</code><span>&nbsp;</span>æ”¯æŒï¼Œç±»å‹æ¨å¯¼æ›´å¼ºå¤§</td></tr><tr style="box-sizing: border-box; background-color: rgb(255, 255, 255); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">æ€§èƒ½</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ›´é€‚åˆå¤§å‹é¡¹ç›®ï¼Œä½†å†—ä½™ä»£ç è¾ƒå¤š</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ›´åŠ è½»é‡ï¼Œæ€§èƒ½æ›´å¥½ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½</td></tr><tr style="box-sizing: border-box; background-color: rgb(246, 246, 247); border-top: 0.8px solid rgb(226, 226, 227); transition: background-color 0.5s;"><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;"><strong style="box-sizing: border-box; font-weight: 600;">çŠ¶æ€æŒä¹…åŒ–</strong></td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">éœ€è¦é¢å¤–æ’ä»¶</td><td style="box-sizing: border-box; border-color: rgb(226, 226, 227); border-style: solid; border-width: 0.8px; border-image: none 100% / 1 / 0 stretch; padding: 8px 16px; font-size: 14px;">æ’ä»¶ç³»ç»Ÿæ›´åŠ çµæ´»ï¼Œæ”¯æŒçŠ¶æ€æŒä¹…åŒ–æ’ä»¶</td></tr></tbody></table><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">ä»£ç å¯¹æ¯”</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ“<span>&nbsp;</span><strong style="box-sizing: border-box; font-weight: 600;">vuex</strong></p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// store.js</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; createStore &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'vuex'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> store</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> createStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  state: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  mutations: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      state.count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  actions: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(&#123; </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#125;) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      setTimeout</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">        commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &#125;, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1000</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  getters: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    doubleCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">: (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">*</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> store</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">vueç»„ä»¶ä¸­ä½¿ç”¨</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> default</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">  // è®¡ç®—å±æ€§</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  computed: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    count</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">      return</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.state.count</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    doubleCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">      return</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.getters.doubleCount</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  methods: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // åŒæ­¥å¢åŠ </span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">      this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'increment'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">    // å¼‚æ­¥å¢åŠ </span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">      this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.$store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">dispatch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'asyncIncrement'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ğŸ“<strong style="box-sizing: border-box; font-weight: 600;">Pinia</strong></p><div class="language-typescript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// store.js</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; defineStore &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'pinia'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">export</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> useCounterStore</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> defineStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'counter'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">: () </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (&#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    count: </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">0</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;),</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  actions: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">      this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.count</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">++</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    async</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> asyncIncrement</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">      setTimeout</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">        this</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">increment</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">      &#125;, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">1000</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">    &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  getters: &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    doubleCount</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">: (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">state</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> state.count </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">*</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> 2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;,</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><div class="language-vue vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> setup</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">import</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123; useCounterStore &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> './store'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> counter</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> useCounterStore</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">script</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;Countçš„è®¡ç®—å€¼ &#123;&#123; counter.count &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h1</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;Doubleçš„è®¡ç®—å€¼ &#123;&#123; counter.doubleCount &#125;&#125;&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">h2</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"counter.increment"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;åŒæ­¥å¢åŠ &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &lt;</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;"> @click</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">=</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">"counter.asyncIncrement"</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;å¼‚æ­¥å¢åŠ &lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">button</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&lt;/</span><span style="box-sizing: border-box; color: rgb(34, 134, 58); --shiki-light: #22863A; --shiki-dark: #85E89D;">template</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&gt;</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;"><strong style="box-sizing: border-box; font-weight: 600;">å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å¯¹äºvue3é¡¹ç›®ï¼Œå®˜æ–¹æ¨èä½¿ç”¨piniaã€‚å› ä¸ºå®ƒ<strong style="box-sizing: border-box; font-weight: 600;">æ›´è½»é‡ã€TypeScript æ”¯æŒæ›´å¥½ã€æ¨¡å—åŒ–æ›´ç®€å•ä¸”æ‹¥æœ‰æ›´å¼ºçš„ DevTools æ”¯æŒ</strong>ã€‚</p></details>

<h2 id="Vue-router-å¯¼èˆªå®ˆå«èƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ"><a href="#Vue-router-å¯¼èˆªå®ˆå«èƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="Vue-router å¯¼èˆªå®ˆå«èƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ"></a>Vue-router å¯¼èˆªå®ˆå«èƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ</h2><details class="details custom-block" open="" style="box-sizing: border-box; border: 1px solid rgba(0, 0, 0, 0); border-radius: 8px; padding: 16px 16px 8px; line-height: 24px; font-size: 14px; color: rgb(60, 60, 67); background-color: rgba(142, 150, 170, 0.14); margin: 16px 0px;"><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; color: rgb(52, 81, 178); border-radius: 4px; padding: 3px 6px; background-color: rgba(142, 150, 170, 0.14); transition: color 0.25s, background-color 0.5s;">vue Router</code><span>&nbsp;</span>çš„<strong style="box-sizing: border-box; font-weight: 600;">å¯¼èˆªå®ˆå«</strong>ç”¨äºåœ¨è·¯ç”±è·³è½¬è¿‡ç¨‹ä¸­å¯¹å¯¼èˆªè¡Œä¸ºè¿›è¡Œ<strong style="box-sizing: border-box; font-weight: 600;">æ‹¦æˆª</strong>å’Œ<strong style="box-sizing: border-box; font-weight: 600;">æ§åˆ¶</strong>ã€‚è¿™äº›å®ˆå«åœ¨è·¯ç”±è¿›å…¥ã€ç¦»å¼€æˆ–æ›´æ–°æ—¶æ‰§è¡Œï¼Œå¯ä»¥ç”¨äºå¤šç§åœºæ™¯ï¼Œç¡®ä¿åº”ç”¨çš„å¯¼èˆªé€»è¾‘ç¬¦åˆé¢„æœŸã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„ç”¨é€”ï¼š</p><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">è®¤è¯å’Œæˆæƒ</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">ç”¨äºæ£€æŸ¥ç”¨æˆ·çš„ç™»å½•çŠ¶æ€æˆ–æƒé™ï¼Œé˜²æ­¢æœªæˆæƒç”¨æˆ·è®¿é—®å—é™é¡µé¢ã€‚</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> isAuthenticated</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> !!</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">localStorage.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getItem</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'token'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (to.meta.requiresAuth </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">&amp;&amp;</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> !</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">isAuthenticated) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'/login'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// æœªç™»å½•ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">else</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">() </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å·²ç™»å½•ï¼Œæ­£å¸¸å¯¼èˆª</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">æ•°æ®é¢„åŠ è½½</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨è¿›å…¥è·¯ç”±å‰é¢„åŠ è½½å¿…è¦çš„æ•°æ®ï¼Œç¡®ä¿é¡µé¢æ¸²æŸ“æ—¶æ•°æ®å·²å‡†å¤‡å¥½ã€‚</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">async</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (to.name </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">===</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'userInfo'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">    await</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">dispatch</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'fetchUserData'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// é¢„åŠ è½½ç”¨æˆ·æ•°æ®</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">åŠ¨æ€ä¿®æ”¹é¡µé¢æ ‡é¢˜</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">æ ¹æ®è·¯ç”±ä¿¡æ¯åŠ¨æ€æ›´æ”¹æµè§ˆå™¨æ ‡ç­¾é¡µçš„æ ‡é¢˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">afterEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  document.title </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> to.meta.title </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">||</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;"> 'è‡ªå®šä¹‰æ ‡é¢˜'</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">åŠ¨ç”»å’ŒåŠ è½½æ•ˆæœ</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨è·¯ç”±åˆ‡æ¢æ—¶å±•ç¤ºåŠ è½½åŠ¨ç”»æˆ–è¿‡æ¸¡æ•ˆæœï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'setLoading'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">true</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// å¼€å§‹åŠ è½½åŠ¨ç”»</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">  next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">afterEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(() </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  store.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">commit</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'setLoading'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;">false</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// ç»“æŸåŠ è½½åŠ¨ç”»</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">æ—¥å¿—è®°å½•å’Œåˆ†æ</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">åœ¨è·¯ç”±åˆ‡æ¢æ—¶è®°å½•ç”¨æˆ·è¡Œä¸ºï¼Œç”¨äºåˆ†ææˆ–è°ƒè¯•ã€‚</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">afterEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  console.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">log</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">`ç”¨æˆ·ä» $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">from</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">.</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">fullPath</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125; è·³è½¬åˆ° $&#123;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">to</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">.</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">fullPath</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">&#125;`</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><ul style="box-sizing: border-box; list-style: disc; margin: 16px 0px; padding: 0px 0px 0px 1.25rem;"><li style="box-sizing: border-box; overflow-wrap: break-word;">é˜²æ­¢è®¿é—®ä¸å­˜åœ¨çš„é¡µé¢</li></ul><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">é€šè¿‡å®ˆå«æ£€æŸ¥è·¯ç”±æ˜¯å¦å­˜åœ¨ï¼Œé¿å…å¯¼èˆªåˆ°æ— æ•ˆé¡µé¢ã€‚</p><div class="language-javascript vp-adaptive-theme" style="box-sizing: border-box; position: relative; margin: 8px 0px; background-color: rgb(246, 246, 247); overflow-x: auto; transition: background-color 0.5s; border-radius: 8px;"><button title="Copy Code" class="copy" style="box-sizing: border-box; touch-action: manipulation; border-width: 0.8px; border-style: solid; border-color: rgb(226, 226, 227); border-image: none 100% / 1 / 0 stretch; padding: 0px; line-height: inherit; color: inherit; font-family: inherit; background-color: rgb(246, 246, 247); background-image: url(&quot;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='rgba(128,128,128,1)' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' viewBox='0 0 24 24'%3E%3Crect width='8' height='4' x='8' y='2' rx='1' ry='1'/%3E%3Cpath d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/%3E%3C/svg%3E&quot;); cursor: pointer; direction: ltr; position: absolute; top: 12px; right: 12px; z-index: 3; border-radius: 4px; width: 40px; height: 40px; opacity: 0; background-position: 50% center; background-size: 20px; background-repeat: no-repeat; transition: border-color 0.25s, background-color 0.25s, opacity 0.25s;"></button><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0" style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; position: relative; z-index: 1; margin: 0px; padding: 20px 0px; background: transparent; overflow-x: auto;"><code style="box-sizing: border-box; font-family: ui-monospace, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 12.25px; background-color: transparent; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; overflow-wrap: normal; tab-size: 4; hyphens: none; display: block; padding: 0px 24px; width: fit-content; min-width: 100%; line-height: 1.7; color: rgba(60, 60, 67, 0.78); transition: color 0.5s; font-weight: 400;"><span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">beforeEach</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">to</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">from</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">, </span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  const</span><span style="box-sizing: border-box; color: rgb(0, 92, 197); --shiki-light: #005CC5; --shiki-dark: #79B8FF;"> routeExists</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;"> =</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> router.</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">getRoutes</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">().</span><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">some</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">((</span><span style="box-sizing: border-box; color: rgb(227, 98, 9); --shiki-light: #E36209; --shiki-dark: #FFAB70;">route</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">=&gt;</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> route.name </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">===</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> to.name)</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">  if</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> (</span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">!</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">routeExists) &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">(</span><span style="box-sizing: border-box; color: rgb(3, 47, 98); --shiki-light: #032F62; --shiki-dark: #9ECBFF;">'/404'</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">) </span><span style="box-sizing: border-box; color: rgb(106, 115, 125); --shiki-light: #6A737D; --shiki-dark: #6A737D;">// è·³è½¬åˆ° 404 é¡µé¢</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125; </span><span style="box-sizing: border-box; color: rgb(215, 58, 73); --shiki-light: #D73A49; --shiki-dark: #F97583;">else</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;"> &#123;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(111, 66, 193); --shiki-light: #6F42C1; --shiki-dark: #B392F0;">    next</span><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">()</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">  &#125;</span></span>
<span class="line" style="box-sizing: border-box; color: rgba(60, 60, 67, 0.78);"><span style="box-sizing: border-box; color: rgb(36, 41, 46); --shiki-light: #24292E; --shiki-dark: #E1E4E8;">&#125;)</span></span></code></pre></div><p style="box-sizing: border-box; margin: 8px 0px; overflow-wrap: break-word; line-height: 24px;">å…³è”æ–‡ç« ï¼š<a href="https://juejin.cn/post/7359084604663840820" target="_blank" rel="noreferrer" style="box-sizing: border-box; touch-action: manipulation; color: rgb(52, 81, 178); text-decoration: underline; font-weight: 500; text-underline-offset: 2px; transition: color 0.25s, opacity 0.25s;">5minå¸¦ä½ å¿«é€Ÿå›é¡¾ã€å­¦ä¹ VueRouterçš„ä½¿ç”¨ï¼</a></p></details>



<p>åŸºæœ¬äº†è§£äº† <code>createApp()</code> ä¸ <code>app.mount()</code> ä¸¤ä¸ªæ–¹æ³•çš„æ¥æºå’Œå¤§è‡´æ‰§è¡Œè¿‡ç¨‹ï¼Œè¿™é‡Œä¾ç„¶ä»¥ä¸Šæ–‡çš„æµç¨‹å›¾æ¥è¿›è¡Œå›é¡¾ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640783" alt="createApp è¿‡ç¨‹å›é¡¾"></p>
<p>æ‰€ä»¥åœ¨åˆ›å»ºå¥½åº”ç”¨ app åæ‰§è¡Œ <code>mount</code> å‡½æ•°ï¼Œé€šè¿‡ <code>createVNode</code> å°†æˆ‘ä»¬çš„å…¥å£ç»„ä»¶ <code>App.vue</code> è½¬æ¢æˆ <code>VNode</code> æ ‘ï¼Œæœ€åä½¿ç”¨ <code>patch()</code> å‡½æ•°å°† <code>VNode</code> æ ‘è½¬æ¢ä¸ºçœŸå® Dom æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚</p>
<p>è€Œ Vue 3 çš„ diff ç®—æ³•ï¼Œä¸ Vue 2 ä¸€æ ·ï¼Œä¾ç„¶åœ¨ <code>patch</code> è¿‡ç¨‹ä¸­ã€‚</p>
<p>é‚£ä¹ˆé¦–å…ˆï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ VNode çš„ç”Ÿæˆå§~</p>
<h2 id="createVNode-ç”Ÿæˆè™šæ‹ŸèŠ‚ç‚¹"><a href="#createVNode-ç”Ÿæˆè™šæ‹ŸèŠ‚ç‚¹" class="headerlink" title="createVNode - ç”Ÿæˆè™šæ‹ŸèŠ‚ç‚¹"></a>createVNode - ç”Ÿæˆè™šæ‹ŸèŠ‚ç‚¹</h2><p><code>createVNode</code>ï¼Œå³åˆ›å»ºä¸€ä¸ª <code>VNode</code> è™šæ‹ŸèŠ‚ç‚¹å¯¹è±¡ã€‚</p>
<p>å®ƒæœ€å¤šæ¥æ”¶ 5 ä¸ªå‚æ•°ï¼ˆå½“ç„¶åœ¨ <code>createApp</code> çš„æ—¶å€™åªæœ‰ä¸€ä¸ª <code>App.vue</code>ï¼‰ï¼Œå…¶ä¸­ <code>type</code> å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª <code>class</code> ç»„ä»¶æˆ–è€…æ™®é€šç»„ä»¶ï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸€ä¸ª <code>VNode</code> å¯¹è±¡ã€‚</p>
<p>æ‰€ä»¥é¦–å…ˆä¼šå¯¹ <code>type</code> è¿›è¡Œå¤„ç†ï¼Œåœ¨æ²¡æœ‰ä¼ å…¥ <code>type</code> æˆ–è€…æŒ‡å®šä¸º <code>v-ndc</code> æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æˆ <strong>æ³¨é‡ŠèŠ‚ç‚¹</strong> ç±»å‹ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦å·²ç»æ˜¯ä¸€ä¸ª <code>VNode</code> å¯¹è±¡ï¼›å¦‚æœæ˜¯çš„è¯ï¼Œåˆ™è¿”å›å¯¹ä¼ å…¥ <code>VNode</code> çš„æ‹·è´å¯¹è±¡ï¼ˆé™¤äº†éƒ¨åˆ†å±æ€§ä¹‹å¤–ï¼Œå…¶ä»–å±æ€§éƒ½æ˜¯æµ…å±‚æ‹·è´ï¼‰ã€‚</p>
<p>å¦‚æœä¸æ˜¯ä¸€ä¸ª <code>VNode</code> çš„è¯ï¼Œåˆ™è¿›å…¥åç»­å¾ªç¯ï¼ˆ<code>App.vue</code> å°±ä¸æ˜¯ï¼‰ã€‚</p>
<p>ä¹‹åçš„è¿‡ç¨‹ä¼šå…ˆå¤„ç†ç»„ä»¶çš„ <code>class</code> å’Œ <code>style</code> ç»‘å®šæ ¼å¼ï¼Œç„¶åå¤„ç†ä¼ å…¥ <code>type</code> å‚æ•°å¯¹åº”çš„ <code>VNode</code> å¯¹è±¡ç±»å‹ï¼Œæœ€åé€šè¿‡ <code>createBaseVNode()</code> åˆ›å»º <code>VNode</code> è¿”å›ã€‚</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640784" alt="image-20230324170019456"></p>
<p>ç„¶åï¼Œ<code>mount</code> å‡½æ•°å†…éƒ¨ä¼šé€šè¿‡ <code>render</code> å‡½æ•°è¿›è¡Œ <code>VNode</code> åˆ°çœŸå® <code>dom</code> çš„è§£æå’Œæ¸²æŸ“ã€‚</p>
<p>è€Œ <code>render</code> å‡½æ•°å†…éƒ¨åˆ™æ˜¯æ ¹æ®æ˜¯å¦æœ‰æ–°çš„ <code>VNode</code> å¯¹è±¡æ¥ç¡®è®¤æ˜¯ <strong>æŒ‚è½½&#x2F;æ›´æ–°</strong> è¿˜æ˜¯ <strong>å¸è½½ dom èŠ‚ç‚¹</strong> â€”â€” å¦‚æœæœ‰æ–°çš„ <code>VNode</code> å¯¹è±¡ï¼Œåˆ™è°ƒç”¨ <code>patch</code> è¿›è¡Œ <code>VNode</code> çš„è§£æä¸æ¸²æŸ“ï¼›å¦åˆ™è°ƒç”¨ <code>unmount</code> è¿›è¡Œå¸è½½ã€‚</p>
<h2 id="patch-å‡½æ•°-VNode-èŠ‚ç‚¹çš„åˆ†ç±»å¤„ç†"><a href="#patch-å‡½æ•°-VNode-èŠ‚ç‚¹çš„åˆ†ç±»å¤„ç†" class="headerlink" title="patch å‡½æ•° - VNode èŠ‚ç‚¹çš„åˆ†ç±»å¤„ç†"></a>patch å‡½æ•° - VNode èŠ‚ç‚¹çš„åˆ†ç±»å¤„ç†</h2><p>åœ¨ Vue é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ <strong>ç»„ä»¶ä¸ HTML å…ƒç´ éƒ½æ˜¯é€šè¿‡æ ‡ç­¾åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨çš„</strong>ï¼Œå¹¶ä¸”é™¤äº†å…ƒç´ ä¸ç»„ä»¶ä¹‹å¤–ï¼Œå¯èƒ½è¿˜æœ‰æ³¨é‡ŠèŠ‚ç‚¹ç­‰å†…å®¹ã€‚æ‰€ä»¥åœ¨è§£æçš„æ—¶å€™ä¹Ÿéœ€è¦ <strong>æ ¹æ®ä¸åŒçš„èŠ‚ç‚¹ç±»å‹è¿›è¡Œåˆ†ç±»å¤„ç†</strong>ã€‚</p>
<p>æ‰€ä»¥ <code>patch</code> å‡½æ•°çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯ <strong>æ ¹æ® <code>VNode</code> å¯¹è±¡çš„ä¸åŒç±»å‹è°ƒç”¨å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œå¦‚æœæœ‰ç»‘å®š <code>ref</code> å±æ€§ï¼Œåˆ™è¿˜ä¼šå°†ç»‘å®šçš„ <code>ref</code> å…ƒç´ ï¼ˆdom èŠ‚ç‚¹æˆ–è€…ç»„ä»¶å®ä¾‹ï¼‰æ·»åŠ åˆ°å½“å‰çš„ Vue å®ä¾‹ä¸Š</strong>ã€‚</p>
<p>æ•´ä¸ª <code>patch</code> è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li>åˆ¤æ–­æ–°æ—§ <code>VNode</code> å¯¹è±¡æ˜¯å¦å®Œå…¨ä¸€è‡´ï¼Œä¸€è‡´æ—¶ç›´æ¥é€€å‡º</li>
<li>å¦‚æœæ–°æ—§ <code>VNode</code> å¯¹è±¡çš„ <strong>ç±»å‹ä¸ä¸€è‡´</strong>ï¼Œåˆ™ <strong>å¸è½½æ—§èŠ‚ç‚¹ï¼Œå°†æ—§èŠ‚ç‚¹ç½®ä¸º <code>null</code> è¿›è¡Œåç»­é€»è¾‘</strong></li>
<li>æ ¹æ®æ–°èŠ‚ç‚¹çš„ <code>patchFlag</code> é…ç½®æ˜¯å¦éœ€è¦ä¼˜åŒ–</li>
<li>æ ¹æ®æ–°èŠ‚ç‚¹çš„ <code>type</code> ç±»å‹ï¼Œè°ƒç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼›è¿™é‡Œå¤§éƒ¨åˆ†æ–¹æ³•åéƒ½æ˜¯ä»¥ <code>process</code> å¼€å¤´ï¼Œæ„ä¸ºåŠ å·¥ã€å¤„ç†å¯¹åº”å…ƒç´ </li>
<li>å¦‚æœè®¾ç½®äº† <code>ref</code> å±æ€§ï¼Œåˆ™è°ƒç”¨ <code>setRef</code> å¤„ç†å¯¹åº”ç»‘å®šå…³ç³»</li>
</ol>
<p>è¿‡ç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640785" alt="image-20230327170534619"></p>
<h2 id="processFunctions-èŠ‚ç‚¹å®é™…å¤„ç†è¿‡ç¨‹"><a href="#processFunctions-èŠ‚ç‚¹å®é™…å¤„ç†è¿‡ç¨‹" class="headerlink" title="processFunctions - èŠ‚ç‚¹å®é™…å¤„ç†è¿‡ç¨‹"></a>processFunctions - èŠ‚ç‚¹å®é™…å¤„ç†è¿‡ç¨‹</h2><p>åœ¨ <code>patch</code> è¿‡ç¨‹ä¸­æ ¹æ®ä¸åŒçš„ <code>VNode.type</code> è¿›è¡Œå¤„ç†ä¹‹åï¼Œåˆ†åˆ«ä¼šè°ƒç”¨ä¸åŒçš„å‡½æ•°æ¥è¿›è¡Œè™šæ‹ŸèŠ‚ç‚¹çš„å®é™…å¤„ç†ä¸ dom æ›´æ–°ã€‚å…¶ä¸­æœ‰ç±»ä¼¼æ–‡æœ¬ä¸æ³¨é‡Šè¿™æ ·çš„ç®€å•èŠ‚ç‚¹ï¼Œä¹Ÿæœ‰å…·æœ‰å¤šä¸ªå­å…ƒç´ æˆ–è€…åŠ¨æ€ç»„ä»¶ç­‰è¿™æ ·çš„å¤æ‚æ ‡ç­¾ï¼Œé‚£ä¹ˆä»æ˜“åˆ°éš¾ï¼Œå…ˆä»ç®€å•çš„æ ‡ç­¾è¯´èµ·ã€‚</p>
<h3 id="processText-ä¸-processCommentNode"><a href="#processText-ä¸-processCommentNode" class="headerlink" title="processText ä¸ processCommentNode"></a>processText ä¸ processCommentNode</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">processText</span> = (<span class="params">oldVnode, newVnode, container, anchor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(!oldVnode) &#123;</span><br><span class="line">    <span class="title function_">hostInsert</span>(newVnode.<span class="property">el</span> = <span class="title function_">hostCreateText</span>(newVnode.<span class="property">children</span>), container, anchor)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> el = (newVnode.<span class="property">el</span> = newVnode.<span class="property">el</span>!)</span><br><span class="line">    <span class="keyword">if</span> (newVnode.<span class="property">children</span> !== oldVnode.<span class="property">children</span>) &#123;</span><br><span class="line">      <span class="title function_">hostSetText</span>(el, newVnode.<span class="property">children</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">processCommentNode</span> = (<span class="params">oldVnode, newVnode, container, anchor</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(!oldVnode) &#123;</span><br><span class="line">    <span class="title function_">hostInsert</span>(newVnode.<span class="property">el</span> = <span class="title function_">hostCreateComment</span>(newVnode.<span class="property">children</span>), container, anchor)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    newVnode.<span class="property">el</span> = oldVnode.<span class="property">el</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çº¯æ–‡æœ¬èŠ‚ç‚¹å¾ˆå¥½ç†è§£ï¼Œä¸å­˜åœ¨æ—§å†…å®¹æ—¶å°±åœ¨çˆ¶çº§èŠ‚ç‚¹ï¼ˆ<code>container</code>ï¼‰ä¸­æ’å…¥èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œå­˜åœ¨æ—§èŠ‚ç‚¹åˆ™é¦–å…ˆæ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç­‰å°±æ›´æ–°ã€‚</p>
<p>è€Œæ³¨é‡ŠèŠ‚ç‚¹ä¸çº¯æ–‡æœ¬ä¸åŒçš„æ˜¯ï¼Œåœ¨æ›´æ–°çš„æ—¶å€™ä¼šç›´æ¥æ›´æ–° <code>el</code> å±æ€§ã€‚</p>
<h3 id="mountStaticNode-æŒ‚è½½é™æ€èŠ‚ç‚¹"><a href="#mountStaticNode-æŒ‚è½½é™æ€èŠ‚ç‚¹" class="headerlink" title="mountStaticNode - æŒ‚è½½é™æ€èŠ‚ç‚¹"></a>mountStaticNode - æŒ‚è½½é™æ€èŠ‚ç‚¹</h3><p>å¦‚æœæ˜¯ <strong>å¼€å‘ç¯å¢ƒ</strong>ï¼Œå†…å®¹æ›´æ–°æ—¶è¿˜ä¼šç”¨ <code>patchStaticNode</code> æ¥è¿›è¡Œæ›´æ–°ï¼Œä½†æ˜¯ <strong>ç”Ÿäº§ç¯å¢ƒä¸‹åªä¼šåœ¨åŸèŠ‚ç‚¹è¢«é”€æ¯ä¹‹åæ‰ä¼šè¿›è¡ŒæŒ‚è½½</strong>ï¼Œä¹Ÿå°±æ˜¯åœ¨ Vue 3 ä¸­æåˆ°çš„ <strong>é™æ€æå‡</strong>ï¼Œç”¨æ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>
<p>éå¼€å‘ç¯å¢ƒä¸‹ï¼Œåªæœ‰ä»¥ä¸‹é€»è¾‘ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="title class_">Static</span>:</span><br><span class="line">  <span class="keyword">if</span> (oldVnode == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="title function_">mountStaticNode</span>(newVnode, container, anchor, isSVG)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mountStaticNode</span> = (<span class="params">n2, container, anchor, isSVG</span>) =&gt; &#123;</span><br><span class="line">  [n2.<span class="property">el</span>, n2.<span class="property">anchor</span>] = hostInsertStaticContent!(</span><br><span class="line">    n2.<span class="property">children</span>,</span><br><span class="line">    container,</span><br><span class="line">    anchor,</span><br><span class="line">    isSVG,</span><br><span class="line">    n2.<span class="property">el</span>,</span><br><span class="line">    n2.<span class="property">anchor</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å³ç›´æ¥å°†è¿™ä¸ªèŠ‚ç‚¹çš„å†…å®¹æ’å…¥åˆ°çˆ¶çº§å…ƒç´ çš„æŒ‡å®šä½ç½®ä¸‹ã€‚</p>
<blockquote>
<p>æ ¹æ®å®˜æ–¹ç»™å‡ºçš„ demoï¼Œå¤§éƒ¨åˆ† <code>template</code> ä¸­çš„å†…å®¹éƒ½ä¼šç¼–è¯‘ä¸º <code>StaticNode</code>ï¼Œä¾‹å¦‚ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640786" alt="image-20230327205649220"></p>
</blockquote>
<h3 id="processFragment-å¤šæ ¹èŠ‚ç‚¹å¤„ç†"><a href="#processFragment-å¤šæ ¹èŠ‚ç‚¹å¤„ç†" class="headerlink" title="processFragment - å¤šæ ¹èŠ‚ç‚¹å¤„ç†"></a>processFragment - å¤šæ ¹èŠ‚ç‚¹å¤„ç†</h3><p>åœ¨ Vue 2 ä¸­ï¼Œæ¯ä¸ªå•æ–‡ä»¶ç»„ä»¶ä¸‹åªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œè€Œ Vue 3 ä¸­åšäº†æ”¹è¿›ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å•ä¸ªç»„ä»¶çš„æ¨¡æ¿ä¸­ç›´æ¥æ·»åŠ å¤šä¸ªæ ¹èŠ‚ç‚¹æ ‡ç­¾ï¼ˆjsx å†™æ³•ä¾ç„¶åªèƒ½æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå› ä¸ºéœ€è¦ç¬¦åˆ jsx è§„èŒƒï¼‰ã€‚</p>
<p>åœ¨æˆ‘ä»¬é€šè¿‡ <code>create-vite</code> è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®ä¸­ï¼Œ<code>App.vue</code> å°±æ˜¯ä¸€ä¸ªå¤šæ ¹èŠ‚ç‚¹ç»„ä»¶ï¼Œæ­¤æ—¶å°±ä¼šè¿›å…¥åˆ°è¯¥å‡½æ•°é€»è¾‘ä¸­ã€‚</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640787" alt="image-20230327231249151"></p>
<h4 id="1ã€-é¦–æ¬¡æ¸²æŸ“"><a href="#1ã€-é¦–æ¬¡æ¸²æŸ“" class="headerlink" title="1ã€ é¦–æ¬¡æ¸²æŸ“"></a>1ã€ é¦–æ¬¡æ¸²æŸ“</h4><p><strong>å¤šæ ¹èŠ‚ç‚¹åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶é€»è¾‘è¾ƒä¸ºç®€å•</strong>ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">processFragment</span> = (<span class="params">n1, n2, container, anchor, parentComponent, parentSuspense, isSVG,</span></span><br><span class="line"><span class="params">  slotScopeIds, optimized</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> fragmentStartAnchor = (n2.<span class="property">el</span> = n1 ? n1.<span class="property">el</span> : <span class="title function_">hostCreateText</span>(<span class="string">&#x27;&#x27;</span>));</span><br><span class="line">  <span class="keyword">const</span> fragmentEndAnchor = (n2.<span class="property">anchor</span> = n1 ? n1.<span class="property">anchor</span> : <span class="title function_">hostCreateText</span>(<span class="string">&#x27;&#x27;</span>));</span><br><span class="line">  <span class="keyword">let</span> &#123;</span><br><span class="line">      patchFlag,</span><br><span class="line">      dynamicChildren,</span><br><span class="line">      <span class="attr">slotScopeIds</span>: fragmentSlotScopeIds</span><br><span class="line">  &#125; = n2;</span><br><span class="line">  <span class="keyword">if</span> (fragmentSlotScopeIds) &#123;</span><br><span class="line">      slotScopeIds = slotScopeIds ?</span><br><span class="line">          slotScopeIds.<span class="title function_">concat</span>(fragmentSlotScopeIds) :</span><br><span class="line">          fragmentSlotScopeIds;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (n1 == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="title function_">hostInsert</span>(fragmentStartAnchor, container, anchor);</span><br><span class="line">      <span class="title function_">hostInsert</span>(fragmentEndAnchor, container, anchor);</span><br><span class="line">      <span class="title function_">mountChildren</span>(n2.<span class="property">children</span>, container, fragmentEndAnchor, parentComponent, parentSuspense,</span><br><span class="line">          isSVG, slotScopeIds, optimized);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–æ¬¡æ¸²æŸ“ä¸æ›´æ–°éƒ½æœ‰å…±åŒé€»è¾‘ï¼Œå³ <strong>è®¾ç½®å¤šæ ¹èŠ‚ç‚¹ç»„ä»¶çš„å¼€å§‹ä¸ç»ˆæ­¢é”šç‚¹ï¼Œç„¶åå°†ç»„ä»¶çš„æ¯ä¸ªæ ¹èŠ‚ç‚¹æŒ‰é¡ºåºå‘ä¸­é—´æ’å…¥</strong>ã€‚</p>
<p>å› ä¸º <code>App.vue</code> ä¸­çš„å†…å®¹æ–¹ä¾¿è§£æï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªå¤šæ ¹ç»„ä»¶ <code>FragmentOne</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fragment-1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; name &#125;&#125; Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fragment-2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Fragment Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;fragment-3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Fragment Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> name = ref&lt;string | <span class="literal">undefined</span>&gt;(<span class="string">&#x27;FragmentOne&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“è¿™ä¸ªç»„ä»¶è¢«è§£æåˆ°æ—¶ï¼Œå®ƒä¼šè¢«ç¼–è¯‘æˆä»¥ä¸‹å†…å®¹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640788" alt="image-20230327232159199"></p>
<p>å…¶ä¸­ <code>children</code> æ•°ç»„ä¸­å°±æ˜¯æ¯ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œç„¶ååœ¨å¤„ç†é”šç‚¹æ—¶ï¼Œå› ä¸ºæ˜¯é¦–æ¬¡æ¸²æŸ“ï¼Œä¸¤ä¸ªé”šç‚¹ä¼šç›´æ¥è®¾ç½®ä¸ºä¸¤ä¸ªç©ºæ–‡æœ¬èŠ‚ç‚¹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640789" alt="image-20230327232404236"></p>
<p>æœ€åï¼Œä¼šé€šè¿‡ <code>mountChildren</code> æ–¹æ³•éå† <code>children</code> æ•°ç»„ï¼Œä¾æ¬¡æ‰§è¡Œ <code>patch()</code> å¤„ç†æ¯ä¸€ä¸ªå­å…ƒç´ ã€‚</p>
<h4 id="2ã€-æ´¾å‘æ›´æ–°"><a href="#2ã€-æ´¾å‘æ›´æ–°" class="headerlink" title="2ã€ æ´¾å‘æ›´æ–°"></a>2ã€ æ´¾å‘æ›´æ–°</h4><p>å¤šæ ¹ç»„ä»¶çš„æ›´æ–°ç›¸æ¯”é¦–æ¬¡æŒ‚è½½è¦ <strong>å¤æ‚å¾ˆå¤š</strong>ï¼Œä¼šæ ¹æ® <strong>æ‰€æœ‰æ ¹èŠ‚ç‚¹çš„ç¨³å®šæ€§</strong> æ¥åˆ†å¼€å¤„ç†ã€‚</p>
<blockquote>
<p>è¿™é‡Œçš„ç¨³å®šæ€§æŒ‡çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦æœ‰ <code>key</code>ï¼Œé¡ºåºæ˜¯å¦ä¸å˜ç­‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ <strong>éç›´æ¥ <code>v-for</code> åˆ›å»ºçš„å¤šæ ¹èŠ‚ç‚¹ï¼Œé¡ºåºä¸ä¸ªæ•°éƒ½ä¸ä¼šæ”¹å˜ï¼Œä½†æ˜¯æ¯ä¸ªèŠ‚ç‚¹å†…éƒ¨å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜</strong>ï¼Œä¾‹å¦‚ <code>create-vite</code> åˆ›å»ºçš„é¡¹ç›®ä¸­çš„ <code>App.vue</code>ï¼›å½“æ˜¯ç¨³å®šèŠ‚ç‚¹æ—¶ï¼Œ<code>patchFlag</code> çš„å€¼ç­‰äº 64</p>
</blockquote>
<p>å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (patchFlag &gt; <span class="number">0</span> &amp;&amp; patchFlag &amp; <span class="number">64</span> &amp;&amp; dynamicChildren &amp;&amp; n1.dynamicChildren) &#123;</span><br><span class="line">    patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds)<span class="comment">;</span></span><br><span class="line">    <span class="keyword">if</span> (parentComponent &amp;&amp; parentComponent.type.__hmrId) &#123;</span><br><span class="line">        traverseStaticChildren(n1, n2)<span class="comment">;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n2.key != <span class="literal">null</span> || (parentComponent &amp;&amp; n2 === parentComponent.subTree)) &#123;</span><br><span class="line">        traverseStaticChildren(n1, n2, <span class="literal">true</span>)<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized)<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>æ˜¯ç¨³å®šèŠ‚ç‚¹ä½†æ˜¯å…·æœ‰åŠ¨æ€èŠ‚ç‚¹ï¼ˆ<code>v-for</code>å¾ªç¯ç­‰ï¼‰ï¼Œé€šè¿‡ <code>patchBlockChildren</code> å•ç‹¬å¤„ç†åŠ¨æ€èŠ‚ç‚¹ï¼›ç„¶åé€šè¿‡ <code>traverseStaticChildren</code> è¿›è¡Œæ‰€æœ‰å­èŠ‚ç‚¹çš„ <code>el</code> å±æ€§å¤„ç†</li>
<li>ä¸æ˜¯ç¨³å®šèŠ‚ç‚¹ï¼Œåˆ™é€šè¿‡ <code>patchChildren</code> æ¥å¯¹æ¯”å’Œæ›´æ–°æ¯ä¸ªå­èŠ‚ç‚¹</li>
</ol>
<blockquote>
<p><code>patchChildren</code> æœ€ç»ˆå°±ä¼šè¿›å…¥ Vue 3 çš„æ ¸å¿ƒ <code>diff</code> è¿‡ç¨‹ â€”â€” <code>patchKeyedChildren</code>ã€‚</p>
</blockquote>
<p><img src="https://segmentfault.com/img/remote/1460000043640790" alt="image-20230328160349044"></p>
<h3 id="Teleport-process-Suspense-process"><a href="#Teleport-process-Suspense-process" class="headerlink" title="Teleport.process &amp; Suspense.process"></a>Teleport.process &amp; Suspense.process</h3><p>åœ¨å¤„ç† <strong>æ™®é€šdomå…ƒç´  <code>Element</code> ä¸Vueç»„ä»¶ <code>Component</code></strong> çš„æ¸²æŸ“ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ Vue 3 æ–°å¢çš„ <code>teleport</code> ä¼ é€ç»„ä»¶å’Œ <code>suspense</code> å¼‚æ­¥ç»„ä»¶å§ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ <code>patch</code> å‡½æ•°ä¸­ï¼Œ<code>Teleport</code> å’Œ <code>Suspense</code> åœ¨ <code>createVNode</code> é˜¶æ®µï¼Œä¼šç”Ÿæˆ <strong>ç›¸å¯¹ç‰¹æ®Šçš„ <code>VNode</code> å¯¹è±¡</strong>ï¼Œåœ¨ <code>process</code> è¿‡ç¨‹ä¸­ï¼Œç›´æ¥è°ƒç”¨ <code>Vnode</code> çš„ <code>process()</code> æ–¹æ³•ã€‚</p>
<blockquote>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸€ä¸ª <code>internals</code> å‚æ•°ï¼ŒåŒ…å« <code>renderer.ts</code> ä¸­å®šä¹‰çš„ä¸€ç³»åˆ—æŒ‚è½½ä¸æ›´æ–°çš„æ–¹æ³•</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">const</span> <span class="string">internals</span> <span class="string">=</span> &#123;</span><br><span class="line">    <span class="attr">p:</span> <span class="string">patch</span>,</span><br><span class="line">    <span class="attr">um:</span> <span class="string">unmount</span>,</span><br><span class="line">    <span class="attr">m:</span> <span class="string">move</span>,</span><br><span class="line">    <span class="attr">r:</span> <span class="string">remove</span>,</span><br><span class="line">    <span class="attr">mt:</span> <span class="string">mountComponent</span>,</span><br><span class="line">    <span class="attr">mc:</span> <span class="string">mountChildren</span>,</span><br><span class="line">    <span class="attr">pc:</span> <span class="string">patchChildren</span>,</span><br><span class="line">    <span class="attr">pbc:</span> <span class="string">patchBlockChildren</span>,</span><br><span class="line">    <span class="attr">n:</span> <span class="string">getNextHostNode</span>,</span><br><span class="line">    <span class="attr">o:</span> <span class="string">options</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote>
<h4 id="1ã€-Teleport"><a href="#1ã€-Teleport" class="headerlink" title="1ã€ Teleport"></a>1ã€ Teleport</h4><p>ä½œä¸ºæ–°å¢ç»„ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯ <strong>å°†ç»„ä»¶å†…éƒ¨çš„å†…å®¹æŒ‚è½½åˆ°æŒ‡å®šå…ƒç´ ä¸‹</strong>ï¼Œæ‰€ä»¥å®ƒåœ¨æŒ‚è½½å’Œæ›´æ–°æ—¶éœ€è¦å•ç‹¬å¤„ç†ã€‚</p>
<p>è€Œå†…éƒ¨çš„é€»è¾‘ä¸ <code>fragment</code> æœ‰ç‚¹å„¿ç±»ä¼¼ï¼š</p>
<ol>
<li><strong>é¦–æ¬¡æ¸²æŸ“</strong></li>
</ol>
<p>ä¸ <code>fragment</code> ä¸€æ ·éœ€è¦å…ˆè®¾ç½®é”šç‚¹ï¼Œç„¶åæ ¹æ® <code>to</code> å±æ€§æŸ¥æ‰¾æŒ‡å®šæŒ‚è½½å…ƒç´  <code>target</code>ã€‚</p>
<p>å¦‚æœ <code>target</code> å­˜åœ¨åˆ™å°†é”šç‚¹æ’å…¥è¿›å»ï¼Œç„¶åæ ¹æ® <code>disabled</code> é…ç½®æ¥ç¡®è®¤æŒ‚è½½å¯¹è±¡ï¼Œé€šè¿‡ <code>mountChildren</code> å°†å†…å®¹æ’å…¥è¿›ç›®æ ‡å…ƒç´ ä¸­ã€‚</p>
<ol>
<li><strong>æ´¾å‘æ›´æ–°</strong></li>
</ol>
<p>åœ¨æ›´æ–°æ—¶ï¼Œä¸€æ ·ä¼šè¯»å– <code>disabled</code> å’Œ <code>to</code> ä¸¤ä¸ªå±æ€§çš„é…ç½®ï¼Œä½†æ˜¯é¦–å…ˆä¼šä¸ <code>fragment</code> ä¸€æ ·æ ¹æ®å†…éƒ¨çš„åŠ¨æ€èŠ‚ç‚¹ç­‰è¿›è¡Œå­èŠ‚ç‚¹å†…å®¹å…ˆè¿›è¡Œæ›´æ–°ã€‚</p>
<p>ç„¶ååˆ¤æ–­ <code>disabled</code> å’Œ <code>to</code> æ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–åˆ™ä¼šé€šè¿‡ <code>moveTeleport</code> å¯¹ç»„ä»¶å†…éƒ¨çš„å†…å®¹è¿›è¡Œç§»åŠ¨ã€‚</p>
<p>æœ€åé€šè¿‡ <code>updateCssVars</code> æ›´æ–° <code>data-v</code> å±æ€§ï¼Œå¤„ç† <code>css</code> å˜é‡å’Œä½œç”¨åŸŸç­‰ã€‚</p>
<p>å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640791" alt="image-20230329164519592"></p>
<blockquote>
<p>å›¾ä¸­å¯¹ <code>patchChildren</code> è¿›è¡Œäº†çœç•¥ï¼Œä¸ä¸Šé¢ <code>processFragment</code> çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>
<h4 id="2ã€-Suspense"><a href="#2ã€-Suspense" class="headerlink" title="2ã€ Suspense"></a>2ã€ Suspense</h4><p>Vue 3 æ–‡æ¡£ä¸­æç¤ºçš„æ˜¯è¿™æ˜¯ä¸€é¡¹ <strong>å®éªŒæ€§åŠŸèƒ½</strong>ï¼Œç”¨æ¥æ‰¹é‡ç®¡ç†å¼‚æ­¥ç»„ä»¶æ ‘ï¼ˆæ„Ÿè§‰æœ‰ç‚¹å„¿ç±»ä¼¼äº <code>Promise.all()</code>ï¼‰ã€‚</p>
<p>æ‰€ä»¥å®ƒçš„åœºæ™¯ä¼šæœ‰ä¸¤ç§ï¼šåŠ è½½ä¸­ä¸åŠ è½½ç»“æŸã€‚<code>Suspense</code> æä¾›ä¸¤ä¸ªæ’æ§½ï¼š<code>default</code> å’Œ <code>fallback</code>ï¼Œå…¶ä¸­ <code>fallback</code> ç”¨æ¥æ˜¾ç¤ºåŠ è½½ä¸­çŠ¶æ€ï¼Œå½“åŠ è½½ç»“æŸåï¼Œä¼šå¸è½½ <code>pending</code> çŠ¶æ€çš„ <code>fallback</code> å†…å®¹ç„¶ååŠ è½½å¼‚æ­¥ç»„ä»¶çš„ç»“æœï¼ˆä¹Ÿå°±æ˜¯ <code>default</code> æ’æ§½å†…çš„å†…å®¹ï¼‰ã€‚å¹¶ä¸”åªæœ‰å½“ <code>default</code> æ’æ§½å†…çš„ <strong>æ ¹èŠ‚ç‚¹å‘ç”Ÿæ”¹å˜æ—¶</strong>ï¼Œæ‰ä¼šé‡æ–°è§¦å‘åŠ è½½ä¸­çŠ¶æ€ã€‚</p>
<p>æ‰€ä»¥å®ƒçš„å¤„ç†è¿‡ç¨‹å°±æ˜¯ <strong>é¦–æ¬¡è§£ææ—¶ä¼šé‡æ–°åˆ›å»º <code>default</code> ä¸ <code>fallback</code> ä¸¤ä¸ªæ’æ§½ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯ï¼Œç„¶åæ ¹æ® <code>default</code> æ’æ§½ä¸­çš„å†…å®¹åŠ è½½çŠ¶æ€ï¼Œæ¥ç¡®å®šå½“å‰æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œå¹¶ä¸”ä¼šæŠ›å‡ºç›¸åº”çš„äº‹ä»¶</strong>ã€‚</p>
<blockquote>
<p>è¿™ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹å„¿å¤æ‚ï¼Œä»¥åå†è¯¦ç»†çš„è§£æå§~</p>
</blockquote>
<h3 id="processComponent-ç»„ä»¶å¤„ç†"><a href="#processComponent-ç»„ä»¶å¤„ç†" class="headerlink" title="processComponent ç»„ä»¶å¤„ç†"></a>processComponent ç»„ä»¶å¤„ç†</h3><p>å¯¹ <code>Component</code> è‡ªå®šä¹‰ Vue ç»„ä»¶çš„å¤„ç†ï¼ŒåŒæ ·ä¼šåŒºåˆ† <code>n1 == null</code> çš„æƒ…å†µæ¥ç¡®è®¤æ˜¯æŒ‚è½½è¿˜æ˜¯æ›´æ–°ï¼›Vue ä¸­å†…ç½®çš„ <code>KeepAliveã€Translation</code> ç­‰ç»„ä»¶ä¹Ÿä¸€æ ·ä¼šåœ¨è¿™é‡Œè¿›è¡Œå¤„ç†ã€‚</p>
<p>å¦‚æœæ˜¯ <code>KeepAlive</code> ç»„ä»¶ä¸­åŒ…è£…çš„ç»„ä»¶ï¼Œä¼šè®¾ç½®æ ‡å¿—ä½ <code>shapeFlag</code> ä¸º <code>ShapeFlags.COMPONENT_KEPT_ALIVEï¼ˆ1 &lt;&lt; 9 = 512ï¼‰</code>ï¼Œå› ä¸º <code>KeepAlive</code> ä¸­çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ï¼Œå¦‚æœå†æ¬¡åˆ‡æ¢çš„è¯ï¼Œéœ€è¦æ¢å¤ç¼“å­˜çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨ç»„ä»¶é‡æ–° <strong>æŒ‚è½½</strong> æ—¶ä¼šæ‰§è¡Œå¦å¤–çš„é€»è¾‘ <code>parent.ctx.activate()</code>ï¼›é <code>KeepAlive</code> åŒ…è£¹çš„ç»„ä»¶åˆ™ç›´æ¥è°ƒç”¨ <code>mountComponent</code> æ‰§è¡Œç»„ä»¶æŒ‚è½½ã€‚</p>
<p>è€Œç»„ä»¶ <strong>æ›´æ–°</strong> æ—¶ï¼Œåˆ™åªéœ€è¦ç›´æ¥è°ƒç”¨ <code>updateComponent</code> æ›´æ–°ç»„ä»¶å†…å®¹ã€‚</p>
<p>åœ¨ <code>mountComponent</code> è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹è¯¥ç»„ä»¶ç”Ÿæˆçš„ <code>VNode</code> è¿›è¡Œè°ƒæ•´ï¼Œé€šè¿‡ <code>createComponentInstance</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <strong>ç»„ä»¶å®ä¾‹</strong> æ›´æ–°åˆ° <code>VNode</code> å¯¹è±¡çš„ <code>component</code> å±æ€§ä¸Šï¼Œæœ€åé€šè¿‡ <code>setupRenderEffect</code> è®¾ç½®ä¸€ä¸ª <code>renderEffect</code>ï¼ˆå³å°†ç»„ä»¶çš„æ¸²æŸ“ä½œä¸ºå‰¯ä½œç”¨å‡½æ•°ï¼‰ï¼Œè¿›è¡Œç»„ä»¶æ¨¡æ¿ä¸­çš„æ•°æ®ä¾èµ–æ”¶é›†ï¼Œå¹¶æ‰§è¡Œä¸€æ¬¡å‰¯ä½œç”¨å‡½æ•°å®ç°ç»„ä»¶çš„é¦–æ¬¡æ¸²æŸ“ï¼ˆæ•°æ®æ›´æ–°æ—¶å°±ä¼šè§¦å‘è¿™ä¸ª <code>renderEffect</code> å†æ¬¡æ‰§è¡Œï¼Œæ›´æ–° domï¼Œç»„ä»¶å®ä¾‹ä¸€æ ·æœ‰ä¸€ä¸ª <code>isMounted</code> å±æ€§ç”¨æ¥åŒºåˆ†æ˜¯é¦–æ¬¡æ¸²æŸ“è¿˜æ˜¯æ›´æ–°ï¼‰ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼Œæœ‰ä¸€ä¸ªå¤šæ ¹ç»„ä»¶ <code>FragmentOne</code>ï¼Œåœ¨å¼•å…¥åˆ° <code>App.vue</code> ä¸­è¿›è¡Œè§£æçš„æ—¶å€™ï¼Œä¼šå¯¹ <code>FragmentOne</code> åˆ›å»ºä¸€ä¸ª <code>VNode</code> å¯¹è±¡ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640792" alt="image-20230330141119632"></p>
<blockquote>
<p>è¿™ä¸ªç»„ä»¶å› ä¸ºæ˜¯ç›´æ¥ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä¼šç›´æ¥è°ƒç”¨ <code>mountComponent</code> æ–¹æ³•ã€‚</p>
</blockquote>
<p>æ­¤æ—¶ä¼šè°ƒç”¨ <code>createComponentInstance</code> ä¸º <code>VNode</code> å¯¹è±¡åˆ›å»ºä¸€ä¸ªç»„ä»¶å®ä¾‹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640793" alt="image-20230330141457207"></p>
<p>ç„¶åé€šè¿‡ <code>setupRenderEffect</code> åˆ›å»ºæ¸²æŸ“å‡½æ•°å‰¯ä½œç”¨ã€‚åœ¨è¿™ä¸ªå‰¯ä½œç”¨å‡½æ•°ä¸­ï¼Œå®ƒå¯¹åº”çš„æ‰§è¡Œå‡½æ•°å°±æ˜¯ç»„ä»¶çš„è§£æä¸æ›´æ–°å‡½æ•°ï¼š<code>componentUpdateFn</code>ã€‚åœ¨ <strong>éSSR</strong> é¡¹ç›®ä¸­ï¼Œä¼šé€šè¿‡ <code>renderComponentRoot(instance)</code> å¯¹ç»„ä»¶å†…å®¹è¿›è¡Œè§£æï¼Œå¾—åˆ°ä¸€ä¸ªç»„ä»¶å†…å®¹å¯¹åº”çš„æ ‡å‡†æ ¼å¼å­å…ƒç´  <code>VNode</code> å¯¹è±¡â€”â€” <code>subTree</code>ï¼Œæœ€åä¼šé€šè¿‡ <code>patch</code> å¯¹ <code>subTree</code> è¿›è¡Œè§£æå’Œæ›´æ–°ã€‚</p>
<blockquote>
<p>å½“ç„¶é¦–æ¬¡æŒ‚è½½çš„è¿‡ç¨‹ä¸­è¿˜ä¼šå¯¹ä¸€äº›å±æ€§è¿›è¡Œå¤„ç†ï¼Œä¿è¯åç»­è¿›è¡Œæ›´æ–°æ—¶èƒ½æ­£å¸¸å¯¹æ¯”ã€‚</p>
</blockquote>
<p>è€Œåœ¨æ›´æ–°é˜¶æ®µï¼Œ<strong>é¦–å…ˆä¼šé€šè¿‡ <code>shouldUpdateComponent</code> æ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ <code>props</code> å‚æ•°ã€<code>slots</code> æ’æ§½å†…å®¹ç­‰æ˜¯å¦æ”¹å˜ï¼‰æ¥ç¡®å®šæ˜¯å¦éœ€è¦å¯¹è¯¥ç»„ä»¶è¿›è¡Œå…¨é‡æ›´æ–°</strong>ï¼Œå¦‚æœéƒ½æ²¡æ”¹å˜åˆ™ç›´æ¥ç»§æ‰¿åŸæ¥çš„ dom èŠ‚ç‚¹å’Œ <code>VNode</code> å¯¹è±¡ã€‚</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640794" alt="image-20230330163221643"></p>
<h3 id="processElement-HTMLå…ƒç´ å¤„ç†"><a href="#processElement-HTMLå…ƒç´ å¤„ç†" class="headerlink" title="processElement HTMLå…ƒç´ å¤„ç†"></a>processElement HTMLå…ƒç´ å¤„ç†</h3><p>åœ¨è§£ææ¨¡æ¿ç”Ÿæˆ <code>VNode</code> çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰æŒ‡å®šèŠ‚ç‚¹ç±»å‹æ˜¯é»˜è®¤éƒ½ä¼šè®¾ç½® <code>shapeFlag</code> ä¸º <code>ShapeFlags.ELEMENT</code> ï¼ˆ512ï¼‰ï¼Œä¹Ÿå°±æ˜¯åŸç”Ÿçš„ HTML èŠ‚ç‚¹ç±»å‹ï¼›å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬æ‰€è¯´çš„ diff ç®—æ³•æ ¸å¿ƒéƒ¨åˆ†ä¹Ÿå‘ç”Ÿåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ã€‚</p>
<p>ä¸ <code>processComponent</code> ç±»ä¼¼ï¼Œ<code>Element</code> å…ƒç´ çš„å¤„ç†ä¸»è¦ä¹ŸåªåŒºåˆ† <code>oldVnode</code> ï¼ˆä¹Ÿå°±æ˜¯æ–¹æ³•ä¸­çš„ <code>n1</code>ï¼‰æ˜¯å¦ä¸º <code>null</code>ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä»£è¡¨æ˜¯é¦–æ¬¡æ¸²æŸ“ï¼›å¦‚æœä¸æ˜¯ï¼Œåˆ™ä»£è¡¨æ˜¯å¯¹è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œæ›´æ–°ã€‚</p>
<p>æ ¹æ®è¿™ä¸¤ç§æƒ…å†µï¼Œæºç ä¸­åˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<code>mountElement</code> æŒ‚è½½èŠ‚ç‚¹ã€<code>patchElement</code> æ›´æ–°èŠ‚ç‚¹ã€‚</p>
<p><code>mountElement</code> çš„è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒåŒ…å«äº†æ ¹èŠ‚ç‚¹ï¼ˆè¿™ä¸ªå…ƒç´ èŠ‚ç‚¹ï¼‰åˆ›å»ºã€å†…å®¹ï¼ˆæ–‡æœ¬è¿˜æ˜¯åŒ…å«å­èŠ‚ç‚¹ï¼‰å¤„ç†ã€æ ·å¼å’Œç±»åç»‘å®šã€è‡ªå®šä¹‰æŒ‡ä»¤ã€ç”Ÿå‘½å‘¨æœŸç›‘å¬ç­‰ã€‚</p>
<p>è€Œ <code>patchElement</code> çš„è¿‡ç¨‹ä¹ŸåŒæ ·å¤æ‚ï¼Œé™¤äº†ä¸ <code>mount</code> é˜¶æ®µä¸€æ ·éœ€è¦å¤„ç†æ ·å¼ç±»åç»‘å®šã€è‡ªå®šä¹‰æŒ‡ä»¤ç­‰å†…å®¹ä¹‹å¤–ï¼Œè¿˜è¦æ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹å†…å®¹è¿›è¡Œ <code>patch</code> ç›¸å…³æ›´æ–°å‡½æ•°çš„å¤„ç†ã€‚</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640795" alt="image-20230330180756383"></p>
<h2 id="patchChildren-ä¸¤ç§å­èŠ‚ç‚¹-Diff-æ–¹å¼"><a href="#patchChildren-ä¸¤ç§å­èŠ‚ç‚¹-Diff-æ–¹å¼" class="headerlink" title="patchChildren - ä¸¤ç§å­èŠ‚ç‚¹ Diff æ–¹å¼"></a>patchChildren - ä¸¤ç§å­èŠ‚ç‚¹ Diff æ–¹å¼</h2><p>åœ¨ä¸Šé¢çš„ä¸åŒç±»å‹çš„ <code>VNode</code> èŠ‚ç‚¹çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œè‡ªå®šä¹‰ç»„ä»¶ <code>Component</code>ã€ä¼ é€ç»„ä»¶ <code>Teleport</code>ã€å¤šæ ¹èŠ‚ç‚¹ <code>Fragment</code> å’Œ åŸå§‹ HTML èŠ‚ç‚¹ <code>Element</code> åœ¨ <code>patch</code> æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œ<strong>åœ¨å¤„ç†å­èŠ‚ç‚¹æ—¶</strong> éƒ½æœ‰å¯èƒ½ä¼šè°ƒç”¨ <code>patchChildren</code> æ¥å¤„ç†å­èŠ‚ç‚¹çš„æ›´æ–°ã€‚</p>
<blockquote>
<p>å­èŠ‚ç‚¹æ›´æ–°çš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼š<code>patchBlockChildren</code> å’Œ <code>patchChildren</code>ï¼Œå…¶ä¸­ <code>patchBlockChildren</code> ä¸€èˆ¬æ˜¯åœ¨ <strong>åŠ¨æ€èŠ‚ç‚¹ <code>dynamicChildren</code></strong> ç¡®å®šæ—¶è°ƒç”¨ï¼Œå†…éƒ¨ä¼šç›´æ¥ <strong>æŒ‰ç…§æ–°çš„èŠ‚ç‚¹çš„åŠ¨æ€å­èŠ‚ç‚¹ <code>dynamicChildren</code> æ•°ç»„çš„é•¿åº¦ï¼Œéå†å­èŠ‚ç‚¹æ•°ç»„å¹¶é€šè¿‡ <code>patch</code> æ–¹æ³•å¯¹æ¯”æ—§çš„å­èŠ‚ç‚¹æ•°ç»„åŒä½ç½®å…ƒç´ </strong>ã€‚</p>
<p>è€Œ <code>patchChildren</code> åˆ™æ˜¯åœ¨èŠ‚ç‚¹ä¸å­˜åœ¨ <code>dynamicChildren</code> æ—¶å¯¹æ‰€æœ‰å­èŠ‚ç‚¹æ•°ç»„è¿›è¡Œå…¨é‡çš„å¯¹æ¯”æ›´æ–°ã€‚</p>
<p><em>å…³äº <code>block</code> å’Œ <code>PatchFlags</code> çš„ç›¸å…³å†…å®¹ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹ ã€ŠVue.js è®¾è®¡ä¸å®ç°ã€‹ä¸€ä¹¦çš„ç¬¬åä¸ƒç« ç¬¬ä¸€èŠ‚ï¼šç¼–è¯‘ä¼˜åŒ– - åŠ¨æ€èŠ‚ç‚¹æ”¶é›†ä¸è¡¥ä¸æ ‡å¿—</em>ã€‚</p>
</blockquote>
<p>åœ¨ <code>patchChildren</code> è¿‡ç¨‹ä¸­ï¼Œä¼šåˆ¤æ–­èŠ‚ç‚¹çš„ <code>patchFlag</code> æ ‡å¿—ä½ï¼Œæ¥ç¡®å®š <strong>å­èŠ‚ç‚¹æ•°ç»„æ˜¯å¦é…ç½®äº† <code>key</code> å±æ€§</strong>ã€‚å¦‚æœ <strong>å­˜åœ¨ key</strong>ï¼Œåˆ™ä¼šé€šè¿‡ <code>patchKeyedChildren</code> å¯¹ <strong>æ–°æ—§æ‰€æœ‰å­èŠ‚ç‚¹è¿›è¡Œ <code>diff</code> å¤„ç†ï¼Œè¯¦ç»†å¯¹æ¯”å¯å¤ç”¨èŠ‚ç‚¹å¹¶è°ƒç”¨ <code>patch</code> è¿›è¡ŒèŠ‚ç‚¹çš„æœ€å°é‡æ›´æ–°</strong>ï¼›è€Œå¯¹äº <strong>ä¸å­˜åœ¨ key</strong> çš„å­èŠ‚ç‚¹æ•°ç»„ï¼Œåˆ™è°ƒç”¨ <code>patchUnkeyedChildren</code> æ–¹æ³• <strong>æŒ‰ç…§æ–°æ—§å­èŠ‚ç‚¹æ•°ç»„ä¸­çš„æœ€å°é•¿åº¦ï¼Œéå†æœ€å°é•¿åº¦ä¸‹ æ–°æ—§èŠ‚ç‚¹åŒä½ç½®çš„å…ƒç´ è°ƒç”¨ <code>patch</code> æ–¹æ³•è¿›è¡Œå¯¹æ¯”ï¼Œéå†ç»“æŸååœ¨å¤„ç†å‰©ä½™èŠ‚ç‚¹å…ƒç´ ï¼ˆæ–°çš„æŒ‚è½½æ—§çš„ç§»é™¤ï¼‰</strong>ã€‚</p>
<h3 id="1ã€patchUnkeyedChildren-æ— -key-å­èŠ‚ç‚¹å¤„ç†"><a href="#1ã€patchUnkeyedChildren-æ— -key-å­èŠ‚ç‚¹å¤„ç†" class="headerlink" title="1ã€patchUnkeyedChildren - æ—  key å­èŠ‚ç‚¹å¤„ç†"></a>1ã€patchUnkeyedChildren - æ—  key å­èŠ‚ç‚¹å¤„ç†</h3><p>ä¸Šé¢è¯´äº† <code>patchUnkeyedChildren</code> ä¼šæŒ‰ç…§æ–°æ—§å­èŠ‚ç‚¹æ•°ç»„çš„ <strong>æœ€å°é•¿åº¦</strong> è¿›è¡Œéå†ï¼Œæ‰€ä»¥é¦–å…ˆä¼šè·å–ä»–ä»¬çš„é•¿åº¦è¿›è¡Œå¯¹æ¯”å¾—åˆ°è¾ƒå°çš„é‚£ä¸ª <code>length</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c1 = c1 || <span class="variable constant_">EMPTY_ARR</span></span><br><span class="line">c2 = c2 || <span class="variable constant_">EMPTY_ARR</span></span><br><span class="line"><span class="keyword">const</span> oldLength = c1.<span class="property">length</span></span><br><span class="line"><span class="keyword">const</span> newLength = c2.<span class="property">length</span></span><br><span class="line"><span class="keyword">const</span> commonLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(oldLength, newLength)</span><br></pre></td></tr></table></figure>

<p>ç„¶åé€šè¿‡è¿™ä¸ªæœ€å°é•¿åº¦ <code>commonLength</code> æ¥è¿›è¡Œéå†ï¼Œå¤„ç† <strong>æ–°æ—§æ•°ç»„çš„åŒä½ç½®çš„å­èŠ‚ç‚¹</strong>ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">let</span> i</span></span><br><span class="line"><span class="function"><span class="title">for</span> (<span class="params">i = <span class="number">0</span>; i &lt; commonLength; i++</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nextChild = (c2[i] = optimized</span><br><span class="line">    ? cloneIfMounted(c2[i] <span class="keyword">as</span> VNode)</span><br><span class="line">    : normalizeVNode(c2[i]))</span><br><span class="line">  patch(c1[i], nextChild, container, ... )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€ååœ¨å¤„ç†å‰©ä½™å…ƒç´ ï¼Œç§»é™¤æ—§çš„æ·»åŠ æ–°çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (oldLength &gt; newLength) &#123;</span><br><span class="line">  <span class="comment">// remove old</span></span><br><span class="line">  <span class="title function_">unmountChildren</span>(c1, ... , commonLength)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// mount new</span></span><br><span class="line">  <span class="title function_">mountChildren</span>(c2, ..., commonLength)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">unmountChildren</span> = (<span class="params">children, ... , start = <span class="number">0</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; children.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="title function_">unmount</span>(children[i], ...)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mountChildren</span> = (<span class="params">children, container, ... , start = <span class="number">0</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; children.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> child = (children[i] = optimized</span><br><span class="line">      ? <span class="title function_">cloneIfMounted</span>(children[i] <span class="keyword">as</span> <span class="title class_">VNode</span>)</span><br><span class="line">      : <span class="title function_">normalizeVNode</span>(children[i]))</span><br><span class="line">    <span class="title function_">patch</span>(<span class="literal">null</span>,child,container, ...)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å› ä¸ºä¸å­˜åœ¨ <code>key</code>ï¼Œæ‰€ä»¥æ·±å…¥å¯¹æ¯”æ–°æ—§èŠ‚ç‚¹çš„å˜åŒ–æ›´åŠ æ¶ˆè€—æ€§èƒ½ï¼Œä¸å¦‚ç›´æ¥ <strong>å½“åšä½ç½®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œç›´æ¥æ›´æ–°åŒä½ç½®èŠ‚ç‚¹</strong>ã€‚</p>
</blockquote>
<h3 id="2ã€patchKeyedChildren-æ ¸å¿ƒ-Diff-è¿‡ç¨‹"><a href="#2ã€patchKeyedChildren-æ ¸å¿ƒ-Diff-è¿‡ç¨‹" class="headerlink" title="2ã€patchKeyedChildren - æ ¸å¿ƒ Diff è¿‡ç¨‹"></a>2ã€patchKeyedChildren - æ ¸å¿ƒ Diff è¿‡ç¨‹</h3><p>å½“èŠ‚ç‚¹ <strong>å…·æœ‰ <code>key</code> å±æ€§æ—¶</strong>ï¼ŒèŠ‚ç‚¹æ›´æ–°æ—¶å°±ä¼šè¿›è¡Œæˆ‘ä»¬å¸¸è¯´çš„ diff è¿‡ç¨‹ï¼Œæ ¸å¿ƒä¹Ÿå°±æ˜¯ä¸ºäº† <strong>dom èŠ‚ç‚¹å¤ç”¨</strong>ï¼ŒæŠŠç›¸åŒ <code>key</code> å±æ€§çš„èŠ‚ç‚¹è§†ä¸ºåŒä¸€èŠ‚ç‚¹ï¼Œæ ¹æ®å±æ€§çš„å®é™…å˜åŒ–æ¥æ›´æ–°å…·ä½“çš„ dom å±æ€§ï¼Œä»¥è¾¾åˆ°æœ€å°‘æ“ä½œçš„ç›®çš„ã€‚</p>
<p>åœ¨ Vue 2 ä¸­ï¼Œå¯¹äºè¿™ç§æƒ…å†µé‡‡ç”¨çš„æ˜¯ <strong>åŒç«¯å¯¹æ¯”ç®—æ³•</strong> æ¥å®Œæˆ <strong>æ–°æ—§èŠ‚ç‚¹æ•°ç»„çš„å…¨é‡å¯¹æ¯”</strong>ï¼Œ<strong>ä½†æ˜¯è¿™ç§æ–¹æ³•ä¸æ˜¯æœ€å¿«çš„</strong>ã€‚</p>
<p>Vue 3 åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå€Ÿé‰´äº† <code>ivi</code> å’Œ <code>inferno</code> ä¸¤ä¸ªæ¡†æ¶æ‰€ç”¨åˆ°çš„ <strong>å¿«é€Ÿ Diff ç®—æ³•</strong>ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•ï¼Œå¾—åˆ°äº†å¦‚ä»Šæºç ä¸­ä½¿ç”¨çš„ <code>diff</code> ç®—æ³•ã€‚</p>
<p>å› ä¸ºæºç æ¯”è¾ƒé•¿ï¼Œæˆ‘å°†è¿‡ç¨‹ç®€åŒ–åä»¥ä¸¤ä¸ªå­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œæ¯”è¾ƒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#process&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isSameVNodeType</span> = (<span class="params">n1, n2</span>) =&gt; (n1 === n2);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">unmount</span> = (<span class="params">node</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;unmount&#x27;</span>, node);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">patch</span> = (<span class="params">n1, n2</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;patch&#x27;</span>, n1, n2);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">move</span> = (<span class="params">node, anchor</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;move&#x27;</span>, node, <span class="string">&#x27;anchor&#x27;</span>, anchor);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://en.wikipedia.org/wiki/Longest_increasing_subsequence</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getSequence</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p = arr.<span class="title function_">slice</span>();</span><br><span class="line">  <span class="keyword">const</span> result = [<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> i;<span class="keyword">let</span> j;<span class="keyword">let</span> u;<span class="keyword">let</span> v;<span class="keyword">let</span> c;</span><br><span class="line">  <span class="keyword">const</span> len = arr.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>;i &lt; len;i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> arrI = arr[i];</span><br><span class="line">    <span class="keyword">if</span> (arrI !== <span class="number">0</span>) &#123;</span><br><span class="line">      j = result[result.<span class="property">length</span> - <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &lt; arrI) &#123;</span><br><span class="line">        p[i] = j;</span><br><span class="line">        result.<span class="title function_">push</span>(i);</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      u = <span class="number">0</span>;</span><br><span class="line">      v = result.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">while</span> (u &lt; v) &#123;</span><br><span class="line">        c = (u + v) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (arr[result[c]] &lt; arrI) &#123;</span><br><span class="line">          u = c + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          v = c;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (arrI &lt; arr[result[u]]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (u &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          p[i] = result[u - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        result[u] = i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  u = result.<span class="property">length</span>;</span><br><span class="line">  v = result[u - <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">while</span> (u-- &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    result[u] = v;</span><br><span class="line">    v = p[v];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£å¼å¼€å§‹</span></span><br><span class="line"><span class="comment">// å®šä¹‰æ–°æ—§èŠ‚ç‚¹æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> c1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> c2 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> l2 = c2.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">let</span> e1 = c1.<span class="property">length</span> - <span class="number">1</span>; <span class="comment">// prev ending index</span></span><br><span class="line"><span class="keyword">let</span> e2 = l2 - <span class="number">1</span>; <span class="comment">// next ending index</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. sync from start</span></span><br><span class="line"><span class="keyword">while</span> (i &lt;= e1 &amp;&amp; i &lt;= e2) &#123;</span><br><span class="line">  <span class="keyword">const</span> n1 = c1[i];</span><br><span class="line">  <span class="keyword">const</span> n2 = c2[i];</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isSameVNodeType</span>(n1, n2)) &#123;</span><br><span class="line">    <span class="title function_">patch</span>(n1, n2);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. sync from end</span></span><br><span class="line"><span class="keyword">while</span> (i &lt;= e1 &amp;&amp; i &lt;= e2) &#123;</span><br><span class="line">  <span class="keyword">const</span> n1 = c1[e1];</span><br><span class="line">  <span class="keyword">const</span> n2 = c2[e2];</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isSameVNodeType</span>(n1, n2)) &#123;</span><br><span class="line">    <span class="title function_">patch</span>(n1, n2);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  e1--;</span><br><span class="line">  e2--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. common sequence + mount</span></span><br><span class="line"><span class="keyword">if</span> (i &gt; e1) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i &lt;= e2) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextPos = e2 + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= e2) &#123;</span><br><span class="line">      <span class="title function_">patch</span>(<span class="literal">null</span>, c2[i]);</span><br><span class="line">      i++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. common sequence + unmount</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (i &gt; e2) &#123;</span><br><span class="line">  <span class="keyword">while</span> (i &lt;= e1) &#123;</span><br><span class="line">    <span class="title function_">unmount</span>(c1[i]);</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. unknown sequence</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s1 = i; <span class="comment">// prev starting index</span></span><br><span class="line">  <span class="keyword">const</span> s2 = i; <span class="comment">// next starting index</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5.1 build key:index map for newChildren</span></span><br><span class="line">  <span class="keyword">const</span> keyToNewIndexMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (i = s2;i &lt;= e2;i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextChild = c2[i];</span><br><span class="line">    <span class="keyword">if</span> (nextChild != <span class="literal">null</span>) &#123;</span><br><span class="line">      keyToNewIndexMap.<span class="title function_">set</span>(nextChild, i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5.2 loop through old children left to be patched and try to patch</span></span><br><span class="line">  <span class="comment">// matching nodes &amp; remove nodes that are no longer present</span></span><br><span class="line">  <span class="keyword">let</span> j;</span><br><span class="line">  <span class="keyword">let</span> patched = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> toBePatched = e2 - s2 + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> moved = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> maxNewIndexSoFar = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> newIndexToOldIndexMap = <span class="keyword">new</span> <span class="title class_">Array</span>(toBePatched);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>;i &lt; toBePatched;i++) &#123;</span><br><span class="line">    newIndexToOldIndexMap[i] = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i = s1;i &lt;= e1;i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> prevChild = c1[i];</span><br><span class="line">    <span class="keyword">if</span> (patched &gt;= toBePatched) &#123;</span><br><span class="line">      <span class="comment">// all new children have been patched so this can only be a removal</span></span><br><span class="line">      <span class="title function_">unmount</span>(prevChild);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newIndex;</span><br><span class="line">    <span class="keyword">if</span> (prevChild != <span class="literal">null</span>) &#123;</span><br><span class="line">      newIndex = keyToNewIndexMap.<span class="title function_">get</span>(prevChild);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// key-less node, try to locate a key-less node of the same type</span></span><br><span class="line">      <span class="keyword">for</span> (j = s2;j &lt;= e2;j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          newIndexToOldIndexMap[j - s2] === <span class="number">0</span> &amp;&amp;</span><br><span class="line">            <span class="title function_">isSameVNodeType</span>(prevChild, c2[j])</span><br><span class="line">        ) &#123;</span><br><span class="line">          newIndex = j;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (newIndex === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="title function_">unmount</span>(prevChild);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      newIndexToOldIndexMap[newIndex - s2] = i + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (newIndex &gt;= maxNewIndexSoFar) &#123;</span><br><span class="line">        maxNewIndexSoFar = newIndex;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        moved = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">patch</span>(prevChild, c2[newIndex]);</span><br><span class="line">      patched++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5.3 move and mount</span></span><br><span class="line">  <span class="keyword">const</span> increasingNewIndexSequence = moved ? <span class="title function_">getSequence</span>(newIndexToOldIndexMap) : [];</span><br><span class="line">  j = increasingNewIndexSequence.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (i = toBePatched - <span class="number">1</span>;i &gt;= <span class="number">0</span>;i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextIndex = s2 + i;</span><br><span class="line">    <span class="keyword">const</span> nextChild = c2[nextIndex];</span><br><span class="line">    <span class="keyword">const</span> anchor = nextIndex + <span class="number">1</span> &lt; l2 ? c2[nextIndex + <span class="number">1</span>] : <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (newIndexToOldIndexMap[i] === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// mount new</span></span><br><span class="line">      <span class="title function_">patch</span>(<span class="literal">null</span>, nextChild);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (moved) &#123;</span><br><span class="line">      <span class="keyword">if</span> (j &lt; <span class="number">0</span> || i !== increasingNewIndexSequence[j]) &#123;</span><br><span class="line">        <span class="comment">// move(nextChild, container, anchor, MoveType.REORDER)</span></span><br><span class="line">        <span class="title function_">move</span>(nextChild, anchor);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        j--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™æ®µä»£ç å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å°è¿è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŸ¥çœ‹æ–‡ç« ç»“å°¾çš„ä»£ç ç‰‡æ®µï¼ˆä¼šæ›´æ–°ç»†èŠ‚é—®é¢˜ï¼‰ã€‚</p>
</blockquote>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„èŠ‚ç‚¹å˜åŒ–ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ—§èŠ‚ç‚¹ï¼š<span class="selector-attr">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span></span><br><span class="line"></span><br><span class="line">æ–°èŠ‚ç‚¹ï¼š<span class="selector-attr">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span></span><br></pre></td></tr></table></figure>

<p>ç»è¿‡çš„ diff è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640796" alt="image-20230331161318471"></p>
<p>å…¶ä¸­å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå¤§çš„æ­¥éª¤ï¼š</p>
<ol>
<li><strong>ä»å¤´å¼€å§‹ã€åŒä½ç½®æ¯”è¾ƒ</strong>ï¼Œç›´åˆ° <strong>é‡åˆ° <code>key</code> ä¸ä¸€æ ·çš„èŠ‚ç‚¹</strong>ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸‰ä½ <code>c</code> å’Œ <code>e</code>ï¼Œæ­¤æ—¶ <code>i</code> &#x3D; 2ï¼‰</li>
<li><strong>ä»å°¾å¼€å§‹ã€å€’åºåŒä½ç½®æ¯”è¾ƒ</strong>ï¼Œç›´åˆ° <strong>é‡åˆ° <code>key</code> ä¸ä¸€æ ·çš„èŠ‚ç‚¹æˆ–è€…ç¬¬ä¸€æ­¥çš„åœæ­¢ä½ <code>i</code></strong>ï¼ˆä¹Ÿå°±æ˜¯é‡åˆ°å€’æ•°ç¬¬ä¸‰ä½ <code>e</code> å’Œ <code>h</code>ï¼Œæ­¤æ—¶ <code>e1</code> å’Œ <code>e2</code> éƒ½ç­‰äº 4ï¼‰</li>
<li>ç»è¿‡å‰ä¸¤æ­¥ä¹‹åï¼Œå‰©ä¸‹çš„èŠ‚ç‚¹è™½ç„¶æœ‰ç›¸åŒèŠ‚ç‚¹ï¼Œä½†æ˜¯é¡ºåºå·²ç»æ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦é‡æ–°å¤„ç†ã€‚è¿™é‡Œä¸ Vue 2 ä¸­çš„ <strong>åŒç«¯å‡ä¸ç›¸åŒ</strong> çš„æƒ…å†µæœ‰äº›ç±»ä¼¼çš„è¿‡ç¨‹ï¼Œéƒ½ä¼šå°†ä¸€ä¸ªèŠ‚ç‚¹æ•°ç»„è½¬ä¸º <code>map</code> å½¢å¼ç„¶åéå†å¦ä¸€ä¸ªæ•°ç»„è¿›è¡ŒåŒ¹é…å’Œæ›´æ–°ã€‚ä½†æ˜¯è¿™é‡Œä¹Ÿä¸€æ ·æœ‰ä¸€äº›ä¸åŒï¼Œæˆ‘ä»¬åœ¨åé¢åˆ†ææ—¶è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</li>
</ol>
<blockquote>
<p>è¿™é‡Œå¯ä»¥å‘ç° <strong>å®é™…æ‰§è¡Œè¿‡ç¨‹å¹¶æ²¡æœ‰å®Œå…¨åŒ¹é…ä»£ç ä¸­çš„ 5 ç§æƒ…å†µ</strong>ï¼Œè¿™æ˜¯å› ä¸º <strong>ä¸‰å’Œå››è¿™ä¸¤ç§æƒ…å†µéƒ½æ˜¯å‘ç”Ÿåœ¨å‰ä¸¤æ­¥ç»“æŸåå·²ç»æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ•°ç»„å·²ç»å…¨éƒ¨éå†å®Œæ¯•</strong>ã€‚</p>
</blockquote>
<h3 id="å¿«é€Ÿ-Diff-ç®—æ³•"><a href="#å¿«é€Ÿ-Diff-ç®—æ³•" class="headerlink" title="å¿«é€Ÿ Diff ç®—æ³•"></a>å¿«é€Ÿ Diff ç®—æ³•</h3><p>åœ¨åˆ†æ diff ç®—æ³•ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹è¿™ä¸ª <strong>å¿«é€Ÿ diff ç®—æ³•</strong> çš„â€œå¿«é€Ÿâ€ä¸»è¦æ˜¯ä½“ç°åœ¨å“ªä¸ªæ–¹é¢ã€‚</p>
<p>æ ¹æ®ã€ŠVue.js è®¾è®¡ä¸å®ç°ã€‹çš„è¯´æ˜ï¼š<strong>å¿«é€Ÿ Diff ç®—æ³•åŒ…å«é¢„å¤„ç†æ­¥éª¤ï¼Œè¿™å…¶å®æ˜¯å€Ÿé‰´äº†çº¯æ–‡æœ¬ Diff ç®—æ³•çš„æ€è·¯ã€‚åœ¨çº¯æ–‡æœ¬ Diff ç®—æ³•ä¸­ï¼Œå­˜åœ¨å¯¹ä¸¤æ®µæ–‡æœ¬è¿›è¡Œé¢„å¤„ç†çš„è¿‡ç¨‹</strong>ã€‚</p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼š <strong>åˆ†åˆ«æŸ¥æ‰¾å¤´éƒ¨å®Œå…¨ä¸€è‡´çš„å†…å®¹ä¸å°¾éƒ¨å®Œå…¨ä¸€è‡´çš„å†…å®¹ï¼Œå°†å…¶æ’é™¤åå†æ¯”è¾ƒå‰©ä½™å†…å®¹</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640797" alt="image-20230331165142312"></p>
<p>ä¸¤æ®µæ–‡æœ¬ä¸­åªéœ€è¦æ›´æ–°çš„ä»…ä»…åªæœ‰ä¸­é—´éƒ¨åˆ†ï¼Œéœ€è¦å°† <code>vue</code> æ”¹ä¸º <code>react</code>ã€‚</p>
<p><em>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥è¿™ä¸ªä¾‹å­è¿›è¡Œæ•´ä¸ª diff è¿‡ç¨‹çš„è§£æ~</em></p>
<h3 id="1ã€-ä»å¤´æŸ¥æ‰¾æœ€é•¿ç›¸åŒ-key-èŠ‚ç‚¹"><a href="#1ã€-ä»å¤´æŸ¥æ‰¾æœ€é•¿ç›¸åŒ-key-èŠ‚ç‚¹" class="headerlink" title="1ã€ ä»å¤´æŸ¥æ‰¾æœ€é•¿ç›¸åŒ key èŠ‚ç‚¹"></a>1ã€ ä»å¤´æŸ¥æ‰¾æœ€é•¿ç›¸åŒ key èŠ‚ç‚¹</h3><p>æˆ‘ä»¬å‡è®¾ç°åœ¨æœ‰è¿™æ ·çš„å†…å®¹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640798" alt="image-20230331170334019"></p>
<p>å®ƒåœ¨ç¬¬ä¸€æ­¥ç»“æŸåï¼Œæ›´æ–°åˆ°äº†ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼›<code>i</code> ä¼šåœç•™åœ¨ç¬¬ä¸€ä¸ªä¸åŒçš„èŠ‚ç‚¹ä½ç½®ã€‚</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640799" alt="image-20230331172031058"></p>
<p>æ­¤æ—¶å‰©ä½™å†…å®¹ä¸ºï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ—§èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span>;</span><br><span class="line">æ–°èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2ã€-ä»å°¾éƒ¨å€’åºæŸ¥æ‰¾æœ€é•¿ç›¸åŒ-key-èŠ‚ç‚¹"><a href="#2ã€-ä»å°¾éƒ¨å€’åºæŸ¥æ‰¾æœ€é•¿ç›¸åŒ-key-èŠ‚ç‚¹" class="headerlink" title="2ã€ ä»å°¾éƒ¨å€’åºæŸ¥æ‰¾æœ€é•¿ç›¸åŒ key èŠ‚ç‚¹"></a>2ã€ ä»å°¾éƒ¨å€’åºæŸ¥æ‰¾æœ€é•¿ç›¸åŒ key èŠ‚ç‚¹</h3><p>åœ¨ç¬¬äºŒæ­¥ç»“æŸä¹‹åï¼Œä¼šè¿›è¡Œè¿™æ ·çš„æ›´æ–°ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640800" alt="image-20230331172957109"></p>
<p>è¿™ä¸€æ­¥ä¸ä¼šå¤„ç† <code>i</code> çš„ä½ç½®ï¼Œè€Œæ˜¯ä»ä¸¤ä¸ªæ•°ç»„çš„æœ€æœ«å°¾èŠ‚ç‚¹ä¾æ¬¡æŒ‰é¡ºåºå¯¹æ¯”åŒä½ç½®èŠ‚ç‚¹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640801" alt="image-20230331173102486"></p>
<h3 id="3ã€-æ—§èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ"><a href="#3ã€-æ—§èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ" class="headerlink" title="3ã€ æ—§èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ"></a>3ã€ æ—§èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ</h3><p>å› ä¸ºæœ€åˆçš„ä¾‹å­ä¸­æ²¡æœ‰è§¦å‘ä»£ç ä¸­çš„ç¬¬ä¸‰ã€å››æ­¥ï¼Œæ‰€ä»¥è¿™é‡Œçš„ä¾‹å­è¿›è¡Œä¸€ä¸‹è°ƒæ•´ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ—§èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span>;</span><br><span class="line">æ–°èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span>;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640802" alt="image-20230331173641313"></p>
<p><img src="https://segmentfault.com/img/remote/1460000043640803" alt="image-20230331175221206"></p>
<p><strong>ä¹Ÿå°±æ˜¯å¯¹æ–°èŠ‚ç‚¹æ•°ç»„å‰©ä½™å…ƒç´ è¿›è¡Œä¾æ¬¡éå†å’ŒæŒ‚è½½</strong></p>
<h3 id="4ã€-æ–°èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ"><a href="#4ã€-æ–°èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ" class="headerlink" title="4ã€ æ–°èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ"></a>4ã€ æ–°èŠ‚ç‚¹æ•°ç»„è¢«éå†ç»“æŸ</h3><blockquote>
<p>ç¬¬ ä¸‰ã€å››ã€äº” ä¸‰ä¸ªæ­¥éª¤å±äº <strong>äº’æ–¥æƒ…å†µ</strong>ï¼Œæ‰€ä»¥æºç ä¸­é‡‡ç”¨çš„æ˜¯ <code>if</code> åˆ¤æ–­</p>
</blockquote>
<p>å› ä¸ºè¿™ä¸‰ä¸ªæƒ…å†µä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥éœ€è¦å¯¹å‰é¢çš„ä¾‹å­å†è¿›è¡Œä¿®æ”¹ï¼Œå‡è®¾æ–°ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ—§èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span>;</span><br><span class="line">æ–°èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>]</span>;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶çš„æ­¥éª¤å°±åˆšå¥½ä¸ç¬¬ä¸‰æ­¥ç›¸åï¼š</p>
<p><img src="https://segmentfault.com/img/remote/1460000043640804" alt="image-20230331180836302"></p>
<p><img src="https://segmentfault.com/img/remote/1460000043640805" alt="image-20230331180324169"></p>
<p><strong>ä¹Ÿå°±æ˜¯å¯¹æ—§èŠ‚ç‚¹æ•°ç»„å‰©ä½™å…ƒç´ è¿›è¡Œä¾æ¬¡éå†å’Œå¸è½½</strong></p>
<h3 id="5ã€-å‰©ä½™èŠ‚ç‚¹å¯¹æ¯”ï¼ˆç§»åŠ¨ã€æ›´æ–°ã€å¸è½½ï¼‰"><a href="#5ã€-å‰©ä½™èŠ‚ç‚¹å¯¹æ¯”ï¼ˆç§»åŠ¨ã€æ›´æ–°ã€å¸è½½ï¼‰" class="headerlink" title="5ã€ å‰©ä½™èŠ‚ç‚¹å¯¹æ¯”ï¼ˆç§»åŠ¨ã€æ›´æ–°ã€å¸è½½ï¼‰"></a>5ã€ å‰©ä½™èŠ‚ç‚¹å¯¹æ¯”ï¼ˆç§»åŠ¨ã€æ›´æ–°ã€å¸è½½ï¼‰</h3><blockquote>
<p>åªæœ‰åœ¨è¿™ä¸€æ­¥æ‰ç”¨åˆ°äº† <strong>æœ€é•¿é€’å¢å­åºåˆ—</strong> ç®—æ³•ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸€æ­¥å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ <strong>æœ€é•¿é€’å¢å­åºåˆ—ç®—æ³•</strong>ã€‚</p>
<h4 id="5-0-æœ€é•¿é€’å¢å­åºåˆ—"><a href="#5-0-æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="5.0 æœ€é•¿é€’å¢å­åºåˆ—"></a>5.0 æœ€é•¿é€’å¢å­åºåˆ—</h4><blockquote>
<p>â€œ<strong>åœ¨ä¸€ä¸ªç»™å®šçš„æ•°å€¼åºåˆ—ä¸­ï¼Œæ‰¾åˆ°ä¸€ä¸ªå­åºåˆ—ï¼Œä½¿å¾—è¿™ä¸ªå­åºåˆ—å…ƒç´ çš„æ•°å€¼ä¾æ¬¡é€’å¢ï¼Œå¹¶ä¸”è¿™ä¸ªå­åºåˆ—çš„é•¿åº¦å°½å¯èƒ½åœ°å¤§ã€‚æœ€é•¿é€’å¢å­åºåˆ—ä¸­çš„å…ƒç´ åœ¨åŸåºåˆ—ä¸­ä¸ä¸€å®šæ˜¯è¿ç»­çš„</strong>â€œã€‚</p>
<p>â€”â€” ç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>å¯¹äºä»¥ä¸‹çš„åŸå§‹åºåˆ—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15</span><br></pre></td></tr></table></figure>

<p>æœ€é•¿é€’å¢å­åºåˆ—ä¸ºï¼š</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”Ÿæˆçš„é€’å¢å­åºåˆ—æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œåœ¨åŸæ•°ç»„ä¸­å¯¹åº”çš„å…ƒç´ ä¸‹æ ‡ä¸ä¸€å®šæ˜¯è¿ç»­çš„ã€‚</p>
<p><img src="/../img/3642183937-e1f201ff7c91ad91_fix732.png" alt="image-20230403093717347"></p>
<p><strong>åœ¨ Vue 3 ä¸­ï¼Œè¿™ä¸ªç®—æ³•è¢«æå–æˆäº†ä¸€ä¸ªå·¥å…·æ–¹æ³• <code>getSequence</code>ï¼Œä½äº <code>renderer.ts</code> æ–‡ä»¶çš„æœ€åº•éƒ¨</strong>ã€‚å¹¶ä¸”ï¼ŒVue 3 ä¸­æœ€è¿™ä¸ªæ–¹æ³•è¿›è¡Œäº†æ”¹é€ ï¼Œæœ€ç»ˆç”Ÿæˆçš„å­åºåˆ— <strong>æ˜¯ä»¥å¯ç”Ÿæˆ <code>æœ€é•¿</code> å­ä¸²æ•°ç»„çš„å¯ç”¨å…ƒç´ çš„ <code>æœ€å¤§ç´¢å¼•</code></strong>ã€‚</p>
<p>å¦‚æœä½¿ç”¨ Vue 3 ä¸­çš„ <code>getSequence</code> æ–¹æ³•æ¥å¤„ç†ä¸Šé¢çš„è¿™ä¸ªåŸå§‹åºåˆ—ï¼Œä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p>
<p>åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<p><img src="/../img/3531219669-039bff1cb42e63a0_fix732.png" alt="image-20230403101532141"></p>
<p><code>getSequence</code> æ–¹æ³•çš„å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¤åˆ¶ä¸€ä»½ <code>arr</code> æ•°ç»„ï¼Œç”¨äºè®°å½•æ¯ä¸ªå…ƒç´ åœ¨é€’å¢å­åºåˆ—ä¸­çš„å‰é©±å…ƒç´ ã€‚</li>
<li>åˆå§‹åŒ– <code>result</code> æ•°ç»„ä¸º <code>[0]</code>ï¼Œç”¨äºè®°å½•é€’å¢å­åºåˆ—çš„ç´¢å¼•ã€‚</li>
<li>éå† <code>arr</code> æ•°ç»„ï¼Œå¦‚æœå½“å‰å…ƒç´ ä¸ä¸º 0ï¼Œåˆ™åœ¨é€’å¢å­åºåˆ— <code>result</code> ä¸­æŸ¥æ‰¾æ¯”å½“å‰å…ƒç´ å°çš„æœ€å¤§å…ƒç´ çš„ç´¢å¼• <code>j</code>ã€‚</li>
<li>å¦‚æœ <code>arr[j] &lt; arr[i]</code>ï¼Œåˆ™å°† <code>p[i]</code> èµ‹å€¼ä¸º <code>j</code>ï¼Œå¹¶å°† <code>i</code> æ·»åŠ åˆ°é€’å¢å­åºåˆ— <code>result</code> ä¸­ã€‚</li>
<li>å¦åˆ™ï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åœ¨é€’å¢å­åºåˆ— <code>result</code> ä¸­æŸ¥æ‰¾æ¯”å½“å‰å…ƒç´ å°çš„æœ€å¤§å…ƒç´ çš„ç´¢å¼• <code>u</code>ã€‚</li>
<li>å¦‚æœ <code>arr[i]</code> å°äº <code>result[u]</code>ï¼Œåˆ™å°† <code>p[i]</code> èµ‹å€¼ä¸º <code>result[u-1]</code>ã€‚</li>
<li>å°† <code>i</code> æ·»åŠ åˆ°é€’å¢å­åºåˆ— <code>result</code> ä¸­ã€‚</li>
<li>é€šè¿‡ <code>p</code> æ•°ç»„å›æº¯é€’å¢å­åºåˆ—ï¼Œç”Ÿæˆæœ€ç»ˆçš„é€’å¢æ–°ç´¢å¼•åºåˆ—ã€‚</li>
</ol>
<h4 id="5-1-æ–°èŠ‚ç‚¹å‰©ä½™å…ƒç´ æ„å»º-Map"><a href="#5-1-æ–°èŠ‚ç‚¹å‰©ä½™å…ƒç´ æ„å»º-Map" class="headerlink" title="5.1 æ–°èŠ‚ç‚¹å‰©ä½™å…ƒç´ æ„å»º Map"></a>5.1 æ–°èŠ‚ç‚¹å‰©ä½™å…ƒç´ æ„å»º Map</h4><p>è¿™ä¸€æ­¥å°±å¾ˆç®€å•äº†ï¼Œç›´æ¥å¾ªç¯ <code>newChildren</code> çš„ <code>i</code> åˆ° <code>e2</code> ä¹‹é—´çš„å‰©ä½™å…ƒç´ ï¼Œç»„æˆä¸€ä¸ª <code>key =&gt; index</code> çš„ <code>Map</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s1 = (s2 = i);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> keyToNewIndexMap = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">for</span> (i = s2;i &lt;= e2;i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> nextChild = c2[i];</span><br><span class="line">  <span class="keyword">if</span> (nextChild != <span class="literal">null</span>) &#123;</span><br><span class="line">    keyToNewIndexMap.<span class="title function_">set</span>(nextChild, i);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-ä¸æ—§èŠ‚ç‚¹çš„å¯¹æ¯”å¤ç”¨"><a href="#5-2-ä¸æ—§èŠ‚ç‚¹çš„å¯¹æ¯”å¤ç”¨" class="headerlink" title="5.2 ä¸æ—§èŠ‚ç‚¹çš„å¯¹æ¯”å¤ç”¨"></a>5.2 ä¸æ—§èŠ‚ç‚¹çš„å¯¹æ¯”å¤ç”¨</h4><p>åœ¨ <code>newChildren</code> çš„å¯¹åº”å…³ç³» <code>keyToNewIndexMap</code> åˆ›å»ºå¥½ä¹‹åï¼Œå°±ä¼šéå† <code>oldChildren</code> å¯¹æ¯” <code>key</code> ç›¸åŒçš„ <code>VNode</code> å®ä¾‹è¿›è¡Œå¤ç”¨å’Œæ›´æ–°ã€‚</p>
<p>è€Œå¯¹äºæ¯”è¾ƒç»“æŸåä¾æ—§å‰©ä½™çš„æ—§èŠ‚ç‚¹åˆ™ç›´æ¥è¿›è¡Œ <code>unmount</code> å¸è½½ï¼ˆå› ä¸ºå‰©ä½™çš„æ—§èŠ‚ç‚¹ <code>key</code> éƒ½ä¸èƒ½å¤ç”¨ï¼Œæ‰€ä»¥ç›´æ¥è§†ä¸ºåºŸå¼ƒèŠ‚ç‚¹ï¼‰ã€‚</p>
<p>ç®€åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> j;</span><br><span class="line"><span class="keyword">let</span> patched = <span class="number">0</span>; <span class="comment">// å·²æ›´æ–°èŠ‚ç‚¹æ•°</span></span><br><span class="line"><span class="keyword">const</span> toBePatched = e2 - s2 + <span class="number">1</span>; <span class="comment">// newChildren å‰©ä½™èŠ‚ç‚¹æ•°ï¼ˆéœ€è¦æ›´æ–°ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> moved = <span class="literal">false</span>; <span class="comment">// èŠ‚ç‚¹ä½ç½®æ˜¯å¦ç§»åŠ¨æ ‡è¯†</span></span><br><span class="line"><span class="keyword">let</span> maxNewIndexSoFar = <span class="number">0</span>; <span class="comment">// å½“å‰å…ƒç´ åœ¨æ–°èŠ‚ç‚¹æ•°ç»„æœ€å¤§ç´¢å¼•</span></span><br><span class="line"><span class="keyword">const</span> newIndexToOldIndexMap = <span class="keyword">new</span> <span class="title class_">Array</span>(toBePatched); <span class="comment">// æ–°æ—§èŠ‚ç‚¹ç´¢å¼•å¯¹åº”å…³ç³»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>;i &lt; toBePatched;i++) &#123;</span><br><span class="line">  newIndexToOldIndexMap[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ—§èŠ‚ç‚¹æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> (i = s1;i &lt;= e1;i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> prevChild = c1[i]; <span class="comment">// å½“å‰æ—§èŠ‚ç‚¹å…ƒç´ </span></span><br><span class="line">  <span class="keyword">if</span> (patched &gt;= toBePatched) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä»¥æ›´æ–°èŠ‚ç‚¹æ•°å¤§äºç­‰äºéœ€è¦æ›´æ–°èŠ‚ç‚¹æ•°ï¼Œ</span></span><br><span class="line">    <span class="comment">// è¯´æ˜æ–°èŠ‚ç‚¹ä»¥å…¨éƒ¨æ›´æ–°ï¼Œå‰©ä½™æ—§èŠ‚ç‚¹ç›´æ¥ç§»é™¤ï¼Œå¹¶è·³å‡ºå½“æ¬¡å¾ªç¯</span></span><br><span class="line">    <span class="title function_">unmount</span>(prevChild);</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰keyï¼Œå­˜åœ¨åˆ™åœ¨ map ä¸­æŸ¥æ‰¾ï¼Œ</span></span><br><span class="line">  <span class="comment">// ä¸å­˜åœ¨åˆ™éå†æ–°èŠ‚ç‚¹å‰©ä½™æ•°ç»„çš„ç›¸åŒèŠ‚ç‚¹å¹¶æ›´æ–°ç´¢å¼•</span></span><br><span class="line">  <span class="keyword">let</span> newIndex;</span><br><span class="line">  <span class="comment">// è¿™é‡Œæ˜¯åˆ¤æ–­ prevChild.key != null</span></span><br><span class="line">  <span class="keyword">if</span> (prevChild != <span class="literal">null</span>) &#123;</span><br><span class="line">    newIndex = keyToNewIndexMap.<span class="title function_">get</span>(prevChild);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// key-less node, try to locate a key-less node of the same type</span></span><br><span class="line">    <span class="keyword">for</span> (j = s2;j &lt;= e2;j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        newIndexToOldIndexMap[j - s2] === <span class="number">0</span> &amp;&amp;</span><br><span class="line">          <span class="title function_">isSameVNodeType</span>(prevChild, c2[j])</span><br><span class="line">      ) &#123;</span><br><span class="line">        newIndex = j;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newIndex === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¾ç„¶æ²¡æœ‰æ‰¾åˆ°åŒkeyæˆ–è€…åŒ VNodeTypeçš„æ–°èŠ‚ç‚¹ï¼Œåˆ™å¸è½½æ—§èŠ‚ç‚¹</span></span><br><span class="line">    <span class="title function_">unmount</span>(prevChild);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°äº†å¯¹åº”æ–°èŠ‚ç‚¹ï¼Œå¯¹æ¯”ç´¢å¼•ä½ç½®è®¾ç½® moved æ ‡è¯†ï¼Œæ‰§è¡Œ patch æ›´æ–°</span></span><br><span class="line">    newIndexToOldIndexMap[newIndex - s2] = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (newIndex &gt;= maxNewIndexSoFar) &#123;</span><br><span class="line">      <span class="comment">// å¦‚æœæ–°èŠ‚ç‚¹çš„ç´¢å¼•å¤§äºç­‰äº maxNewIndexSoFarï¼Œ</span></span><br><span class="line">      <span class="comment">// åˆ™å°† maxNewIndexSoFar æ›´æ–°ä¸ºæ–°èŠ‚ç‚¹çš„ç´¢å¼•</span></span><br><span class="line">      maxNewIndexSoFar = newIndex;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// è¯´æ˜å‘å‰ç§»åŠ¨äº†</span></span><br><span class="line">      moved = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">patch</span>(prevChild, c2[newIndex]);</span><br><span class="line">    patched++; <span class="comment">// å·²æ›´æ–° +1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†èƒ½æ›´åŠ ä½“ç°æ•´ä¸ªè¿‡ç¨‹ä¸­å˜åŒ–ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­è¿›è¡Œä¸€ä¸‹æ‰©å……ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ—§èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>]</span>;</span><br><span class="line">æ–°èŠ‚ç‚¹ï¼š <span class="selector-attr">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;k&#x27;</span>, <span class="string">&#x27;j&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>]</span>;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­åŒ…å«äº†å‰ä¸¤æ­¥çš„ <strong>å¤´éƒ¨ç›¸åŒèŠ‚ç‚¹ï¼Œå°¾éƒ¨ç›¸åŒèŠ‚ç‚¹</strong>ï¼Œä¸­é—´éƒ¨åˆ†ä¹ŸåŒ…å«äº†å¸è½½ã€ç§»åŠ¨ã€æ›´æ–°ä¸‰ç§æƒ…å†µï¼Œå¹¶ä¸”æ•°æ®é‡å·²ç»æ¯”è¾ƒå¤§ï¼Œå¯ä»¥çœ‹å‡ºæ•´ä½“è¿‡ç¨‹ã€‚</p>
<p>åœ¨ç¬¬ä¸€æ­¥æ–°èŠ‚ç‚¹æ•°ç»„ç´¢å¼• <code>Map</code> å¯¹è±¡æ„å»ºç»“æŸä¹‹åï¼Œæˆ‘ä»¬ä¼šçš„å¾—åˆ°ä¸€ä¸ª <code>size</code> ä¸º 10 çš„ <code>keyToNewIndexMap</code>ï¼Œå¹¶ä¸”æ­¤æ—¶çš„ <strong>éœ€è¦æ›´æ–°èŠ‚ç‚¹æ•°æ ‡è¯† <code>toBePatched</code> ä¸º 10</strong>ï¼ˆå› ä¸ºéƒ½æœ‰ <code>key</code> å±æ€§ï¼Œæ‰€ä»¥æ­¤æ—¶ <code>toBePatched = keyToNewIndexMap.size()</code>ï¼‰ã€‚</p>
<p>ç„¶åä¼šéå†æ—§èŠ‚ç‚¹æ•°ç»„æŸ¥æ‰¾ <code>key</code> ç›¸åŒçš„èŠ‚ç‚¹çš„ä¸‹æ ‡ <code>newIndex</code>ï¼ˆå¦‚æœæ‰¾ä¸åˆ°è¿˜ä¼šåœ¨ <code>newChildren</code> æ–°èŠ‚ç‚¹çš„å‰©ä½™æ•°ç»„ä¸­æŸ¥æ‰¾ <strong>æœªè¢«ä½¿ç”¨è¿‡ <code>newIndexToOldIndexMap[j - s2] === 0</code> ä¸”åŒç±»å‹åˆ¤æ–­ <code>isSameVNodeType</code> ä¸º <code>true</code> çš„èŠ‚ç‚¹</strong>ï¼Œå¹¶å°†å®ƒçš„ <code>index</code> ä¸‹æ ‡ä½œä¸º <code>newIndex</code>ï¼‰ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ç»“æŸåï¼Œå¦‚æœ <code>newIndex</code> ä¾ç„¶æ˜¯ <code>undefined</code>ï¼Œåˆ™è¯æ˜è¿™ä¸ªèŠ‚ç‚¹æ— æ³•è¢«å¤ç”¨ï¼Œç›´æ¥å¸è½½ï¼›å¦‚æœå­˜åœ¨çš„è¯ï¼Œåˆ™è°ƒç”¨ <code>patch</code> å¯¹æ¯”æ›´æ–°æ–°æ—§èŠ‚ç‚¹å…ƒç´ ã€‚</p>
<p>å¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="/../img/3084495202-519becdb323e7aa6_fix732.png" alt="image-20230403131816154"></p>
<p><img src="/../img/1660279722-31220b5e1e662a31_fix732.png" alt="image-20230403125139210"></p>
<blockquote>
<p>æ­¤æ—¶æ–°èŠ‚ç‚¹å‰©ä½™æ•°ç»„ä¸­ä»ç„¶è¿˜æœ‰å‰©ä½™å…ƒç´ æ²¡æœ‰è¢«æŒ‚è½½ï¼Œè€Œä¸”èŠ‚ç‚¹é¡ºåºä¸å¯¹ï¼Œå°±éœ€è¦è¿›è¡Œæœ€åä¸€æ­¥ï¼šæ–°å»ºèŠ‚ç‚¹ä¸ä½ç½®ç§»åŠ¨</p>
</blockquote>
<h4 id="5-3-æ–°å»ºèŠ‚ç‚¹ä¸ä½ç½®ç§»åŠ¨"><a href="#5-3-æ–°å»ºèŠ‚ç‚¹ä¸ä½ç½®ç§»åŠ¨" class="headerlink" title="5.3 æ–°å»ºèŠ‚ç‚¹ä¸ä½ç½®ç§»åŠ¨"></a>5.3 æ–°å»ºèŠ‚ç‚¹ä¸ä½ç½®ç§»åŠ¨</h4><p>åœ¨è¿™ä¸€æ­¥çš„å¼€å§‹ï¼Œä¼šåˆ¤æ–­ <code>5.2</code> ç»“æŸåçš„ <code>moved</code> æ ‡è¯†ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œç§»åŠ¨åˆ¤å®šï¼›å¦‚æœéœ€è¦çš„è¯ï¼Œä¼šé€šè¿‡ <code>getSequence</code> æŸ¥æ‰¾ä½ç½®æ›´æ–°çš„æœ€é•¿é€’å¢å­ä¸²çš„ <strong>å…ƒç´ ä¸‹æ ‡</strong>ã€‚</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : []<span class="comment">;</span></span><br><span class="line">j = increasingNewIndexSequence.length - <span class="number">1</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™é‡Œçš„ <code>newIndexToOldIndex</code> è®°å½•äº†æ–°èŠ‚ç‚¹å‰©ä½™æ•°ç»„ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åœ¨æ—§èŠ‚ç‚¹å‰©ä½™æ•°ç»„ä¸­çš„ä½ç½®ä¸‹æ ‡ï¼Œå¦‚æœä¸å­˜åœ¨è®°å½•åˆ™ä¸º 0ã€‚</p>
</blockquote>
<p>æ­¤æ—¶æ•°æ®å¦‚ä¸‹ï¼š</p>
<p><img src="/../img/3255277026-e29eed8371329096_fix732.png" alt="image-20230403132629995"></p>
<blockquote>
<p>è¿™é‡Œçš„æœ€é•¿é€’å¢å­ä¸²ä¸‹æ ‡æ•°ç»„å°±æ˜¯ <code>[1, 4, 9]</code>ï¼Œå¯¹åº”çš„ä¹Ÿå°±æ˜¯ <code>newChildren[4], newChildren[6], newChildren[11]</code>ï¼Œå‰©ä¸‹çš„å…ƒç´ ä¼šæ ¹æ®è¿™ä¸‰ä¸ªå…ƒç´ çš„ä½ç½®è¿›è¡Œæ’å…¥ã€‚</p>
</blockquote>
<p>ç„¶åï¼Œå¯¹æ¯”æ–°æ—§èŠ‚ç‚¹çš„ç´¢å¼•è¿›è¡Œç§»åŠ¨æˆ–è€…æ–°å¢ï¼š</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (newIndexToOldIndexMap[i] === <span class="number">0</span>) &#123;</span><br><span class="line">  patch(<span class="literal">null</span>, nextChild)<span class="comment">;</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (moved) &#123;</span><br><span class="line">  <span class="keyword">if</span> (j &lt; <span class="number">0</span> || i !== increasingNewIndexSequence[j]) &#123;</span><br><span class="line">    move(nextChild, anchor)<span class="comment">;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    j--<span class="comment">;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•´ä¸ªè¿‡ç¨‹å¤§è‡´ä¸ºï¼š</p>
<ol>
<li>è·å–å­èŠ‚ç‚¹åœ¨æ–° <code>VNode</code> ä¸­çš„ä½ç½® <code>nextIndex</code> å’Œå­èŠ‚ç‚¹ <code>VNode</code> å¯¹è±¡ <code>nextChild</code>ã€‚</li>
<li>è·å–å­èŠ‚ç‚¹çš„åä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹æˆ–çˆ¶èŠ‚ç‚¹ä½œä¸ºé”šç‚¹ <code>anchor</code>ã€‚</li>
<li>å¦‚æœæ–°æ—§ <code>VNode</code> ä¸­è¯¥å­èŠ‚ç‚¹å¯¹åº”çš„æ—§èŠ‚ç‚¹çš„ç´¢å¼•ä¸º 0ï¼Œåˆ™è¡¨ç¤ºè¯¥å­èŠ‚ç‚¹åœ¨æ—§ <code>VNode</code> ä¸­ä¸å­˜åœ¨ï¼Œéœ€è¦æ–°å»ºè¯¥èŠ‚ç‚¹å¹¶æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚</li>
<li>å¦‚æœè¯¥å­èŠ‚ç‚¹éœ€è¦ç§»åŠ¨ï¼Œåˆ™æ ¹æ®å¢åºåˆ—å’Œå½“å‰éå†çš„ä½ç½® i çš„å…³ç³»æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ç§»åŠ¨ï¼Œå¦‚æœéœ€è¦ç§»åŠ¨ï¼Œåˆ™è°ƒç”¨ <code>move</code> å‡½æ•°æ¥ç§»åŠ¨è¯¥èŠ‚ç‚¹åˆ°æ­£ç¡®çš„ä½ç½®ã€‚</li>
</ol>
<p><img src="/../img/1470043159-872e87c1beb7489b_fix732.png" alt="image-20230403142758157"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/07/03/Vue/" data-id="cmcygiiyt000cvgur8sab473o" data-title="Vue" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-AI" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/01/AI/" class="article-date">
  <time class="dt-published" datetime="2025-07-01T09:52:16.000Z" itemprop="datePublished">2025-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/01/AI/">AI</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="MCP"><a href="#MCP" class="headerlink" title="MCP"></a>MCP</h1><p><strong>Model context Protocol æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼Œ å‡ºç°åœ¨2024.11.25</strong></p>
<p><strong>ä»¥ä¸€è‡´çš„æ–¹å¼å°†å„ç§æ•°æ®æºã€å·¥å…·å’ŒåŠŸèƒ½è¿æ¥åˆ° AI æ¨¡å‹</strong>ï¼ˆä¸€ä¸ªä¸­é—´åè®®å±‚ï¼‰ï¼Œå°±åƒ USB-C è®©ä¸åŒè®¾å¤‡èƒ½å¤Ÿé€šè¿‡ç›¸åŒçš„æ¥å£è¿æ¥ä¸€æ ·ã€‚MCP çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªé€šç”¨æ ‡å‡†ï¼Œä½¿ AI åº”ç”¨ç¨‹åºçš„å¼€å‘å’Œé›†æˆå˜å¾—æ›´åŠ ç®€å•å’Œç»Ÿä¸€ã€‚</p>
<p><img src="/../img/v2-3a242914e1f4958e631dd158e043b7c3_1440w.jpg"></p>
<p><strong>Function call</strong>   å‡½æ•°è°ƒç”¨è¿”å›ç»“æœä½œä¸ºå¤§æ¨¡å‹çš„è¡¥å……</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/07/01/AI/" data-id="cmcygiiyk0001vgurgjz22c39" data-title="AI" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/" rel="tag">å¤§æ¨¡å‹</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Reactè¡¥å……" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/07/01/React%E8%A1%A5%E5%85%85/" class="article-date">
  <time class="dt-published" datetime="2025-07-01T02:54:22.000Z" itemprop="datePublished">2025-07-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/07/01/React%E8%A1%A5%E5%85%85/">Reactè¡¥å……</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="React-ç±»ç»„ä»¶çš„this"><a href="#React-ç±»ç»„ä»¶çš„this" class="headerlink" title="React ç±»ç»„ä»¶çš„this"></a>React ç±»ç»„ä»¶çš„this</h1><h2 id="thisä¸¢å¤±"><a href="#thisä¸¢å¤±" class="headerlink" title="thisä¸¢å¤±"></a>thisä¸¢å¤±</h2><p>ç±»çš„æ–¹æ³•åœ¨è°ƒç”¨æ—¶å¹¶æ²¡æœ‰æ˜ç¡®çš„ä¸Šä¸‹æ–‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ä¸ºä»€ä¹ˆthisä¼šä¸¢å¤±ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆthisä¼šä¸¢å¤±ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆthisä¼šä¸¢å¤±ï¼Ÿ"></a>ä¸ºä»€ä¹ˆthisä¼šä¸¢å¤±ï¼Ÿ</h3><p>å½“ç±»æ–¹æ³•ä½œä¸ºå›è°ƒä¼ é€’æ—¶ï¼ˆå¦‚äº‹ä»¶å¤„ç†å‡½æ•°ï¼‰ï¼Œ<strong>thisä¼šä¸¢å¤±ç»‘å®š</strong>ï¼Œå˜æˆ<code>undefined</code>ã€‚</p>
<p>åŸå› ï¼š</p>
<ul>
<li>JavaScriptä¸­çš„å‡½æ•°æœ‰è‡ªå·±çš„<code>this</code>ç»‘å®šè§„åˆ™</li>
<li>Reactäº‹ä»¶ç³»ç»Ÿè°ƒç”¨å¤„ç†å‡½æ•°æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨ç»‘å®šç»„ä»¶å®ä¾‹</li>
<li>ç±»æ–¹æ³•é»˜è®¤æ²¡æœ‰ç»‘å®šåˆ°å®ä¾‹</li>
</ul>
<h3 id="å“ªäº›åœ°æ–¹å®¹æ˜“å‡ºç°thisé—®é¢˜ï¼Ÿ"><a href="#å“ªäº›åœ°æ–¹å®¹æ˜“å‡ºç°thisé—®é¢˜ï¼Ÿ" class="headerlink" title="å“ªäº›åœ°æ–¹å®¹æ˜“å‡ºç°thisé—®é¢˜ï¼Ÿ"></a>å“ªäº›åœ°æ–¹å®¹æ˜“å‡ºç°thisé—®é¢˜ï¼Ÿ</h3><ul>
<li>äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆonClick, onChangeç­‰ï¼‰</li>
<li>å¼‚æ­¥å›è°ƒå‡½æ•°ï¼ˆsetTimeout, Promiseç­‰ï¼‰</li>
<li>å°†æ–¹æ³•ä½œä¸ºpropsä¼ é€’ç»™å­ç»„ä»¶</li>
</ul>
<h2 id="ç»‘å®šthisçš„å¸¸è§æ–¹æ³•"><a href="#ç»‘å®šthisçš„å¸¸è§æ–¹æ³•" class="headerlink" title="ç»‘å®šthisçš„å¸¸è§æ–¹æ³•"></a><strong>ç»‘å®š<code>this</code>çš„å¸¸è§æ–¹æ³•</strong></h2><p><strong>1</strong>. åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š</p>
<p>åœ¨ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­ä½¿ç”¨<code>bind</code>æ–¹æ³•ç»‘å®š<code>this</code>æ˜¯æœ€å¸¸è§çš„æ–¹å¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handleClick</span> = <span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// æŒ‡å‘ç»„ä»¶å®ä¾‹</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯åªéœ€åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šä¸€æ¬¡ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†å‡½æ•°éƒ½ä¼šä½¿ç”¨ç›¸åŒçš„<code>this</code>ã€‚</p>
<p><strong>2. ä½¿ç”¨ç®­å¤´å‡½æ•°</strong></p>
<p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„<code>this</code>ï¼Œå®ƒä¼šæ•è·å…¶å®šä¹‰æ—¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„<code>this</code>å€¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// æŒ‡å‘ç»„ä»¶å®ä¾‹</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼ç®€æ´æ˜äº†ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç®­å¤´å‡½æ•°å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„æ¼ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚</p>
<p><strong>3. åœ¨è°ƒç”¨æ—¶ç»‘å®š</strong></p>
<p>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š<code>this</code>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// æŒ‡å‘ç»„ä»¶å®ä¾‹</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.handleClick()&#125;&gt;Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p>
<h2 id="å¸¸è§çš„é™·é˜±åŠè§£å†³æ–¹æ¡ˆ"><a href="#å¸¸è§çš„é™·é˜±åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§çš„é™·é˜±åŠè§£å†³æ–¹æ¡ˆ"></a><strong>å¸¸è§çš„é™·é˜±åŠè§£å†³æ–¹æ¡ˆ</strong></h2><p><strong>é™·é˜±1ï¼šå¿˜è®°ç»‘å®š<code>this</code></strong></p>
<p>å¿˜è®°ç»‘å®š<code>this</code>ä¼šå¯¼è‡´æ–¹æ³•è°ƒç”¨æ—¶<code>this</code>ä¸º<code>undefined</code>ï¼Œä»è€Œå¼•å‘é”™è¯¯ã€‚è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š<code>this</code>ï¼Œæˆ–è€…ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p>
<p><strong>é™·é˜±2ï¼šåœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨<code>this</code></strong></p>
<p>åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œ<code>this</code>çš„æŒ‡å‘å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// æŒ‡å‘ç»„ä»¶å®ä¾‹</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°å¯ä»¥ç¡®ä¿<code>this</code>çš„æ­£ç¡®æŒ‡å‘ã€‚</p>
<p><strong>é™·é˜±3ï¼šåœ¨æ¸²æŸ“æ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°</strong></p>
<p>åœ¨æ¸²æŸ“æ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šå¯¼è‡´æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå½±å“æ€§èƒ½ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.handleClick()&#125;&gt;Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š<code>this</code>ï¼Œæˆ–è€…ä½¿ç”¨ç±»å±æ€§å®šä¹‰ç®­å¤´å‡½æ•°ã€‚</p>
<p>åœ¨ä½¿ç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œéœ€è¦æ³¨æ„æ€§èƒ½é—®é¢˜ã€‚ç®­å¤´å‡½æ•°å¯èƒ½ä¼šå¯¼è‡´ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½ä¸‹é™ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚ä¸ºäº†é¿å…æ€§èƒ½é—®é¢˜ï¼Œå»ºè®®åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š<code>this</code>ï¼Œæˆ–è€…ä½¿ç”¨ç±»å±æ€§å®šä¹‰ç®­å¤´å‡½æ•°</p>
<h2 id="ä¸éœ€è¦ç»‘å®š-this-çš„æƒ…å†µ"><a href="#ä¸éœ€è¦ç»‘å®š-this-çš„æƒ…å†µ" class="headerlink" title="ä¸éœ€è¦ç»‘å®š this çš„æƒ…å†µ"></a>ä¸éœ€è¦ç»‘å®š <code>this</code> çš„æƒ…å†µ</h2><ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</strong>ï¼ˆå¦‚ <code>componentDidMount</code>ï¼‰ï¼šReact è‡ªåŠ¨ç»‘å®š</li>
<li><strong>Render æ–¹æ³•</strong>ï¼šReact è‡ªåŠ¨ç»‘å®š</li>
<li><strong>é™æ€æ–¹æ³•</strong>ï¼ˆ<code>static</code>ï¼‰ï¼šä¸è®¿é—®å®ä¾‹ï¼Œæ— éœ€ç»‘å®š</li>
</ul>
<h1 id="Reactåˆæˆäº‹ä»¶é¡ºåº"><a href="#Reactåˆæˆäº‹ä»¶é¡ºåº" class="headerlink" title="Reactåˆæˆäº‹ä»¶é¡ºåº"></a>Reactåˆæˆäº‹ä»¶é¡ºåº</h1><p><img src="/../img/image-20250701134656066.png" alt="image-20250701134656066"></p>
<p><img src="/../img/image-20250701134806200.png" alt="image-20250701134806200"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/07/01/React%E8%A1%A5%E5%85%85/" data-id="cmcygiiys0008vgurghck7o1g" data-title="Reactè¡¥å……" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8E%9F%E7%90%86/" rel="tag">åŸç†</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-React" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/React/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T13:00:45.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/React/">React</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="React"><a href="#React" class="headerlink" title="React"></a>React</h1><p>ç”±Metaå…¬å¸ç ”å‘ï¼Œæ˜¯ä¸€ä¸ªç”¨äº æ„å»ºWebå’ŒåŸç”Ÿäº¤äº’ç•Œé¢çš„åº“</p>
<p><em>React æ˜¯ä¸€ä¸ªç”¨äº<strong>æ„å»ºç”¨æˆ·ç•Œé¢çš„ã€ å£°æ˜å¼ã€ç»„ä»¶åŒ–</strong>çš„ JavaScript åº“ã€‚</em></p>
<p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç»„ä»¶ï¼ˆComponentï¼‰</li>
<li>å£°æ˜å¼ç•Œé¢ç¼–ç¨‹ï¼ˆDeclarative UIï¼‰</li>
<li>å“åº”å¼ DOM æ›´æ–°æœºåˆ¶ï¼ˆReactive DOM updatesï¼‰</li>
</ul>
<h2 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h2><p>Reactçš„å¸¸è§„å¼€å‘æ–¹å¼å¹¶ä¸æ˜¯é€šè¿‡æµè§ˆå™¨å¼•å…¥å¤–éƒ¨jsè„šæœ¬æ¥ä½¿ç”¨ï¼Œä½†åœ¨å…¥é—¨é˜¶æ®µæˆ‘ä»¬æš‚ä¸”å…ˆä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç®€å•ä½“ä¼šä¸€ä¸‹Reactã€‚</p>
<p>ä½¿ç”¨Reactå¼€å‘Webé¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸¤ä¸ªjsè„šæœ¬ï¼š<strong>react 18</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react.development.js</span><br></pre></td></tr></table></figure>

<ul>
<li>react æ˜¯reactæ ¸å¿ƒåº“ï¼Œåªè¦ä½¿ç”¨reactå°±å¿…é¡»è¦å¼•å…¥</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">react-dom.development.js</span><br></pre></td></tr></table></figure>

<ul>
<li>react-dom æ˜¯reactçš„domåŒ…ï¼Œä½¿ç”¨reactå¼€å‘webåº”ç”¨æ—¶å¿…é¡»å¼•å…¥</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello React<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> button = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">         <span class="attr">onClick</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&#x27;ä½ ç‚¹äº†æŒ‰é’®ï¼&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">         &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªæŒ‰é’®&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> box = <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">onClick</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(<span class="string">&#x27;ä½ ç‚¹äº†divï¼&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">       &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªdiv&#x27;</span>, button);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#root&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    root.<span class="title function_">render</span>(box);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰è€…çš„åŒºåˆ«</strong></p>
<ul>
<li>reactï¼šåŒ…å«reactæ‰€å¿…é¡»çš„æ ¸å¿ƒä»£ç </li>
<li>react-domï¼šreactæ¸²æŸ“åœ¨ä¸åŒå¹³å°æ‰€éœ€è¦çš„æ ¸å¿ƒä»£ç </li>
<li>babelï¼šå°†jsxè½¬æ¢æˆReactä»£ç çš„å·¥å…·</li>
</ul>
<h2 id="ä¸‰ä¸ªAPI"><a href="#ä¸‰ä¸ªAPI" class="headerlink" title="ä¸‰ä¸ªAPI"></a>ä¸‰ä¸ªAPI</h2><ul>
<li><pre><code>React.createElement()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `React.createElement(type, [props], [...children])`</span><br><span class="line"></span><br><span class="line">- å‚æ•°ï¼š</span><br><span class="line"></span><br><span class="line">  typeï¼šè¡¨ç¤ºè¦æ¸²æŸ“çš„**å…ƒç´ ç±»å‹**ã€‚è¿™é‡Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå…ƒç´  Tag åç§°ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªç»„ä»¶ï¼ˆå¦‚div span ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯æ˜¯å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ï¼‰</span><br><span class="line"></span><br><span class="line">  propsï¼š**åˆ›å»ºReactå…ƒç´ æ‰€éœ€è¦çš„props**ã€‚</span><br><span class="line"></span><br><span class="line">  childrensï¼ˆå¯é€‰å‚æ•°ï¼‰ï¼šè¦æ¸²æŸ“å…ƒç´ çš„å­å…ƒç´ ï¼Œè¿™é‡Œå¯ä»¥å‘åä¼ å…¥nä¸ªå‚æ•°ã€‚å¯ä»¥ä¸ºæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¸ºæ•°ç»„</span><br><span class="line"></span><br><span class="line">  ç”¨æ¥åˆ›å»ºReactå…ƒç´ </span><br><span class="line"></span><br><span class="line">- Reactå…ƒç´ æ— æ³•ä¿®æ”¹   è¿”å›çš„æ˜¯è™šæ‹Ÿdomå¯¹è±¡</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">console.log(</span><br><span class="line">  React.createElement(</span><br><span class="line">    &#x27;h1&#x27;,</span><br><span class="line">    &#123;</span><br><span class="line">      className: &#x27;title&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x27;Hello React&#x27;</span><br><span class="line">  )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

![img](../img/3058803936-1121353711213220_fix732.png)
è¿”å›çš„è¿™ä¸ªå¯¹è±¡å°±æ˜¯è™šæ‹Ÿ DOM äº†ã€‚

æˆ‘ä»¬æ¥åˆ†æå®ƒè¿”å›çš„å¯¹è±¡å‚æ•°ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ªæ˜¯

- **`$$typeof: REACT_ELEMENT_TYPE`**

è¿™ä¸ªæ˜¯ React å…ƒç´ å¯¹è±¡çš„æ ‡è¯†å±æ€§

REACT_ELEMENT_TYPE çš„å€¼æ˜¯ä¸€ä¸ª Symbol ç±»å‹ï¼Œä»£è¡¨äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å€¼ã€‚å¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ Symbolç±»å‹ï¼Œå€¼å°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ã€‚

&gt; ä¸ºä»€ä¹ˆæ˜¯ Symbolï¼Ÿä¸»è¦é˜²æ­¢ XSS æ”»å‡»ä¼ªé€ ä¸€ä¸ªå‡çš„ React ç»„ä»¶ã€‚**å› ä¸º JSON ä¸­æ˜¯ä¸ä¼šå­˜åœ¨ Symbol ç±»å‹çš„ã€‚**

- keyï¼šè¿™ä¸ªæ¯”å¦‚å¾ªç¯ä¸­ä¼šç”¨åˆ°è¿™ä¸ªkeyå€¼
- propsï¼šä¼ å…¥çš„å±æ€§å€¼ï¼Œæ¯”å¦‚ id, className, style, children ç­‰
- refï¼š DOM çš„å¼•ç”¨
</code></pre>
</li>
<li><pre><code class="language-js">ReactDOM.createRoot()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `createRoot(container[, options])`</span><br><span class="line">- ç”¨æ¥åˆ›å»ºReactçš„æ ¹å®¹å™¨ï¼Œå®¹å™¨ç”¨æ¥æ”¾ç½®Reactå…ƒç´ </span><br><span class="line"></span><br><span class="line">**`createRoot(domNode, options?)`** </span><br><span class="line"></span><br><span class="line">è°ƒç”¨ `createRoot` ä»¥åœ¨æµè§ˆå™¨ DOM å…ƒç´ ä¸­åˆ›å»ºæ ¹èŠ‚ç‚¹æ˜¾ç¤ºå†…å®¹ã€‚</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">import &#123; createRoot &#125; from &#x27;react-dom/client&#x27;;</span><br><span class="line">const domNode = document.getElementById(&#x27;root&#x27;);</span><br><span class="line">const root = createRoot(domNode);</span><br></pre></td></tr></table></figure>

React å°†ä¼šä¸º `domNode` åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¹¶æ§åˆ¶å…¶ä¸­çš„ DOMã€‚åœ¨å·²ç»åˆ›å»ºæ ¹èŠ‚ç‚¹ä¹‹åï¼Œéœ€è¦è°ƒç”¨ [`root.render`](https://zh-hans.react.dev/reference/react-dom/client/createRoot#root-render) æ¥æ˜¾ç¤º React ç»„ä»¶ï¼š

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>

å¯¹äºä¸€ä¸ªå®Œå…¨ç”¨ React æ„å»ºçš„åº”ç”¨ç¨‹åºï¼Œé€šå¸¸ä¼šè°ƒç”¨ä¸€ä¸ª `createRoot` æ¥åˆ›å»ºå®ƒçš„æ ¹èŠ‚ç‚¹ã€‚è€Œå¯¹äºä¸€ä¸ªä½¿ç”¨äº†â€œå°‘é‡â€ React æ¥åˆ›å»ºéƒ¨åˆ†å†…å®¹çš„åº”ç”¨ç¨‹åºï¼Œåˆ™è¦æŒ‰å…·ä½“éœ€æ±‚æ¥ç¡®å®šæ ¹èŠ‚ç‚¹çš„æ•°é‡ã€‚

**å‚æ•°** 

- `domNode`ï¼šä¸€ä¸ª [DOM å…ƒç´ ](https://developer.mozilla.org/zh-CN/docs/Web/API/Element)ã€‚React å°†ä¸ºè¿™ä¸ª DOM å…ƒç´ åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ç„¶åå…è®¸ä½ åœ¨è¿™ä¸ªæ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨å‡½æ•°ï¼Œæ¯”å¦‚ `render` æ¥æ˜¾ç¤ºæ¸²æŸ“çš„ React å†…å®¹ã€‚
- **å¯é€‰** `options`ï¼šç”¨äºé…ç½®è¿™ä¸ª React æ ¹èŠ‚ç‚¹çš„å¯¹è±¡ã€‚
  - **å¯é€‰** `onRecoverableError`ï¼šå›è°ƒå‡½æ•°ï¼Œåœ¨ React ä»å¼‚å¸¸é”™è¯¯ä¸­æ¢å¤æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚
  - **å¯é€‰** `identifierPrefix`ï¼šä¸€ä¸ª React ç”¨æ¥é…åˆ [`useId`](https://zh-hans.react.dev/reference/react/useId) ç”Ÿæˆ id çš„å­—ç¬¦ä¸²å‰ç¼€ã€‚åœ¨åŒä¸€ä¸ªé¡µé¢ä¸Šä½¿ç”¨å¤šä¸ªæ ¹èŠ‚ç‚¹çš„åœºæ™¯ä¸‹ï¼Œè¿™å°†èƒ½æœ‰æ•ˆé¿å…å†²çªã€‚

**è¿”å›å€¼** 

`createRoot` è¿”å›ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªæ–¹æ³•çš„çš„å¯¹è±¡ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ï¼š[`render`](https://zh-hans.react.dev/reference/react-dom/client/createRoot#root-render) å’Œ [`unmount`](https://zh-hans.react.dev/reference/react-dom/client/createRoot#root-unmount)ã€‚

**æ³¨æ„** 

- å¦‚æœåº”ç”¨ç¨‹åºæ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ï¼Œé‚£ä¹ˆä¸èƒ½ä½¿ç”¨ `createRoot()`ã€‚è¯·ä½¿ç”¨ [`hydrateRoot()`](https://zh-hans.react.dev/reference/react-dom/client/hydrateRoot) æ›¿ä»£å®ƒã€‚
- åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¯èƒ½åªè°ƒç”¨äº†ä¸€æ¬¡ `createRoot`ã€‚ä½†å¦‚æœä½ ä½¿ç”¨äº†æ¡†æ¶ï¼Œå®ƒå¯èƒ½å·²ç»è‡ªåŠ¨å¸®ä½ å®Œæˆäº†è¿™æ¬¡è°ƒç”¨ã€‚
- å½“ä½ æƒ³è¦æ¸²æŸ“ä¸€æ®µ JSXï¼Œä½†æ˜¯å®ƒå­˜åœ¨äº DOM æ ‘çš„å…¶ä»–ä½ç½®ï¼Œå¹¶éå½“å‰ç»„ä»¶çš„å­ç»„ä»¶  æ—¶ï¼ˆæ¯”å¦‚ï¼Œä¸€ä¸ªå¼¹çª—æˆ–è€…æç¤ºæ¡†ï¼‰ï¼Œä½¿ç”¨ [`createPortal`](https://zh-hans.react.dev/reference/react-dom/createPortal) æ›¿ä»£ `createRoot`ã€‚
</code></pre>
</li>
<li><pre><code class="language-js">root.render()
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `root.render(element)`</span><br><span class="line">- å½“é¦–æ¬¡è°ƒç”¨æ—¶ï¼Œå®¹å™¨èŠ‚ç‚¹é‡Œçš„æ‰€æœ‰ DOM å…ƒç´ éƒ½ä¼šè¢«æ›¿æ¢ï¼Œåç»­çš„è°ƒç”¨åˆ™ä¼šä½¿ç”¨ React çš„ DOM å·®åˆ†ç®—æ³•ï¼ˆDOM diffing algorithmï¼‰è¿›è¡Œé«˜æ•ˆçš„æ›´æ–°ã€‚</span><br><span class="line">- ä¸ä¼šä¿®æ”¹å®¹å™¨èŠ‚ç‚¹ï¼ˆåªä¼šä¿®æ”¹å®¹å™¨çš„å­èŠ‚ç‚¹ï¼‰ã€‚å¯ä»¥åœ¨ä¸è¦†ç›–ç°æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œå°†ç»„ä»¶æ’å…¥å·²æœ‰çš„ DOM èŠ‚ç‚¹ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">**`root.render(reactNode)`** </span><br><span class="line"></span><br><span class="line">è°ƒç”¨ `root.render` ä»¥å°†ä¸€æ®µ [JSX](https://zh-hans.react.dev/learn/writing-markup-with-jsx)ï¼ˆâ€œReact èŠ‚ç‚¹â€ï¼‰åœ¨ React çš„æ ¹èŠ‚ç‚¹ä¸­æ¸²æŸ“ä¸º DOM èŠ‚ç‚¹å¹¶æ˜¾ç¤ºã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
root.render(&lt;App /&gt;);
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">React å°†ä¼šåœ¨ `æ ¹èŠ‚ç‚¹` ä¸­æ˜¾ç¤º `&lt;App /&gt;` ç»„ä»¶ï¼Œå¹¶ä¸”æ§åˆ¶ç»„ä»¶ä¸­çš„ DOMã€‚</span><br><span class="line"></span><br><span class="line">**å‚æ•°** </span><br><span class="line"></span><br><span class="line">- `reactNode`ï¼šä¸€ä¸ªä½ æƒ³è¦æ˜¾ç¤ºçš„ **React èŠ‚ç‚¹**ã€‚å®ƒæ€»æ˜¯ä¸€æ®µ JSXï¼Œå°±åƒ `&lt;App /&gt;`ï¼Œä½†æ˜¯ä½ ä¹Ÿæ€»æ˜¯å¯ä»¥ä¼ é€’ä¸€ä¸ª [`createElement()`](https://zh-hans.react.dev/reference/react/createElement) æ„é€ çš„ React å…ƒç´ ã€ä¸€ä¸ªå­—ç¬¦ä¸²ã€ä¸€ä¸ªæ•°å­—ã€`null` æˆ–è€… `undefined`ã€‚</span><br><span class="line"></span><br><span class="line">**è¿”å›å€¼** </span><br><span class="line"></span><br><span class="line">`root.render` è¿”å› `undefined`ã€‚</span><br><span class="line"></span><br><span class="line">**æ³¨æ„** </span><br><span class="line"></span><br><span class="line">- é¦–æ¬¡è°ƒç”¨ `root.render` æ—¶ï¼ŒReact ä¼šå…ˆæ¸…ç©ºæ ¹èŠ‚ç‚¹ä¸­æ‰€æœ‰å·²ç»å­˜åœ¨çš„ HTMLï¼Œç„¶åæ‰ä¼šæ¸²æŸ“ React ç»„ä»¶ã€‚</span><br><span class="line">- å¦‚æœä½ çš„æ ¹èŠ‚ç‚¹åŒ…å«äº†ç”± React åœ¨æ„å»ºæœŸé—´é€šè¿‡æœåŠ¡ç«¯æ¸²æŸ“ç”Ÿæˆçš„ HTML å†…å®¹ï¼Œè¯·ä½¿ç”¨ [`hydrateRoot()`](https://zh-hans.react.dev/reference/react-dom/client/hydrateRoot) æ›¿ä»£è¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ ·æ‰èƒ½æŠŠäº‹ä»¶å¤„ç†ç¨‹åºå’Œç°æœ‰çš„ HTML ç»‘å®šã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœä½ åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Šå¤šæ¬¡è°ƒç”¨äº† `render`ï¼ŒReact ä»ç„¶ä¼šæ›´æ–° DOMï¼Œè¿™æ ·æ‰èƒ½ä¿è¯æ˜¾ç¤ºçš„å†…å®¹æ˜¯æœ€æ–°çš„ã€‚React å°†ä¼šç­›é€‰å‡ºå¯å¤ç”¨çš„éƒ¨åˆ†å’Œéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¯¹äºéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œæ˜¯ React é€šè¿‡ä¸ä¹‹å‰æ¸²æŸ“çš„æ ‘è¿›è¡Œ [â€œæ¯”è¾ƒâ€](https://zh-hans.react.dev/learn/preserving-and-resetting-state) å¾—åˆ°çš„ã€‚åœ¨åŒä¸€ä¸ªæ ¹èŠ‚ç‚¹ä¸Šå†æ¬¡è°ƒç”¨ `render` å°±å’Œåœ¨æ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨ [`set` å‡½æ•°](https://zh-hans.react.dev/reference/react/useState#setstate) ç±»ä¼¼ï¼šReact ä¼šé¿å…æ²¡å¿…è¦çš„ DOM æ›´æ–°ã€‚</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">**`root.unmount()`** </span><br><span class="line"></span><br><span class="line">è°ƒç”¨ `root.unmount` ä»¥é”€æ¯ React æ ¹èŠ‚ç‚¹ä¸­çš„ä¸€ä¸ªå·²ç»æ¸²æŸ“çš„æ ‘ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
root.unmount();
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®Œå…¨ç”± React æ„å»ºçš„åº”ç”¨ç¨‹åºä¸ä¼šè°ƒç”¨ `root.unmount`ã€‚</span><br><span class="line"></span><br><span class="line">  æ­¤æ–¹æ³•é€‚ç”¨çš„åœºæ™¯æ˜¯ï¼ŒReact æ ¹èŠ‚ç‚¹ä¸­çš„ DOM èŠ‚ç‚¹ï¼ˆæˆ–è€…å®ƒçš„ä»»ä½•ä¸€ä¸ªçˆ¶çº§èŠ‚ç‚¹ï¼‰è¢«é™¤äº†è¿™ä¸ªæ–¹æ³•ä»¥å¤–çš„ä»£ç ç§»é™¤äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè¯•æƒ³åœ¨ä¸€ä¸ª jQuery é€‰é¡¹å¡é¢æ¿ä¸­ï¼Œéæ´»è·ƒçŠ¶æ€çš„é€‰é¡¹å¡çš„ DOM ç»“æ„å°†è¢«ç§»é™¤ã€‚ä¸€ä¸ªæ ‡ç­¾é¡µè¢«ç§»é™¤æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬ React æ ¹èŠ‚ç‚¹ï¼‰ä¹Ÿå°†ä¼šä» DOM æ ‘ç§»é™¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ‰éœ€è¦è°ƒç”¨ `root.unmount` æ¥é€šçŸ¥ React â€œåœæ­¢â€æ§åˆ¶å·²ç»è¢«ç§»é™¤çš„æ ¹èŠ‚ç‚¹çš„å†…å®¹ã€‚å¦åˆ™ï¼Œè¢«ç§»é™¤çš„æ ¹èŠ‚ç‚¹çš„å†…éƒ¨ç»„ä»¶å°±ä¸èƒ½åŠæ—¶é‡Šæ”¾æ¶ˆæ¯è®¢é˜…ç­‰èµ„æºã€‚</span><br><span class="line"></span><br><span class="line">  è°ƒç”¨ `root.unmout` å°†å¸è½½æ ¹èŠ‚ç‚¹å†…çš„æ‰€æœ‰ç»„ä»¶ï¼Œè¯¥æ ¹èŠ‚ç‚¹ä¸Šçš„ React å°†è¢«å‰¥ç¦»ï¼Œå³æ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºä»¥åŠç»„ä»¶æ ‘ä¸Šçš„çŠ¶æ€å°†è¢«ç§»é™¤ã€‚</span><br><span class="line"></span><br><span class="line">  **å‚æ•°** </span><br><span class="line"></span><br><span class="line">  `root.unmount` ä¸æ¥æ”¶ä»»ä½•å‚æ•°ã€‚</span><br><span class="line"></span><br><span class="line">  **è¿”å›å€¼** </span><br><span class="line"></span><br><span class="line">  `root.unmount` è¿”å› `undefined`ã€‚</span><br><span class="line"></span><br><span class="line">  **æ³¨æ„äº‹é¡¹** </span><br><span class="line"></span><br><span class="line">  - è°ƒç”¨ `root.unmout` å°†å¸è½½æ ¹èŠ‚ç‚¹å†…çš„æ‰€æœ‰ç»„ä»¶ï¼Œè¯¥æ ¹èŠ‚ç‚¹ä¸Šçš„ React å°†è¢«å‰¥ç¦»ï¼Œå³æ‰€æœ‰äº‹ä»¶å¤„ç†ç¨‹åºä»¥åŠç»„ä»¶æ ‘ä¸Šçš„çŠ¶æ€å°†è¢«ç§»é™¤ã€‚</span><br><span class="line">  - ä¸€æ—¦è°ƒç”¨ `root.unmout`ï¼Œå°±ä¸èƒ½åœ¨è¯¥æ ¹èŠ‚ç‚¹ä¸Šè°ƒç”¨ `root.render`ã€‚åœ¨ä¸€ä¸ªå·²ç»å¸è½½çš„æ ¹èŠ‚ç‚¹ä¸Šå°è¯•è°ƒç”¨ `root.render` å°†ä¼šæŠ›å‡ºå¼‚å¸¸é”™è¯¯ä¿¡æ¯â€œæ— æ³•æ›´æ–°ä¸€ä¸ªæœªæŒ‚è½½çš„æ ¹èŠ‚ç‚¹ï¼ˆCannot update an unmouted rootï¼‰â€ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥åœ¨å¸è½½ä¸€ä¸ªæ ¹èŠ‚ç‚¹ååˆé‡æ–°åˆ›å»ºå®ƒ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#  React ã€ Vue å¼‚åŒ</span><br><span class="line"></span><br><span class="line">**ç›¸ä¼¼ä¹‹å¤„ï¼š**</span><br><span class="line"></span><br><span class="line">- éƒ½å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨æ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€ç®¡ç†äº¤ç»™ç›¸å…³çš„åº“</span><br><span class="line">- éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·ï¼Œèƒ½è®©ä½ å¾—åˆ°ä¸€ä¸ªæ ¹æ®æœ€ä½³å®è·µè®¾ç½®çš„é¡¹ç›®æ¨¡æ¿ã€‚</span><br><span class="line">- éƒ½ä½¿ç”¨äº†Virtual DOMï¼ˆè™šæ‹ŸDOMï¼‰æé«˜é‡ç»˜æ€§èƒ½</span><br><span class="line">- éƒ½æœ‰propsçš„æ¦‚å¿µï¼Œå…è®¸ç»„ä»¶é—´çš„æ•°æ®ä¼ é€’</span><br><span class="line">- éƒ½é¼“åŠ±ç»„ä»¶åŒ–åº”ç”¨ï¼Œå°†åº”ç”¨åˆ†æ‹†æˆä¸€ä¸ªä¸ªåŠŸèƒ½æ˜ç¡®çš„æ¨¡å—ï¼Œæé«˜å¤ç”¨æ€§</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**ä¸åŒä¹‹å¤„ï¼š** </span><br><span class="line"></span><br><span class="line">**1ï¼‰æ•°æ®æµ**</span><br><span class="line"></span><br><span class="line">Vueé»˜è®¤æ”¯æŒæ•°æ®åŒå‘ç»‘å®šï¼Œè€ŒReactä¸€ç›´æå€¡å•å‘æ•°æ®æµ </span><br><span class="line"></span><br><span class="line">**2ï¼‰è™šæ‹ŸDOM**</span><br><span class="line"></span><br><span class="line">Vue2.xå¼€å§‹å¼•å…¥&quot;Virtual DOM&quot;ï¼Œæ¶ˆé™¤äº†å’ŒReactåœ¨è¿™æ–¹é¢çš„å·®å¼‚ï¼Œä½†æ˜¯åœ¨å…·ä½“çš„ç»†èŠ‚è¿˜æ˜¯æœ‰å„è‡ªçš„ç‰¹ç‚¹ã€‚ </span><br><span class="line"></span><br><span class="line">- Vueå®£ç§°å¯ä»¥æ›´å¿«åœ°è®¡ç®—å‡ºVirtual DOMçš„å·®å¼‚ï¼Œè¿™æ˜¯ç”±äºå®ƒåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ã€‚</span><br><span class="line">- å¯¹äºReactè€Œè¨€ï¼Œæ¯å½“åº”ç”¨çš„çŠ¶æ€è¢«æ”¹å˜æ—¶ï¼Œå…¨éƒ¨å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ç„¶ï¼Œè¿™å¯ä»¥é€šè¿‡ PureComponent/shouldComponentUpdateè¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è¿›è¡Œæ§åˆ¶ï¼Œä½†Vueå°†æ­¤è§†ä¸ºé»˜è®¤çš„ä¼˜åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">**3ï¼‰ç»„ä»¶åŒ–**</span><br><span class="line"></span><br><span class="line">Reactä¸Vueæœ€å¤§çš„ä¸åŒæ˜¯æ¨¡æ¿çš„ç¼–å†™ã€‚</span><br><span class="line"></span><br><span class="line">- Vueé¼“åŠ±å†™è¿‘ä¼¼å¸¸è§„HTMLçš„æ¨¡æ¿ã€‚å†™èµ·æ¥å¾ˆæ¥è¿‘æ ‡å‡† HTMLå…ƒç´ ï¼Œåªæ˜¯å¤šäº†ä¸€äº›å±æ€§ã€‚</span><br><span class="line">- Reactæ¨èä½ æ‰€æœ‰çš„æ¨¡æ¿é€šç”¨JavaScriptçš„è¯­æ³•æ‰©å±•â€”â€”JSXä¹¦å†™ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å…·ä½“æ¥è®²ï¼šReactä¸­renderå‡½æ•°æ˜¯æ”¯æŒé—­åŒ…ç‰¹æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬importçš„ç»„ä»¶åœ¨renderä¸­å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ä½†æ˜¯åœ¨Vueä¸­ï¼Œç”±äºæ¨¡æ¿ä¸­ä½¿ç”¨çš„æ•°æ®éƒ½å¿…é¡»æŒ‚åœ¨ this ä¸Šè¿›è¡Œä¸€æ¬¡ä¸­è½¬ï¼Œæ‰€ä»¥ import å®Œç»„ä»¶ä¹‹åï¼Œè¿˜éœ€è¦åœ¨ components ä¸­å†å£°æ˜ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line">**4ï¼‰ç›‘å¬æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒ**</span><br><span class="line"></span><br><span class="line">- Vue é€šè¿‡ getter/setter ä»¥åŠä¸€äº›å‡½æ•°çš„åŠ«æŒï¼Œèƒ½ç²¾ç¡®çŸ¥é“æ•°æ®å˜åŒ–ï¼Œä¸éœ€è¦ç‰¹åˆ«çš„ä¼˜åŒ–å°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ€§èƒ½</span><br><span class="line">- React é»˜è®¤æ˜¯é€šè¿‡æ¯”è¾ƒå¼•ç”¨çš„æ–¹å¼è¿›è¡Œçš„ï¼Œå¦‚æœä¸ä¼˜åŒ–ï¼ˆPureComponent/shouldComponentUpdateï¼‰å¯èƒ½å¯¼è‡´å¤§é‡ä¸å¿…è¦çš„vDOMçš„é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸º Vue ä½¿ç”¨çš„æ˜¯å¯å˜æ•°æ®ï¼Œè€ŒReactæ›´å¼ºè°ƒæ•°æ®çš„ä¸å¯å˜ã€‚</span><br><span class="line"></span><br><span class="line">**5ï¼‰é«˜é˜¶ç»„ä»¶**</span><br><span class="line"></span><br><span class="line">reactå¯ä»¥é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼ˆHigher Order Components-- HOCï¼‰æ¥æ‰©å±•ï¼Œè€Œvueéœ€è¦é€šè¿‡mixinsæ¥æ‰©å±•ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åŸå› é«˜é˜¶ç»„ä»¶å°±æ˜¯é«˜é˜¶å‡½æ•°ï¼Œè€ŒReactçš„ç»„ä»¶æœ¬èº«å°±æ˜¯çº¯ç²¹çš„å‡½æ•°ï¼Œæ‰€ä»¥é«˜é˜¶å‡½æ•°å¯¹Reactæ¥è¯´æ˜“å¦‚åæŒã€‚ç›¸åVue.jsä½¿ç”¨HTMLæ¨¡æ¿åˆ›å»ºè§†å›¾ç»„ä»¶ï¼Œè¿™æ—¶æ¨¡æ¿æ— æ³•æœ‰æ•ˆçš„ç¼–è¯‘ï¼Œå› æ­¤Vueä¸é‡‡ç”¨HOCæ¥å®ç°ã€‚</span><br><span class="line"></span><br><span class="line">**6ï¼‰æ„å»ºå·¥å…·**</span><br><span class="line"></span><br><span class="line">ä¸¤è€…éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·</span><br><span class="line"></span><br><span class="line">- React ==&gt; Create React APP</span><br><span class="line">- Vue ==&gt; vue-cli</span><br><span class="line"></span><br><span class="line">**7ï¼‰è·¨å¹³å°**</span><br><span class="line"></span><br><span class="line">- React ==&gt; React Native</span><br><span class="line">- Vue ==&gt; Weex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># React æ¸²æŸ“</span><br><span class="line"></span><br><span class="line">##  å“ªäº›æ–¹æ³•ä¼šè§¦å‘ React é‡æ–°æ¸²æŸ“ï¼Ÿé‡æ–°æ¸²æŸ“ render ä¼šåšäº›ä»€ä¹ˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">**ï¼ˆ1ï¼‰å“ªäº›æ–¹æ³•ä¼šè§¦å‘ react é‡æ–°æ¸²æŸ“?** </span><br><span class="line"></span><br><span class="line">- **setStateï¼ˆï¼‰æ–¹æ³•è¢«è°ƒç”¨**</span><br><span class="line"></span><br><span class="line">setState æ˜¯ React ä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰§è¡Œ setState ä¼šè§¦å‘ renderã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªç‚¹å€¼å¾—å…³æ³¨ï¼Œæ‰§è¡Œ setState çš„æ—¶å€™ä¸ä¸€å®šä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ setState ä¼ å…¥ null æ—¶ï¼Œå¹¶ä¸ä¼šè§¦å‘ renderã€‚</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    a: 1</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    console.log(&quot;render&quot;);</span><br><span class="line">    return (</span><br><span class="line">      &lt;React.Fragement&gt;</span><br><span class="line">        &lt;p&gt;&#123;this.state.a&#125;&lt;/p&gt;</span><br><span class="line">        &lt;button</span><br><span class="line">          onClick=&#123;() =&gt; &#123;</span><br><span class="line">            this.setState(&#123; a: 1 &#125;); // è¿™é‡Œå¹¶æ²¡æœ‰æ”¹å˜ a çš„å€¼</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          Click me</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;() =&gt; this.setState(null)&#125;&gt;setState null&lt;/button&gt;</span><br><span class="line">        &lt;Child /&gt;</span><br><span class="line">      &lt;/React.Fragement&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
<li><p><strong>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“</strong></p>
</li>
</ul>
<p>åªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œå³ä½¿ä¼ å…¥å­ç»„ä»¶çš„ props æœªå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œè¿›è€Œè§¦å‘ render</p>
<p><strong>ï¼ˆ2ï¼‰é‡æ–°æ¸²æŸ“ render ä¼šåšäº›ä»€ä¹ˆ?</strong></p>
<ul>
<li>ä¼šå¯¹æ–°æ—§ VNode è¿›è¡Œå¯¹æ¯”ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„Diffç®—æ³•ã€‚</li>
<li>å¯¹æ–°æ—§ä¸¤æ£µæ ‘è¿›è¡Œä¸€ä¸ªæ·±åº¦ä¼˜å…ˆéå†ï¼Œè¿™æ ·æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šä¸€ä¸ªæ ‡è®°ï¼Œåœ¨åˆ°æ·±åº¦éå†çš„æ—¶å€™ï¼Œæ¯éå†åˆ°ä¸€å’Œä¸ªèŠ‚ç‚¹ï¼Œå°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„èŠ‚ç‚¹æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæœ‰å·®å¼‚å°±æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œé¢</li>
<li>éå†å·®å¼‚å¯¹è±¡ï¼Œæ ¹æ®å·®å¼‚çš„ç±»å‹ï¼Œæ ¹æ®å¯¹åº”å¯¹è§„åˆ™æ›´æ–°VNode</li>
</ul>
<p>React çš„å¤„ç† render çš„åŸºæœ¬æ€ç»´æ¨¡å¼æ˜¯æ¯æ¬¡ä¸€æœ‰å˜åŠ¨å°±ä¼šå»é‡æ–°æ¸²æŸ“æ•´ä¸ªåº”ç”¨ã€‚åœ¨ Virtual DOM æ²¡æœ‰å‡ºç°ä¹‹å‰ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è°ƒç”¨ innerHTMLã€‚Virtual DOMå‰å®³çš„åœ°æ–¹å¹¶ä¸æ˜¯è¯´å®ƒæ¯”ç›´æ¥æ“ä½œ DOM å¿«ï¼Œè€Œæ˜¯è¯´ä¸ç®¡æ•°æ®æ€ä¹ˆå˜ï¼Œéƒ½ä¼šå°½é‡ä»¥æœ€å°çš„ä»£ä»·å»æ›´æ–° DOMã€‚React å°† render å‡½æ•°è¿”å›çš„è™šæ‹Ÿ DOM æ ‘ä¸è€çš„è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®š DOM è¦ä¸è¦æ›´æ–°ã€æ€ä¹ˆæ›´æ–°ã€‚å½“ DOM æ ‘å¾ˆå¤§æ—¶ï¼Œéå†ä¸¤æ£µæ ‘è¿›è¡Œå„ç§æ¯”å¯¹è¿˜æ˜¯ç›¸å½“è€—æ€§èƒ½çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¶å±‚ setState ä¸€ä¸ªå¾®å°çš„ä¿®æ”¹ï¼Œé»˜è®¤ä¼šå»éå†æ•´æ£µæ ‘ã€‚å°½ç®¡ React ä½¿ç”¨é«˜åº¦ä¼˜åŒ–çš„ Diff ç®—æ³•ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹ä»ç„¶ä¼šæŸè€—æ€§èƒ½.</p>
<h2 id="Reactå¦‚ä½•åˆ¤æ–­ä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Ÿ"><a href="#Reactå¦‚ä½•åˆ¤æ–­ä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Ÿ" class="headerlink" title="Reactå¦‚ä½•åˆ¤æ–­ä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Ÿ"></a>Reactå¦‚ä½•åˆ¤æ–­ä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Ÿ</h2><p>ç»„ä»¶çŠ¶æ€çš„æ”¹å˜å¯ä»¥å› ä¸º<code>props</code>çš„æ”¹å˜ï¼Œæˆ–è€…ç›´æ¥é€šè¿‡<code>setState</code>æ–¹æ³•æ”¹å˜ã€‚ç»„ä»¶è·å¾—æ–°çš„çŠ¶æ€ï¼Œç„¶åReactå†³å®šæ˜¯å¦åº”è¯¥é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚åªè¦ç»„ä»¶çš„stateå‘ç”Ÿå˜åŒ–ï¼ŒReactå°±ä¼šå¯¹ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸ºReactä¸­çš„<code>shouldComponentUpdate</code>æ–¹æ³•é»˜è®¤è¿”å›<code>true</code>ï¼Œè¿™å°±æ˜¯å¯¼è‡´æ¯æ¬¡æ›´æ–°éƒ½é‡æ–°æ¸²æŸ“çš„åŸå› ã€‚</p>
<p>å½“Reactå°†è¦æ¸²æŸ“ç»„ä»¶æ—¶ä¼šæ‰§è¡Œ<code>shouldComponentUpdate</code>æ–¹æ³•æ¥çœ‹å®ƒæ˜¯å¦è¿”å›<code>true</code>ï¼ˆç»„ä»¶åº”è¯¥æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯é‡æ–°æ¸²æŸ“ï¼‰ã€‚æ‰€ä»¥éœ€è¦é‡å†™<code>shouldComponentUpdate</code>æ–¹æ³•è®©å®ƒæ ¹æ®æƒ…å†µè¿”å›<code>true</code>æˆ–è€…<code>false</code>æ¥å‘Šè¯‰Reactä»€ä¹ˆæ—¶å€™é‡æ–°æ¸²æŸ“ä»€ä¹ˆæ—¶å€™è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚</p>
<h2 id="React-setState-è°ƒç”¨çš„åŸç†"><a href="#React-setState-è°ƒç”¨çš„åŸç†" class="headerlink" title="React setState è°ƒç”¨çš„åŸç†"></a>React setState è°ƒç”¨çš„åŸç†</h2><p><img src="/../img/image.png" alt="img"></p>
<p>å…·ä½“çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼ˆæºç çº§è§£æï¼‰ï¼š</p>
<ul>
<li>é¦–å…ˆè°ƒç”¨äº†<code>setState</code> å…¥å£å‡½æ•°ï¼Œå…¥å£å‡½æ•°åœ¨è¿™é‡Œå°±æ˜¯å……å½“ä¸€ä¸ªåˆ†å‘å™¨çš„è§’è‰²ï¼Œæ ¹æ®å…¥å‚çš„ä¸åŒï¼Œå°†å…¶åˆ†å‘åˆ°ä¸åŒçš„åŠŸèƒ½å‡½æ•°ä¸­å»ï¼›</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactComponent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setState</span> = <span class="keyword">function</span> (<span class="params">partialState, callback</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">updater</span>.<span class="title function_">enqueueSetState</span>(<span class="variable language_">this</span>, partialState);</span><br><span class="line">  <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">updater</span>.<span class="title function_">enqueueCallback</span>(<span class="variable language_">this</span>, callback, <span class="string">&#x27;setState&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>enqueueSetState</code> æ–¹æ³•å°†æ–°çš„ <code>state</code> æ”¾è¿›ç»„ä»¶çš„çŠ¶æ€é˜Ÿåˆ—é‡Œï¼Œå¹¶è°ƒç”¨ <code>enqueueUpdate</code> æ¥å¤„ç†å°†è¦æ›´æ–°çš„å®ä¾‹å¯¹è±¡ï¼›</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">enqueueSetState</span>: <span class="keyword">function</span> (<span class="params">publicInstance, partialState</span>) &#123;</span><br><span class="line">  <span class="comment">// æ ¹æ® this æ‹¿åˆ°å¯¹åº”çš„ç»„ä»¶å®ä¾‹</span></span><br><span class="line">  <span class="keyword">var</span> internalInstance = <span class="title function_">getInternalInstanceReadyForUpdate</span>(publicInstance, <span class="string">&#x27;setState&#x27;</span>);</span><br><span class="line">  <span class="comment">// è¿™ä¸ª queue å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªç»„ä»¶å®ä¾‹çš„ state æ•°ç»„</span></span><br><span class="line">  <span class="keyword">var</span> queue = internalInstance.<span class="property">_pendingStateQueue</span> || (internalInstance.<span class="property">_pendingStateQueue</span> = []);</span><br><span class="line">  queue.<span class="title function_">push</span>(partialState);</span><br><span class="line">  <span class="comment">//  enqueueUpdate ç”¨æ¥å¤„ç†å½“å‰çš„ç»„ä»¶å®ä¾‹</span></span><br><span class="line">  <span class="title function_">enqueueUpdate</span>(internalInstance);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ <code>enqueueUpdate</code> æ–¹æ³•ä¸­å¼•å‡ºäº†ä¸€ä¸ªå…³é”®çš„å¯¹è±¡â€”â€”<code>batchingStrategy</code>ï¼Œè¯¥å¯¹è±¡æ‰€å…·å¤‡çš„<code>isBatchingUpdates</code> å±æ€§ç›´æ¥å†³å®šäº†å½“ä¸‹æ˜¯è¦èµ°æ›´æ–°æµç¨‹ï¼Œè¿˜æ˜¯åº”è¯¥æ’é˜Ÿç­‰å¾…ï¼›å¦‚æœè½®åˆ°æ‰§è¡Œï¼Œå°±è°ƒç”¨ <code>batchedUpdates</code> æ–¹æ³•æ¥ç›´æ¥å‘èµ·æ›´æ–°æµç¨‹ã€‚ç”±æ­¤å¯ä»¥æ¨æµ‹ï¼Œ<code>batchingStrategy</code> æˆ–è®¸æ­£æ˜¯ React å†…éƒ¨ä¸“é—¨ç”¨äºç®¡æ§æ‰¹é‡æ›´æ–°çš„å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">enqueueUpdate</span>(<span class="params">component</span>) &#123;</span><br><span class="line">  <span class="title function_">ensureInjected</span>();</span><br><span class="line">  <span class="comment">// æ³¨æ„è¿™ä¸€å¥æ˜¯é—®é¢˜çš„å…³é”®ï¼ŒisBatchingUpdatesæ ‡è¯†ç€å½“å‰æ˜¯å¦å¤„äºæ‰¹é‡åˆ›å»º/æ›´æ–°ç»„ä»¶çš„é˜¶æ®µ</span></span><br><span class="line">  <span class="keyword">if</span> (!batchingStrategy.<span class="property">isBatchingUpdates</span>) &#123;</span><br><span class="line">    <span class="comment">// è‹¥å½“å‰æ²¡æœ‰å¤„äºæ‰¹é‡åˆ›å»º/æ›´æ–°ç»„ä»¶çš„é˜¶æ®µï¼Œåˆ™ç«‹å³æ›´æ–°ç»„ä»¶</span></span><br><span class="line">    batchingStrategy.<span class="title function_">batchedUpdates</span>(enqueueUpdate, component);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¦åˆ™ï¼Œå…ˆæŠŠç»„ä»¶å¡å…¥ dirtyComponents é˜Ÿåˆ—é‡Œï¼Œè®©å®ƒâ€œå†ç­‰ç­‰â€</span></span><br><span class="line">  dirtyComponents.<span class="title function_">push</span>(component);</span><br><span class="line">  <span class="keyword">if</span> (component.<span class="property">_updateBatchNumber</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">    component.<span class="property">_updateBatchNumber</span> = updateBatchNumber + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong><code>batchingStrategy</code> å¯¹è±¡å¯ä»¥ç†è§£ä¸ºâ€œé”ç®¡ç†å™¨â€ã€‚è¿™é‡Œçš„â€œé”â€ï¼Œæ˜¯æŒ‡ React å…¨å±€å”¯ä¸€çš„ <code>isBatchingUpdates</code> å˜é‡ï¼Œ<code>isBatchingUpdates</code> çš„åˆå§‹å€¼æ˜¯ <code>false</code>ï¼Œæ„å‘³ç€â€œå½“å‰å¹¶æœªè¿›è¡Œä»»ä½•æ‰¹é‡æ›´æ–°æ“ä½œâ€ã€‚æ¯å½“ React è°ƒç”¨ <code>batchedUpdate</code> å»æ‰§è¡Œæ›´æ–°åŠ¨ä½œæ—¶ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªé”ç»™â€œé”ä¸Šâ€ï¼ˆç½®ä¸º <code>true</code>ï¼‰ï¼Œè¡¨æ˜â€œç°åœ¨æ­£å¤„äºæ‰¹é‡æ›´æ–°è¿‡ç¨‹ä¸­â€ã€‚å½“é”è¢«â€œé”ä¸Šâ€çš„æ—¶å€™ï¼Œä»»ä½•éœ€è¦æ›´æ–°çš„ç»„ä»¶éƒ½åªèƒ½æš‚æ—¶è¿›å…¥ <code>dirtyComponents</code> é‡Œæ’é˜Ÿç­‰å€™ä¸‹ä¸€æ¬¡çš„æ‰¹é‡æ›´æ–°ï¼Œè€Œä¸èƒ½éšæ„â€œæ’é˜Ÿâ€ã€‚æ­¤å¤„ä½“ç°çš„â€œä»»åŠ¡é”â€çš„æ€æƒ³ï¼Œæ˜¯ React é¢å¯¹å¤§é‡çŠ¶æ€ä»ç„¶èƒ½å¤Ÿå®ç°æœ‰åºåˆ†æ‰¹å¤„ç†çš„åŸºçŸ³ã€‚</p>
<p><img src="/../img/v2-9fcf2cfa698301ce7bc78bc3857904ed_1440w.png"></p>
<h2 id="requestIdleCallbackã€requestAnimationFrame"><a href="#requestIdleCallbackã€requestAnimationFrame" class="headerlink" title="requestIdleCallbackã€requestAnimationFrame"></a>requestIdleCallbackã€requestAnimationFrame</h2><p>æµè§ˆå™¨ç”¨äºä¼˜åŒ–ä»»åŠ¡è°ƒåº¦çš„ä¸¤ä¸ªå…³é”®APIï¼Œå…¶æ ¸å¿ƒåŒºåˆ«åœ¨äº<strong>æ‰§è¡Œæ—¶æœºã€ä¼˜å…ˆçº§å’Œé€‚ç”¨åœºæ™¯</strong>ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†å¯¹æ¯”ï¼š</p>
<hr>
<h3 id="1-æ‰§è¡Œæ—¶æœº"><a href="#1-æ‰§è¡Œæ—¶æœº" class="headerlink" title="1. æ‰§è¡Œæ—¶æœº"></a><strong>1. æ‰§è¡Œæ—¶æœº</strong></h3><ul>
<li><strong><code>requestAnimationFrame</code>ï¼ˆrAFï¼‰</strong><ul>
<li><strong>è§¦å‘æ—¶æœº</strong>ï¼šåœ¨æµè§ˆå™¨æ¯ä¸€å¸§æ¸²æŸ“å‰æ‰§è¡Œï¼ˆçº¦16.6ms&#x2F;æ¬¡ï¼Œä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥ï¼‰356ã€‚</li>
<li><strong>è®¾è®¡ç›®æ ‡</strong>ï¼šå¤„ç†ä¸æ¸²æŸ“ç›¸å…³çš„ä»»åŠ¡ï¼ˆå¦‚åŠ¨ç”»ã€UIæ›´æ–°ï¼‰ï¼Œç¡®ä¿ä»»åŠ¡åœ¨å¸ƒå±€å’Œç»˜åˆ¶å‰å®Œæˆã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<ul>
<li>é«˜ä¼˜å…ˆçº§ï¼Œæ¯å¸§å¿…å®šæ‰§è¡Œï¼›</li>
<li>é¡µé¢éšè—æ—¶è‡ªåŠ¨æš‚åœï¼ŒèŠ‚çœèµ„æº27ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><strong><code>requestIdleCallback</code>ï¼ˆrICï¼‰</strong><ul>
<li><strong>è§¦å‘æ—¶æœº</strong>ï¼šåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ®µæ‰§è¡Œï¼ˆå³ä¸€å¸§å†…ä¸»çº¿ç¨‹ä»»åŠ¡å®Œæˆåï¼Œå‰©ä½™æ—¶é—´è¶…è¿‡16msæ—¶ï¼‰158ã€‚</li>
<li><strong>è®¾è®¡ç›®æ ‡</strong>ï¼šå¤„ç†ä½ä¼˜å…ˆçº§ã€éç´§æ€¥ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—ä¸ŠæŠ¥ã€æ•°æ®é¢„åŠ è½½ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<ul>
<li>ä½ä¼˜å…ˆçº§ï¼Œå¯èƒ½å› æµè§ˆå™¨ç¹å¿™è€Œè·³è¿‡æ‰§è¡Œï¼›</li>
<li>éœ€é€šè¿‡<code>timeout</code>å‚æ•°å¼ºåˆ¶è¶…æ—¶æ‰§è¡Œï¼ˆå¯èƒ½å¼•èµ·å¡é¡¿ï¼‰12ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="2-ä¼˜å…ˆçº§ä¸æ€§èƒ½å½±å“"><a href="#2-ä¼˜å…ˆçº§ä¸æ€§èƒ½å½±å“" class="headerlink" title="2. ä¼˜å…ˆçº§ä¸æ€§èƒ½å½±å“"></a><strong>2. ä¼˜å…ˆçº§ä¸æ€§èƒ½å½±å“</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>ç‰¹æ€§</strong></th>
<th align="left"><strong>rAF</strong></th>
<th align="left"><strong>rIC</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>ä¼˜å…ˆçº§</strong></td>
<td align="left">é«˜ï¼ˆæ¸²æŸ“å…³é”®è·¯å¾„ï¼‰</td>
<td align="left">ä½ï¼ˆç©ºé—²æ—¶æ®µï¼‰</td>
</tr>
<tr>
<td align="left"><strong>é˜»å¡ä¸»çº¿ç¨‹é£é™©</strong></td>
<td align="left">å¯èƒ½ï¼ˆè‹¥ä»»åŠ¡è¿‡é‡ï¼‰</td>
<td align="left">æä½ï¼ˆä»»åŠ¡å¯æ‹†åˆ†ï¼‰</td>
</tr>
<tr>
<td align="left"><strong>å½±å“FPS</strong></td>
<td align="left">æ˜¯ï¼ˆè‹¥è¶…æ—¶å¯¼è‡´ä¸¢å¸§ï¼‰</td>
<td align="left">å¦ï¼ˆé™¤éå¼ºåˆ¶è¶…æ—¶ï¼‰2</td>
</tr>
<tr>
<td align="left"><strong>æ‰§è¡Œå¯é æ€§</strong></td>
<td align="left">é«˜ï¼ˆæ¯å¸§å¿…æ‰§è¡Œï¼‰</td>
<td align="left">ä½ï¼ˆä¾èµ–ç©ºé—²çŠ¶æ€ï¼‰8</td>
</tr>
</tbody></table>
<hr>
<h3 id="3-é€‚ç”¨åœºæ™¯"><a href="#3-é€‚ç”¨åœºæ™¯" class="headerlink" title="3. é€‚ç”¨åœºæ™¯"></a>3. é€‚ç”¨åœºæ™¯</h3><h5 id="requestAnimationFrameï¼ˆrAFï¼‰"><a href="#requestAnimationFrameï¼ˆrAFï¼‰" class="headerlink" title="requestAnimationFrameï¼ˆrAFï¼‰"></a><strong><code>requestAnimationFrame</code>ï¼ˆrAFï¼‰</strong></h5><ul>
<li><strong>åŠ¨ç”»</strong>ï¼šCSSå˜æ¢ã€CanvasåŠ¨ç”»36ã€‚</li>
<li><strong>å®æ—¶UIæ›´æ–°</strong>ï¼šæ»šåŠ¨æ•ˆæœã€WebSocketæ•°æ®å®æ—¶æ¸²æŸ“38ã€‚</li>
<li><strong>é«˜é¢‘äº¤äº’</strong>ï¼šç¡®ä¿æµç•…æ€§ï¼Œé¿å…<code>setTimeout</code>ä¸¢å¸§56ã€‚</li>
</ul>
<h5 id="requestIdleCallbackï¼ˆrICï¼‰"><a href="#requestIdleCallbackï¼ˆrICï¼‰" class="headerlink" title="requestIdleCallbackï¼ˆrICï¼‰"></a><strong><code>requestIdleCallback</code>ï¼ˆrICï¼‰</strong></h5><ul>
<li><strong>éå…³é”®ä»»åŠ¡</strong>ï¼šæ—¥å¿—ä¸ŠæŠ¥ã€æ€§èƒ½ç›‘æ§æ•°æ®æ‰¹é‡å‘é€27ã€‚</li>
<li><strong>åå°è®¡ç®—</strong>ï¼šAIæ¨ç†ã€å¤§æ•°æ®å¤„ç†38ã€‚</li>
<li><strong>èµ„æºé¢„åŠ è½½</strong>ï¼šéé¦–å±å›¾ç‰‡æˆ–æ•°æ®35ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®åŒºåˆ«</strong>ï¼š</p>
<ul>
<li>rAF ç”¨äº<strong>è§†è§‰ç›¸å…³</strong>ä»»åŠ¡ï¼Œç¡®ä¿æµç•…æ¸²æŸ“ï¼›</li>
<li>rIC ç”¨äº<strong>éè§†è§‰ç›¸å…³</strong>ä»»åŠ¡ï¼Œé¿å…æŠ¢å ä¸»çº¿ç¨‹36ã€‚</li>
</ul>
</blockquote>
<hr>
<h3 id="4-ä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#4-ä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="4. ä½¿ç”¨æ³¨æ„äº‹é¡¹"></a><strong>4. ä½¿ç”¨æ³¨æ„äº‹é¡¹</strong></h3><h5 id="rAF-çš„é™·é˜±"><a href="#rAF-çš„é™·é˜±" class="headerlink" title="rAF çš„é™·é˜±"></a><strong>rAF çš„é™·é˜±</strong></h5><ul>
<li><strong>é¿å…é‡ä»»åŠ¡</strong>ï¼šå¤æ‚è®¡ç®—ä¼šé˜»å¡æ¸²æŸ“ï¼Œå¯¼è‡´å¡é¡¿ï¼ˆéœ€æ‹†åˆ†ä»»åŠ¡ï¼‰8ã€‚</li>
<li><strong>éšè—é¡µé¢æš‚åœ</strong>ï¼šåå°æ ‡ç­¾é¡µä¸­åŠ¨ç”»è‡ªåŠ¨åœæ­¢27ã€‚</li>
</ul>
<h5 id="rIC-çš„é™·é˜±"><a href="#rIC-çš„é™·é˜±" class="headerlink" title="rIC çš„é™·é˜±"></a><strong>rIC çš„é™·é˜±</strong></h5><ul>
<li><strong>ç¦æ­¢DOMæ“ä½œ</strong>ï¼š<br>ç©ºé—²æ—¶æ®µå¸ƒå±€å·²ç¡®å®šï¼Œä¿®æ”¹DOMä¼šè§¦å‘å¼ºåˆ¶é‡æ’ï¼Œä¸¥é‡æŸå®³æ€§èƒ½15ã€‚</li>
<li><strong>æ…ç”¨Promise</strong>ï¼š<br>Promiseå›è°ƒå¯èƒ½åœ¨ç©ºé—²ç»“æŸåç«‹å³æ‰§è¡Œï¼Œæ‹‰é•¿å¸§è€—æ—¶1ã€‚</li>
<li><strong>è¶…æ—¶é£é™©</strong>ï¼š<br>è®¾ç½®<code>timeout</code>å¯èƒ½å¼ºåˆ¶æ‰§è¡Œï¼Œå¼•å‘å¡é¡¿ï¼ˆè¶…æ—¶ä»»åŠ¡éœ€æè½»é‡ï¼‰18ã€‚</li>
</ul>
<hr>
<h4 id="5-æœ€ä½³å®è·µ"><a href="#5-æœ€ä½³å®è·µ" class="headerlink" title="5. æœ€ä½³å®è·µ"></a><strong>5. æœ€ä½³å®è·µ</strong></h4><ol>
<li><strong>æ··åˆä½¿ç”¨</strong>ï¼š<ul>
<li>è§†è§‰åŠ¨ç”»ç”¨ <strong>rAF</strong>ï¼ˆå¦‚å…ƒç´ ç§»åŠ¨ï¼‰6ï¼›</li>
<li>éç´§æ€¥ä»»åŠ¡ç”¨ <strong>rIC</strong>ï¼ˆå¦‚åŸ‹ç‚¹ä¸ŠæŠ¥ï¼‰27ã€‚</li>
</ul>
</li>
<li><strong>ä»»åŠ¡æ‹†åˆ†</strong>ï¼š<ul>
<li>åœ¨rICå›è°ƒä¸­ç”¨<code>deadline.timeRemaining()</code>æ£€æŸ¥å‰©ä½™æ—¶é—´ï¼Œåˆ†æ®µæ‰§è¡Œä»»åŠ¡58ã€‚</li>
</ul>
</li>
<li><strong>å…¼å®¹æ€§å¤„ç†</strong>ï¼š<ul>
<li>rICå…¼å®¹æ€§è¾ƒå·®ï¼ˆä¸æ”¯æŒIEï¼‰ï¼Œå¯ç”¨<code>setTimeout(fn, 0)</code>é™çº§8ã€‚</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹ï¼šrIC åˆ†æ®µä»»åŠ¡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">processTasks</span>(<span class="params">deadline</span>) &#123;</span><br><span class="line">  <span class="keyword">while</span> (deadline.<span class="title function_">timeRemaining</span>() &gt; <span class="number">0</span> &amp;&amp; tasks.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title function_">executeTask</span>(tasks.<span class="title function_">shift</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (tasks.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title function_">requestIdleCallback</span>(processTasks, &#123; <span class="attr">timeout</span>: <span class="number">1000</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">requestIdleCallback</span>(processTasks);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="æ€»ç»“ï¼šæ ¸å¿ƒåŒºåˆ«"><a href="#æ€»ç»“ï¼šæ ¸å¿ƒåŒºåˆ«" class="headerlink" title="æ€»ç»“ï¼šæ ¸å¿ƒåŒºåˆ«"></a><strong>æ€»ç»“ï¼šæ ¸å¿ƒåŒºåˆ«</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>ç»´åº¦</strong></th>
<th align="left"><strong>requestAnimationFrame</strong></th>
<th align="left"><strong>requestIdleCallback</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>æœ¬è´¨</strong></td>
<td align="left">æ¸²æŸ“æµæ°´çº¿çš„ä¸€éƒ¨åˆ†</td>
<td align="left">ç©ºé—²æ—¶æ®µçš„ä»»åŠ¡è°ƒåº¦</td>
</tr>
<tr>
<td align="left"><strong>ä¼˜å…ˆçº§</strong></td>
<td align="left">é«˜ï¼ˆå½±å“ç”¨æˆ·ä½“éªŒï¼‰</td>
<td align="left">ä½ï¼ˆå¯è¢«è·³è¿‡ï¼‰</td>
</tr>
<tr>
<td align="left"><strong>æ‰§è¡Œä¿è¯</strong></td>
<td align="left">æ¯å¸§å¿…æ‰§è¡Œ</td>
<td align="left">ä¾èµ–ç©ºé—²æ—¶é—´</td>
</tr>
<tr>
<td align="left"><strong>å…¸å‹åœºæ™¯</strong></td>
<td align="left">åŠ¨ç”»ã€å®æ—¶UI</td>
<td align="left">æ—¥å¿—ã€é¢„åŠ è½½ã€åå°è®¡ç®—</td>
</tr>
<tr>
<td align="left"><strong>é£é™©æ“ä½œ</strong></td>
<td align="left">é¿å…é‡è®¡ç®—</td>
<td align="left">ç¦æ­¢DOMä¿®æ”¹&#x2F;Promiseå›è°ƒ</td>
</tr>
</tbody></table>
<h2 id="Fiber"><a href="#Fiber" class="headerlink" title="Fiber"></a>Fiber</h2><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a><strong>æ•°æ®ç»“æ„</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// è·Ÿå½“å‰Fiberç›¸å…³æœ¬åœ°çŠ¶æ€ï¼ˆæ¯”å¦‚æµè§ˆå™¨ç¯å¢ƒå°±æ˜¯DOMèŠ‚ç‚¹ï¼‰</span></span><br><span class="line">  <span class="attr">stateNode</span>: any,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å•é“¾è¡¨æ ‘ç»“æ„</span></span><br><span class="line">  <span class="attr">return</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>,<span class="comment">// æŒ‡å‘ä»–åœ¨FiberèŠ‚ç‚¹æ ‘ä¸­çš„`parent`ï¼Œç”¨æ¥åœ¨å¤„ç†å®Œè¿™ä¸ªèŠ‚ç‚¹ä¹‹åå‘ä¸Šè¿”å›</span></span><br><span class="line">  <span class="attr">child</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>,<span class="comment">// æŒ‡å‘è‡ªå·±çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">  <span class="attr">sibling</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>,  <span class="comment">// æŒ‡å‘è‡ªå·±çš„å…„å¼Ÿç»“æ„ï¼Œå…„å¼ŸèŠ‚ç‚¹çš„returnæŒ‡å‘åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°ç›¸å…³</span></span><br><span class="line">  <span class="attr">pendingProps</span>: any,  <span class="comment">// æ–°çš„å˜åŠ¨å¸¦æ¥çš„æ–°çš„props</span></span><br><span class="line">  <span class="attr">memoizedProps</span>: any,  <span class="comment">// ä¸Šä¸€æ¬¡æ¸²æŸ“å®Œæˆä¹‹åçš„props</span></span><br><span class="line">  <span class="attr">updateQueue</span>: <span class="title class_">UpdateQueue</span>&lt;any&gt; | <span class="literal">null</span>,  <span class="comment">// è¯¥Fiberå¯¹åº”çš„ç»„ä»¶äº§ç”Ÿçš„Updateä¼šå­˜æ”¾åœ¨è¿™ä¸ªé˜Ÿåˆ—é‡Œé¢</span></span><br><span class="line">  <span class="attr">memoizedState</span>: any, <span class="comment">// ä¸Šä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™çš„state</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// Scheduler ç›¸å…³</span></span><br><span class="line">  <span class="attr">expirationTime</span>: <span class="title class_">ExpirationTime</span>,  <span class="comment">// ä»£è¡¨ä»»åŠ¡åœ¨æœªæ¥çš„å“ªä¸ªæ—¶é—´ç‚¹åº”è¯¥è¢«å®Œæˆï¼Œä¸åŒ…æ‹¬ä»–çš„å­æ ‘äº§ç”Ÿçš„ä»»åŠ¡</span></span><br><span class="line">  <span class="comment">// å¿«é€Ÿç¡®å®šå­æ ‘ä¸­æ˜¯å¦æœ‰ä¸åœ¨ç­‰å¾…çš„å˜åŒ–</span></span><br><span class="line">  <span class="attr">childExpirationTime</span>: <span class="title class_">ExpirationTime</span>,</span><br><span class="line">    </span><br><span class="line"> <span class="comment">// åœ¨Fiberæ ‘æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªFiberéƒ½ä¼šæœ‰ä¸€ä¸ªè·Ÿå…¶å¯¹åº”çš„Fiber</span></span><br><span class="line">  <span class="comment">// æˆ‘ä»¬ç§°ä»–ä¸º`current &lt;==&gt; workInProgress`</span></span><br><span class="line">  <span class="comment">// åœ¨æ¸²æŸ“å®Œæˆä¹‹åä»–ä»¬ä¼šäº¤æ¢ä½ç½®</span></span><br><span class="line">  <span class="attr">alternate</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Effect ç›¸å…³çš„</span></span><br><span class="line">  <span class="attr">effectTag</span>: <span class="title class_">SideEffectTag</span>, <span class="comment">// ç”¨æ¥è®°å½•Side Effect</span></span><br><span class="line">  <span class="attr">nextEffect</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>, <span class="comment">// å•é“¾è¡¨ç”¨æ¥å¿«é€ŸæŸ¥æ‰¾ä¸‹ä¸€ä¸ªside effect</span></span><br><span class="line">  <span class="attr">firstEffect</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>,  <span class="comment">// å­æ ‘ä¸­ç¬¬ä¸€ä¸ªside effect</span></span><br><span class="line">  <span class="attr">lastEffect</span>: <span class="title class_">Fiber</span> | <span class="literal">null</span>, <span class="comment">// å­æ ‘ä¸­æœ€åä¸€ä¸ªside effect</span></span><br><span class="line">  ....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>


<p><img src="/../img/v2-cfaea6c0e9362b3701b1cf342ed4588b_1440w.png"></p>
<h3 id="æ„å»ºæµç¨‹"><a href="#æ„å»ºæµç¨‹" class="headerlink" title="æ„å»ºæµç¨‹"></a><strong>æ„å»ºæµç¨‹</strong></h3><ol>
<li><p><strong>æ ¹èŠ‚ç‚¹å¯åŠ¨</strong>ï¼š</p>
<ul>
<li>ä»æ ¹ Fiber èŠ‚ç‚¹å¼€å§‹</li>
<li>åˆ›å»ºå¯¹åº”çš„ WIP èŠ‚ç‚¹ï¼ˆ<code>workInProgressRoot</code>ï¼‰</li>
</ul>
</li>
<li><p><strong>èŠ‚ç‚¹å…‹éš†&#x2F;åˆ›å»º</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å¯¹åº”çš„ <code>alternate</code>ï¼ˆä¸Šæ¬¡æ¸²æŸ“çš„ Fiberï¼‰</li>
<li>æœ‰åˆ™å…‹éš†ï¼Œæ— åˆ™åˆ›å»ºå…¨æ–° Fiber èŠ‚ç‚¹</li>
</ul>
</li>
<li><p><strong>å±æ€§ç»§æ‰¿</strong>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤ç”¨çŠ¶æ€å’Œå±æ€§</span></span><br><span class="line">workInProgress.<span class="property">memoizedState</span> = current.<span class="property">memoizedState</span>;</span><br><span class="line">workInProgress.<span class="property">memoizedProps</span> = current.<span class="property">memoizedProps</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å­èŠ‚ç‚¹å¤„ç†</strong>ï¼š</p>
<ul>
<li>é€’å½’å¤„ç†æ¯ä¸ªå­èŠ‚ç‚¹</li>
<li>åˆ›å»ºå­ Fiber èŠ‚ç‚¹å¹¶å»ºç«‹çˆ¶å­å…³ç³»</li>
<li>è®¾ç½® <code>child</code>ã€<code>sibling</code>ã€<code>return</code> æŒ‡é’ˆ</li>
</ul>
</li>
<li><p><strong>æ·±åº¦ä¼˜å…ˆéå†</strong>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">workLoopSync</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">while</span> (workInProgress !== <span class="literal">null</span>) &#123;</span><br><span class="line">    workInProgress = <span class="title function_">performUnitOfWork</span>(workInProgress);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>å®ŒæˆèŠ‚ç‚¹</strong>ï¼š</p>
<ul>
<li>å½“èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹æ—¶ï¼Œè°ƒç”¨ <code>completeUnitOfWork</code></li>
<li>å¤„ç†å…„å¼ŸèŠ‚ç‚¹æˆ–å›æº¯åˆ°çˆ¶èŠ‚ç‚¹</li>
</ul>
</li>
<li><p>æŒ‡é’ˆå…³ç³»ç¤ºä¾‹</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">const</span> parentFiber = &#123;</span><br><span class="line">  <span class="attr">child</span>: child1, <span class="comment">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­èŠ‚ç‚¹1</span></span><br><span class="line"><span class="keyword">const</span> child1 = &#123;</span><br><span class="line">  <span class="attr">sibling</span>: child2, <span class="comment">// ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">  <span class="attr">return</span>: parentFiber, <span class="comment">// æŒ‡å‘çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­èŠ‚ç‚¹2</span></span><br><span class="line"><span class="keyword">const</span> child2 = &#123;</span><br><span class="line">  <span class="attr">sibling</span>: <span class="literal">null</span>, <span class="comment">// æœ€åä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">  <span class="attr">return</span>: parentFiber,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h3 id="Diff-ç®—æ³•æ ¸å¿ƒåŸåˆ™"><a href="#Diff-ç®—æ³•æ ¸å¿ƒåŸåˆ™" class="headerlink" title="Diff ç®—æ³•æ ¸å¿ƒåŸåˆ™"></a>Diff ç®—æ³•æ ¸å¿ƒåŸåˆ™</h3><table>
<thead>
<tr>
<th align="left">åŸåˆ™</th>
<th align="left">æè¿°</th>
<th align="left">ä¼˜åŠ¿</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>åŒçº§æ¯”è¾ƒ</strong></td>
<td align="left">åªæ¯”è¾ƒåŒä¸€å±‚çº§èŠ‚ç‚¹</td>
<td align="left">O(n) å¤æ‚åº¦</td>
</tr>
<tr>
<td align="left"><strong>Key ä¼˜åŒ–</strong></td>
<td align="left">ä½¿ç”¨ key åŒ¹é…ç›¸åŒèŠ‚ç‚¹</td>
<td align="left">å‡å°‘ä¸å¿…è¦çš„é‡å»º</td>
</tr>
<tr>
<td align="left"><strong>ç±»å‹ä¼˜å…ˆ</strong></td>
<td align="left">ä¸åŒç±»å‹ç»„ä»¶ç›´æ¥æ›¿æ¢</td>
<td align="left">é¿å…æ— æ•ˆæ¯”è¾ƒ</td>
</tr>
<tr>
<td align="left"><strong>ç»„ä»¶ç¨³å®š</strong></td>
<td align="left">ç›¸åŒç±»å‹ç»„ä»¶å¤ç”¨</td>
<td align="left">ä¿ç•™çŠ¶æ€å’Œ DOM</td>
</tr>
</tbody></table>
<p><img src="/../img/v2-8c3b88ee7471ba1303c4460967da36fa_1440w.png"></p>
<h1 id="React-ç»„ä»¶"><a href="#React-ç»„ä»¶" class="headerlink" title="React ç»„ä»¶"></a><strong>React ç»„ä»¶</strong></h1><h2 id="React-é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Œå’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯"><a href="#React-é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Œå’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯" class="headerlink" title="React é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Œå’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯"></a>React é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Œå’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯</h2><p>å®˜æ–¹è§£é‡Šâˆ¶ </p>
<p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚</p>
<p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œå®ƒåªæ˜¯ä¸€ç§ç»„ä»¶çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼æ˜¯ç”±reactè‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„ã€‚æˆ‘ä»¬å°†å®ƒä»¬ç§°ä¸ºçº¯ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ¥å—ä»»ä½•åŠ¨æ€æä¾›çš„å­ç»„ä»¶ï¼Œä½†å®ƒä»¬ä¸ä¼šä¿®æ”¹æˆ–å¤åˆ¶å…¶è¾“å…¥ç»„ä»¶ä¸­çš„ä»»ä½•è¡Œä¸ºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hocçš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withSubscription</span>(<span class="params">WrappedComponent, selectData</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">      <span class="variable language_">super</span>(props);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">        <span class="attr">data</span>: <span class="title function_">selectData</span>(<span class="title class_">DataSource</span>, props)</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!</span></span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">data</span>=<span class="string">&#123;this.state.data&#125;</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">BlogPostWithSubscription</span> = <span class="title function_">withSubscription</span>(<span class="title class_">BlogPost</span>,</span><br><span class="line">  <span class="function">(<span class="params">DataSource, props</span>) =&gt;</span> <span class="title class_">DataSource</span>.<span class="title function_">getBlogPost</span>(props.<span class="property">id</span>));</span><br></pre></td></tr></table></figure>

<p><strong>1ï¼‰HOCçš„ä¼˜ç¼ºç‚¹</strong></p>
<ul>
<li>ä¼˜ç‚¹âˆ¶ é€»è¾‘æœç”¨ã€ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ã€‚</li>
<li>ç¼ºç‚¹âˆ¶hocä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶çš„propså®¹æ˜“å’Œè¢«åŒ…è£¹åçš„ç»„ä»¶é‡åï¼Œè¿›è€Œè¢«è¦†ç›–</li>
</ul>
<p><strong>2ï¼‰é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li>ä»£ç å¤ç”¨ï¼Œé€»è¾‘æŠ½è±¡ </li>
<li>æ¸²æŸ“åŠ«æŒ </li>
<li>State æŠ½è±¡å’Œæ›´æ”¹ </li>
<li>Props æ›´æ”¹</li>
</ul>
<p><strong>3ï¼‰å…·ä½“åº”ç”¨ä¾‹å­</strong> </p>
<ul>
<li>**æƒé™æ§åˆ¶ï¼š**åˆ©ç”¨é«˜é˜¶ç»„ä»¶çš„ <strong>æ¡ä»¶æ¸²æŸ“</strong> ç‰¹æ€§å¯ä»¥å¯¹é¡µé¢è¿›è¡Œæƒé™æ§åˆ¶ï¼Œæƒé™æ§åˆ¶ä¸€èˆ¬åˆ†ä¸ºä¸¤ä¸ªç»´åº¦ï¼šé¡µé¢çº§åˆ«å’Œ é¡µé¢å…ƒç´ çº§åˆ«</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HOC.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">withAdminAuth</span>(<span class="params">WrappedComponent</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            <span class="attr">isAdmin</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">UNSAFE_componentWillMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> currentRole = <span class="keyword">await</span> <span class="title function_">getCurrentUserRole</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                <span class="attr">isAdmin</span>: currentRole === <span class="string">&#x27;Admin&#x27;</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">isAdmin</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> (<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è¯¥é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pages/page-a.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PageA</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="comment">// something here...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">UNSAFE_componentWillMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// fetching data</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// render page with data</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withAdminAuth</span>(<span class="title class_">PageA</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// pages/page-b.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PageB</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="comment">// something here...</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="title function_">UNSAFE_componentWillMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// fetching data</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// render page with data</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withAdminAuth</span>(<span class="title class_">PageB</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>**ç»„ä»¶æ¸²æŸ“æ€§èƒ½è¿½è¸ªï¼š**å€ŸåŠ©çˆ¶ç»„ä»¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè§„åˆ™æ•è·å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹æŸä¸ªç»„ä»¶çš„æ¸²æŸ“æ—¶é—´è¿›è¡Œè®°å½•âˆ¶</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Home</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (<span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">withTiming</span>(<span class="params">WrappedComponent</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">WrappedComponent</span> &#123;</span><br><span class="line">            <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">                <span class="variable language_">super</span>(props);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">start</span> = <span class="number">0</span>;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">end</span> = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">UNSAFE_componentWillMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">super</span>.<span class="property">componentWillMount</span> &amp;&amp; <span class="variable language_">super</span>.<span class="title function_">componentWillMount</span>();</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">start</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">super</span>.<span class="property">componentDidMount</span> &amp;&amp; <span class="variable language_">super</span>.<span class="title function_">componentDidMount</span>();</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">end</span> = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;WrappedComponent.name&#125;</span> ç»„ä»¶æ¸²æŸ“æ—¶é—´ä¸º <span class="subst">$&#123;<span class="variable language_">this</span>.end - <span class="variable language_">this</span>.start&#125;</span> ms`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">render</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withTiming</span>(<span class="title class_">Home</span>);   </span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šwithTiming æ˜¯åˆ©ç”¨ åå‘ç»§æ‰¿ å®ç°çš„ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ŒåŠŸèƒ½æ˜¯è®¡ç®—è¢«åŒ…è£¹ç»„ä»¶ï¼ˆè¿™é‡Œæ˜¯ Home ç»„ä»¶ï¼‰çš„æ¸²æŸ“æ—¶é—´ã€‚</p>
<ul>
<li><strong>é¡µé¢å¤ç”¨</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">withFetching</span> = fetching =&gt; <span class="function"><span class="params">WrappedComponent</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">React</span>.<span class="property">Component</span> &#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            <span class="attr">data</span>: [],</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">UNSAFE_componentWillMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetching</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                data,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> <span class="attr">data</span>=<span class="string">&#123;this.state.data&#125;</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// pages/page-a.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withFetching</span>(<span class="title function_">fetching</span>(<span class="string">&#x27;science-fiction&#x27;</span>))(<span class="title class_">MovieList</span>);</span><br><span class="line"><span class="comment">// pages/page-b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withFetching</span>(<span class="title function_">fetching</span>(<span class="string">&#x27;action&#x27;</span>))(<span class="title class_">MovieList</span>);</span><br><span class="line"><span class="comment">// pages/page-other.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">withFetching</span>(<span class="title function_">fetching</span>(<span class="string">&#x27;some-other-type&#x27;</span>))(<span class="title class_">MovieList</span>);</span><br></pre></td></tr></table></figure>





<h2 id="ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒ"><a href="#ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒ" class="headerlink" title="ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒ"></a>ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒ</h2><p><strong>ç›¸åŒç‚¹ï¼š</strong></p>
<p><strong>ç»„ä»¶æ˜¯ React å¯å¤ç”¨çš„æœ€å°ä»£ç ç‰‡æ®µ</strong>ï¼Œå®ƒä»¬ä¼šè¿”å›è¦åœ¨é¡µé¢ä¸­æ¸²æŸ“çš„ React å…ƒç´ ã€‚ä¹Ÿæ­£å› ä¸ºç»„ä»¶æ˜¯ React çš„æœ€å°ç¼–ç å•ä½ï¼Œæ‰€ä»¥æ— è®ºæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶ï¼Œåœ¨ä½¿ç”¨æ–¹å¼å’Œæœ€ç»ˆå‘ˆç°æ•ˆæœä¸Šéƒ½æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>
<p>æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†ä¸€ä¸ªç±»ç»„ä»¶æ”¹å†™æˆå‡½æ•°ç»„ä»¶ï¼Œæˆ–è€…æŠŠå‡½æ•°ç»„ä»¶æ”¹å†™æˆä¸€ä¸ªç±»ç»„ä»¶ï¼ˆè™½ç„¶å¹¶ä¸æ¨èè¿™ç§é‡æ„è¡Œä¸ºï¼‰ã€‚ä»ä½¿ç”¨è€…çš„è§’åº¦è€Œè¨€ï¼Œå¾ˆéš¾ä»ä½¿ç”¨ä½“éªŒä¸ŠåŒºåˆ†ä¸¤è€…ï¼Œè€Œä¸”åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé—­åŒ…å’Œç±»çš„æ€§èƒ½åªåœ¨æç«¯åœºæ™¯ä¸‹æ‰ä¼šæœ‰æ˜æ˜¾çš„å·®åˆ«ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬å¯è®¤ä¸ºä¸¤è€…ä½œä¸ºç»„ä»¶æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>
<p><strong>ä¸åŒç‚¹ï¼š</strong></p>
<ul>
<li>å®ƒä»¬åœ¨å¼€å‘æ—¶çš„å¿ƒæ™ºæ¨¡å‹ä¸Šå´å­˜åœ¨å·¨å¤§çš„å·®å¼‚ã€‚<strong>ç±»ç»„ä»¶æ˜¯åŸºäºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„</strong>ï¼Œå®ƒä¸»æ‰“çš„æ˜¯ç»§æ‰¿ã€ç”Ÿå‘½å‘¨æœŸç­‰æ ¸å¿ƒæ¦‚å¿µï¼›è€Œ<strong>å‡½æ•°ç»„ä»¶å†…æ ¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹</strong>ï¼Œä¸»æ‰“çš„æ˜¯ immutableã€æ²¡æœ‰å‰¯ä½œç”¨ã€å¼•ç”¨é€æ˜ç­‰ç‰¹ç‚¹ã€‚</li>
<li>ä¹‹å‰ï¼Œåœ¨ä½¿ç”¨åœºæ™¯ä¸Šï¼Œå¦‚æœå­˜åœ¨éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ï¼›è®¾è®¡æ¨¡å¼ä¸Šï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç»§æ‰¿ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ã€‚ä½†ç°åœ¨ç”±äº React Hooks çš„æ¨å‡ºï¼Œç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„æ·¡å‡ºï¼Œå‡½æ•°ç»„ä»¶å¯ä»¥å®Œå…¨å–ä»£ç±»ç»„ä»¶ã€‚å…¶æ¬¡ç»§æ‰¿å¹¶ä¸æ˜¯ç»„ä»¶æœ€ä½³çš„è®¾è®¡æ¨¡å¼ï¼Œå®˜æ–¹æ›´æ¨å´‡â€œç»„åˆä¼˜äºç»§æ‰¿â€çš„è®¾è®¡æ¦‚å¿µï¼Œæ‰€ä»¥ç±»ç»„ä»¶åœ¨è¿™æ–¹é¢çš„ä¼˜åŠ¿ä¹Ÿåœ¨æ·¡å‡ºã€‚</li>
<li>æ€§èƒ½ä¼˜åŒ–ä¸Šï¼Œ<strong>ç±»ç»„ä»¶ä¸»è¦ä¾é  shouldComponentUpdate é˜»æ–­æ¸²æŸ“æ¥æå‡æ€§èƒ½</strong>ï¼Œ<br>                è€Œ<strong>å‡½æ•°ç»„ä»¶ä¾é  React.memo ç¼“å­˜æ¸²æŸ“ç»“æœæ¥æå‡æ€§èƒ½</strong>ã€‚</li>
<li>ä»ä¸Šæ‰‹ç¨‹åº¦è€Œè¨€ï¼Œç±»ç»„ä»¶æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œä»æœªæ¥è¶‹åŠ¿ä¸Šçœ‹ï¼Œç”±äºReact Hooks çš„æ¨å‡ºï¼Œå‡½æ•°ç»„ä»¶æˆäº†ç¤¾åŒºæœªæ¥ä¸»æ¨çš„æ–¹æ¡ˆã€‚</li>
<li>ç±»ç»„ä»¶åœ¨æœªæ¥æ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ä¸­ï¼Œç”±äºç”Ÿå‘½å‘¨æœŸå¸¦æ¥çš„å¤æ‚åº¦ï¼Œå¹¶ä¸æ˜“äºä¼˜åŒ–ã€‚è€Œå‡½æ•°ç»„ä»¶æœ¬èº«è½»é‡ç®€å•ï¼Œä¸”<strong>åœ¨ Hooks çš„åŸºç¡€ä¸Šæä¾›äº†æ¯”åŸå…ˆæ›´ç»†ç²’åº¦çš„é€»è¾‘ç»„ç»‡ä¸å¤ç”¨</strong>ï¼Œæ›´èƒ½é€‚åº” React çš„æœªæ¥å‘å±•ã€‚</li>
</ul>
<h2 id="ç»„ä»¶é€šä¿¡"><a href="#ç»„ä»¶é€šä¿¡" class="headerlink" title="ç»„ä»¶é€šä¿¡"></a>ç»„ä»¶é€šä¿¡</h2><ul>
<li><strong>â½—ç»„ä»¶å‘â¼¦ç»„ä»¶é€šè®¯</strong>: â½—ç»„ä»¶å¯ä»¥å‘â¼¦ç»„ä»¶é€šè¿‡ä¼  props çš„â½…å¼ï¼Œå‘â¼¦ç»„ä»¶è¿›â¾é€šè®¯ </li>
<li><strong>â¼¦ç»„ä»¶å‘â½—ç»„ä»¶é€šè®¯</strong>: props+å›è°ƒçš„â½…å¼ï¼Œâ½—ç»„ä»¶å‘â¼¦ç»„ä»¶ä¼ é€’propsè¿›â¾é€šè®¯ï¼Œæ­¤propsä¸ºä½œâ½¤åŸŸä¸ºâ½—ç»„ä»¶â¾ƒèº«çš„å‡½ æ•°ï¼Œâ¼¦ç»„ä»¶è°ƒâ½¤è¯¥å‡½æ•°ï¼Œå°†â¼¦ç»„ä»¶æƒ³è¦ä¼ é€’çš„ä¿¡æ¯ï¼Œä½œä¸ºå‚æ•°ï¼Œä¼ é€’åˆ°â½—ç»„ä»¶çš„ä½œâ½¤åŸŸä¸­ </li>
<li><strong>å…„å¼Ÿç»„ä»¶é€šä¿¡</strong>: æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„â½—èŠ‚ç‚¹,ç»“åˆä¸Šâ¾¯ä¸¤ç§â½…å¼ç”±â½—èŠ‚ç‚¹è½¬å‘ä¿¡æ¯è¿›â¾é€šä¿¡ </li>
<li><strong>è·¨å±‚çº§é€šä¿¡</strong>: Context è®¾è®¡â½¬çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºâ¼€ä¸ªç»„ä»¶æ ‘â½½â¾”æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„â½¤æˆ·ã€ä¸»é¢˜æˆ–â¾¸é€‰è¯­â¾”ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®é€šè¿‡ Context é€šä¿¡å†é€‚åˆä¸è¿‡ </li>
<li><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong>: å‘å¸ƒè€…å‘å¸ƒäº‹ä»¶ï¼Œè®¢é˜…è€…ç›‘å¬äº‹ä»¶å¹¶åšå‡ºååº”,æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•â¼Ševentæ¨¡å—è¿›â¾é€šä¿¡ </li>
<li><strong>å…¨å±€çŠ¶æ€ç®¡ç†â¼¯å…·</strong>: å€ŸåŠ©Reduxæˆ–è€…Mobxç­‰å…¨å±€çŠ¶æ€ç®¡ç†â¼¯å…·è¿›â¾é€šä¿¡,è¿™ç§â¼¯å…·ä¼šç»´æŠ¤â¼€ä¸ªå…¨å±€çŠ¶æ€ä¸­â¼¼Store,å¹¶æ ¹æ®ä¸åŒçš„äº‹ä»¶äº§â½£æ–°çš„çŠ¶æ€</li>
</ul>
<h1 id="äº‹ä»¶æœºåˆ¶"><a href="#äº‹ä»¶æœºåˆ¶" class="headerlink" title="äº‹ä»¶æœºåˆ¶"></a>äº‹ä»¶æœºåˆ¶</h1><p>ä¸€ä¸ªäº‹ä»¶è§¦å‘åï¼Œä¼šåœ¨å­å…ƒç´ å’Œçˆ¶å…ƒç´ ä¹‹é—´ä¼ æ’­ï¼ˆpropagationï¼‰ã€‚è¿™ç§ä¼ æ’­åˆ†æˆä¸‰ä¸ªé˜¶æ®µ</p>
<p><img src="/../img/2019011111581623.jpg" alt="img"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œäº‹ä»¶ä¼ æ’­åˆ†æˆä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>æ•è·é˜¶æ®µï¼šä»windowå¯¹è±¡ä¼ å¯¼åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ˆä¸Šå±‚ä¼ åˆ°åº•å±‚ï¼‰ç§°ä¸ºâ€œæ•è·é˜¶æ®µâ€ï¼ˆcapture phaseï¼‰ï¼Œæ•è·é˜¶æ®µä¸ä¼šå“åº”ä»»ä½•äº‹ä»¶ï¼›<br>ç›®æ ‡é˜¶æ®µï¼šåœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œç§°ä¸ºâ€œç›®æ ‡é˜¶æ®µâ€<br>å†’æ³¡é˜¶æ®µï¼šä»ç›®æ ‡èŠ‚ç‚¹ä¼ å¯¼å›windowå¯¹è±¡ï¼ˆä»åº•å±‚ä¼ å›ä¸Šå±‚ï¼‰ï¼Œç§°ä¸ºâ€œå†’æ³¡é˜¶æ®µâ€ï¼ˆbubbling phaseï¼‰ã€‚äº‹ä»¶ä»£ç†å³æ˜¯åˆ©ç”¨äº‹ä»¶å†’æ³¡çš„æœºåˆ¶æŠŠé‡Œå±‚æ‰€éœ€è¦å“åº”çš„äº‹ä»¶ç»‘å®šåˆ°å¤–å±‚ï¼›<br><strong>äº‹ä»¶ä»£ç†</strong></p>
<p>äº‹ä»¶ä»£ç†ï¼ˆEvent Delegationï¼‰ï¼Œåˆç§°ä¹‹ä¸ºäº‹ä»¶å§”æ‰˜ã€‚æ˜¯JavaScriptä¸­å¸¸ç”¨ç»‘å®šäº‹ä»¶çš„å¸¸ç”¨æŠ€å·§ã€‚é¡¾åæ€ä¹‰ï¼Œâ€œäº‹ä»¶ä»£ç†â€å³æ˜¯æŠŠåŸæœ¬éœ€è¦ç»‘å®šåœ¨å­å…ƒç´ çš„å“åº”äº‹ä»¶ï¼ˆclickã€keydownâ€¦â€¦ï¼‰å§”æ‰˜ç»™çˆ¶å…ƒç´ ï¼Œè®©çˆ¶å…ƒç´ æ‹…å½“äº‹ä»¶ç›‘å¬çš„èŒåŠ¡ã€‚äº‹ä»¶ä»£ç†çš„åŸç†æ˜¯DOMå…ƒç´ çš„äº‹ä»¶å†’æ³¡åœ¨Reactä¸­äº‹ä»¶éœ€è¦é€šè¿‡å…ƒç´ çš„å±æ€§æ¥è®¾ç½®ï¼Œ</p>
<h3 id="React-äº‹ä»¶æœºåˆ¶"><a href="#React-äº‹ä»¶æœºåˆ¶" class="headerlink" title="React äº‹ä»¶æœºåˆ¶"></a>React äº‹ä»¶æœºåˆ¶</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onClick=&#123;<span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)&#125;&gt;ç‚¹æˆ‘&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>Reactå¹¶ä¸æ˜¯å°†clickäº‹ä»¶ç»‘å®šåˆ°äº†divçš„çœŸå®DOMä¸Šï¼Œè€Œæ˜¯<strong>åœ¨documentå¤„ç›‘å¬äº†æ‰€æœ‰çš„äº‹ä»¶ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶ä¸”<font color="red">å†’æ³¡</font>åˆ°documentå¤„çš„æ—¶å€™ï¼ŒReactå°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œ</strong>ã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…ä»…å‡å°‘äº†å†…å­˜çš„æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚åœ¨é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚</p>
<p>React <strong>åŸºäº Virtual DOM å®ç°äº†ä¸€ä¸ªSyntheticEventï¼ˆåˆæˆäº‹ä»¶ï¼‰å±‚ï¼Œæˆ‘ä»¬æ‰€å®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªSyntheticEventå¯¹è±¡çš„å®ä¾‹</strong>ã€‚ä¸åŸç”Ÿäº‹ä»¶ç›´æ¥åœ¨å…ƒç´ ä¸Šæ³¨å†Œçš„æ–¹å¼ä¸åŒçš„æ˜¯ï¼Œreactçš„åˆæˆäº‹ä»¶ä¸ä¼šç›´æ¥ç»‘å®šåˆ°ç›®æ ‡domèŠ‚ç‚¹ä¸Šï¼Œç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼Œä»¥é˜Ÿåˆ—çš„æ–¹å¼ï¼Œä»è§¦å‘äº‹ä»¶çš„ç»„ä»¶å‘çˆ¶ç»„ä»¶å›æº¯ç›´åˆ°documentèŠ‚ç‚¹ï¼Œå› æ­¤<strong>Reactç»„ä»¶ä¸Šå£°æ˜çš„äº‹ä»¶æœ€ç»ˆç»‘å®šåˆ°äº†document ä¸Š</strong>ã€‚ç”¨ä¸€ä¸ªç»Ÿä¸€çš„ç›‘å¬å™¨å»ç›‘å¬ï¼Œè¿™ä¸ªç›‘å¬å™¨ä¸Šä¿å­˜ç€ç›®æ ‡èŠ‚ç‚¹ä¸äº‹ä»¶å¯¹è±¡çš„æ˜ å°„ï¼Œå½“ç»„ä»¶æŒ‚è½½æˆ–å¸è½½æ—¶ï¼Œåªæ˜¯åœ¨è¿™ä¸ªç»Ÿä¸€çš„äº‹ä»¶ç›‘å¬å™¨ä¸Šæ’å…¥æˆ–åˆ é™¤ä¸€äº›å¯¹è±¡ï¼›å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé¦–å…ˆè¢«è¿™ä¸ªç»Ÿä¸€çš„äº‹ä»¶ç›‘å¬å™¨å¤„ç†ï¼Œç„¶ååœ¨æ˜ å°„é‡Œæ‰¾åˆ°çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°å¹¶è°ƒç”¨</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå†’æ³¡åˆ°documentä¸Šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯åŸç”Ÿçš„æµè§ˆå™¨äº‹ä»¶ï¼Œè€Œæ˜¯ç”±reactè‡ªå·±å®ç°çš„åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€‚å› æ­¤å¦‚æœä¸æƒ³è¦æ˜¯äº‹ä»¶å†’æ³¡çš„è¯åº”è¯¥è°ƒç”¨<strong>event.preventDefault()æ–¹æ³•</strong>ï¼Œè€Œä¸æ˜¯è°ƒç”¨event.stopProppagation()æ–¹æ³•ã€‚</p>
<p><img src="/../img/77fa6b2a59c92e160bc171f9c80783e7.jpg" alt="img"></p>
<p><strong>JSX ä¸Šå†™çš„äº‹ä»¶å¹¶æ²¡æœ‰ç»‘å®šåœ¨å¯¹åº”çš„çœŸå® DOM ä¸Šï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶ä»£ç†çš„æ–¹å¼ï¼Œå°†æ‰€æœ‰çš„äº‹ä»¶éƒ½ç»Ÿä¸€ç»‘å®šåœ¨äº† <code>document</code> ä¸Šã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…å‡å°‘äº†å†…å­˜æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚è½½é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚</strong></p>
<p>å¦å¤–å†’æ³¡åˆ° <code>document</code> ä¸Šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯åŸç”Ÿæµè§ˆå™¨äº‹ä»¶ï¼Œè€Œæ˜¯ React è‡ªå·±å®ç°çš„åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€‚å› æ­¤æˆ‘ä»¬å¦‚æœä¸æƒ³è¦äº‹ä»¶å†’æ³¡çš„è¯ï¼Œè°ƒç”¨ <code>event.stopPropagation</code> æ˜¯æ— æ•ˆçš„ï¼Œè€Œåº”è¯¥è°ƒç”¨ <code>event.preventDefault</code>ã€‚</p>
<p>å®ç°åˆæˆäº‹ä»¶çš„ç›®çš„å¦‚ä¸‹ï¼š</p>
<ul>
<li>åˆæˆäº‹ä»¶é¦–å…ˆæŠ¹å¹³äº†æµè§ˆå™¨ä¹‹é—´çš„å…¼å®¹é—®é¢˜ï¼Œå¦å¤–è¿™æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨åŸç”Ÿäº‹ä»¶åŒ…è£…å™¨ï¼Œèµ‹äºˆäº†è·¨æµè§ˆå™¨å¼€å‘çš„èƒ½åŠ›ï¼›</li>
<li>å¯¹äºåŸç”Ÿæµè§ˆå™¨äº‹ä»¶æ¥è¯´ï¼Œæµè§ˆå™¨ä¼šç»™ç›‘å¬å™¨åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚å¦‚æœä½ æœ‰å¾ˆå¤šçš„äº‹ä»¶ç›‘å¬ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ†é…å¾ˆå¤šçš„äº‹ä»¶å¯¹è±¡ï¼Œé€ æˆé«˜é¢çš„å†…å­˜åˆ†é…é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºåˆæˆäº‹ä»¶æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªäº‹ä»¶æ± ä¸“é—¨æ¥ç®¡ç†å®ƒä»¬çš„åˆ›å»ºå’Œé”€æ¯ï¼Œå½“äº‹ä»¶éœ€è¦è¢«ä½¿ç”¨æ—¶ï¼Œå°±ä¼šä»æ± å­ä¸­å¤ç”¨å¯¹è±¡ï¼Œäº‹ä»¶å›è°ƒç»“æŸåï¼Œå°±ä¼šé”€æ¯äº‹ä»¶å¯¹è±¡ä¸Šçš„å±æ€§ï¼Œä»è€Œä¾¿äºä¸‹æ¬¡å¤ç”¨äº‹ä»¶å¯¹è±¡ã€‚</li>
</ul>
<h3 id="Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>Reactçš„äº‹ä»¶å’Œæ™®é€šçš„HTMLäº‹ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><p>åŒºåˆ«ï¼š</p>
<ul>
<li><p>å¯¹äºäº‹ä»¶åç§°å‘½åæ–¹å¼ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå…¨å°å†™ï¼Œ<strong>react äº‹ä»¶é‡‡ç”¨å°é©¼å³°</strong>ï¼›</p>
</li>
<li><p>å¯¹äºäº‹ä»¶å‡½æ•°å¤„ç†è¯­æ³•ï¼ŒåŸç”Ÿäº‹ä»¶ä¸ºå­—ç¬¦ä¸²ï¼Œ<strong>react äº‹ä»¶ä¸ºå‡½æ•°</strong>ï¼› </p>
<p>å’ŒåŸç”ŸJSä¸åŒï¼Œåœ¨Reactä¸­äº‹ä»¶çš„å±æ€§éœ€è¦ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼š</p>
<p>onclick -&gt; onClick</p>
<p>onchange -&gt; onChange</p>
<p>å±æ€§å€¼ä¸èƒ½ç›´æ¥æ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼š</p>
<p>onclick&#x3D;â€alert(123)â€<br>onClick&#x3D;{()&#x3D;&gt;{alert(123)}}<br>onClick&#x3D;{handler}</p>
</li>
<li><p>react äº‹ä»¶ä¸èƒ½é‡‡ç”¨ return false çš„æ–¹å¼æ¥é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œå¿…é¡»è¦åœ°æ˜ç¡®åœ°è°ƒç”¨<code>preventDefault()</code>æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚</p>
</li>
</ul>
<p>åˆæˆäº‹ä»¶æ˜¯ react æ¨¡æ‹ŸåŸç”Ÿ DOM äº‹ä»¶æ‰€æœ‰èƒ½åŠ›çš„ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œå…¶ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ›´å¥½çš„è·¨å¹³å°ï¼›</li>
<li>å°†äº‹ä»¶ç»Ÿä¸€å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼Œé¿å…é¢‘ç¹çš„æ–°å¢ä¸åˆ é™¤ï¼ˆåƒåœ¾å›æ”¶ï¼‰ã€‚</li>
<li>æ–¹ä¾¿ react ç»Ÿä¸€ç®¡ç†å’Œäº‹åŠ¡æœºåˆ¶ã€‚</li>
</ul>
<p>äº‹ä»¶çš„æ‰§è¡Œé¡ºåºä¸º<strong>åŸç”Ÿäº‹ä»¶å…ˆæ‰§è¡Œï¼Œåˆæˆäº‹ä»¶åæ‰§è¡Œ</strong>ï¼Œ<strong>åˆæˆäº‹ä»¶ä¼šå†’æ³¡ç»‘å®šåˆ° document ä¸Š</strong>ï¼Œæ‰€ä»¥å°½é‡é¿å…åŸç”Ÿäº‹ä»¶ä¸åˆæˆäº‹ä»¶æ··ç”¨ï¼Œå¦‚æœ<strong>åŸç”Ÿäº‹ä»¶é˜»æ­¢å†’æ³¡ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆæˆäº‹ä»¶ä¸æ‰§è¡Œ</strong>ï¼Œå› ä¸ºéœ€è¦å†’æ³¡åˆ°document ä¸Šåˆæˆäº‹ä»¶æ‰ä¼šæ‰§è¡Œã€‚</p>
<h1 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h1><p><img src="/../img/image-20240225161622185.png" alt="image-20240225161622185"></p>
<p><strong>æ–°çš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<p><img src="/../img/image-20240225160610933.png" alt="image-20240225160610933"></p>
<h2 id="Reactçš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ"><a href="#Reactçš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Reactçš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ"></a>Reactçš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ</h2><p> React é€šå¸¸å°†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>è£…è½½é˜¶æ®µï¼ˆMountï¼‰ï¼Œç»„ä»¶ç¬¬ä¸€æ¬¡åœ¨DOMæ ‘ä¸­è¢«æ¸²æŸ“çš„è¿‡ç¨‹ï¼›</li>
<li>æ›´æ–°è¿‡ç¨‹ï¼ˆUpdateï¼‰ï¼Œç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ›´æ–°æ¸²æŸ“çš„è¿‡ç¨‹ï¼›</li>
<li>å¸è½½è¿‡ç¨‹ï¼ˆUnmountï¼‰ï¼Œç»„ä»¶ä»DOMæ ‘ä¸­è¢«ç§»é™¤çš„è¿‡ç¨‹ï¼›</li>
</ul>
<p><img src="/../img/image1111111.png" alt="img"></p>
<h3 id="1ï¼‰ç»„ä»¶æŒ‚è½½é˜¶æ®µ"><a href="#1ï¼‰ç»„ä»¶æŒ‚è½½é˜¶æ®µ" class="headerlink" title="1ï¼‰ç»„ä»¶æŒ‚è½½é˜¶æ®µ"></a>1ï¼‰ç»„ä»¶æŒ‚è½½é˜¶æ®µ</h3><p>æŒ‚è½½é˜¶æ®µç»„ä»¶è¢«åˆ›å»ºï¼Œç„¶åç»„ä»¶å®ä¾‹æ’å…¥åˆ° DOM ä¸­ï¼Œå®Œæˆç»„ä»¶çš„ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œè¯¥è¿‡ç¨‹åªä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œåœ¨æ­¤é˜¶æ®µä¼šä¾æ¬¡è°ƒç”¨ä»¥ä¸‹è¿™äº›æ–¹æ³•ï¼š</p>
<ul>
<li>constructor</li>
<li>getDerivedStateFromProps</li>
<li>render</li>
<li>componentDidMount</li>
</ul>
<h4 id="ï¼ˆ1ï¼‰constructor"><a href="#ï¼ˆ1ï¼‰constructor" class="headerlink" title="ï¼ˆ1ï¼‰constructor"></a>ï¼ˆ1ï¼‰constructor</h4><p>ç»„ä»¶çš„æ„é€ å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œï¼Œè‹¥æ²¡æœ‰æ˜¾å¼å®šä¹‰å®ƒï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è‹¥æ˜¾å¼å®šä¹‰äº†æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­æ‰§è¡Œ <code>super(props)</code>ï¼Œå¦åˆ™æ— æ³•åœ¨æ„é€ å‡½æ•°ä¸­æ‹¿åˆ°thisã€‚</p>
<p>å¦‚æœä¸åˆå§‹åŒ– state æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦ä¸º React ç»„ä»¶å®ç°æ„é€ å‡½æ•°<strong>Constructor</strong>ã€‚</p>
<p>constructorä¸­é€šå¸¸åªåšä¸¤ä»¶äº‹ï¼š </p>
<ul>
<li>åˆå§‹åŒ–ç»„ä»¶çš„ state</li>
<li>ç»™äº‹ä»¶å¤„ç†æ–¹æ³•ç»‘å®š this</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="variable language_">super</span>(props);</span><br><span class="line">  <span class="comment">// ä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ setStateï¼Œå¯ä»¥ç›´æ¥ç»™ state è®¾ç½®åˆå§‹å€¼</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">counter</span>: <span class="number">0</span> &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">handleClick</span> = <span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ï¼ˆ2ï¼‰getDerivedStateFromProps"><a href="#ï¼ˆ2ï¼‰getDerivedStateFromProps" class="headerlink" title="ï¼ˆ2ï¼‰getDerivedStateFromProps"></a>ï¼ˆ2ï¼‰getDerivedStateFromProps</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(props, state)</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸ªé™æ€æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨è¿™ä¸ªå‡½æ•°é‡Œä½¿ç”¨ <code>this</code>ï¼Œæœ‰ä¸¤ä¸ªå‚æ•° <code>props</code> å’Œ <code>state</code>ï¼Œåˆ†åˆ«æŒ‡æ¥æ”¶åˆ°çš„æ–°å‚æ•°å’Œå½“å‰ç»„ä»¶çš„ <code>state</code> å¯¹è±¡ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ç”¨æ¥æ›´æ–°å½“å‰çš„ <code>state</code> å¯¹è±¡ï¼Œå¦‚æœä¸éœ€è¦æ›´æ–°å¯ä»¥è¿”å› <code>null</code>ã€‚</p>
<p>è¯¥å‡½æ•°ä¼šåœ¨è£…è½½æ—¶ï¼Œæ¥æ”¶åˆ°æ–°çš„ <code>props</code> æˆ–è€…è°ƒç”¨äº† <code>setState</code> å’Œ <code>forceUpdate</code> æ—¶è¢«è°ƒç”¨ã€‚å¦‚å½“æ¥æ”¶åˆ°æ–°çš„å±æ€§æƒ³ä¿®æ”¹ <code>state</code> ï¼Œå°±å¯ä»¥ä½¿ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“ props.counter å˜åŒ–æ—¶ï¼Œèµ‹å€¼ç»™ state </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(<span class="params">props, state</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">counter</span> !== state.<span class="property">counter</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">counter</span>: props.<span class="property">counter</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">counter</span> + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>Hello, world!&#123;this.state.counter&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¯ä»¥æ˜¾å¼ä¼ å…¥ <code>counter</code> ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæƒ³è¦é€šè¿‡ç‚¹å‡»å®ç° <code>state.counter</code> çš„å¢åŠ ï¼Œä½†è¿™æ—¶ä¼šå‘ç°å€¼ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œä¸€ç›´ä¿æŒ <code>props</code> ä¼ è¿›æ¥çš„å€¼ã€‚è¿™æ˜¯ç”±äºåœ¨ React 16.4^ çš„ç‰ˆæœ¬ä¸­ <code>setState</code> å’Œ <code>forceUpdate</code> ä¹Ÿä¼šè§¦å‘è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥å½“ç»„ä»¶å†…éƒ¨ <code>state</code> å˜åŒ–åï¼Œå°±ä¼šé‡æ–°èµ°è¿™ä¸ªæ–¹æ³•ï¼ŒåŒæ—¶ä¼šæŠŠ <code>state</code> å€¼èµ‹å€¼ä¸º <code>props</code> çš„å€¼ã€‚å› æ­¤éœ€è¦å¤šåŠ ä¸€ä¸ªå­—æ®µæ¥è®°å½•ä¹‹å‰çš„ <code>props</code> å€¼ï¼Œè¿™æ ·å°±ä¼šè§£å†³ä¸Šè¿°é—®é¢˜ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œåªåˆ—å‡ºéœ€è¦å˜åŒ–çš„åœ°æ–¹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="comment">// å¢åŠ ä¸€ä¸ª preCounter æ¥è®°å½•ä¹‹å‰çš„ props ä¼ æ¥çš„å€¼</span></span><br><span class="line">      <span class="attr">preCounter</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getDerivedStateFromProps</span>(<span class="params">props, state</span>) &#123;</span><br><span class="line">    <span class="comment">// è·Ÿ state.preCounter è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">counter</span> !== state.<span class="property">preCounter</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">counter</span>: props.<span class="property">counter</span>,</span><br><span class="line">        <span class="attr">preCounter</span>: props.<span class="property">counter</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">counter</span> + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>Hello, world!&#123;this.state.counter&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ï¼ˆ3ï¼‰render"><a href="#ï¼ˆ3ï¼‰render" class="headerlink" title="ï¼ˆ3ï¼‰render"></a>ï¼ˆ3ï¼‰render</h4><p>renderæ˜¯React ä¸­æœ€æ ¸å¿ƒçš„æ–¹æ³•ï¼Œä¸€ä¸ªç»„ä»¶ä¸­å¿…é¡»è¦æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šæ ¹æ®çŠ¶æ€ <code>state</code> å’Œå±æ€§ <code>props</code> æ¸²æŸ“ç»„ä»¶ã€‚è¿™ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¿”å›éœ€è¦æ¸²æŸ“çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸è¦åœ¨è¿™ä¸ªå‡½æ•°å†…åšå…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œé€šå¸¸è°ƒç”¨è¯¥æ–¹æ³•ä¼šè¿”å›ä»¥ä¸‹ç±»å‹ä¸­ä¸€ä¸ªï¼š</p>
<ul>
<li><strong>React å…ƒç´ </strong>ï¼šè¿™é‡ŒåŒ…æ‹¬åŸç”Ÿçš„ DOM ä»¥åŠ React ç»„ä»¶ï¼›</li>
<li><strong>æ•°ç»„å’Œ Fragmentï¼ˆç‰‡æ®µï¼‰</strong>ï¼šå¯ä»¥è¿”å›å¤šä¸ªå…ƒç´ ï¼›</li>
<li><strong>Portalsï¼ˆæ’æ§½ï¼‰</strong>ï¼šå¯ä»¥å°†å­å…ƒç´ æ¸²æŸ“åˆ°ä¸åŒçš„ DOM å­æ ‘ç§ï¼›</li>
<li><strong>å­—ç¬¦ä¸²å’Œæ•°å­—</strong>ï¼šè¢«æ¸²æŸ“æˆ DOM ä¸­çš„ text èŠ‚ç‚¹ï¼›</li>
<li><strong>å¸ƒå°”å€¼æˆ– null</strong>ï¼šä¸æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚</li>
</ul>
<h4 id="ï¼ˆ4ï¼‰componentDidMount"><a href="#ï¼ˆ4ï¼‰componentDidMount" class="headerlink" title="ï¼ˆ4ï¼‰componentDidMount()"></a>ï¼ˆ4ï¼‰componentDidMount()</h4><p>componentDidMount()ä¼šåœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ DOM æ ‘ä¸­ï¼‰ç«‹å³è°ƒã€‚è¯¥é˜¶æ®µé€šå¸¸è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œï¼›</li>
<li>å‘é€ç½‘ç»œè¯·æ±‚ï¼›ï¼ˆå®˜æ–¹å»ºè®®ï¼‰</li>
<li>æ·»åŠ è®¢é˜…æ¶ˆæ¯ï¼ˆä¼šåœ¨componentWillUnmountå–æ¶ˆè®¢é˜…ï¼‰ï¼›</li>
</ul>
<p>å¦‚æœåœ¨ <code>componentDidMount</code> ä¸­è°ƒç”¨ <code>setState</code> ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡é¢å¤–çš„æ¸²æŸ“ï¼Œå¤šè°ƒç”¨äº†ä¸€æ¬¡ <code>render</code> å‡½æ•°ï¼Œç”±äºå®ƒæ˜¯åœ¨æµè§ˆå™¨åˆ·æ–°å±å¹•å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ç”¨æˆ·å¯¹æ­¤æ˜¯æ²¡æœ‰æ„ŸçŸ¥çš„ï¼Œä½†æ˜¯æˆ‘åº”å½“é¿å…è¿™æ ·ä½¿ç”¨ï¼Œè¿™æ ·ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½é—®é¢˜ï¼Œå°½é‡æ˜¯åœ¨ <code>constructor</code> ä¸­åˆå§‹åŒ– <code>state</code> å¯¹è±¡ã€‚</p>
<p>åœ¨ç»„ä»¶è£…è½½ä¹‹åï¼Œå°†è®¡æ•°æ•°å­—å˜ä¸º1ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>  &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">componentDidMount</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span> ()  &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;counter&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        counterå€¼: &#123; this.state.counter &#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2ï¼‰ç»„ä»¶æ›´æ–°é˜¶æ®µ"><a href="#2ï¼‰ç»„ä»¶æ›´æ–°é˜¶æ®µ" class="headerlink" title="2ï¼‰ç»„ä»¶æ›´æ–°é˜¶æ®µ"></a>2ï¼‰ç»„ä»¶æ›´æ–°é˜¶æ®µ</h3><p>å½“ç»„ä»¶çš„ <code>props</code> æ”¹å˜äº†ï¼Œæˆ–ç»„ä»¶å†…éƒ¨è°ƒç”¨äº† <code>setState/forceUpdate</code>ï¼Œä¼šè§¦å‘æ›´æ–°é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡ã€‚è¿™ä¸ªé˜¶æ®µä¼šä¾æ¬¡è°ƒç”¨ä¸‹é¢è¿™äº›æ–¹æ³•ï¼š</p>
<ul>
<li>getDerivedStateFromProps</li>
<li>shouldComponentUpdate</li>
<li>render</li>
<li>getSnapshotBeforeUpdate</li>
<li>componentDidUpdate</li>
</ul>
<h4 id="ï¼ˆ1ï¼‰shouldComponentUpdate"><a href="#ï¼ˆ1ï¼‰shouldComponentUpdate" class="headerlink" title="ï¼ˆ1ï¼‰shouldComponentUpdate"></a>ï¼ˆ1ï¼‰shouldComponentUpdate</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">shouldComponentUpdate</span>(nextProps, nextState)</span><br></pre></td></tr></table></figure>

<p>åœ¨è¯´è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¹‹å‰ï¼Œæ¥çœ‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><strong>setState å‡½æ•°åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“å—ï¼Ÿä¾‹å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼š</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;<span class="attr">number</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">number</span>&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>å¦‚æœæ²¡æœ‰è°ƒç”¨ setStateï¼Œprops å€¼ä¹Ÿæ²¡æœ‰å˜åŒ–ï¼Œæ˜¯ä¸æ˜¯ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Ÿ</strong></li>
</ul>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜ç­”æ¡ˆæ˜¯ <strong>ä¼š</strong> ï¼Œç¬¬äºŒä¸ªé—®é¢˜å¦‚æœæ˜¯çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¸ç®¡ä¼ å…¥çš„ props æœ‰æ²¡æœ‰å˜åŒ–ï¼Œéƒ½ä¼šå¼•èµ·å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•è§£å†³åœ¨è¿™ä¸¤ä¸ªåœºæ™¯ä¸‹ä¸è®©ç»„ä»¶é‡æ–°æ¸²æŸ“è¿›è€Œæå‡æ€§èƒ½å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ <code>shouldComponentUpdate</code> ç™»åœºäº†ï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ç”¨æ¥æå‡é€Ÿåº¦çš„ï¼Œå®ƒæ˜¯åœ¨é‡æ–°æ¸²æŸ“ç»„ä»¶å¼€å§‹å‰è§¦å‘çš„ï¼Œé»˜è®¤è¿”å› <code>true</code>ï¼Œå¯ä»¥æ¯”è¾ƒ <code>this.props</code> å’Œ <code>nextProps</code> ï¼Œ<code>this.state</code> å’Œ <code>nextState</code> å€¼æ˜¯å¦å˜åŒ–ï¼Œæ¥ç¡®è®¤è¿”å› true æˆ–è€… <code>false</code>ã€‚å½“è¿”å› <code>false</code> æ—¶ï¼Œç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹åœæ­¢ï¼Œåç»­çš„ <code>render</code>ã€<code>componentDidUpdate</code> ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>**æ³¨æ„ï¼š**æ·»åŠ  <code>shouldComponentUpdate</code> æ–¹æ³•æ—¶ï¼Œä¸å»ºè®®ä½¿ç”¨æ·±åº¦ç›¸ç­‰æ£€æŸ¥ï¼ˆå¦‚ä½¿ç”¨ <code>JSON.stringify()</code>ï¼‰ï¼Œå› ä¸ºæ·±æ¯”è¾ƒæ•ˆç‡å¾ˆä½ï¼Œå¯èƒ½ä¼šæ¯”é‡æ–°æ¸²æŸ“ç»„ä»¶æ•ˆç‡è¿˜ä½ã€‚è€Œä¸”è¯¥æ–¹æ³•ç»´æŠ¤æ¯”è¾ƒå›°éš¾ï¼Œå»ºè®®ä½¿ç”¨è¯¥æ–¹æ³•ä¼šäº§ç”Ÿæ˜æ˜¾çš„æ€§èƒ½æå‡æ—¶ä½¿ç”¨ã€‚</p>
<h4 id="ï¼ˆ2ï¼‰getSnapshotBeforeUpdate"><a href="#ï¼ˆ2ï¼‰getSnapshotBeforeUpdate" class="headerlink" title="ï¼ˆ2ï¼‰getSnapshotBeforeUpdate"></a>ï¼ˆ2ï¼‰getSnapshotBeforeUpdate</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getSnapshotBeforeUpdate</span>(prevProps, prevState)</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ³•åœ¨ <code>render</code> ä¹‹åï¼Œ<code>componentDidUpdate</code> ä¹‹å‰è°ƒç”¨ï¼Œæœ‰ä¸¤ä¸ªå‚æ•° <code>prevProps</code> å’Œ <code>prevState</code>ï¼Œè¡¨ç¤ºæ›´æ–°ä¹‹å‰çš„ <code>props</code> å’Œ <code>state</code>ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»è¦å’Œ <code>componentDidUpdate</code> ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”è¦æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œé»˜è®¤æ˜¯ <code>null</code>ï¼Œè¿™ä¸ªè¿”å›å€¼ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™ <code>componentDidUpdate</code>ã€‚</p>
<h4 id="ï¼ˆ3ï¼‰componentDidUpdate"><a href="#ï¼ˆ3ï¼‰componentDidUpdate" class="headerlink" title="ï¼ˆ3ï¼‰componentDidUpdate"></a>ï¼ˆ3ï¼‰componentDidUpdate</h4><p>componentDidUpdate() ä¼šåœ¨æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œé¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œæ­¤æ–¹æ³•ã€‚ è¯¥é˜¶æ®µé€šå¸¸è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>å½“ç»„ä»¶æ›´æ–°åï¼Œå¯¹ DOM è¿›è¡Œæ“ä½œï¼› </li>
<li>å¦‚æœä½ å¯¹æ›´æ–°å‰åçš„ props è¿›è¡Œäº†æ¯”è¾ƒï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åœ¨æ­¤å¤„è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼›ï¼ˆä¾‹å¦‚ï¼Œå½“ props æœªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼‰ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidUpdate</span>(<span class="params">prevProps, prevState, snapshot</span>)&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>prevProps: æ›´æ–°å‰çš„props</li>
<li>prevState: æ›´æ–°å‰çš„state</li>
<li>snapshot: getSnapshotBeforeUpdate()ç”Ÿå‘½å‘¨æœŸçš„è¿”å›å€¼</li>
</ul>
<h3 id="3ï¼‰ç»„ä»¶å¸è½½é˜¶æ®µ"><a href="#3ï¼‰ç»„ä»¶å¸è½½é˜¶æ®µ" class="headerlink" title="3ï¼‰ç»„ä»¶å¸è½½é˜¶æ®µ"></a>3ï¼‰ç»„ä»¶å¸è½½é˜¶æ®µ</h3><p>å¸è½½é˜¶æ®µåªæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ŒcomponentWillUnmount() ä¼šåœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨ã€‚åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œå¿…è¦çš„æ¸…ç†æ“ä½œï¼š</p>
<ul>
<li>æ¸…é™¤ timerï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–æ¸…é™¤</li>
<li>å–æ¶ˆåœ¨ componentDidMount() ä¸­åˆ›å»ºçš„è®¢é˜…ç­‰ï¼›</li>
</ul>
<p>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸåœ¨ä¸€ä¸ªç»„ä»¶è¢«å¸è½½å’Œé”€æ¯ä¹‹å‰è¢«è°ƒç”¨ï¼Œå› æ­¤ä½ ä¸åº”è¯¥å†è¿™ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ <code>setState</code>ï¼Œå› ä¸ºç»„ä»¶ä¸€æ—¦è¢«å¸è½½ï¼Œå°±ä¸ä¼šå†è£…è½½ï¼Œä¹Ÿå°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>
<h3 id="4ï¼‰é”™è¯¯å¤„ç†é˜¶æ®µ"><a href="#4ï¼‰é”™è¯¯å¤„ç†é˜¶æ®µ" class="headerlink" title="4ï¼‰é”™è¯¯å¤„ç†é˜¶æ®µ"></a>4ï¼‰é”™è¯¯å¤„ç†é˜¶æ®µ</h3><p>componentDidCatch(error, info)ï¼Œæ­¤ç”Ÿå‘½å‘¨æœŸåœ¨åä»£ç»„ä»¶æŠ›å‡ºé”™è¯¯åè¢«è°ƒç”¨ã€‚ å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°âˆ¶</p>
<ul>
<li>errorï¼šæŠ›å‡ºçš„é”™è¯¯ã€‚</li>
<li>infoï¼šå¸¦æœ‰ componentStack key çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ç»„ä»¶å¼•å‘é”™è¯¯çš„æ ˆä¿¡æ¯</li>
</ul>
<p>Reactå¸¸è§çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š</p>
<p><img src="/../img/image222222.png" alt="img"></p>
<p><strong>Reactå¸¸è§ç”Ÿå‘½å‘¨æœŸçš„è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æŒ‚è½½é˜¶æ®µï¼Œé¦–å…ˆæ‰§è¡Œconstructoræ„é€ æ–¹æ³•ï¼Œæ¥åˆ›å»ºç»„ä»¶</li>
<li>åˆ›å»ºå®Œæˆä¹‹åï¼Œå°±ä¼šæ‰§è¡Œrenderæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›éœ€è¦æ¸²æŸ“çš„å†…å®¹</li>
<li>éšåï¼ŒReactä¼šå°†éœ€è¦æ¸²æŸ“çš„å†…å®¹æŒ‚è½½åˆ°DOMæ ‘ä¸Š</li>
<li><strong>æŒ‚è½½å®Œæˆä¹‹åå°±ä¼šæ‰§è¡Œ****componentDidMountç”Ÿå‘½å‘¨æœŸå‡½æ•°</strong></li>
<li>å¦‚æœæˆ‘ä»¬ç»™ç»„ä»¶åˆ›å»ºä¸€ä¸ªpropsï¼ˆç”¨äºç»„ä»¶é€šä¿¡ï¼‰ã€è°ƒç”¨setStateï¼ˆæ›´æ”¹stateä¸­çš„æ•°æ®ï¼‰ã€è°ƒç”¨forceUpdateï¼ˆå¼ºåˆ¶æ›´æ–°ç»„ä»¶ï¼‰æ—¶ï¼Œéƒ½ä¼šé‡æ–°è°ƒç”¨renderå‡½æ•°</li>
<li>renderå‡½æ•°é‡æ–°æ‰§è¡Œä¹‹åï¼Œå°±ä¼šé‡æ–°è¿›è¡ŒDOMæ ‘çš„æŒ‚è½½</li>
<li><strong>æŒ‚è½½å®Œæˆä¹‹åå°±ä¼šæ‰§è¡Œ****componentDidUpdateç”Ÿå‘½å‘¨æœŸå‡½æ•°</strong></li>
<li><strong>å½“ç§»é™¤ç»„ä»¶æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ****componentWillUnmountç”Ÿå‘½å‘¨æœŸå‡½æ•°</strong></li>
</ul>
<p><strong>Reactä¸»è¦ç”Ÿå‘½å‘¨æœŸæ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>getDefaultProps</strong>ï¼šè¿™ä¸ªå‡½æ•°ä¼šåœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰è¢«è°ƒç”¨ä¸€æ¬¡ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡ï¼‰ï¼Œå®ƒè¢«ç”¨æ¥åˆå§‹åŒ–ç»„ä»¶çš„ Propsï¼›</li>
<li><strong>getInitialState</strong>ï¼šç”¨äºåˆå§‹åŒ–ç»„ä»¶çš„ state å€¼ï¼›</li>
<li><strong>componentWillMount</strong>ï¼šåœ¨ç»„ä»¶åˆ›å»ºåã€render ä¹‹å‰ï¼Œä¼šèµ°åˆ° componentWillMount é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µæˆ‘ä¸ªäººä¸€ç›´æ²¡ç”¨è¿‡ã€éå¸¸é¸¡è‚‹ã€‚åæ¥React å®˜æ–¹å·²ç»ä¸æ¨èå¤§å®¶åœ¨ componentWillMount é‡Œåšä»»ä½•äº‹æƒ…ã€åˆ°ç°åœ¨ <strong>React16 ç›´æ¥åºŸå¼ƒäº†è¿™ä¸ªç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œè¶³è§å…¶é¸¡è‚‹ç¨‹åº¦äº†ï¼›</li>
<li><strong>render</strong>ï¼šè¿™æ˜¯æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸä¸­å”¯ä¸€ä¸€ä¸ªä½ å¿…é¡»è¦å®ç°çš„æ–¹æ³•ã€‚ä¸€èˆ¬æ¥è¯´éœ€è¦è¿”å›ä¸€ä¸ª jsx å…ƒç´ ï¼Œè¿™æ—¶ React ä¼šæ ¹æ® props å’Œ state æ¥æŠŠç»„ä»¶æ¸²æŸ“åˆ°ç•Œé¢ä¸Šï¼›ä¸è¿‡æœ‰æ—¶ï¼Œä½ å¯èƒ½ä¸æƒ³æ¸²æŸ“ä»»ä½•ä¸œè¥¿ï¼Œè¿™ç§æƒ…å†µä¸‹è®©å®ƒè¿”å› null æˆ–è€… false å³å¯ï¼›</li>
<li><strong>componentDidMount</strong>ï¼šä¼šåœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ DOM æ ‘ä¸­åï¼‰ç«‹å³è°ƒç”¨ï¼Œæ ‡å¿—ç€ç»„ä»¶æŒ‚è½½å®Œæˆã€‚ä¸€äº›æ“ä½œå¦‚æœä¾èµ–è·å–åˆ° DOM èŠ‚ç‚¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±ä¼šæ”¾åœ¨è¿™ä¸ªé˜¶æ®µæ¥åšã€‚æ­¤å¤–ï¼Œè¿™è¿˜æ˜¯ React å®˜æ–¹æ¨èçš„å‘èµ· ajax è¯·æ±‚çš„æ—¶æœºã€‚è¯¥æ–¹æ³•å’Œ componentWillMount ä¸€æ ·ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡è°ƒç”¨ã€‚</li>
</ol>
<h1 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h1><h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h2><p><img src="/../img/image-20240225215635333.png" alt="image-20240225215635333"></p>
<h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><h3 id="createStore"><a href="#createStore" class="headerlink" title="createStore"></a>createStore</h3><p><code>createStore</code> å‡½æ•°é€šå¸¸æ˜¯ç”¨äºåˆ›å»º Redux store çš„å‡½æ•°ã€‚Redux æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† JavaScript åº”ç”¨ç¨‹åºçŠ¶æ€çš„æµè¡Œåº“ã€‚è®©æˆ‘ä»¬æ¥è§£æ <code>createStore</code> å‡½æ•°çš„ä¸€èˆ¬ç»“æ„å’Œä½œç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createStore</span>(<span class="params">reducer, preloadedState, enhancer</span>) &#123;</span><br><span class="line">  <span class="comment">// å†…éƒ¨çŠ¶æ€ state</span></span><br><span class="line">  <span class="keyword">let</span> currentState = preloadedState;</span><br><span class="line">  <span class="comment">// å†…éƒ¨è®¢é˜…è€…åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">let</span> currentListeners = [];</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·å–å½“å‰çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getState</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> currentState;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¿®æ”¹çŠ¶æ€çš„å”¯ä¸€æ–¹å¼ï¼Œé€šè¿‡æ´¾å‘ action</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">dispatch</span>(<span class="params">action</span>) &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨ reducer æ¥è·å–æ–°çš„çŠ¶æ€</span></span><br><span class="line">    currentState = <span class="title function_">reducer</span>(currentState, action);</span><br><span class="line">    <span class="comment">// è§¦å‘æ‰€æœ‰è®¢é˜…è€…</span></span><br><span class="line">    currentListeners.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> <span class="title function_">listener</span>());</span><br><span class="line">    <span class="keyword">return</span> action;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¢é˜…çŠ¶æ€çš„å˜åŒ–ï¼Œæ¯å½“çŠ¶æ€å˜åŒ–æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">subscribe</span>(<span class="params">listener</span>) &#123;</span><br><span class="line">    <span class="comment">// å°†ä¼ å…¥çš„å›è°ƒå‡½æ•°åŠ å…¥åˆ°è®¢é˜…è€…åˆ—è¡¨ä¸­</span></span><br><span class="line">    currentListeners.<span class="title function_">push</span>(listener);</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªå–æ¶ˆè®¢é˜…çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">unsubscribe</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// å°†è¯¥å›è°ƒå‡½æ•°ä»è®¢é˜…è€…åˆ—è¡¨ä¸­ç§»é™¤</span></span><br><span class="line">      <span class="keyword">const</span> index = currentListeners.<span class="title function_">indexOf</span>(listener);</span><br><span class="line">      currentListeners.<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›¿æ¢ reducer çš„å‡½æ•°ï¼Œç”¨äºåŠ¨æ€åœ°æ”¹å˜ reducer</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">replaceReducer</span>(<span class="params">nextReducer</span>) &#123;</span><br><span class="line">    reducer = nextReducer;</span><br><span class="line">    <span class="comment">// è°ƒç”¨ dispatch ä¸€ä¸ªå†…ç½®çš„åŠ¨ä½œï¼Œä»¥ä¾¿æ›´æ–°çŠ¶æ€</span></span><br><span class="line">    <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;@@redux/INIT&#x27;</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åˆå§‹åŒ– storeï¼Œè°ƒç”¨ reducer ä»¥è·å–åˆå§‹çŠ¶æ€ï¼Œå¹¶è¿”å›ä¸€ä¸ª store å¯¹è±¡</span></span><br><span class="line">  <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;@@redux/INIT&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿”å› store å¯¹è±¡ï¼ŒåŒ…å« getStateã€dispatchã€subscribe å’Œ replaceReducer æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    dispatch,</span><br><span class="line">    subscribe,</span><br><span class="line">    getState,</span><br><span class="line">    replaceReducer</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹ <code>createStore</code> å‡½æ•°çš„å„ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><p><strong>å‚æ•°</strong>ï¼š</p>
<p>â€‹    åœ¨ <code>createStore</code> å‡½æ•°ä¸­æ¶‰åŠåˆ°çš„æ ¸å¿ƒæ•°æ®ç±»å‹ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><strong>reducer</strong>ï¼š<code>reducer</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å½“å‰çŠ¶æ€ (<code>state</code>) å’Œä¸€ä¸ªåŠ¨ä½œ (<code>action</code>)ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚å®ƒæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œé€šå¸¸æ˜¯é€šè¿‡ <code>switch</code> è¯­å¥æ¥æ ¹æ®ä¸åŒçš„åŠ¨ä½œç±»å‹è¿›è¡ŒçŠ¶æ€æ›´æ–°çš„ã€‚åŠ¨ä½œç±»å‹é€šå¸¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå¯¹çŠ¶æ€è¿›è¡Œä½•ç§æ“ä½œï¼Œä¾‹å¦‚ <code>&#39;INCREMENT&#39;</code>ã€<code>&#39;DECREMENT&#39;</code> ç­‰ã€‚</li>
<li><strong>preloadedState</strong>ï¼š<code>preloadedState</code> æ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡ï¼Œè¡¨ç¤ºåº”ç”¨ç¨‹åºçš„åˆå§‹çŠ¶æ€ã€‚å®ƒæ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸æä¾›åˆ™çŠ¶æ€å°†è¢«åˆå§‹åŒ–ä¸º <code>undefined</code>ï¼Œç„¶ååœ¨è°ƒç”¨ <code>reducer</code> æ—¶è¢«è®¾ç½®ä¸º <code>reducer</code> å‡½æ•°çš„é»˜è®¤å€¼ã€‚</li>
<li><strong>currentState</strong>ï¼š<code>currentState</code> æ˜¯ä¸€ä¸ªå˜é‡ï¼Œç”¨äºå­˜å‚¨å½“å‰çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚å®ƒä¼šéšç€åŠ¨ä½œçš„æ´¾å‘è€Œæ”¹å˜ï¼Œé€šè¿‡è°ƒç”¨ <code>reducer</code> å‡½æ•°è®¡ç®—å‡ºæ–°çš„çŠ¶æ€ã€‚</li>
<li><strong>currentListeners</strong>ï¼š<code>currentListeners</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºå­˜å‚¨æ‰€æœ‰è®¢é˜…çŠ¶æ€å˜åŒ–çš„å›è°ƒå‡½æ•°ã€‚æ¯å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™äº›å›è°ƒå‡½æ•°å°†ä¼šè¢«ä¾æ¬¡è°ƒç”¨ã€‚</li>
<li><strong>action</strong>ï¼š<code>action</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œå¿…é¡»åŒ…å«ä¸€ä¸ª <code>type</code> å­—æ®µï¼Œè¡¨ç¤ºåŠ¨ä½œçš„ç±»å‹ã€‚é™¤äº† <code>type</code> å­—æ®µä¹‹å¤–ï¼Œ<code>action</code> å¯¹è±¡å¯ä»¥åŒ…å«å…¶ä»–å­—æ®µï¼Œç”¨äºä¼ é€’æ•°æ®ç»™ <code>reducer</code> å‡½æ•°ã€‚</li>
<li><strong>store</strong>ï¼š<code>store</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº† <code>dispatch</code>ã€<code>subscribe</code>ã€<code>getState</code> å’Œ <code>replaceReducer</code> æ–¹æ³•ã€‚å®ƒæ˜¯æ•´ä¸ª Redux åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒï¼Œç”¨äºç®¡ç†çŠ¶æ€çš„å˜åŒ–å’Œè®¢é˜…çŠ¶æ€å˜åŒ–ã€‚</li>
</ol>
<p>â€‹    7.<code>enhancer</code> (å¯é€‰): ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºå¢å¼º <code>store</code> çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä¸­é—´ä»¶ç­‰ã€‚</p>
</li>
<li><p><strong>å†…éƒ¨å˜é‡</strong>ï¼š</p>
<ul>
<li><code>currentState</code>: å­˜å‚¨å½“å‰çŠ¶æ€çš„å˜é‡ã€‚</li>
<li><code>currentListeners</code>: ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å½“å‰è®¢é˜…çŠ¶æ€å˜åŒ–çš„æ‰€æœ‰å›è°ƒå‡½æ•°ã€‚</li>
</ul>
</li>
<li><p><strong>æ–¹æ³•</strong>ï¼š</p>
<ul>
<li><code>getState()</code>: è¿”å›å½“å‰å­˜å‚¨çš„çŠ¶æ€ã€‚</li>
<li><code>dispatch(action)</code>: æ¥æ”¶ä¸€ä¸ªåŠ¨ä½œå¹¶è§¦å‘çŠ¶æ€å˜åŒ–ã€‚å®ƒé€šè¿‡è°ƒç”¨ reducer å‡½æ•°æ¥è®¡ç®—æ–°çš„çŠ¶æ€ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰çš„è®¢é˜…è€…ã€‚</li>
<li><code>subscribe(listener)</code>: æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ¯å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šè°ƒç”¨è¯¥å›è°ƒå‡½æ•°ã€‚</li>
<li><code>replaceReducer(nextReducer)</code>: ç”¨äºåŠ¨æ€æ›¿æ¢ reducer å‡½æ•°ã€‚</li>
</ul>
</li>
<li><p><strong>åˆå§‹åŒ–</strong>ï¼š</p>
<ul>
<li>åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œä¼šè°ƒç”¨ <code>dispatch(&#123; type: &#39;@@redux/INIT&#39; &#125;)</code> æ¥è·å–åˆå§‹çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><p><strong>è¿”å›å€¼</strong>ï¼š</p>
<ul>
<li>è¿”å›ä¸€ä¸ªåŒ…å« <code>dispatch</code>ã€<code>subscribe</code>ã€<code>getState</code> å’Œ <code>replaceReducer</code> æ–¹æ³•çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ Redux çš„ <code>store</code>ã€‚</li>
</ul>
</li>
</ol>
<p>PS:<code>redux</code> å‘å¸ƒ <code>4.2.0</code> ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬å°†åŸå§‹ <code>createStore API</code> æ ‡è®°ä¸º <code>@deprecated</code>(åºŸå¼ƒ)ï¼Œå¹¶ä¸”æ·»åŠ äº†ä¸€ä¸ªå…¨æ–°çš„ <code>legacy_createStore API</code>ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ·»åŠ å¼ƒç”¨è­¦å‘Šã€‚</p>
<h3 id="å¯¹-Redux-çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜"><a href="#å¯¹-Redux-çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜" class="headerlink" title="å¯¹ Redux çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜"></a>å¯¹ Redux çš„ç†è§£ï¼Œä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜</h3><p>Reactæ˜¯è§†å›¾å±‚æ¡†æ¶ã€‚Reduxæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†æ•°æ®çŠ¶æ€å’ŒUIçŠ¶æ€çš„JavaScriptåº”ç”¨å·¥å…·ã€‚éšç€JavaScriptå•é¡µåº”ç”¨ï¼ˆSPAï¼‰å¼€å‘æ—¥è¶‹å¤æ‚ï¼Œ JavaScriptéœ€è¦ç®¡ç†æ¯”ä»»ä½•æ—¶å€™éƒ½è¦å¤šçš„stateï¼ˆçŠ¶æ€ï¼‰ï¼Œ Reduxå°±æ˜¯é™ä½ç®¡ç†éš¾åº¦çš„ã€‚ï¼ˆReduxæ”¯æŒReactã€Angularã€jQueryç”šè‡³çº¯JavaScriptï¼‰ã€‚</p>
<p>åœ¨ React ä¸­ï¼ŒUI ä»¥ç»„ä»¶çš„å½¢å¼æ¥æ­å»ºï¼Œç»„ä»¶ä¹‹é—´å¯ä»¥åµŒå¥—ç»„åˆã€‚ä½† React ä¸­ç»„ä»¶é—´é€šä¿¡çš„æ•°æ®æµæ˜¯å•å‘çš„ï¼Œé¡¶å±‚ç»„ä»¶å¯ä»¥é€šè¿‡ props å±æ€§å‘ä¸‹å±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè€Œä¸‹å±‚ç»„ä»¶ä¸èƒ½å‘ä¸Šå±‚ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´åŒæ ·ä¸èƒ½ã€‚è¿™æ ·ç®€å•çš„å•å‘æ•°æ®æµæ”¯æ’‘èµ·äº† React ä¸­çš„æ•°æ®å¯æ§æ€§ã€‚</p>
<p>å½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œç®¡ç†æ•°æ®çš„äº‹ä»¶æˆ–å›è°ƒå‡½æ•°å°†è¶Šæ¥è¶Šå¤šï¼Œä¹Ÿå°†è¶Šæ¥è¶Šä¸å¥½ç®¡ç†ã€‚ç®¡ç†ä¸æ–­å˜åŒ–çš„ state éå¸¸å›°éš¾ã€‚å¦‚æœä¸€ä¸ª model çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ª model å˜åŒ–ï¼Œé‚£ä¹ˆå½“ view å˜åŒ–æ—¶ï¼Œå°±å¯èƒ½å¼•èµ·å¯¹åº” model ä»¥åŠå¦ä¸€ä¸ª model çš„å˜åŒ–ï¼Œä¾æ¬¡åœ°ï¼Œå¯èƒ½ä¼šå¼•èµ·å¦ä¸€ä¸ª view çš„å˜åŒ–ã€‚ç›´è‡³ä½ æä¸æ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚state åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œç”±äºä»€ä¹ˆåŸå› ï¼Œå¦‚ä½•å˜åŒ–å·²ç„¶ä¸å—æ§åˆ¶ã€‚ å½“ç³»ç»Ÿå˜å¾—é”™ç»¼å¤æ‚çš„æ—¶å€™ï¼Œæƒ³é‡ç°é—®é¢˜æˆ–è€…æ·»åŠ æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ä¸¾æ­¥ç»´è‰°ã€‚å¦‚æœè¿™è¿˜ä¸å¤Ÿç³Ÿç³•ï¼Œè€ƒè™‘ä¸€äº›æ¥è‡ªå‰ç«¯å¼€å‘é¢†åŸŸçš„æ–°éœ€æ±‚ï¼Œå¦‚æ›´æ–°è°ƒä¼˜ã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬å‰è¯·æ±‚æ•°æ®ç­‰ã€‚state çš„ç®¡ç†åœ¨å¤§é¡¹ç›®ä¸­ç›¸å½“å¤æ‚ã€‚</p>
<p>Redux æä¾›äº†ä¸€ä¸ªå« store çš„ç»Ÿä¸€ä»“å‚¨åº“ï¼Œç»„ä»¶é€šè¿‡ dispatch å°† state ç›´æ¥ä¼ å…¥storeï¼Œä¸ç”¨é€šè¿‡å…¶ä»–çš„ç»„ä»¶ã€‚å¹¶ä¸”ç»„ä»¶é€šè¿‡ subscribe ä» storeè·å–åˆ° state çš„æ”¹å˜ã€‚ä½¿ç”¨äº† Reduxï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä» store ä¸­è·å–åˆ°æ‰€éœ€çš„ stateï¼Œä»–ä»¬ä¹Ÿèƒ½ä»store è·å–åˆ° state çš„æ”¹å˜ã€‚è¿™æ¯”ç»„ä»¶ä¹‹é—´äº’ç›¸ä¼ é€’æ•°æ®æ¸…æ™°æ˜æœ—çš„å¤šã€‚</p>
<p><strong>ä¸»è¦è§£å†³çš„é—®é¢˜ï¼š</strong></p>
<p>å•çº¯çš„Reduxåªæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œæ˜¯æ²¡æœ‰UIå‘ˆç°çš„ï¼Œreact- reduxä½œç”¨æ˜¯å°†Reduxçš„çŠ¶æ€æœºå’ŒReactçš„UIå‘ˆç°ç»‘å®šåœ¨ä¸€èµ·ï¼Œå½“ä½ dispatch actionæ”¹å˜stateçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ›´æ–°é¡µé¢ã€‚</p>
<h3 id="2-Redux-åŸç†åŠå·¥ä½œæµç¨‹"><a href="#2-Redux-åŸç†åŠå·¥ä½œæµç¨‹" class="headerlink" title="2. Redux åŸç†åŠå·¥ä½œæµç¨‹"></a>2. Redux åŸç†åŠå·¥ä½œæµç¨‹</h3><p><strong>ï¼ˆ1ï¼‰åŸç†</strong></p>
<p>Reduxæºç ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—æ–‡ä»¶</p>
<ul>
<li>compose.js æä¾›ä»å³åˆ°å·¦è¿›è¡Œå‡½æ•°å¼ç¼–ç¨‹</li>
<li>createStore.js æä¾›ä½œä¸ºç”Ÿæˆå”¯ä¸€storeçš„å‡½æ•°</li>
<li>combineReducers.js æä¾›åˆå¹¶å¤šä¸ªreducerçš„å‡½æ•°ï¼Œä¿è¯storeçš„å”¯ä¸€æ€§</li>
<li>bindActionCreators.js å¯ä»¥è®©å¼€å‘è€…åœ¨ä¸ç›´æ¥æ¥è§¦dispacthçš„å‰æä¸‹è¿›è¡Œæ›´æ”¹stateçš„æ“ä½œ</li>
<li>applyMiddleware.js è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸­é—´ä»¶æ¥å¢å¼ºdispatchçš„åŠŸèƒ½</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> actionTypes = &#123;</span><br><span class="line">    <span class="attr">ADD</span>: <span class="string">&#x27;ADD&#x27;</span>,</span><br><span class="line">    <span class="attr">CHANGEINFO</span>: <span class="string">&#x27;CHANGEINFO&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initState = &#123;</span><br><span class="line">    <span class="attr">info</span>: <span class="string">&#x27;åˆå§‹åŒ–&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">initReducer</span>(<span class="params">state=initState, action</span>) &#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.<span class="property">type</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> actionTypes.<span class="property">CHANGEINFO</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                <span class="attr">info</span>: action.<span class="property">preload</span>.<span class="property">info</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123; ...state &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createStore</span>(<span class="params">reducer, initialState, middleFunc</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (initialState &amp;&amp; <span class="keyword">typeof</span> initialState === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        middleFunc = initialState;</span><br><span class="line">        initialState = <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> currentState = initialState;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> listeners = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (middleFunc &amp;&amp; <span class="keyword">typeof</span> middleFunc === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// å°è£…dispatch </span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">middleFunc</span>(createStore)(reducer, initialState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getState</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> currentState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">dispatch</span> = (<span class="params">action</span>) =&gt; &#123;</span><br><span class="line">        currentState = <span class="title function_">reducer</span>(currentState, action);</span><br><span class="line"></span><br><span class="line">        listeners.<span class="title function_">forEach</span>(<span class="function"><span class="params">listener</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">listener</span>();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">subscribe</span> = (<span class="params">listener</span>) =&gt; &#123;</span><br><span class="line">        listeners.<span class="title function_">push</span>(listener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getState,</span><br><span class="line">        dispatch,</span><br><span class="line">        subscribe</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ2ï¼‰å·¥ä½œæµç¨‹</strong></p>
<ul>
<li>const store&#x3D; createStoreï¼ˆfnï¼‰ç”Ÿæˆæ•°æ®; </li>
<li>action: {type: Symble(â€˜action01), payload:â€™payloadâ€™ }å®šä¹‰è¡Œä¸º; </li>
<li>dispatchå‘èµ·actionï¼šstore.dispatch(doSomething(â€˜action001â€™)); </li>
<li>reducerï¼šå¤„ç†actionï¼Œè¿”å›æ–°çš„state;</li>
</ul>
<p>é€šä¿—ç‚¹è§£é‡Šï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œç”¨æˆ·ï¼ˆé€šè¿‡Viewï¼‰å‘å‡ºActionï¼Œå‘å‡ºæ–¹å¼å°±ç”¨åˆ°äº†dispatchæ–¹æ³•</li>
<li>ç„¶åï¼ŒStoreè‡ªåŠ¨è°ƒç”¨Reducerï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰Stateå’Œæ”¶åˆ°çš„Actionï¼ŒReducerä¼šè¿”å›æ–°çš„State</li>
<li>Stateâ€”æ—¦æœ‰å˜åŒ–ï¼ŒStoreå°±ä¼šè°ƒç”¨ç›‘å¬å‡½æ•°ï¼Œæ¥æ›´æ–°View</li>
</ul>
<p>ä»¥ store ä¸ºæ ¸å¿ƒï¼Œå¯ä»¥æŠŠå®ƒçœ‹æˆæ•°æ®å­˜å‚¨ä¸­å¿ƒï¼Œä½†æ˜¯ä»–è¦æ›´æ”¹æ•°æ®çš„æ—¶å€™ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œæ•°æ®ä¿®æ”¹æ›´æ–°çš„è§’è‰²ç”±Reducersæ¥æ‹…ä»»ï¼Œstoreåªåšå­˜å‚¨ï¼Œä¸­é—´äººï¼Œå½“Reducersçš„æ›´æ–°å®Œæˆä»¥åä¼šé€šè¿‡storeçš„è®¢é˜…æ¥é€šçŸ¥react componentï¼Œç»„ä»¶æŠŠæ–°çš„çŠ¶æ€é‡æ–°è·å–æ¸²æŸ“ï¼Œç»„ä»¶ä¸­ä¹Ÿèƒ½ä¸»åŠ¨å‘é€actionï¼Œåˆ›å»ºactionåè¿™ä¸ªåŠ¨ä½œæ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œæ‰€ä»¥è¦dispatchè¿™ä¸ªactionï¼Œè®©storeé€šè¿‡reducerså»åšæ›´æ–°React Component å°±æ˜¯reactçš„æ¯ä¸ªç»„ä»¶ã€‚</p>
<h3 id="3-Redux-ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†"><a href="#3-Redux-ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†" class="headerlink" title="3. Redux ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†"></a>3. Redux ä¸­å¼‚æ­¥çš„è¯·æ±‚æ€ä¹ˆå¤„ç†</h3><p>å¯ä»¥åœ¨ componentDidmount ä¸­ç›´æ¥è¿›â¾è¯·æ±‚â½†é¡»å€ŸåŠ©reduxã€‚ä½†æ˜¯åœ¨â¼€å®šè§„æ¨¡çš„é¡¹â½¬ä¸­,ä¸Šè¿°â½…æ³•å¾ˆéš¾è¿›â¾å¼‚æ­¥æµçš„ç®¡ç†,é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå€ŸåŠ©reduxçš„å¼‚æ­¥ä¸­é—´ä»¶è¿›â¾å¼‚æ­¥å¤„ç†ã€‚reduxå¼‚æ­¥æµä¸­é—´ä»¶å…¶å®æœ‰å¾ˆå¤šï¼Œå½“ä¸‹ä¸»æµçš„å¼‚æ­¥ä¸­é—´ä»¶æœ‰ä¸¤ç§redux-thunkã€redux-sagaã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ä½¿ç”¨react-thunkä¸­é—´ä»¶</strong></p>
<p><strong>redux-thunk</strong>ä¼˜ç‚¹**:** </p>
<ul>
<li>ä½“ç§¯â¼©: redux-thunkçš„å®ç°â½…å¼å¾ˆç®€å•,åªæœ‰ä¸åˆ°20â¾ä»£ç  </li>
<li>ä½¿â½¤ç®€å•: redux-thunkæ²¡æœ‰å¼•â¼Šåƒredux-sagaæˆ–è€…redux-observableé¢å¤–çš„èŒƒå¼,ä¸Šâ¼¿ç®€å•</li>
</ul>
<p><strong>redux-thunk</strong>ç¼ºé™·**:** </p>
<ul>
<li>æ ·æ¿ä»£ç è¿‡å¤š: ä¸reduxæœ¬èº«â¼€æ ·,é€šå¸¸â¼€ä¸ªè¯·æ±‚éœ€è¦â¼¤é‡çš„ä»£ç ,â½½ä¸”å¾ˆå¤šéƒ½æ˜¯é‡å¤æ€§è´¨çš„ </li>
<li>è€¦åˆä¸¥é‡: å¼‚æ­¥æ“ä½œä¸reduxçš„actionå¶åˆåœ¨â¼€èµ·,ä¸â½…ä¾¿ç®¡ç† </li>
<li>åŠŸèƒ½å­±å¼±: æœ‰â¼€äº›å®é™…å¼€å‘ä¸­å¸¸â½¤çš„åŠŸèƒ½éœ€è¦â¾ƒâ¼°è¿›â¾å°è£…</li>
</ul>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ul>
<li>é…ç½®ä¸­é—´ä»¶ï¼Œåœ¨storeçš„åˆ›å»ºä¸­é…ç½®</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore, applyMiddleware, compose&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è°ƒè¯•å·¥å…·</span></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="variable language_">window</span>.<span class="property">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span> ? <span class="variable language_">window</span>.<span class="title function_">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span>(&#123;&#125;) : compose;</span><br><span class="line"><span class="comment">// è®¾ç½®ä¸­é—´ä»¶</span></span><br><span class="line"><span class="keyword">const</span> enhancer = <span class="title function_">composeEnhancers</span>(</span><br><span class="line">  <span class="title function_">applyMiddleware</span>(thunk)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer, enhancer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ ä¸€ä¸ªè¿”å›å‡½æ•°çš„actionCreatorï¼Œå°†å¼‚æ­¥è¯·æ±‚é€»è¾‘æ”¾åœ¨é‡Œé¢</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  å‘é€getè¯·æ±‚ï¼Œå¹¶ç”Ÿæˆç›¸åº”actionï¼Œæ›´æ–°storeçš„å‡½æ•°</span></span><br><span class="line"><span class="comment">  <span class="doctag">@param</span> url &#123;string&#125; è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment">  <span class="doctag">@param</span> func &#123;function&#125; çœŸæ­£éœ€è¦ç”Ÿæˆçš„actionå¯¹åº”çš„actionCreator</span></span><br><span class="line"><span class="comment">  <span class="doctag">@return</span> &#123;<span class="type">function</span>&#125; </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// dispatchä¸ºè‡ªåŠ¨æ¥æ”¶çš„store.dispatchå‡½æ•° </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getHttpAction</span> = (<span class="params">url, func</span>) =&gt; <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    axios.<span class="title function_">get</span>(url).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> action = <span class="title function_">func</span>(res.<span class="property">data</span>)</span><br><span class="line">        <span class="title function_">dispatch</span>(action)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç”Ÿæˆactionï¼Œå¹¶å‘é€action</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> action = <span class="title function_">getHttpAction</span>(<span class="string">&#x27;/getData&#x27;</span>, getInitTodoItemAction)</span><br><span class="line">    <span class="comment">// å‘é€å‡½æ•°ç±»å‹çš„actionæ—¶ï¼Œè¯¥actionçš„å‡½æ•°ä½“ä¼šè‡ªåŠ¨æ‰§è¡Œ</span></span><br><span class="line">    store.<span class="title function_">dispatch</span>(action)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ2ï¼‰ä½¿ç”¨redux-sagaä¸­é—´ä»¶</strong></p>
<p><strong>redux-saga</strong>ä¼˜ç‚¹**:** </p>
<ul>
<li>å¼‚æ­¥è§£è€¦: å¼‚æ­¥æ“ä½œè¢«è¢«è½¬ç§»åˆ°å•ç‹¬ saga.js ä¸­ï¼Œä¸å†æ˜¯æºæ‚åœ¨ action.js æˆ– component.js ä¸­ </li>
<li>actionæ‘†è„±thunk function: dispatch çš„å‚æ•°ä¾ç„¶æ˜¯â¼€ä¸ªçº¯ç²¹çš„ action (FSA)ï¼Œâ½½ä¸æ˜¯å……æ»¡ â€œâ¿Šé­”æ³•â€ thunk function </li>
<li>å¼‚å¸¸å¤„ç†: å—ç›Šäº generator function çš„ saga å®ç°ï¼Œä»£ç å¼‚å¸¸&#x2F;è¯·æ±‚å¤±è´¥ éƒ½å¯ä»¥ç›´æ¥é€šè¿‡ try&#x2F;catch è¯­æ³•ç›´æ¥æ•è·å¤„ç†</li>
<li>åŠŸèƒ½å¼ºâ¼¤: redux-sagaæä¾›äº†â¼¤é‡çš„Saga è¾…åŠ©å‡½æ•°å’ŒEffect åˆ›å»ºå™¨ä¾›å¼€å‘è€…ä½¿â½¤,å¼€å‘è€…â½†é¡»å°è£…æˆ–è€…ç®€å•å°è£…å³å¯ä½¿â½¤ </li>
<li>çµæ´»: redux-sagaå¯ä»¥å°†å¤šä¸ªSagaå¯ä»¥ä¸²â¾&#x2F;å¹¶â¾ç»„åˆèµ·æ¥,å½¢æˆâ¼€ä¸ªâ¾®å¸¸å®â½¤çš„å¼‚æ­¥flow </li>
<li>æ˜“æµ‹è¯•ï¼Œæä¾›äº†å„ç§caseçš„æµ‹è¯•â½…æ¡ˆï¼ŒåŒ…æ‹¬mock taskï¼Œåˆ†â½€è¦†ç›–ç­‰ç­‰</li>
</ul>
<p><strong>redux-saga</strong>ç¼ºé™·**:** </p>
<ul>
<li>é¢å¤–çš„å­¦ä¹ æˆæœ¬: redux-sagaä¸ä»…åœ¨ä½¿â½¤éš¾ä»¥ç†è§£çš„ generator function,â½½ä¸”æœ‰æ•°â¼—ä¸ªAPI,å­¦ä¹ æˆæœ¬è¿œè¶…redux-thunk,æœ€é‡è¦çš„æ˜¯ä½ çš„é¢å¤–å­¦ä¹ æˆæœ¬æ˜¯åªæœåŠ¡äºè¿™ä¸ªåº“çš„,ä¸redux-observableä¸åŒ,redux-observableè™½ç„¶ä¹Ÿæœ‰é¢å¤–å­¦ä¹ æˆæœ¬ä½†æ˜¯èƒŒåæ˜¯rxjså’Œâ¼€æ•´å¥—æ€æƒ³ </li>
<li>ä½“ç§¯åºâ¼¤: ä½“ç§¯ç•¥â¼¤,ä»£ç è¿‘2000â¾ï¼Œminç‰ˆ25KBå·¦å³ </li>
<li>åŠŸèƒ½è¿‡å‰©: å®é™…ä¸Šå¹¶å‘æ§åˆ¶ç­‰åŠŸèƒ½å¾ˆéš¾â½¤åˆ°,ä½†æ˜¯æˆ‘ä»¬ä¾ç„¶éœ€è¦å¼•â¼Šè¿™äº›ä»£ç  </li>
<li>tsâ½€æŒä¸å‹å¥½: yieldâ½†æ³•è¿”å›TSç±»å‹</li>
</ul>
<p>redux-sagaå¯ä»¥æ•è·actionï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠå¼‚æ­¥ä»£ç æ”¾åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>é…ç½®ä¸­é—´ä»¶</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createStore, applyMiddleware, compose&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> createSagaMiddleware <span class="keyword">from</span> <span class="string">&#x27;redux-saga&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TodoListSaga</span> <span class="keyword">from</span> <span class="string">&#x27;./sagas&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers = <span class="variable language_">window</span>.<span class="property">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span> ? <span class="variable language_">window</span>.<span class="title function_">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span>(&#123;&#125;) : compose;</span><br><span class="line"><span class="keyword">const</span> sagaMiddleware = <span class="title function_">createSagaMiddleware</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> enhancer = <span class="title function_">composeEnhancers</span>(</span><br><span class="line">  <span class="title function_">applyMiddleware</span>(sagaMiddleware)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer, enhancer);</span><br><span class="line">sagaMiddleware.<span class="title function_">run</span>(<span class="title class_">TodoListSaga</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br></pre></td></tr></table></figure>

<ul>
<li>å°†å¼‚æ­¥è¯·æ±‚æ”¾åœ¨sagas.jsä¸­</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;takeEvery, put&#125; <span class="keyword">from</span> <span class="string">&#x27;redux-saga/effects&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;initTodoList&#125; <span class="keyword">from</span> <span class="string">&#x27;./actionCreator&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="variable constant_">GET_INIT_ITEM</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./actionTypes&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">func</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">// å¯ä»¥è·å–å¼‚æ­¥è¿”å›æ•°æ®</span></span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">yield</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/getData&#x27;</span>)</span><br><span class="line">        <span class="keyword">const</span> action = <span class="title function_">initTodoList</span>(res.<span class="property">data</span>)</span><br><span class="line">        <span class="comment">// å°†actionå‘é€åˆ°reducer</span></span><br><span class="line">        <span class="keyword">yield</span> <span class="title function_">put</span>(action)</span><br><span class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç½‘ç»œè¯·æ±‚å¤±è´¥&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">mySaga</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ•è·GET_INIT_ITEMç±»å‹çš„actionï¼Œå¹¶æ‰§è¡Œfunc</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="title function_">takeEvery</span>(<span class="variable constant_">GET_INIT_ITEM</span>, func)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mySaga</span><br></pre></td></tr></table></figure>

<ul>
<li>å‘é€action</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> action = <span class="title function_">getInitTodoItemAction</span>()</span><br><span class="line">  store.<span class="title function_">dispatch</span>(action)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-Redux-æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†"><a href="#4-Redux-æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†" class="headerlink" title="4. Redux æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†"></a>4. Redux æ€ä¹ˆå®ç°å±æ€§ä¼ é€’ï¼Œä»‹ç»ä¸‹åŸç†</h3><p>react-redux æ•°æ®ä¼ è¾“âˆ¶ viewâ€“&gt;actionâ€“&gt;reducerâ€“&gt;storeâ€“&gt;viewã€‚çœ‹ä¸‹ç‚¹å‡»äº‹ä»¶çš„æ•°æ®æ˜¯å¦‚ä½•é€šè¿‡reduxä¼ åˆ°viewä¸Šï¼š</p>
<ul>
<li>view ä¸Šçš„AddClick äº‹ä»¶é€šè¿‡mapDispatchToProps æŠŠæ•°æ®ä¼ åˆ°action â€”&gt; click:()&#x3D;&gt;dispatch(ADD)</li>
<li>action çš„ADD ä¼ åˆ°reducerä¸Š</li>
<li>reducerä¼ åˆ°storeä¸Š const store &#x3D; createStore(reducer);</li>
<li>storeå†é€šè¿‡ mapStateToProps æ˜ å°„ç©¿åˆ°viewä¸Štext:State.text</li>
</ul>
<p>ä»£ç ç¤ºä¾‹âˆ¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Provider</span>, connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> &#123; text, click, clickR &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>æ•°æ®:å·²æœ‰äºº&#123;text&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;click&#125;</span>&gt;</span>åŠ äºº<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;clickR&#125;</span>&gt;</span>å‡äºº<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">    <span class="attr">text</span>:<span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> reducer = <span class="keyword">function</span>(<span class="params">state,action</span>)&#123;</span><br><span class="line">    <span class="keyword">switch</span>(action.<span class="property">type</span>)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;ADD&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">text</span>:state.<span class="property">text</span>+<span class="number">1</span>&#125;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;REMOVE&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="attr">text</span>:state.<span class="property">text</span>-<span class="number">1</span>&#125;</span><br><span class="line">        <span class="attr">default</span>:</span><br><span class="line">            <span class="keyword">return</span> initialState;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">ADD</span> = &#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;ADD&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Remove</span> = &#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&#x27;REMOVE&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(reducer);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapStateToProps = <span class="keyword">function</span> (<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        <span class="attr">text</span>:state.<span class="property">text</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapDispatchToProps = <span class="keyword">function</span>(<span class="params">dispatch</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">        <span class="attr">click</span>:<span class="function">()=&gt;</span><span class="title function_">dispatch</span>(<span class="variable constant_">ADD</span>),</span><br><span class="line">        <span class="attr">clickR</span>:<span class="function">()=&gt;</span><span class="title function_">dispatch</span>(<span class="title class_">Remove</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">App1</span> = <span class="title function_">connect</span>(mapStateToProps,mapDispatchToProps)(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span> = <span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">App1</span>&gt;</span><span class="tag">&lt;/<span class="name">App1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span>,<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="5-Redux-ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#5-Redux-ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="5. Redux ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ"></a>5. Redux ä¸­é—´ä»¶æ˜¯ä»€ä¹ˆï¼Ÿæ¥å—å‡ ä¸ªå‚æ•°ï¼ŸæŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯çš„å‚æ•°å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Redux çš„ä¸­é—´ä»¶æä¾›çš„æ˜¯ä½äº action è¢«å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰çš„æ‰©å±•ç‚¹ï¼Œæ¢è€Œè¨€ä¹‹ï¼ŒåŸæœ¬ view -â†’&gt; action -&gt; reducer -&gt; store çš„æ•°æ®æµåŠ ä¸Šä¸­é—´ä»¶åå˜æˆäº† view -&gt; action -&gt; middleware -&gt; reducer -&gt; store ï¼Œåœ¨è¿™ä¸€ç¯èŠ‚å¯ä»¥åšä¸€äº›â€å‰¯ä½œç”¨â€çš„æ“ä½œï¼Œå¦‚å¼‚æ­¥è¯·æ±‚ã€æ‰“å°æ—¥å¿—ç­‰ã€‚</p>
<p>applyMiddlewareæºç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">applyMiddleware</span>(<span class="params">...middlewares</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">createStore</span> =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ©ç”¨ä¼ å…¥çš„createStoreå’Œreducerå’Œåˆ›å»ºä¸€ä¸ªstore</span></span><br><span class="line">        <span class="keyword">const</span> store = <span class="title function_">createStore</span>(...args)</span><br><span class="line">        <span class="keyword">let</span> <span class="title function_">dispatch</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> middlewareAPI = &#123;</span><br><span class="line">            <span class="attr">getState</span>: store.<span class="property">getState</span>,</span><br><span class="line">            <span class="attr">dispatch</span>: <span class="function">(<span class="params">...args</span>) =&gt;</span> <span class="title function_">dispatch</span>(...args)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®©æ¯ä¸ª middleware å¸¦ç€ middlewareAPI è¿™ä¸ªå‚æ•°åˆ†åˆ«æ‰§è¡Œä¸€é</span></span><br><span class="line">        <span class="keyword">const</span> chain = middlewares.<span class="title function_">map</span>(<span class="function"><span class="params">middleware</span> =&gt;</span> <span class="title function_">middleware</span>(middlewareAPI))</span><br><span class="line">        <span class="comment">// æ¥ç€ compose å°† chain ä¸­çš„æ‰€æœ‰åŒ¿åå‡½æ•°ï¼Œç»„è£…æˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå³æ–°çš„ dispatch</span></span><br><span class="line">        dispatch = <span class="title function_">compose</span>(...chain)(store.<span class="property">dispatch</span>)</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            ...store,</span><br><span class="line">            dispatch</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»applyMiddlewareä¸­å¯ä»¥çœ‹å‡ºâˆ¶</p>
<ul>
<li>reduxä¸­é—´ä»¶æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯¹è±¡çš„å‚æ•°ä¸Šæœ‰ä¸¤ä¸ªå­—æ®µ dispatch å’Œ getStateï¼Œåˆ†åˆ«ä»£è¡¨ç€ Redux Store ä¸Šçš„ä¸¤ä¸ªåŒåå‡½æ•°ã€‚</li>
<li>æŸ¯é‡ŒåŒ–å‡½æ•°ä¸¤ç«¯ä¸€ä¸ªæ˜¯ middewaresï¼Œä¸€ä¸ªæ˜¯store.dispatch</li>
</ul>
<h3 id="6-Redux-è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘"><a href="#6-Redux-è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘" class="headerlink" title="6. Redux è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘"></a>6. Redux è¯·æ±‚ä¸­é—´ä»¶å¦‚ä½•å¤„ç†å¹¶å‘</h3><p><strong>ä½¿ç”¨redux-Saga</strong></p>
<p>redux-sagaæ˜¯ä¸€ä¸ªç®¡ç†reduxåº”ç”¨å¼‚æ­¥æ“ä½œçš„ä¸­é—´ä»¶ï¼Œç”¨äºä»£æ›¿ redux-thunk çš„ã€‚å®ƒé€šè¿‡åˆ›å»º Sagas å°†æ‰€æœ‰å¼‚æ­¥æ“ä½œé€»è¾‘å­˜æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹è¿›è¡Œé›†ä¸­å¤„ç†ï¼Œä»¥æ­¤å°†reactä¸­çš„åŒæ­¥æ“ä½œä¸å¼‚æ­¥æ“ä½œåŒºåˆ†å¼€æ¥ï¼Œä»¥ä¾¿äºåæœŸçš„ç®¡ç†ä¸ç»´æŠ¤ã€‚ redux-sagaå¦‚ä½•å¤„ç†å¹¶å‘ï¼š</p>
<ul>
<li><strong>takeEvery</strong></li>
</ul>
<p>å¯ä»¥è®©å¤šä¸ª saga ä»»åŠ¡å¹¶è¡Œè¢« fork æ‰§è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    fork,</span><br><span class="line">    take</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;redux-saga/effects&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">takeEvery</span> = (<span class="params">pattern, saga, ...args</span>) =&gt; <span class="title function_">fork</span>(<span class="keyword">function</span>*() &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> action = <span class="keyword">yield</span> <span class="title function_">take</span>(pattern)</span><br><span class="line">        <span class="keyword">yield</span> <span class="title function_">fork</span>(saga, ...args.<span class="title function_">concat</span>(action))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>takeLatest</strong></li>
</ul>
<p>takeLatest ä¸å…è®¸å¤šä¸ª saga ä»»åŠ¡å¹¶è¡Œåœ°æ‰§è¡Œã€‚ä¸€æ—¦æ¥æ”¶åˆ°æ–°çš„å‘èµ·çš„ actionï¼Œå®ƒå°±ä¼šå–æ¶ˆå‰é¢æ‰€æœ‰ fork è¿‡çš„ä»»åŠ¡ï¼ˆå¦‚æœè¿™äº›ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œçš„è¯ï¼‰ã€‚</p>
<p>åœ¨å¤„ç† AJAX è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœåªå¸Œæœ›è·å–æœ€åé‚£ä¸ªè¯·æ±‚çš„å“åº”ï¼Œ takeLatest å°±ä¼šéå¸¸æœ‰ç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    cancel,</span><br><span class="line">    fork,</span><br><span class="line">    take</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;redux-saga/effects&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">takeLatest</span> = (<span class="params">pattern, saga, ...args</span>) =&gt; <span class="title function_">fork</span>(<span class="keyword">function</span>*() &#123;</span><br><span class="line">    <span class="keyword">let</span> lastTask</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> action = <span class="keyword">yield</span> <span class="title function_">take</span>(pattern)</span><br><span class="line">        <span class="keyword">if</span> (lastTask) &#123;</span><br><span class="line">            <span class="keyword">yield</span> <span class="title function_">cancel</span>(lastTask) <span class="comment">// å¦‚æœä»»åŠ¡å·²ç»ç»“æŸï¼Œåˆ™ cancel ä¸ºç©ºæ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line">        lastTask = <span class="keyword">yield</span> <span class="title function_">fork</span>(saga, ...args.<span class="title function_">concat</span>(action))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="7-Redux-çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ°-window-ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#7-Redux-çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ°-window-ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="7. Redux çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ° window ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«"></a>7. Redux çŠ¶æ€ç®¡ç†å™¨å’Œå˜é‡æŒ‚è½½åˆ° window ä¸­æœ‰ä»€ä¹ˆåŒºåˆ«</h3><p>ä¸¤è€…éƒ½æ˜¯å­˜å‚¨æ•°æ®ä»¥ä¾›åæœŸä½¿ç”¨ã€‚ä½†æ˜¯ReduxçŠ¶æ€æ›´æ”¹å¯å›æº¯â€”â€”Time travelï¼Œæ•°æ®å¤šäº†çš„æ—¶å€™å¯ä»¥å¾ˆæ¸…æ™°çš„çŸ¥é“æ”¹åŠ¨åœ¨å“ªé‡Œå‘ç”Ÿï¼Œå®Œæ•´çš„æä¾›äº†ä¸€å¥—çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚</p>
<p>éšç€ JavaScript å•é¡µåº”ç”¨å¼€å‘æ—¥è¶‹å¤æ‚ï¼ŒJavaScript éœ€è¦ç®¡ç†æ¯”ä»»ä½•æ—¶å€™éƒ½è¦å¤šçš„ state ï¼ˆçŠ¶æ€ï¼‰ã€‚ è¿™äº› state å¯èƒ½åŒ…æ‹¬æœåŠ¡å™¨å“åº”ã€ç¼“å­˜æ•°æ®ã€æœ¬åœ°ç”Ÿæˆå°šæœªæŒä¹…åŒ–åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œä¹ŸåŒ…æ‹¬ UIçŠ¶æ€ï¼Œå¦‚æ¿€æ´»çš„è·¯ç”±ï¼Œè¢«é€‰ä¸­çš„æ ‡ç­¾ï¼Œæ˜¯å¦æ˜¾ç¤ºåŠ è½½åŠ¨æ•ˆæˆ–è€…åˆ†é¡µå™¨ç­‰ç­‰ã€‚</p>
<p>ç®¡ç†ä¸æ–­å˜åŒ–çš„ state éå¸¸å›°éš¾ã€‚å¦‚æœä¸€ä¸ª model çš„å˜åŒ–ä¼šå¼•èµ·å¦ä¸€ä¸ª model å˜åŒ–ï¼Œé‚£ä¹ˆå½“ view å˜åŒ–æ—¶ï¼Œå°±å¯èƒ½å¼•èµ·å¯¹åº” model ä»¥åŠå¦ä¸€ä¸ªmodel çš„å˜åŒ–ï¼Œä¾æ¬¡åœ°ï¼Œå¯èƒ½ä¼šå¼•èµ·å¦ä¸€ä¸ª view çš„å˜åŒ–ã€‚ç›´è‡³ä½ æä¸æ¸…æ¥šåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚state åœ¨ä»€ä¹ˆæ—¶å€™ï¼Œç”±äºä»€ä¹ˆåŸå› ï¼Œå¦‚ä½•å˜åŒ–å·²ç„¶ä¸å—æ§åˆ¶ã€‚ å½“ç³»ç»Ÿå˜å¾—é”™ç»¼å¤æ‚çš„æ—¶å€™ï¼Œæƒ³é‡ç°é—®é¢˜æˆ–è€…æ·»åŠ æ–°åŠŸèƒ½å°±ä¼šå˜å¾—ä¸¾æ­¥ç»´è‰°ã€‚</p>
<p>å¦‚æœè¿™è¿˜ä¸å¤Ÿç³Ÿç³•ï¼Œè€ƒè™‘ä¸€äº›æ¥è‡ªå‰ç«¯å¼€å‘é¢†åŸŸçš„æ–°éœ€æ±‚ï¼Œå¦‚æ›´æ–°è°ƒä¼˜ã€æœåŠ¡ç«¯æ¸²æŸ“ã€è·¯ç”±è·³è½¬å‰è¯·æ±‚æ•°æ®ç­‰ç­‰ã€‚å‰ç«¯å¼€å‘è€…æ­£åœ¨ç»å—å‰æ‰€æœªæœ‰çš„å¤æ‚æ€§ï¼Œéš¾é“å°±è¿™ä¹ˆæ”¾å¼ƒäº†å—?å½“ç„¶ä¸æ˜¯ã€‚</p>
<p>è¿™é‡Œçš„å¤æ‚æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæ¥è‡ªäºï¼šæˆ‘ä»¬æ€»æ˜¯å°†ä¸¤ä¸ªéš¾ä»¥ç†æ¸…çš„æ¦‚å¿µæ··æ·†åœ¨ä¸€èµ·ï¼šå˜åŒ–å’Œå¼‚æ­¥ã€‚ å¯ä»¥ç§°å®ƒä»¬ä¸ºæ›¼å¦¥æ€å’Œå¯ä¹ã€‚å¦‚æœæŠŠäºŒè€…åˆ†å¼€ï¼Œèƒ½åšçš„å¾ˆå¥½ï¼Œä½†æ··åˆ°ä¸€èµ·ï¼Œå°±å˜å¾—ä¸€å›¢ç³Ÿã€‚ä¸€äº›åº“å¦‚ React è§†å›¾åœ¨è§†å›¾å±‚ç¦æ­¢å¼‚æ­¥å’Œç›´æ¥æ“ä½œ DOMæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼ŒReact ä¾æ—§æŠŠå¤„ç† state ä¸­æ•°æ®çš„é—®é¢˜ç•™ç»™äº†ä½ ã€‚Reduxå°±æ˜¯ä¸ºäº†å¸®ä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="8-mobox-å’Œ-redux-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#8-mobox-å’Œ-redux-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="8. mobox å’Œ redux æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>8. mobox å’Œ redux æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p><strong>ï¼ˆ1ï¼‰å…±åŒç‚¹</strong></p>
<ul>
<li>ä¸ºäº†è§£å†³çŠ¶æ€ç®¡ç†æ··ä¹±ï¼Œæ— æ³•æœ‰æ•ˆåŒæ­¥çš„é—®é¢˜ç»Ÿä¸€ç»´æŠ¤ç®¡ç†åº”ç”¨çŠ¶æ€;</li>
<li>æŸä¸€çŠ¶æ€åªæœ‰ä¸€ä¸ªå¯ä¿¡æ•°æ®æ¥æºï¼ˆé€šå¸¸å‘½åä¸ºstoreï¼ŒæŒ‡çŠ¶æ€å®¹å™¨ï¼‰;</li>
<li>æ“ä½œæ›´æ–°çŠ¶æ€æ–¹å¼ç»Ÿä¸€ï¼Œå¹¶ä¸”å¯æ§ï¼ˆé€šå¸¸ä»¥actionæ–¹å¼æä¾›æ›´æ–°çŠ¶æ€çš„é€”å¾„ï¼‰;</li>
<li>æ”¯æŒå°†storeä¸Reactç»„ä»¶è¿æ¥ï¼Œå¦‚react-reduxï¼Œmobx- react;</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰åŒºåˆ«</strong></p>
<p>Reduxæ›´å¤šçš„æ˜¯éµå¾ªFluxæ¨¡å¼çš„ä¸€ç§å®ç°ï¼Œæ˜¯ä¸€ä¸ª JavaScriptåº“ï¼Œå®ƒå…³æ³¨ç‚¹ä¸»è¦æ˜¯ä»¥ä¸‹å‡ æ–¹é¢âˆ¶ </p>
<ul>
<li>Actionâˆ¶ ä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œæè¿°åŠ¨ä½œç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦åŒ…å«typeå±æ€§å’Œpayloadå±æ€§âˆ¶</li>
</ul>
<p>â€‹         o typeâˆ¶ action ç±»å‹; </p>
<p>â€‹         o payloadâˆ¶ è´Ÿè½½æ•°æ®;</p>
<ul>
<li>Reducerâˆ¶ å®šä¹‰åº”ç”¨çŠ¶æ€å¦‚ä½•å“åº”ä¸åŒåŠ¨ä½œï¼ˆactionï¼‰ï¼Œå¦‚ä½•æ›´æ–°çŠ¶æ€;</li>
<li>Storeâˆ¶ ç®¡ç†actionå’ŒreduceråŠå…¶å…³ç³»çš„å¯¹è±¡ï¼Œä¸»è¦æä¾›ä»¥ä¸‹åŠŸèƒ½âˆ¶</li>
</ul>
<p>â€‹         o ç»´æŠ¤åº”ç”¨çŠ¶æ€å¹¶æ”¯æŒè®¿é—®çŠ¶æ€(getState());</p>
<p>â€‹         o æ”¯æŒç›‘å¬actionçš„åˆ†å‘ï¼Œæ›´æ–°çŠ¶æ€(dispatch(action)); </p>
<p>â€‹         o æ”¯æŒè®¢é˜…storeçš„å˜æ›´(subscribe(listener));</p>
<ul>
<li>å¼‚æ­¥æµâˆ¶ ç”±äºReduxæ‰€æœ‰å¯¹storeçŠ¶æ€çš„å˜æ›´ï¼Œéƒ½åº”è¯¥é€šè¿‡actionè§¦å‘ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼ˆé€šå¸¸éƒ½æ˜¯ä¸šåŠ¡æˆ–è·å–æ•°æ®ä»»åŠ¡ï¼‰ä¹Ÿä¸ä¾‹å¤–ï¼Œè€Œä¸ºäº†ä¸å°†ä¸šåŠ¡æˆ–æ•°æ®ç›¸å…³çš„ä»»åŠ¡æ··å…¥Reactç»„ä»¶ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨å…¶ä»–æ¡†æ¶é…åˆç®¡ç†å¼‚æ­¥ä»»åŠ¡æµç¨‹ï¼Œå¦‚redux-thunkï¼Œredux-sagaç­‰;</li>
</ul>
<p>Mobxæ˜¯ä¸€ä¸ªé€æ˜å‡½æ•°å“åº”å¼ç¼–ç¨‹çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒä½¿å¾—çŠ¶æ€ç®¡ç†ç®€å•å¯ä¼¸ç¼©âˆ¶</p>
<ul>
<li>Actionâˆ¶å®šä¹‰æ”¹å˜çŠ¶æ€çš„åŠ¨ä½œå‡½æ•°ï¼ŒåŒ…æ‹¬å¦‚ä½•å˜æ›´çŠ¶æ€;</li>
<li>Storeâˆ¶ é›†ä¸­ç®¡ç†æ¨¡å—çŠ¶æ€ï¼ˆStateï¼‰å’ŒåŠ¨ä½œ(action)</li>
<li>Derivationï¼ˆè¡ç”Ÿï¼‰âˆ¶ ä»åº”ç”¨çŠ¶æ€ä¸­æ´¾ç”Ÿè€Œå‡ºï¼Œä¸”æ²¡æœ‰ä»»ä½•å…¶ä»–å½±å“çš„æ•°æ®</li>
</ul>
<p><strong>å¯¹æ¯”æ€»ç»“ï¼š</strong></p>
<ul>
<li>reduxå°†æ•°æ®ä¿å­˜åœ¨å•ä¸€çš„storeä¸­ï¼Œmobxå°†æ•°æ®ä¿å­˜åœ¨åˆ†æ•£çš„å¤šä¸ªstoreä¸­</li>
<li>reduxä½¿ç”¨plain objectä¿å­˜æ•°æ®ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†å˜åŒ–åçš„æ“ä½œ;mobxé€‚ç”¨observableä¿å­˜æ•°æ®ï¼Œæ•°æ®å˜åŒ–åè‡ªåŠ¨å¤„ç†å“åº”çš„æ“ä½œ</li>
<li>reduxä½¿ç”¨ä¸å¯å˜çŠ¶æ€ï¼Œè¿™æ„å‘³ç€çŠ¶æ€æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ç›´æ¥å»ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯åº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼ŒåŒæ—¶ä½¿ç”¨çº¯å‡½æ•°;mobxä¸­çš„çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œå¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œä¿®æ”¹</li>
<li>mobxç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œåœ¨å…¶ä¸­æœ‰å¾ˆå¤šçš„æŠ½è±¡ï¼Œmobxæ›´å¤šçš„ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€ç»´;reduxä¼šæ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºå…¶ä¸­çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³æŒæ¡èµ·æ¥ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼ŒåŒæ—¶éœ€è¦å€ŸåŠ©ä¸€ç³»åˆ—çš„ä¸­é—´ä»¶æ¥å¤„ç†å¼‚æ­¥å’Œå‰¯ä½œç”¨</li>
<li>mobxä¸­æœ‰æ›´å¤šçš„æŠ½è±¡å’Œå°è£…ï¼Œè°ƒè¯•ä¼šæ¯”è¾ƒå›°éš¾ï¼ŒåŒæ—¶ç»“æœä¹Ÿéš¾ä»¥é¢„æµ‹;è€Œreduxæä¾›èƒ½å¤Ÿè¿›è¡Œæ—¶é—´å›æº¯çš„å¼€å‘å·¥å…·ï¼ŒåŒæ—¶å…¶çº¯å‡½æ•°ä»¥åŠæ›´å°‘çš„æŠ½è±¡ï¼Œè®©è°ƒè¯•å˜å¾—æ›´åŠ çš„å®¹æ˜“</li>
</ul>
<h3 id="9-Redux-å’Œ-Vuex-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³"><a href="#9-Redux-å’Œ-Vuex-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³" class="headerlink" title="9. Redux å’Œ Vuex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³"></a>9. Redux å’Œ Vuex æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå®ƒä»¬çš„å…±åŒæ€æƒ³</h3><p><strong>ï¼ˆ1ï¼‰Redux å’Œ VuexåŒºåˆ«</strong></p>
<ul>
<li>Vuexæ”¹è¿›äº†Reduxä¸­çš„Actionå’ŒReducerå‡½æ•°ï¼Œä»¥mutationså˜åŒ–å‡½æ•°å–ä»£Reducerï¼Œæ— éœ€switchï¼Œåªéœ€åœ¨å¯¹åº”çš„mutationå‡½æ•°é‡Œæ”¹å˜stateå€¼å³å¯</li>
<li>Vuexç”±äºVueè‡ªåŠ¨é‡æ–°æ¸²æŸ“çš„ç‰¹æ€§ï¼Œæ— éœ€è®¢é˜…é‡æ–°æ¸²æŸ“å‡½æ•°ï¼Œåªè¦ç”Ÿæˆæ–°çš„Stateå³å¯</li>
<li>Vuexæ•°æ®æµçš„é¡ºåºæ˜¯âˆ¶Viewè°ƒç”¨store.commitæäº¤å¯¹åº”çš„è¯·æ±‚åˆ°Storeä¸­å¯¹åº”çš„mutationå‡½æ•°-&gt;storeæ”¹å˜ï¼ˆvueæ£€æµ‹åˆ°æ•°æ®å˜åŒ–è‡ªåŠ¨æ¸²æŸ“ï¼‰</li>
</ul>
<p>é€šä¿—ç‚¹ç†è§£å°±æ˜¯ï¼Œvuex å¼±åŒ– dispatchï¼Œé€šè¿‡commitè¿›è¡Œ storeçŠ¶æ€çš„ä¸€æ¬¡æ›´å˜ï¼›å–æ¶ˆäº†actionæ¦‚å¿µï¼Œä¸å¿…ä¼ å…¥ç‰¹å®šçš„ actionå½¢å¼è¿›è¡ŒæŒ‡å®šå˜æ›´ï¼›å¼±åŒ–reducerï¼ŒåŸºäºcommitå‚æ•°ç›´æ¥å¯¹æ•°æ®è¿›è¡Œè½¬å˜ï¼Œä½¿å¾—æ¡†æ¶æ›´åŠ ç®€æ˜“; </p>
<p><strong>ï¼ˆ2ï¼‰å…±åŒæ€æƒ³</strong></p>
<ul>
<li>å•â€”çš„æ•°æ®æº </li>
<li>å˜åŒ–å¯ä»¥é¢„æµ‹</li>
</ul>
<p>æœ¬è´¨ä¸Šâˆ¶ reduxä¸vuexéƒ½æ˜¯å¯¹mvvmæ€æƒ³çš„æœåŠ¡ï¼Œå°†æ•°æ®ä»è§†å›¾ä¸­æŠ½ç¦»çš„ä¸€ç§æ–¹æ¡ˆã€‚</p>
<h3 id="10-Redux-ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store-å’Œ-action-ç„¶åæ€ä¹ˆå¤„ç†"><a href="#10-Redux-ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store-å’Œ-action-ç„¶åæ€ä¹ˆå¤„ç†" class="headerlink" title="10. Redux ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store å’Œ action? ç„¶åæ€ä¹ˆå¤„ç†?"></a>10. Redux ä¸­é—´ä»¶æ˜¯æ€ä¹ˆæ‹¿åˆ°store å’Œ action? ç„¶åæ€ä¹ˆå¤„ç†?</h3><p>reduxä¸­é—´ä»¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ–ã€‚redux applyMiddleware Api æºç ä¸­æ¯ä¸ªmiddleware æ¥å—2ä¸ªå‚æ•°ï¼Œ Store çš„getState å‡½æ•°å’Œdispatch å‡½æ•°ï¼Œåˆ†åˆ«è·å¾—storeå’Œactionï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¢«ä¼ å…¥ next çš„ä¸‹ä¸€ä¸ª middleware çš„ dispatch æ–¹æ³•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ¥æ”¶ action çš„æ–°å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨ nextï¼ˆactionï¼‰ï¼Œæˆ–è€…åœ¨å…¶ä»–éœ€è¦çš„æ—¶åˆ»è°ƒç”¨ï¼Œç”šè‡³æ ¹æœ¬ä¸å»è°ƒç”¨å®ƒã€‚è°ƒç”¨é“¾ä¸­æœ€åä¸€ä¸ª middleware ä¼šæ¥å—çœŸå®çš„ storeçš„ dispatch æ–¹æ³•ä½œä¸º next å‚æ•°ï¼Œå¹¶å€Ÿæ­¤ç»“æŸè°ƒç”¨é“¾ã€‚æ‰€ä»¥ï¼Œmiddleware çš„å‡½æ•°ç­¾åæ˜¯ï¼ˆ{ getStateï¼Œdispatch })&#x3D;&gt; next &#x3D;&gt; actionã€‚</p>
<h3 id="11-Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨"><a href="#11-Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨" class="headerlink" title="11. Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨"></a>11. Reduxä¸­çš„connectæœ‰ä»€ä¹ˆä½œç”¨</h3><p>connectè´Ÿè´£è¿æ¥Reactå’ŒRedux</p>
<p><strong>ï¼ˆ1ï¼‰è·å–state</strong></p>
<p>connect é€šè¿‡ contextè·å– Provider ä¸­çš„ storeï¼Œé€šè¿‡<code> store.getState()</code> è·å–æ•´ä¸ªstore tree ä¸Šæ‰€æœ‰state </p>
<p><strong>ï¼ˆ2ï¼‰åŒ…è£…åŸç»„ä»¶</strong></p>
<p>å°†stateå’Œactioné€šè¿‡propsçš„æ–¹å¼ä¼ å…¥åˆ°åŸç»„ä»¶å†…éƒ¨ wrapWithConnect è¿”å›â€”ä¸ª ReactComponent å¯¹ è±¡ Connectï¼ŒConnect é‡ æ–° render å¤–éƒ¨ä¼ å…¥çš„åŸç»„ä»¶ WrappedComponent ï¼Œå¹¶æŠŠ connect ä¸­ä¼ å…¥çš„ mapStateToPropsï¼ŒmapDispatchToPropsä¸ç»„ä»¶ä¸ŠåŸæœ‰çš„ propsåˆå¹¶åï¼Œé€šè¿‡å±æ€§çš„æ–¹å¼ä¼ ç»™WrappedComponent </p>
<p><strong>ï¼ˆ3ï¼‰ç›‘å¬store treeå˜åŒ–</strong></p>
<p>connectç¼“å­˜äº†store treeä¸­stateçš„çŠ¶æ€ï¼Œé€šè¿‡å½“å‰stateçŠ¶æ€ å’Œå˜æ›´å‰ state çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®šæ˜¯å¦è°ƒç”¨ <code>this.setState()</code>æ–¹æ³•è§¦å‘ConnectåŠå…¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</p>
<h1 id="React-Hooks"><a href="#React-Hooks" class="headerlink" title="React Hooks"></a>React Hooks</h1><p>React Hooks ä¸»è¦è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<p><strong>ï¼ˆ1ï¼‰åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾</strong></p>
<p>React æ²¡æœ‰æä¾›å°†å¯å¤ç”¨æ€§è¡Œä¸ºâ€œé™„åŠ â€åˆ°ç»„ä»¶çš„é€”å¾„ï¼ˆä¾‹å¦‚ï¼ŒæŠŠç»„ä»¶è¿æ¥åˆ° storeï¼‰è§£å†³æ­¤ç±»é—®é¢˜å¯ä»¥ä½¿ç”¨ render props å’Œ é«˜é˜¶ç»„ä»¶ã€‚ä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ç»„ä»¶ç»“æ„ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”ä¼šä½¿ä»£ç éš¾ä»¥ç†è§£ã€‚ç”± providersï¼Œconsumersï¼Œé«˜é˜¶ç»„ä»¶ï¼Œrender props ç­‰å…¶ä»–æŠ½è±¡å±‚ç»„æˆçš„ç»„ä»¶ä¼šå½¢æˆâ€œåµŒå¥—åœ°ç‹±â€ã€‚å°½ç®¡å¯ä»¥åœ¨ DevTools è¿‡æ»¤æ‰å®ƒä»¬ï¼Œä½†è¿™è¯´æ˜äº†ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ï¼šReact éœ€è¦ä¸ºå…±äº«çŠ¶æ€é€»è¾‘æä¾›æ›´å¥½çš„åŸç”Ÿé€”å¾„ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ Hook ä»ç»„ä»¶ä¸­æå–çŠ¶æ€é€»è¾‘ï¼Œä½¿å¾—è¿™äº›é€»è¾‘å¯ä»¥å•ç‹¬æµ‹è¯•å¹¶å¤ç”¨ã€‚Hook ä½¿æˆ‘ä»¬åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ è¿™ä½¿å¾—åœ¨ç»„ä»¶é—´æˆ–ç¤¾åŒºå†…å…±äº« Hook å˜å¾—æ›´ä¾¿æ·ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</strong></p>
<p>åœ¨ç»„ä»¶ä¸­ï¼Œæ¯ä¸ªç”Ÿå‘½å‘¨æœŸå¸¸å¸¸åŒ…å«ä¸€äº›ä¸ç›¸å…³çš„é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œç»„ä»¶å¸¸å¸¸åœ¨ componentDidMount å’Œ componentDidUpdate ä¸­è·å–æ•°æ®ã€‚ä½†æ˜¯ï¼ŒåŒä¸€ä¸ª componentDidMount ä¸­å¯èƒ½ä¹ŸåŒ…å«å¾ˆå¤šå…¶å®ƒçš„é€»è¾‘ï¼Œå¦‚è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œè€Œä¹‹åéœ€åœ¨ componentWillUnmount ä¸­æ¸…é™¤ã€‚ç›¸äº’å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç è¢«è¿›è¡Œäº†æ‹†åˆ†ï¼Œè€Œå®Œå…¨ä¸ç›¸å…³çš„ä»£ç å´åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æ­¤å¾ˆå®¹æ˜“äº§ç”Ÿ bugï¼Œå¹¶ä¸”å¯¼è‡´é€»è¾‘ä¸ä¸€è‡´ã€‚</p>
<p>åœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸å¯èƒ½å°†ç»„ä»¶æ‹†åˆ†ä¸ºæ›´å°çš„ç²’åº¦ï¼Œå› ä¸ºçŠ¶æ€é€»è¾‘æ— å¤„ä¸åœ¨ã€‚è¿™ä¹Ÿç»™æµ‹è¯•å¸¦æ¥äº†ä¸€å®šæŒ‘æˆ˜ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šäººå°† React ä¸çŠ¶æ€ç®¡ç†åº“ç»“åˆä½¿ç”¨çš„åŸå› ä¹‹ä¸€ã€‚ä½†æ˜¯ï¼Œè¿™å¾€å¾€ä¼šå¼•å…¥äº†å¾ˆå¤šæŠ½è±¡æ¦‚å¿µï¼Œéœ€è¦ä½ åœ¨ä¸åŒçš„æ–‡ä»¶ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œä½¿å¾—å¤ç”¨å˜å¾—æ›´åŠ å›°éš¾ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒHook å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ reducer æ¥ç®¡ç†ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ï¼Œä½¿å…¶æ›´åŠ å¯é¢„æµ‹ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰éš¾ä»¥ç†è§£çš„ class</strong></p>
<p>é™¤äº†ä»£ç å¤ç”¨å’Œä»£ç ç®¡ç†ä¼šé‡åˆ°å›°éš¾å¤–ï¼Œclass æ˜¯å­¦ä¹  React çš„ä¸€å¤§å±éšœã€‚æˆ‘ä»¬å¿…é¡»å»ç†è§£ JavaScript ä¸­ this çš„å·¥ä½œæ–¹å¼ï¼Œè¿™ä¸å…¶ä»–è¯­è¨€å­˜åœ¨å·¨å¤§å·®å¼‚ã€‚è¿˜ä¸èƒ½å¿˜è®°ç»‘å®šäº‹ä»¶å¤„ç†å™¨ã€‚æ²¡æœ‰ç¨³å®šçš„è¯­æ³•ææ¡ˆï¼Œè¿™äº›ä»£ç éå¸¸å†—ä½™ã€‚å¤§å®¶å¯ä»¥å¾ˆå¥½åœ°ç†è§£ propsï¼Œstate å’Œè‡ªé¡¶å‘ä¸‹çš„æ•°æ®æµï¼Œä½†å¯¹ class å´ä¸€ç­¹è«å±•ã€‚å³ä¾¿åœ¨æœ‰ç»éªŒçš„ React å¼€å‘è€…ä¹‹é—´ï¼Œå¯¹äºå‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶çš„å·®å¼‚ä¹Ÿå­˜åœ¨åˆ†æ­§ï¼Œç”šè‡³è¿˜è¦åŒºåˆ†ä¸¤ç§ç»„ä»¶çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚ ä»æ¦‚å¿µä¸Šè®²ï¼ŒReact ç»„ä»¶ä¸€ç›´æ›´åƒæ˜¯å‡½æ•°ã€‚è€Œ Hook åˆ™æ‹¥æŠ±äº†å‡½æ•°ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ç‰ºç‰² React çš„ç²¾ç¥åŸåˆ™ã€‚Hook æä¾›äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„å‡½æ•°å¼æˆ–å“åº”å¼ç¼–ç¨‹æŠ€æœ¯</p>
<h2 id="React-Hook-çš„ä½¿ç”¨é™åˆ¶"><a href="#React-Hook-çš„ä½¿ç”¨é™åˆ¶" class="headerlink" title="React Hook çš„ä½¿ç”¨é™åˆ¶"></a>React Hook çš„ä½¿ç”¨é™åˆ¶</h2><p>React Hooks çš„é™åˆ¶ä¸»è¦æœ‰ä¸¤æ¡ï¼š</p>
<ul>
<li>ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hookï¼›</li>
<li>åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hookã€‚</li>
</ul>
<p>é‚£ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„é™åˆ¶å‘¢ï¼ŸHooks çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æ”¹è¿› React ç»„ä»¶çš„å¼€å‘æ¨¡å¼ã€‚åœ¨æ—§æœ‰çš„å¼€å‘æ¨¡å¼ä¸‹é‡åˆ°äº†ä¸‰ä¸ªé—®é¢˜ã€‚</p>
<ul>
<li>ç»„ä»¶ä¹‹é—´éš¾ä»¥å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚è¿‡å»å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯é«˜é˜¶ç»„ä»¶ã€render props åŠçŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚</li>
<li>å¤æ‚çš„ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£ã€‚ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸ä¸šåŠ¡é€»è¾‘è€¦åˆå¤ªæ·±ï¼Œå¯¼è‡´å…³è”éƒ¨åˆ†éš¾ä»¥æ‹†åˆ†ã€‚</li>
<li>äººå’Œæœºå™¨éƒ½å¾ˆå®¹æ˜“æ··æ·†ç±»ã€‚å¸¸è§çš„æœ‰ this çš„é—®é¢˜ï¼Œä½†åœ¨ React å›¢é˜Ÿä¸­è¿˜æœ‰ç±»éš¾ä»¥ä¼˜åŒ–çš„é—®é¢˜ï¼Œå¸Œæœ›åœ¨ç¼–è¯‘ä¼˜åŒ–å±‚é¢åšå‡ºä¸€äº›æ”¹è¿›ã€‚</li>
</ul>
<p>è¿™ä¸‰ä¸ªé—®é¢˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜»ç¢äº† React çš„åç»­å‘å±•ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜ï¼ŒHooks <strong>åŸºäºå‡½æ•°ç»„ä»¶</strong>å¼€å§‹è®¾è®¡ã€‚ç„¶è€Œç¬¬ä¸‰ä¸ªé—®é¢˜å†³å®šäº† Hooks åªæ”¯æŒå‡½æ•°ç»„ä»¶ã€‚</p>
<p>é‚£ä¸ºä»€ä¹ˆä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook å‘¢ï¼Ÿå› ä¸º Hooks çš„è®¾è®¡æ˜¯åŸºäºæ•°ç»„å®ç°ã€‚åœ¨è°ƒç”¨æ—¶æŒ‰é¡ºåºåŠ å…¥æ•°ç»„ä¸­ï¼Œå¦‚æœä½¿ç”¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°å¾ˆæœ‰å¯èƒ½å¯¼è‡´æ•°ç»„å–å€¼é”™ä½ï¼Œæ‰§è¡Œé”™è¯¯çš„ Hookã€‚å½“ç„¶ï¼Œå®è´¨ä¸Š React çš„æºç é‡Œä¸æ˜¯æ•°ç»„ï¼Œæ˜¯é“¾è¡¨ã€‚</p>
<p>è¿™äº›é™åˆ¶ä¼šåœ¨ç¼–ç ä¸Šé€ æˆä¸€å®šç¨‹åº¦çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œæ–°æ‰‹å¯èƒ½ä¼šå†™é”™ï¼Œä¸ºäº†é¿å…è¿™æ ·çš„æƒ…å†µï¼Œå¯ä»¥å¼•å…¥ ESLint çš„ Hooks æ£€æŸ¥æ’ä»¶è¿›è¡Œé¢„é˜²ã€‚</p>
<h2 id="useEffect-ä¸-useLayoutEffect-çš„åŒºåˆ«"><a href="#useEffect-ä¸-useLayoutEffect-çš„åŒºåˆ«" class="headerlink" title="useEffect ä¸ useLayoutEffect çš„åŒºåˆ«"></a>useEffect ä¸ useLayoutEffect çš„åŒºåˆ«</h2><p><strong>ï¼ˆ1ï¼‰å…±åŒç‚¹</strong></p>
<ul>
<li>**è¿ç”¨æ•ˆæœï¼š**useEffect ä¸ useLayoutEffect ä¸¤è€…éƒ½æ˜¯ç”¨äºå¤„ç†å‰¯ä½œç”¨ï¼Œè¿™äº›å‰¯ä½œç”¨åŒ…æ‹¬æ”¹å˜ DOMã€è®¾ç½®è®¢é˜…ã€æ“ä½œå®šæ—¶å™¨ç­‰ã€‚åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨æ“ä½œå‰¯ä½œç”¨æ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨è¿™ä¸¤ä¸ªå‡½æ•°å»å¤„ç†ã€‚</li>
<li>**ä½¿ç”¨æ–¹å¼ï¼š**useEffect ä¸ useLayoutEffect ä¸¤è€…åº•å±‚çš„å‡½æ•°ç­¾åæ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œéƒ½æ˜¯è°ƒç”¨çš„ mountEffectImplæ–¹æ³•ï¼Œåœ¨ä½¿ç”¨ä¸Šä¹Ÿæ²¡ä»€ä¹ˆå·®å¼‚ï¼ŒåŸºæœ¬å¯ä»¥ç›´æ¥æ›¿æ¢ã€‚</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰ä¸åŒç‚¹</strong></p>
<ul>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>**ï¼š**useEffect åœ¨ React çš„æ¸²æŸ“è¿‡ç¨‹ä¸­æ˜¯è¢«å¼‚æ­¥è°ƒç”¨çš„ï¼Œç”¨äºç»å¤§å¤šæ•°åœºæ™¯ï¼›è€Œ useLayoutEffect ä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ï¼Œä¸»è¦ç”¨äºå¤„ç† DOM æ“ä½œã€è°ƒæ•´æ ·å¼ã€é¿å…é¡µé¢é—ªçƒç­‰é—®é¢˜ã€‚ä¹Ÿæ­£å› ä¸ºæ˜¯åŒæ­¥å¤„ç†ï¼Œæ‰€ä»¥éœ€è¦é¿å…åœ¨ useLayoutEffect åšè®¡ç®—é‡è¾ƒå¤§çš„è€—æ—¶ä»»åŠ¡ä»è€Œé€ æˆé˜»å¡ã€‚</li>
<li>**ä½¿ç”¨æ•ˆæœï¼š**useEffectæ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œä»£ç çš„ï¼Œæ”¹å˜å±å¹•åƒç´ ä¹‹åæ‰§è¡Œï¼ˆå…ˆæ¸²æŸ“ï¼Œåæ”¹å˜DOMï¼‰ï¼Œå½“æ”¹å˜å±å¹•å†…å®¹æ—¶å¯èƒ½ä¼šäº§ç”Ÿé—ªçƒï¼›useLayoutEffectæ˜¯æ”¹å˜å±å¹•åƒç´ ä¹‹å‰å°±æ‰§è¡Œäº†ï¼ˆä¼šæ¨è¿Ÿé¡µé¢æ˜¾ç¤ºçš„äº‹ä»¶ï¼Œå…ˆæ”¹å˜DOMåæ¸²æŸ“ï¼‰ï¼Œä¸ä¼šäº§ç”Ÿé—ªçƒã€‚<strong>useLayoutEffectæ€»æ˜¯æ¯”useEffectå…ˆæ‰§è¡Œã€‚</strong></li>
</ul>
<p>åœ¨æœªæ¥çš„è¶‹åŠ¿ä¸Šï¼Œä¸¤ä¸ª API æ˜¯ä¼šé•¿æœŸå…±å­˜çš„ï¼Œæš‚æ—¶æ²¡æœ‰åˆ å‡åˆå¹¶çš„è®¡åˆ’ï¼Œéœ€è¦å¼€å‘è€…æ ¹æ®åœºæ™¯å»è‡ªè¡Œé€‰æ‹©ã€‚React å›¢é˜Ÿçš„å»ºè®®éå¸¸å®ç”¨ï¼Œå¦‚æœå®åœ¨åˆ†ä¸æ¸…ï¼Œå…ˆç”¨ useEffectï¼Œä¸€èˆ¬é—®é¢˜ä¸å¤§ï¼›å¦‚æœé¡µé¢æœ‰å¼‚å¸¸ï¼Œå†ç›´æ¥æ›¿æ¢ä¸º useLayoutEffect å³å¯ã€‚</p>
<h2 id="React-Hooksåœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› "><a href="#React-Hooksåœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› " class="headerlink" title="React Hooksåœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› "></a>React Hooksåœ¨å¹³æ—¶å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„é—®é¢˜å’ŒåŸå› </h2><p>ï¼ˆ1ï¼‰<strong>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookï¼Œå¿…é¡»å§‹ç»ˆåœ¨ Reactå‡½æ•°çš„é¡¶å±‚ä½¿ç”¨Hook</strong></p>
<p>è¿™æ˜¯å› ä¸ºReactéœ€è¦åˆ©ç”¨è°ƒç”¨é¡ºåºæ¥æ­£ç¡®æ›´æ–°ç›¸åº”çš„çŠ¶æ€ï¼Œä»¥åŠè°ƒç”¨ç›¸åº”çš„é’©å­å‡½æ•°ã€‚ä¸€æ—¦åœ¨å¾ªç¯æˆ–æ¡ä»¶åˆ†æ”¯è¯­å¥ä¸­è°ƒç”¨Hookï¼Œå°±å®¹æ˜“å¯¼è‡´è°ƒç”¨é¡ºåºçš„ä¸ä¸€è‡´æ€§ï¼Œä»è€Œäº§ç”Ÿéš¾ä»¥é¢„æ–™åˆ°çš„åæœã€‚</p>
<p>**ï¼ˆ2ï¼‰<strong><strong>ä½¿ç”¨useStateæ—¶å€™ï¼Œä½¿ç”¨pushï¼Œpopï¼Œspliceç­‰ç›´æ¥æ›´æ”¹æ•°ç»„</strong></strong>å¯¹è±¡çš„å‘**</p>
<p>ä½¿ç”¨pushç›´æ¥æ›´æ”¹æ•°ç»„æ— æ³•è·å–åˆ°æ–°å€¼ï¼Œåº”è¯¥é‡‡ç”¨ææ„æ–¹å¼ï¼Œä½†æ˜¯åœ¨classé‡Œé¢ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ä»£ç ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Indicatorfilter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> [num,setNums] = <span class="title function_">useState</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">test</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå‘æ˜¯ç›´æ¥é‡‡ç”¨pushå»æ›´æ–°num</span></span><br><span class="line">    <span class="comment">// setNums(num)æ˜¯æ— æ³•æ›´æ–°numçš„</span></span><br><span class="line">    <span class="comment">// å¿…é¡»ä½¿ç”¨num = [...num ,1]</span></span><br><span class="line">    num.<span class="title function_">push</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="comment">// num = [...num ,1]</span></span><br><span class="line">    <span class="title function_">setNums</span>(num)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;filter&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;test&#125;</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;num.map((item,index) =&gt; (</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Indicatorfilter</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&lt;any,any&gt;&#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props:any</span>)&#123;</span><br><span class="line">      <span class="variable language_">super</span>(props)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">          <span class="attr">nums</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">test</span> = <span class="variable language_">this</span>.<span class="property">test</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="comment">// classé‡‡ç”¨åŒæ ·çš„æ–¹å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">nums</span>.<span class="title function_">push</span>(<span class="number">1</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">          <span class="attr">nums</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">nums</span></span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;nums&#125; = <span class="variable language_">this</span>.<span class="property">state</span></span><br><span class="line">      <span class="keyword">return</span>(</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.test&#125;</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                      &#123;nums.map((item:any,index:number) =&gt; (</span></span><br><span class="line"><span class="language-xml">                          <span class="tag">&lt;<span class="name">div</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;item&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                      ))&#125;</span></span><br><span class="line"><span class="language-xml">                  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">      )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ï¼ˆ3ï¼‰<strong>useStateè®¾ç½®çŠ¶æ€çš„æ—¶å€™ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼ŒåæœŸéœ€è¦æ›´æ–°çŠ¶æ€ï¼Œå¿…é¡»é€šè¿‡useEffect</strong></p>
<p>TableDeailæ˜¯ä¸€ä¸ªå…¬å…±ç»„ä»¶ï¼Œåœ¨è°ƒç”¨å®ƒçš„çˆ¶ç»„ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬é€šè¿‡setæ”¹å˜columnsçš„å€¼ï¼Œä»¥ä¸ºä¼ é€’ç»™TableDeail çš„ columnsæ˜¯æœ€æ–°çš„å€¼ï¼Œæ‰€ä»¥tabColumnæ¯æ¬¡ä¹Ÿæ˜¯æœ€æ–°çš„å€¼ï¼Œä½†æ˜¯å®é™…tabColumnæ˜¯æœ€å¼€å§‹çš„å€¼ï¼Œä¸ä¼šéšç€columnsçš„æ›´æ–°è€Œæ›´æ–°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">TableDeail</span> = (<span class="params">&#123;</span></span><br><span class="line"><span class="params">    columns,</span></span><br><span class="line"><span class="params">&#125;:TableData</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> [tabColumn, setTabColumn] = <span class="title function_">useState</span>(columns) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„åšæ³•æ˜¯é€šè¿‡useEffectæ”¹å˜è¿™ä¸ªå€¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">TableDeail</span> = (<span class="params">&#123;</span></span><br><span class="line"><span class="params">    columns,</span></span><br><span class="line"><span class="params">&#125;:TableData</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> [tabColumn, setTabColumn] = <span class="title function_">useState</span>(columns) </span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span>&#123;<span class="title function_">setTabColumn</span>(columns)&#125;,[columns])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ4ï¼‰å–„ç”¨useCallback</strong></p>
<p>çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶äº‹ä»¶å¥æŸ„æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ä»»ä½•å‚æ•°å˜åŠ¨å¯èƒ½ä¼šé€‰ç”¨useMemoã€‚ä½†æ˜¯æ¯ä¸€æ¬¡çˆ¶ç»„ä»¶æ¸²æŸ“å­ç»„ä»¶å³ä½¿æ²¡å˜åŒ–ä¹Ÿä¼šè·Ÿç€æ¸²æŸ“ä¸€æ¬¡ã€‚ </p>
<p><strong>ï¼ˆ5ï¼‰ä¸è¦æ»¥ç”¨useContext</strong></p>
<p>å¯ä»¥ä½¿ç”¨åŸºäº useContext å°è£…çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚</p>
<h1 id="React-Router"><a href="#React-Router" class="headerlink" title="React-Router"></a>React-Router</h1><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>å®¢æˆ·ç«¯è·¯ç”±å®ç°çš„æ€æƒ³ï¼š</p>
<ul>
<li><p>åŸºäº hash çš„è·¯ç”±ï¼šé€šè¿‡ç›‘å¬<code>hashchange</code>äº‹ä»¶ï¼Œæ„ŸçŸ¥ hash çš„å˜åŒ–</p>
</li>
<li><ul>
<li>æ”¹å˜ hash å¯ä»¥ç›´æ¥é€šè¿‡ location.hash&#x3D;xxx</li>
</ul>
</li>
<li><p>åŸºäº H5 history è·¯ç”±ï¼š</p>
</li>
<li><ul>
<li>æ”¹å˜ url å¯ä»¥é€šè¿‡ history.pushState å’Œ resplaceState ç­‰ï¼Œä¼šå°†URLå‹å…¥å †æ ˆï¼ŒåŒæ—¶èƒ½å¤Ÿåº”ç”¨ <code>history.go()</code> ç­‰ API</li>
<li>ç›‘å¬ url çš„å˜åŒ–å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è§¦å‘å®ç°</li>
</ul>
</li>
</ul>
<p><strong>react-router å®ç°çš„æ€æƒ³ï¼š</strong></p>
<ul>
<li>åŸºäº <code>history</code> åº“æ¥å®ç°ä¸Šè¿°ä¸åŒçš„å®¢æˆ·ç«¯è·¯ç”±å®ç°æ€æƒ³ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¿å­˜å†å²è®°å½•ç­‰ï¼Œç£¨å¹³æµè§ˆå™¨å·®å¼‚ï¼Œä¸Šå±‚æ— æ„ŸçŸ¥</li>
<li>é€šè¿‡ç»´æŠ¤çš„åˆ—è¡¨ï¼Œåœ¨æ¯æ¬¡ URL å‘ç”Ÿå˜åŒ–çš„å›æ”¶ï¼Œé€šè¿‡é…ç½®çš„ è·¯ç”±è·¯å¾„ï¼ŒåŒ¹é…åˆ°å¯¹åº”çš„ Componentï¼Œå¹¶ä¸” render</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/29/React/" data-id="cmcygiiyr0006vgurg5uca8w0" data-title="React" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-TS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/TS/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T10:37:18.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/TS/">TS</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><p>ä¸€ã€æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">JavaScript (JS)</th>
<th align="left">TypeScript (TS)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>ç±»å‹ç³»ç»Ÿ</strong></td>
<td align="left">åŠ¨æ€ç±»å‹ï¼Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥</td>
<td align="left">é™æ€ç±»å‹ï¼Œç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥</td>
</tr>
<tr>
<td align="left"><strong>ç¼–è¯‘è¿‡ç¨‹</strong></td>
<td align="left">ç›´æ¥ç”±æµè§ˆå™¨&#x2F;Node.js æ‰§è¡Œ</td>
<td align="left">éœ€è¦ç¼–è¯‘ä¸º JS æ‰èƒ½æ‰§è¡Œ</td>
</tr>
<tr>
<td align="left"><strong>è¯­æ³•æ‰©å±•</strong></td>
<td align="left">æ ‡å‡† ECMAScript è¯­æ³•</td>
<td align="left">ES6+ è¶…é›†ï¼Œæ·»åŠ ç±»å‹æ³¨è§£å’Œæ¥å£ç­‰</td>
</tr>
<tr>
<td align="left"><strong>é”™è¯¯å‘ç°</strong></td>
<td align="left">è¿è¡Œæ—¶æ‰èƒ½å‘ç°é”™è¯¯</td>
<td align="left">ç¼–ç å’Œç¼–è¯‘é˜¶æ®µå³å¯å‘ç°å¤§å¤šæ•°é”™è¯¯</td>
</tr>
<tr>
<td align="left"><strong>å·¥å…·æ”¯æŒ</strong></td>
<td align="left">åŸºç¡€ä»£ç è¡¥å…¨</td>
<td align="left">å¼ºå¤§çš„æ™ºèƒ½æç¤ºã€é‡æ„å’Œå¯¼èˆªåŠŸèƒ½</td>
</tr>
<tr>
<td align="left"><strong>é¡¹ç›®è§„æ¨¡é€‚åº”æ€§</strong></td>
<td align="left">æ›´é€‚åˆå°å‹é¡¹ç›®</td>
<td align="left">æ›´é€‚åˆä¸­å¤§å‹å¤æ‚é¡¹ç›®</td>
</tr>
<tr>
<td align="left"><strong>å­¦ä¹ æ›²çº¿</strong></td>
<td align="left">ç›¸å¯¹ç®€å•</td>
<td align="left">éœ€è¦å­¦ä¹ ç±»å‹ç³»ç»Ÿå’Œé¢å¤–è¯­æ³•</td>
</tr>
<tr>
<td align="left"><strong>æ‰§è¡Œç¯å¢ƒ</strong></td>
<td align="left">æ‰€æœ‰æµè§ˆå™¨å’Œ Node.js åŸç”Ÿæ”¯æŒ</td>
<td align="left">éœ€è¦ç¼–è¯‘ä¸º JS åè¿è¡Œ</td>
</tr>
</tbody></table>
<p>äºŒã€TypeScript ç¼–è¯‘åŸç†</p>
<p>TypeScript ç¼–è¯‘å™¨ (tsc) çš„å·¥ä½œæµç¨‹ï¼š</p>
<ol>
<li>æºä»£ç è§£æé˜¶æ®µ</li>
</ol>
<ul>
<li><strong>è¯æ³•åˆ†æ</strong>ï¼šå°†æºä»£ç åˆ†è§£ä¸º token æµ</li>
<li><strong>è¯­æ³•åˆ†æ</strong>ï¼šæ ¹æ® token ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ (AST)</li>
<li><strong>ç”Ÿæˆç¬¦å·è¡¨</strong>ï¼šè®°å½•æ‰€æœ‰å˜é‡ã€å‡½æ•°ç­‰çš„ç±»å‹ä¿¡æ¯</li>
</ul>
<ol start="2">
<li>ç±»å‹æ£€æŸ¥é˜¶æ®µ</li>
</ol>
<ul>
<li><strong>ç±»å‹è§£æ</strong>ï¼šè§£æç±»å‹æ³¨è§£å’Œæ¨æ–­éšå¼ç±»å‹</li>
<li><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šéªŒè¯ç±»å‹å…¼å®¹æ€§ï¼Œå‘ç°ç±»å‹é”™è¯¯</li>
<li><strong>ç±»å‹æ“¦é™¤</strong>ï¼šå‡†å¤‡ç§»é™¤ç±»å‹ä¿¡æ¯ï¼ˆæœ€ç»ˆJSä¸éœ€è¦ç±»å‹ï¼‰</li>
</ul>
<ol start="3">
<li>ä»£ç è½¬æ¢é˜¶æ®µ</li>
</ol>
<ul>
<li><strong>é™çº§ç¼–è¯‘</strong>ï¼šå°†æ–°è¯­æ³•è½¬æ¢ä¸ºç›®æ ‡ESç‰ˆæœ¬çš„ç­‰æ•ˆä»£ç </li>
<li><strong>æ¥å£æ“¦é™¤</strong>ï¼šç§»é™¤çº¯ç±»å‹å£°æ˜çš„æ¥å£å’Œç±»å‹åˆ«å</li>
<li><strong>è£…é¥°å™¨è½¬æ¢</strong>ï¼šå¤„ç†è£…é¥°å™¨è¯­æ³•ï¼ˆå¦‚æœå¯ç”¨ï¼‰</li>
</ul>
<ol start="4">
<li>ä»£ç ç”Ÿæˆé˜¶æ®µ</li>
</ol>
<ul>
<li><strong>ç”Ÿæˆç›®æ ‡ä»£ç </strong>ï¼šè¾“å‡ºçº¯ JavaScript ä»£ç </li>
<li><strong>SourceMap ç”Ÿæˆ</strong>ï¼šåˆ›å»ºè°ƒè¯•æ˜ å°„æ–‡ä»¶</li>
<li><strong>å£°æ˜æ–‡ä»¶ç”Ÿæˆ</strong>ï¼šç”Ÿæˆ .d.ts ç±»å‹å£°æ˜æ–‡ä»¶ï¼ˆå¦‚æœé…ç½®ï¼‰</li>
</ul>
<h2 id="TypeScriptåŸºæœ¬ç±»å‹ï¼š"><a href="#TypeScriptåŸºæœ¬ç±»å‹ï¼š" class="headerlink" title="TypeScriptåŸºæœ¬ç±»å‹ï¼š"></a>TypeScriptåŸºæœ¬ç±»å‹ï¼š</h2><ol>
<li><strong>åŸºç¡€ç±»å‹</strong>ï¼š<ul>
<li><code>number</code>ï¼šæ•°å­—</li>
<li><code>string</code>ï¼šå­—ç¬¦ä¸²</li>
<li><code>boolean</code>ï¼šå¸ƒå°”å€¼</li>
<li><code>null</code>å’Œ<code>undefined</code></li>
<li><code>void</code>ï¼šé€šå¸¸ç”¨äºå‡½æ•°è¿”å›å€¼</li>
<li><code>any</code>ï¼šä»»æ„ç±»å‹</li>
<li><code>never</code>ï¼šæ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹</li>
</ul>
</li>
<li><strong>å¯¹è±¡ç±»å‹</strong>ï¼š<ul>
<li><code>object</code>ï¼šå¯¹è±¡ç±»å‹</li>
<li><code>array</code>ï¼šæ•°ç»„ç±»å‹</li>
<li><code>tuple</code>ï¼šå…ƒç»„ç±»å‹</li>
</ul>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">typescript ä½“éªŒ<span class="variable constant_">AI</span>ä»£ç åŠ©æ‰‹ ä»£ç è§£è¯»å¤åˆ¶ä»£ç <span class="comment">// åŸºç¡€ç±»å‹ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">isDone</span>: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">decimal</span>: <span class="built_in">number</span> = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">color</span>: <span class="built_in">string</span> = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">list</span>: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">tuple</span>: [<span class="built_in">string</span>, <span class="built_in">number</span>] = [<span class="string">&quot;hello&quot;</span>, <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æšä¸¾ç±»å‹</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;<span class="title class_">Red</span>, <span class="title class_">Green</span>, <span class="title class_">Blue</span>&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="title class_">Color</span> = <span class="title class_">Color</span>.<span class="property">Green</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// voidç±»å‹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">warnUser</span>(<span class="params"></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This is a warning message&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// anyç±»å‹</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">notSure</span>: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line">notSure = <span class="string">&quot;maybe a string&quot;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="ä»€ä¹ˆæ˜¯ç±»å‹æ–­è¨€ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ç±»å‹æ–­è¨€ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ç±»å‹æ–­è¨€ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ç±»å‹æ–­è¨€ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ</h2><p>ç±»å‹æ–­è¨€ç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨â€ç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆâ€ã€‚å®ƒæœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ol>
<li>å°–æ‹¬å·è¯­æ³•</li>
<li>asè¯­æ³•ï¼ˆæ¨èï¼Œç‰¹åˆ«æ˜¯åœ¨JSXä¸­ï¼‰</li>
</ol>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">typescript ä½“éªŒ<span class="variable constant_">AI</span>ä»£ç åŠ©æ‰‹ ä»£ç è§£è¯»å¤åˆ¶ä»£ç <span class="comment">// å°–æ‹¬å·è¯­æ³•</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">someValue</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength</span>: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// asè¯­æ³•</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">someValue2</span>: <span class="built_in">any</span> = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">strLength2</span>: <span class="built_in">number</span> = (someValue2 <span class="keyword">as</span> <span class="built_in">string</span>).<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…åº”ç”¨åœºæ™¯</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">data</span>: <span class="built_in">any</span> = &#123; <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> person = data <span class="keyword">as</span> <span class="title class_">Person</span>;</span><br></pre></td></tr></table></figure>

<h2 id="è¿›é˜¶ç‰¹æ€§ç¯‡"><a href="#è¿›é˜¶ç‰¹æ€§ç¯‡" class="headerlink" title="è¿›é˜¶ç‰¹æ€§ç¯‡"></a>è¿›é˜¶ç‰¹æ€§ç¯‡</h2><h3 id="ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ï¼Ÿ</h3><p>æ³›å‹æ˜¯ä¸€ç§åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»æ—¶ä¸é¢„å…ˆæŒ‡å®šå…·ä½“ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨æ—¶å†æŒ‡å®šç±»å‹çš„ç‰¹æ€§ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä»£ç å¤ç”¨</li>
<li>ç±»å‹å®‰å…¨</li>
<li>å‡å°‘å†—ä½™ä»£ç </li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³›å‹å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> identity&lt;T&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ³›å‹å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> output1 = identity&lt;<span class="built_in">string</span>&gt;(<span class="string">&quot;myString&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> output2 = <span class="title function_">identity</span>(<span class="number">42</span>); <span class="comment">// ç±»å‹æ¨æ–­ä¸ºnumber</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³›å‹æ¥å£</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">GenericIdentityFn</span>&lt;T&gt; &#123;</span><br><span class="line">    (<span class="attr">arg</span>: T): T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³›å‹ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GenericNumber</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">zeroValue</span>: T;</span><br><span class="line">    <span class="attr">add</span>: <span class="function">(<span class="params"><span class="attr">x</span>: T, <span class="attr">y</span>: T</span>) =&gt;</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³›å‹çº¦æŸ</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Lengthwise</span> &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> loggingIdentity&lt;T <span class="keyword">extends</span> <span class="title class_">Lengthwise</span>&gt;(<span class="attr">arg</span>: T): T &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(arg.<span class="property">length</span>);</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3><p>è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå¯ä»¥é™„åŠ åˆ°ç±»ã€æ–¹æ³•ã€è®¿é—®ç¬¦ã€å±æ€§æˆ–å‚æ•°ä¸Šã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç±»è£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sealed</span>(<span class="params"><span class="attr">constructor</span>: <span class="title class_">Function</span></span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">seal</span>(constructor);</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">seal</span>(constructor.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@sealed</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span> &#123;</span><br><span class="line">    <span class="attr">greeting</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">message</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">greeting</span> = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•è£…é¥°å™¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">log</span>(<span class="params"><span class="attr">target</span>: <span class="built_in">any</span>, <span class="attr">propertyKey</span>: <span class="built_in">string</span>, <span class="attr">descriptor</span>: <span class="title class_">PropertyDescriptor</span></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> originalMethod = descriptor.<span class="property">value</span>;</span><br><span class="line">    descriptor.<span class="property">value</span> = <span class="keyword">function</span>(<span class="params">...<span class="attr">args</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Calling <span class="subst">$&#123;propertyKey&#125;</span> with`</span>, args);</span><br><span class="line">        <span class="keyword">return</span> originalMethod.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="meta">@log</span></span><br><span class="line">    <span class="title function_">add</span>(<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®æˆ˜åº”ç”¨ç¯‡"><a href="#å®æˆ˜åº”ç”¨ç¯‡" class="headerlink" title="å®æˆ˜åº”ç”¨ç¯‡"></a>å®æˆ˜åº”ç”¨ç¯‡</h2><h3 id="TypeScriptä¸­å¦‚ä½•å®ç°æ¥å£ç»§æ‰¿ï¼Ÿ"><a href="#TypeScriptä¸­å¦‚ä½•å®ç°æ¥å£ç»§æ‰¿ï¼Ÿ" class="headerlink" title="TypeScriptä¸­å¦‚ä½•å®ç°æ¥å£ç»§æ‰¿ï¼Ÿ"></a>TypeScriptä¸­å¦‚ä½•å®ç°æ¥å£ç»§æ‰¿ï¼Ÿ</h3><p>æ¥å£ç»§æ‰¿å…è®¸æˆ‘ä»¬ä»ä¸€ä¸ªæ¥å£å¤åˆ¶æˆå‘˜åˆ°å¦ä¸€ä¸ªæ¥å£ï¼Œå®ç°ä»£ç é‡ç”¨ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Pet</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Pet</span> &#123;</span><br><span class="line">    <span class="title function_">bark</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">dog</span>: <span class="title class_">Dog</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Max&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">breed</span>: <span class="string">&quot;Labrador&quot;</span>,</span><br><span class="line">    <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Woof!&quot;</span>);</span><br><span class="line">    &#125;   </span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoldenRetriever</span> <span class="keyword">implements</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">breed</span>: <span class="built_in">string</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">breed</span> = <span class="string">&quot;Golden Retriever&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Woof!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-å¦‚ä½•åœ¨TypeScriptä¸­å¤„ç†å¼‚æ­¥æ“ä½œï¼Ÿ"><a href="#7-å¦‚ä½•åœ¨TypeScriptä¸­å¤„ç†å¼‚æ­¥æ“ä½œï¼Ÿ" class="headerlink" title="7. å¦‚ä½•åœ¨TypeScriptä¸­å¤„ç†å¼‚æ­¥æ“ä½œï¼Ÿ"></a>7. å¦‚ä½•åœ¨TypeScriptä¸­å¤„ç†å¼‚æ­¥æ“ä½œï¼Ÿ</h3><p>TypeScriptå®Œå…¨æ”¯æŒç°ä»£JavaScriptçš„å¼‚æ­¥ç‰¹æ€§ï¼ŒåŒ…æ‹¬Promiseã€async&#x2F;awaitç­‰ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promiseç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchUser</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>): <span class="title class_">Promise</span>&lt;<span class="title class_">User</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(&#123;</span><br><span class="line">                <span class="attr">id</span>: id,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&quot;John Doe&quot;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// async/awaitç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>): <span class="title class_">Promise</span>&lt;<span class="title class_">User</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title function_">fetchUser</span>(id);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">name</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;Error fetching user:&quot;</span>, error);</span><br><span class="line">        <span class="keyword">throw</span> error;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…åº”ç”¨</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">processUser</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title function_">getUser</span>(id);</span><br><span class="line">    <span class="comment">// å¤„ç†ç”¨æˆ·æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é«˜çº§ç‰¹æ€§ç¯‡"><a href="#é«˜çº§ç‰¹æ€§ç¯‡" class="headerlink" title="é«˜çº§ç‰¹æ€§ç¯‡"></a>é«˜çº§ç‰¹æ€§ç¯‡</h2><h3 id="ä»€ä¹ˆæ˜¯æ¡ä»¶ç±»å‹ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¡ä»¶ç±»å‹ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¡ä»¶ç±»å‹ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¡ä»¶ç±»å‹ï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3><p>æ¡ä»¶ç±»å‹æ˜¯TypeScriptä¸­çš„é«˜çº§ç±»å‹ç‰¹æ€§ï¼Œå…è®¸æˆ‘ä»¬åŸºäºç±»å‹å…³ç³»è¿›è¡Œç±»å‹é€‰æ‹©ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">TypeName</span>&lt;T&gt; = </span><br><span class="line">    T <span class="keyword">extends</span> <span class="built_in">string</span> ? <span class="string">&quot;string&quot;</span> :</span><br><span class="line">    T <span class="keyword">extends</span> <span class="built_in">number</span> ? <span class="string">&quot;number&quot;</span> :</span><br><span class="line">    T <span class="keyword">extends</span> <span class="built_in">boolean</span> ? <span class="string">&quot;boolean&quot;</span> :</span><br><span class="line">    T <span class="keyword">extends</span> <span class="literal">undefined</span> ? <span class="string">&quot;undefined&quot;</span> :</span><br><span class="line">    T <span class="keyword">extends</span> <span class="title class_">Function</span> ? <span class="string">&quot;function&quot;</span> :</span><br><span class="line">    <span class="string">&quot;object&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T0</span> = <span class="title class_">TypeName</span>&lt;<span class="built_in">string</span>&gt;;  <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T1</span> = <span class="title class_">TypeName</span>&lt;<span class="string">&quot;hello&quot;</span>&gt;; <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="keyword">type</span> <span class="variable constant_">T2</span> = <span class="title class_">TypeName</span>&lt;<span class="function">() =&gt;</span> <span class="built_in">void</span>&gt;; <span class="comment">// &quot;function&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…åº”ç”¨</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">NonNullable</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="literal">null</span> | <span class="literal">undefined</span> ? <span class="built_in">never</span> : T;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Flatten</span>&lt;T&gt; = T <span class="keyword">extends</span> <span class="title class_">Array</span>&lt;infer U&gt; ? U : T;</span><br></pre></td></tr></table></figure>

<h3 id="å¦‚ä½•ä½¿ç”¨æ˜ å°„ç±»å‹ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨æ˜ å°„ç±»å‹ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨æ˜ å°„ç±»å‹ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨æ˜ å°„ç±»å‹ï¼Ÿ</h3><p>æ˜ å°„ç±»å‹å…è®¸æˆ‘ä»¬ä»ç°æœ‰ç±»å‹åˆ›å»ºæ–°ç±»å‹ï¼Œé€šè¿‡æ˜ å°„ç°æœ‰ç±»å‹çš„æ¯ä¸ªå±æ€§ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Partial</span>&lt;T&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†æ‰€æœ‰å±æ€§å˜ä¸ºåªè¯»</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Readonly</span>&lt;T&gt; = &#123;</span><br><span class="line">    <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…åº”ç”¨</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialPerson</span> = <span class="title class_">Partial</span>&lt;<span class="title class_">Person</span>&gt;;</span><br><span class="line"><span class="comment">// ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     name?: string;</span></span><br><span class="line"><span class="comment">//     age?: number;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyPerson</span> = <span class="title class_">Readonly</span>&lt;<span class="title class_">Person</span>&gt;;</span><br><span class="line"><span class="comment">// ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="comment">// &#123;</span></span><br><span class="line"><span class="comment">//     readonly name: string;</span></span><br><span class="line"><span class="comment">//     readonly age: number;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="å·¥ç¨‹å®è·µç¯‡"><a href="#å·¥ç¨‹å®è·µç¯‡" class="headerlink" title="å·¥ç¨‹å®è·µç¯‡"></a>å·¥ç¨‹å®è·µç¯‡</h2><h3 id="TypeScripté¡¹ç›®ä¸­å¦‚ä½•å¤„ç†æ¨¡å—åŒ–ï¼Ÿ"><a href="#TypeScripté¡¹ç›®ä¸­å¦‚ä½•å¤„ç†æ¨¡å—åŒ–ï¼Ÿ" class="headerlink" title="TypeScripté¡¹ç›®ä¸­å¦‚ä½•å¤„ç†æ¨¡å—åŒ–ï¼Ÿ"></a>TypeScripté¡¹ç›®ä¸­å¦‚ä½•å¤„ç†æ¨¡å—åŒ–ï¼Ÿ</h3><p>TypeScriptæ”¯æŒç°ä»£JavaScriptçš„æ¨¡å—åŒ–è¯­æ³•ï¼ŒåŒæ—¶æä¾›äº†é¢å¤–çš„ç±»å‹ç³»ç»Ÿæ”¯æŒã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// math.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">MathOperations</span> &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">subtract</span>(<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Calculator</span> <span class="keyword">implements</span> <span class="title class_">MathOperations</span> &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">subtract</span>(<span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x - y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Calculator</span>, <span class="title class_">MathOperations</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./math&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> calc = <span class="keyword">new</span> <span class="title class_">Calculator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(calc.<span class="title function_">add</span>(<span class="number">5</span>, <span class="number">3</span>)); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>

<h2 id="è¡¥å……é‡ç‚¹ç¯‡"><a href="#è¡¥å……é‡ç‚¹ç¯‡" class="headerlink" title="è¡¥å……é‡ç‚¹ç¯‡"></a>è¡¥å……é‡ç‚¹ç¯‡</h2><p>ä»€ä¹ˆæ˜¯ç±»å‹æ”¶çª„ï¼ˆType Narrowingï¼‰ï¼Ÿ</p>
<p>ç±»å‹æ”¶çª„æ˜¯TypeScriptä¸­ç¼©å°ç±»å‹èŒƒå›´çš„è¿‡ç¨‹ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥å®ç°ç±»å‹æ”¶çª„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ç±»å‹å®ˆå«</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">padLeft</span>(<span class="params"><span class="attr">padding</span>: <span class="built_in">number</span> | <span class="built_in">string</span>, <span class="attr">input</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œpaddingçš„ç±»å‹è¢«æ”¶çª„ä¸ºnumber</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot; &quot;</span>.<span class="title function_">repeat</span>(padding) + input;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¿™é‡Œpaddingçš„ç±»å‹è¢«æ”¶çª„ä¸ºstring</span></span><br><span class="line">    <span class="keyword">return</span> padding + input;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨instanceof</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> &#123;</span><br><span class="line">    <span class="title function_">fly</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;flying...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fish</span> &#123;</span><br><span class="line">    <span class="title function_">swim</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;swimming...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params"><span class="attr">animal</span>: <span class="title class_">Bird</span> | <span class="title class_">Fish</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (animal <span class="keyword">instanceof</span> <span class="title class_">Bird</span>) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œanimalçš„ç±»å‹è¢«æ”¶çª„ä¸ºBird</span></span><br><span class="line">        animal.<span class="title function_">fly</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œanimalçš„ç±»å‹è¢«æ”¶çª„ä¸ºFish</span></span><br><span class="line">        animal.<span class="title function_">swim</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨inæ“ä½œç¬¦</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Admin</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">privileges</span>: <span class="built_in">string</span>[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">startDate</span>: <span class="title class_">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printEmployeeInformation</span>(<span class="params"><span class="attr">emp</span>: <span class="title class_">Admin</span> | <span class="title class_">Employee</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;privileges&quot;</span> <span class="keyword">in</span> emp) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œempçš„ç±»å‹è¢«æ”¶çª„ä¸ºAdmin</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Privileges: &quot;</span> + emp.<span class="property">privileges</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;startDate&quot;</span> <span class="keyword">in</span> emp) &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œempçš„ç±»å‹è¢«æ”¶çª„ä¸ºEmployee</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Start Date: &quot;</span> + emp.<span class="property">startDate</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-TypeScriptä¸­çš„tsconfig-jsoné‡è¦é…ç½®æœ‰å“ªäº›ï¼Ÿ"><a href="#12-TypeScriptä¸­çš„tsconfig-jsoné‡è¦é…ç½®æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="12. TypeScriptä¸­çš„tsconfig.jsoné‡è¦é…ç½®æœ‰å“ªäº›ï¼Ÿ"></a>12. TypeScriptä¸­çš„tsconfig.jsoné‡è¦é…ç½®æœ‰å“ªäº›ï¼Ÿ</h3><p>tsconfig.jsonæ˜¯TypeScripté¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è®¸å¤šé‡è¦é€‰é¡¹ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="comment">// ç›®æ ‡JavaScriptç‰ˆæœ¬</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡å—ç³»ç»Ÿ</span></span><br><span class="line">        <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CommonJS&quot;</span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸¥æ ¼ç±»å‹æ£€æŸ¥</span></span><br><span class="line">        <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…è®¸ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥</span></span><br><span class="line">        <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ç”Ÿæˆå£°æ˜æ–‡ä»¶</span></span><br><span class="line">        <span class="attr">&quot;declaration&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å…è®¸è£…é¥°å™¨</span></span><br><span class="line">        <span class="attr">&quot;experimentalDecorators&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ¨¡å—è§£æç­–ç•¥</span></span><br><span class="line">        <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åŸºç¡€ç›®å½•</span></span><br><span class="line">        <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./src&quot;</span><span class="punctuation">,</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// è·¯å¾„åˆ«å</span></span><br><span class="line">        <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;*&quot;</span><span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/**/*&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">,</span> <span class="string">&quot;**/*.spec.ts&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="13-è”åˆç±»å‹å’Œäº¤å‰ç±»å‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#13-è”åˆç±»å‹å’Œäº¤å‰ç±»å‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="13. è”åˆç±»å‹å’Œäº¤å‰ç±»å‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>13. è”åˆç±»å‹å’Œäº¤å‰ç±»å‹çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>è”åˆç±»å‹å’Œäº¤å‰ç±»å‹æ˜¯TypeScriptä¸­ä¸¤ç§é‡è¦çš„ç±»å‹ç»„åˆæ–¹å¼ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è”åˆç±»å‹ï¼ˆUnion Typesï¼‰</span></span><br><span class="line"><span class="comment">// è¡¨ç¤ºå¯ä»¥æ˜¯å¤šç§ç±»å‹ä¸­çš„ä¸€ç§</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StringOrNumber</span> = <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printId</span>(<span class="params"><span class="attr">id</span>: <span class="title class_">StringOrNumber</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> id === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(id.<span class="title function_">toUpperCase</span>());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤å‰ç±»å‹ï¼ˆIntersection Typesï¼‰</span></span><br><span class="line"><span class="comment">// è¡¨ç¤ºåŒæ—¶å…·æœ‰å¤šç§ç±»å‹çš„ç‰¹æ€§</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ErrorHandling</span> &#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">error</span>?: &#123; <span class="attr">message</span>: <span class="built_in">string</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ArtworksData</span> &#123;</span><br><span class="line">    <span class="attr">artworks</span>: &#123; <span class="attr">title</span>: <span class="built_in">string</span> &#125;[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ—¶å…·æœ‰ä¸¤ä¸ªæ¥å£çš„æ‰€æœ‰å±æ€§</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ArtworksResponse</span> = <span class="title class_">ArtworksData</span> &amp; <span class="title class_">ErrorHandling</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">response</span>: <span class="title class_">ArtworksResponse</span> = &#123;</span><br><span class="line">    <span class="attr">artworks</span>: [&#123; <span class="attr">title</span>: <span class="string">&quot;Mona Lisa&quot;</span> &#125;],</span><br><span class="line">    <span class="attr">success</span>: <span class="literal">true</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="14-TypeScript-4-xå’Œ5-xæœ‰å“ªäº›é‡è¦æ–°ç‰¹æ€§ï¼Ÿ"><a href="#14-TypeScript-4-xå’Œ5-xæœ‰å“ªäº›é‡è¦æ–°ç‰¹æ€§ï¼Ÿ" class="headerlink" title="14. TypeScript 4.xå’Œ5.xæœ‰å“ªäº›é‡è¦æ–°ç‰¹æ€§ï¼Ÿ"></a>14. TypeScript 4.xå’Œ5.xæœ‰å“ªäº›é‡è¦æ–°ç‰¹æ€§ï¼Ÿ</h3><p>TypeScriptçš„æ–°ç‰ˆæœ¬å¸¦æ¥äº†è®¸å¤šæœ‰ç”¨çš„ç‰¹æ€§ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeScript 4.0+: å¯å˜å…ƒç»„ç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Strings</span> = [<span class="built_in">string</span>, <span class="built_in">string</span>];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Numbers</span> = [<span class="built_in">number</span>, <span class="built_in">number</span>];</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StringsAndNumbers</span> = [...<span class="title class_">Strings</span>, ...<span class="title class_">Numbers</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 4.3+: overrideå…³é”®å­—</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Derived</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Base</span> &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 4.4+: æ§åˆ¶æµåˆ†æçš„æ”¹è¿›</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"><span class="attr">value</span>: <span class="built_in">string</span> | <span class="built_in">number</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>()) &#123;</span><br><span class="line">        value = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// TypeScriptçŸ¥é“è¿™é‡Œvalueä¸€å®šæ˜¯string</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value.<span class="title function_">toUpperCase</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 4.5+: Awaitedç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> A = <span class="title class_">Awaited</span>&lt;<span class="title class_">Promise</span>&lt;<span class="built_in">string</span>&gt;&gt;; <span class="comment">// string</span></span><br><span class="line"><span class="keyword">type</span> B = <span class="title class_">Awaited</span>&lt;<span class="title class_">Promise</span>&lt;<span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt;&gt;&gt;; <span class="comment">// number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 4.9+: satisfiesæ“ä½œç¬¦</span></span><br><span class="line"><span class="keyword">const</span> palette = &#123;</span><br><span class="line">    <span class="attr">red</span>: [<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    <span class="attr">green</span>: <span class="string">&quot;#00ff00&quot;</span>,</span><br><span class="line">&#125; <span class="keyword">satisfies</span> <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span> | <span class="built_in">number</span>[]&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 5.0+: constç±»å‹å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> first&lt;<span class="keyword">const</span> T <span class="keyword">extends</span> <span class="keyword">readonly</span> <span class="built_in">unknown</span>[]&gt;(<span class="attr">arr</span>: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TypeScript 5.2+: usingå…³é”®å­—å’Œæ˜¾å¼èµ„æºç®¡ç†</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileHandle</span> <span class="keyword">implements</span> <span class="title class_">Disposable</span> &#123;</span><br><span class="line">    <span class="title function_">dispose</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// æ¸…ç†èµ„æº</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">using</span> handle = <span class="keyword">new</span> <span class="title class_">FileHandle</span>();</span><br><span class="line">    <span class="comment">// ä½¿ç”¨handle</span></span><br><span class="line">    <span class="comment">// ä½œç”¨åŸŸç»“æŸæ—¶è‡ªåŠ¨è°ƒç”¨dispose</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15-TypeScriptä¸­çš„ç±»å‹ä½“æ“å®æˆ˜æœ‰å“ªäº›ï¼Ÿ"><a href="#15-TypeScriptä¸­çš„ç±»å‹ä½“æ“å®æˆ˜æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="15. TypeScriptä¸­çš„ç±»å‹ä½“æ“å®æˆ˜æœ‰å“ªäº›ï¼Ÿ"></a>15. TypeScriptä¸­çš„ç±»å‹ä½“æ“å®æˆ˜æœ‰å“ªäº›ï¼Ÿ</h3><p>ç±»å‹ä½“æ“æ˜¯TypeScriptä¸­é«˜çº§ç±»å‹çš„å®é™…åº”ç”¨ï¼Œç»å¸¸å‡ºç°åœ¨é¢è¯•ä¸­ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°Pickç±»å‹  Pick</span></span><br><span class="line"><span class="comment">// Pick ä»å¯¹è±¡ç±»å‹ä¸­ä»…ä¿ç•™æŒ‡å®šçš„é”®ï¼Œç§»é™¤å…¶ä»–æ‰€æœ‰é”®</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyPick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> K]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Readonlyç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyReadonly</span>&lt;T&gt; = &#123;</span><br><span class="line">    <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°æ·±åº¦Readonly</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">DeepReadonly</span>&lt;T&gt; = &#123;</span><br><span class="line">    <span class="keyword">readonly</span> [P <span class="keyword">in</span> keyof T]: T[P] <span class="keyword">extends</span> <span class="built_in">object</span> </span><br><span class="line">        ? <span class="title class_">DeepReadonly</span>&lt;T[P]&gt; </span><br><span class="line">        : T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Partialç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyPartial</span>&lt;T&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Requiredç±»å‹ //ç§»é™¤å¯é€‰ç¬¦</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyRequired</span>&lt;T&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> keyof T]-?: T[P];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Recordç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyRecord</span>&lt;K <span class="keyword">extends</span> keyof <span class="built_in">any</span>, T&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> K]: T;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Excludeç±»å‹ Exclude ä»è”åˆç±»å‹ä¸­ç§»é™¤ç±»å‹ã€‚</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyExclude</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? <span class="built_in">never</span> : T;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°Extractç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyExtract</span>&lt;T, U&gt; = T <span class="keyword">extends</span> U ? T : <span class="built_in">never</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°ReturnTypeç±»å‹ ReturnType æå–å‡½æ•°ç±»å‹çš„è¿”å›ç±»å‹ã€‚</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MyReturnType</span>&lt;T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; <span class="built_in">any</span>&gt; = </span><br><span class="line">    T <span class="title function_">extends</span> (...<span class="attr">args</span>: <span class="built_in">any</span>) =&gt; infer R ? R : <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®é™…åº”ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Todo</span> &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">description</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">completed</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åªè¯»çš„Todoç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ReadonlyTodo</span> = <span class="title class_">MyReadonly</span>&lt;<span class="title class_">Todo</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰çš„Todoç±»å‹</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PartialTodo</span> = <span class="title class_">MyPartial</span>&lt;<span class="title class_">Todo</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æå–Todoä¸­çš„å­—ç¬¦ä¸²ç±»å‹å±æ€§</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StringProps</span> = <span class="title class_">MyExtract</span>&lt;keyof <span class="title class_">Todo</span>, <span class="built_in">string</span>&gt;;</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/29/TS/" data-id="cmcygiiys0009vgurbxlyc48a" data-title="TS" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typescript/" rel="tag">typescript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Node" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/Node/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T10:36:35.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/Node/">Node</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><p>Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ƒè®©å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ JavaScript ç¼–å†™æœåŠ¡å™¨ç«¯ä»£ç ã€‚ä¸ä¼ ç»Ÿçš„æœåŠ¡å™¨ç«¯æŠ€æœ¯ä¸åŒï¼ŒNode.js é‡‡ç”¨äº†<strong>äº‹ä»¶é©±åŠ¨</strong>å’Œ<strong>éé˜»å¡ I&#x2F;O</strong>æ¨¡å‹ï¼Œè¿™ä½¿å¾—å®ƒç‰¹åˆ«é€‚åˆå¤„ç†é«˜å¹¶å‘çš„ç½‘ç»œåº”ç”¨ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong></p>
<ol>
<li><strong>å•çº¿ç¨‹</strong>ï¼šNode.js ä½¿ç”¨å•çº¿ç¨‹å¤„ç†è¯·æ±‚</li>
<li><strong>äº‹ä»¶å¾ªç¯</strong>ï¼šé€šè¿‡äº‹ä»¶é©±åŠ¨æœºåˆ¶å¤„ç†å¹¶å‘</li>
<li><strong>éé˜»å¡ I&#x2F;O</strong>ï¼šI&#x2F;O æ“ä½œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</li>
<li><strong>è·¨å¹³å°</strong>ï¼šå¯ä»¥åœ¨ Windowsã€Linuxã€macOS ç­‰ç³»ç»Ÿä¸Šè¿è¡Œ</li>
</ol>
<p>Node.js é€šè¿‡ V8 å¼•æ“æ‰§è¡Œ JavaScript ä»£ç ï¼Œä½¿ç”¨ Node.js API ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå¹¶é€šè¿‡ Libuv å¤„ç†å¼‚æ­¥ I&#x2F;O æ“ä½œã€‚äº‹ä»¶å¾ªç¯å’Œå·¥ä½œçº¿ç¨‹ç¡®ä¿äº† Node.js çš„é«˜æ•ˆå’Œéé˜»å¡ç‰¹æ€§ã€‚</p>
<h2 id="é€šè®¯æ–¹æ³•"><a href="#é€šè®¯æ–¹æ³•" class="headerlink" title="é€šè®¯æ–¹æ³•"></a>é€šè®¯æ–¹æ³•</h2><table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">XHR</th>
<th align="left">Fetch</th>
<th align="center">Axios</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>åŸºæœ¬æ¶æ„</strong></td>
<td align="left">äº‹ä»¶å›è°ƒæœºåˆ¶</td>
<td align="left">Promise API</td>
<td align="center">Promise API</td>
</tr>
<tr>
<td align="left"><strong>æµè§ˆå™¨æ”¯æŒ</strong></td>
<td align="left">æ‰€æœ‰æµè§ˆå™¨</td>
<td align="left">ç°ä»£æµè§ˆå™¨(ä¸å…¼å®¹IE)</td>
<td align="center">æ‰€æœ‰æµè§ˆå™¨(é€šè¿‡polyfill)</td>
</tr>
<tr>
<td align="left"><strong>è¯·æ±‚å–æ¶ˆ</strong></td>
<td align="left">æ”¯æŒ</td>
<td align="left">éœ€è¦AbortController</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td align="left"><strong>è¶…æ—¶è®¾ç½®</strong></td>
<td align="left">æ”¯æŒ</td>
<td align="left">ä¸æ”¯æŒ(éœ€æ‰‹åŠ¨å®ç°)</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td align="left"><strong>è¿›åº¦ç›‘æ§</strong></td>
<td align="left">æ”¯æŒ(upload&#x2F;download)</td>
<td align="left">ä»…æ”¯æŒä¸‹è½½è¿›åº¦</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td align="left"><strong>æ‹¦æˆªå™¨</strong></td>
<td align="left">ä¸æ”¯æŒ</td>
<td align="left">ä¸æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
</tr>
<tr>
<td align="left"><strong>è‡ªåŠ¨JSONè½¬æ¢</strong></td>
<td align="left">éœ€è¦æ‰‹åŠ¨å¤„ç†</td>
<td align="left">éœ€è¦æ‰‹åŠ¨è°ƒç”¨.json()</td>
<td align="center">è‡ªåŠ¨è½¬æ¢</td>
</tr>
<tr>
<td align="left"><strong>CSRFé˜²æŠ¤</strong></td>
<td align="left">éœ€è¦æ‰‹åŠ¨è®¾ç½®</td>
<td align="left">éœ€è¦æ‰‹åŠ¨è®¾ç½®</td>
<td align="center">å†…ç½®æ”¯æŒ</td>
</tr>
<tr>
<td align="left"><strong>HTTPæ–¹æ³•</strong></td>
<td align="left">éœ€è¦.open()è®¾ç½®</td>
<td align="left">é€šè¿‡options.methodè®¾ç½®</td>
<td align="center">æä¾›å¯¹åº”æ–¹æ³•åˆ«å</td>
</tr>
<tr>
<td align="left"><strong>è¯·æ±‚&#x2F;å“åº”æ‹¦æˆª</strong></td>
<td align="left">ä¸æ”¯æŒ</td>
<td align="left">ä¸æ”¯æŒ</td>
<td align="center">æ”¯æŒ</td>
</tr>
</tbody></table>
<h1 id="Node-js-äº‹ä»¶å¾ªç¯"><a href="#Node-js-äº‹ä»¶å¾ªç¯" class="headerlink" title="Node.js äº‹ä»¶å¾ªç¯"></a>Node.js äº‹ä»¶å¾ªç¯</h1><p>äº‹ä»¶å¾ªç¯æ˜¯ Node.js å¤„ç†éé˜»å¡ I&#x2F;O æ“ä½œçš„æ ¸å¿ƒæœºåˆ¶ï¼Œä½¿å¾—å•çº¿ç¨‹èƒ½å¤Ÿé«˜æ•ˆå¤„ç†å¤šä¸ªå¹¶å‘è¯·æ±‚ã€‚</p>
<p>Node.js æ˜¯åŸºäºå•çº¿ç¨‹çš„ JavaScript è¿è¡Œæ—¶ï¼Œåˆ©ç”¨äº‹ä»¶å¾ªç¯æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¦‚æ–‡ä»¶è¯»å–ã€ç½‘ç»œè¯·æ±‚å’Œæ•°æ®åº“æŸ¥è¯¢ã€‚</p>
<p>äº‹ä»¶å¾ªç¯ä½¿å¾— Node.js èƒ½å¤Ÿéé˜»å¡åœ°è¿è¡Œä»£ç ã€å¤„ç†å¤šä¸ªè¿æ¥ã€ä»¥åŠæ‰§è¡Œå¼‚æ­¥ I&#x2F;O æ“ä½œã€‚</p>
<p>äº‹ä»¶å¾ªç¯ä½¿å¾— Node.js èƒ½å¤Ÿå¤„ç†å¤§é‡å¹¶å‘çš„ I&#x2F;O æ“ä½œè€Œä¸ä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡ï¼Œè¿™æ˜¯ Node.js é«˜æ•ˆå¤„ç†å¹¶å‘è¯·æ±‚çš„å…³é”®ã€‚</p>
<p><img src="/../img/1_SvTxMIEudVv8YRW_ELRamw.png" alt="img"></p>
<h3 id="äº‹ä»¶å¾ªç¯çš„é˜¶æ®µ"><a href="#äº‹ä»¶å¾ªç¯çš„é˜¶æ®µ" class="headerlink" title="äº‹ä»¶å¾ªç¯çš„é˜¶æ®µ"></a>äº‹ä»¶å¾ªç¯çš„é˜¶æ®µ</h3><p>äº‹ä»¶å¾ªç¯åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µå¤„ç†ç‰¹å®šçš„ä»»åŠ¡ã€‚å…³é”®é˜¶æ®µå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>Timers</strong>ï¼šæ‰§è¡Œ <code>setTimeout()</code> å’Œ <code>setInterval()</code> çš„å›è°ƒã€‚</li>
<li><strong>I&#x2F;O Callbacks</strong>ï¼šå¤„ç†ä¸€äº›å»¶è¿Ÿçš„ I&#x2F;O å›è°ƒã€‚</li>
<li><strong>Idle, prepare</strong>ï¼šå†…éƒ¨ä½¿ç”¨ï¼Œä¸å¸¸è§ã€‚</li>
<li><strong>Poll</strong>ï¼šæ£€ç´¢æ–°çš„ I&#x2F;O äº‹ä»¶ï¼Œæ‰§è¡Œä¸ I&#x2F;O ç›¸å…³çš„å›è°ƒã€‚</li>
<li><strong>Check</strong>ï¼šæ‰§è¡Œ <code>setImmediate()</code> å›è°ƒã€‚</li>
<li><strong>Close Callbacks</strong>ï¼šå¤„ç†å…³é—­çš„å›è°ƒï¼Œå¦‚ <code>socket.on(&#39;close&#39;, ...)</code>ã€‚</li>
</ul>
<h3 id="äº‹ä»¶å¾ªç¯çš„æµç¨‹"><a href="#äº‹ä»¶å¾ªç¯çš„æµç¨‹" class="headerlink" title="äº‹ä»¶å¾ªç¯çš„æµç¨‹"></a>äº‹ä»¶å¾ªç¯çš„æµç¨‹</h3><ul>
<li><strong>ä»»åŠ¡è¿›å…¥äº‹ä»¶å¾ªç¯é˜Ÿåˆ—</strong>ã€‚</li>
<li>äº‹ä»¶å¾ªç¯æŒ‰ç…§é˜¶æ®µé¡ºåºè¿›è¡Œå¤„ç†ï¼Œæ¯ä¸ªé˜¶æ®µæœ‰è‡ªå·±çš„å›è°ƒé˜Ÿåˆ—ã€‚</li>
<li>äº‹ä»¶å¾ªç¯ä¼šåœ¨ <code>poll</code> é˜¶æ®µç­‰å¾…æ–°çš„äº‹ä»¶åˆ°è¾¾ï¼Œå¦‚æœæ²¡æœ‰äº‹ä»¶ï¼Œä¼šæ£€æŸ¥å…¶ä»–é˜¶æ®µçš„å›è°ƒã€‚</li>
<li>å¦‚æœ <code>setImmediate()</code> å’Œ <code>setTimeout()</code> éƒ½å­˜åœ¨ï¼Œ<code>setImmediate()</code> åœ¨ <code>check</code> é˜¶æ®µå…ˆæ‰§è¡Œï¼Œè€Œ <code>setTimeout()</code> åœ¨ <code>timers</code> é˜¶æ®µæ‰§è¡Œã€‚</li>
</ul>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line"> console.log(&#x27;Timeout callback&#x27;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">setImmediate(() =&gt; &#123;</span><br><span class="line"> console.log(&#x27;Immediate callback&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&#x27;Main thread execution&#x27;);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºé¡ºåºï¼š</p>
<ul>
<li><code>Main thread execution</code> å…ˆæ‰“å°ã€‚</li>
<li><code>setImmediate()</code> å’Œ <code>setTimeout()</code> çš„æ‰§è¡Œé¡ºåºå–å†³äºå½“å‰äº‹ä»¶å¾ªç¯çš„çŠ¶æ€ï¼Œä¸€èˆ¬ <code>setImmediate()</code> ä¼šå…ˆæ‰§è¡Œã€‚</li>
</ul>
<h3 id="å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡"><a href="#å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡"></a>å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡</h3><ul>
<li><strong>å®ä»»åŠ¡</strong>ï¼š<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>setImmediate</code>ã€I&#x2F;O æ“ä½œç­‰ã€‚</li>
<li><strong>å¾®ä»»åŠ¡</strong>ï¼š<code>process.nextTick</code>ã€<code>Promise.then</code>ã€‚</li>
</ul>
<p>**æ‰§è¡Œé¡ºåºï¼š**å¾®ä»»åŠ¡ä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡ï¼Œä¼šåœ¨å½“å‰é˜¶æ®µçš„å›è°ƒç»“æŸåç«‹å³æ‰§è¡Œã€‚</p>
<h2 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line"> console.log(&#x27;Timeout callback&#x27;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line"> console.log(&#x27;Promise callback&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&#x27;Main thread execution&#x27;);</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œè¾“å‡ºç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Main thread execution</span><br><span class="line">Promise callback</span><br><span class="line">Timeout callback</span><br></pre></td></tr></table></figure>

<h3 id="process-nextTick"><a href="#process-nextTick" class="headerlink" title="process.nextTick()"></a>process.nextTick()</h3><p>process.nextTick() ä¼šåœ¨å½“å‰æ“ä½œç»“æŸåã€ä¸‹ä¸€ä¸ªé˜¶æ®µå¼€å§‹å‰æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œä¼˜å…ˆçº§é«˜äº Promiseã€‚</p>
<h2 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">process.nextTick(() =&gt; &#123;</span><br><span class="line"> console.log(&#x27;Next tick callback&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&#x27;Main thread execution&#x27;);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Main thread execution</span><br><span class="line">Next tick callback</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="äº‹ä»¶é©±åŠ¨ç¨‹åº"><a href="#äº‹ä»¶é©±åŠ¨ç¨‹åº" class="headerlink" title="äº‹ä»¶é©±åŠ¨ç¨‹åº"></a>äº‹ä»¶é©±åŠ¨ç¨‹åº</h2><p>åœ¨ Node.js ä¸­ï¼Œäº‹ä»¶é©±åŠ¨ç¼–ç¨‹ä¸»è¦é€šè¿‡ EventEmitter ç±»æ¥å®ç°ã€‚</p>
<p>EventEmitter æ˜¯ä¸€ä¸ªå†…ç½®ç±»ï¼Œä½äº events æ¨¡å—ä¸­ï¼Œé€šè¿‡ç»§æ‰¿ EventEmitterï¼Œä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„äº‹ä»¶å‘å°„å™¨ï¼Œå¹¶æ³¨å†Œå’Œè§¦å‘äº‹ä»¶ã€‚</p>
<p>é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒNode.js å¯ä»¥é«˜æ•ˆåœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œå³ä½¿åœ¨å•çº¿ç¨‹çš„ç¯å¢ƒä¸‹ä¹Ÿèƒ½å®ç°å¹¶å‘å¤„ç†ã€‚</p>
<p><img src="/../img/event_loop.jpg" alt="img"></p>
<p>æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚</p>
<p><strong>åŸºæœ¬æ¦‚å¿µï¼š</strong></p>
<ul>
<li><strong>äº‹ä»¶</strong>ï¼šåœ¨ç¨‹åºä¸­å‘ç”Ÿçš„åŠ¨ä½œæˆ–çŠ¶æ€æ”¹å˜ï¼Œä¾‹å¦‚ä¸€ä¸ªæ–‡ä»¶è¯»å–å®Œæˆæˆ–ä¸€ä¸ª HTTP è¯·æ±‚åˆ°è¾¾ã€‚</li>
<li><strong>äº‹ä»¶è§¦å‘å™¨</strong>ï¼š<code>EventEmitter</code> æ˜¯ Node.js çš„å†…ç½®æ¨¡å—ï¼Œç”¨æ¥å‘å‡ºå’Œç›‘å¬äº‹ä»¶ã€‚</li>
<li><strong>äº‹ä»¶å¤„ç†å™¨</strong>ï¼šä¸äº‹ä»¶å…³è”çš„å›è°ƒå‡½æ•°ï¼Œäº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨ã€‚</li>
</ul>
<p><strong>äº‹ä»¶é©±åŠ¨çš„æµç¨‹ï¼š</strong></p>
<ul>
<li><strong>æ³¨å†Œäº‹ä»¶</strong>ï¼šåœ¨ç¨‹åºä¸­é€šè¿‡ <code>EventEmitter</code> å®ä¾‹æ³¨å†Œäº‹ä»¶å’Œå¯¹åº”çš„å¤„ç†å™¨ã€‚</li>
<li><strong>è§¦å‘äº‹ä»¶</strong>ï¼šå½“æŒ‡å®šçš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ<code>EventEmitter</code> ä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚</li>
<li><strong>å¤„ç†äº‹ä»¶</strong>ï¼šäº‹ä»¶å¾ªç¯ä¼šè°ƒåº¦ç›¸åº”çš„å›è°ƒå‡½æ•°æ¥æ‰§è¡Œä»»åŠ¡ã€‚</li>
</ul>
<p>Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// å¼•å…¥ events æ¨¡å—</span><br><span class="line">var events = require(&#x27;events&#x27;);</span><br><span class="line">// åˆ›å»º eventEmitter å¯¹è±¡</span><br><span class="line">var eventEmitter = new events.EventEmitter();</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº</span><br><span class="line">eventEmitter.on(&#x27;eventName&#x27;, eventHandler);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è§¦å‘äº‹ä»¶</span><br><span class="line">eventEmitter.emit(&#x27;eventName&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>åˆ›å»º hello.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<h2 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹ 1"></a>å®ä¾‹ 1</h2><p><strong>const</strong> EventEmitter &#x3D; require(â€˜eventsâ€™);<br><strong>const</strong> myEmitter &#x3D; <strong>new</strong> EventEmitter();</p>
<p><em>&#x2F;&#x2F; æ³¨å†Œäº‹ä»¶å¤„ç†å™¨</em><br>myEmitter.on(â€˜greetâ€™, () &#x3D;&gt; {<br> console.log(â€˜Hello, world!â€™);<br>});</p>
<p><em>&#x2F;&#x2F; è§¦å‘äº‹ä»¶</em><br>myEmitter.emit(â€˜greetâ€™);</p>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello, world!</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<h2 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹ 2"></a>å®ä¾‹ 2</h2><p>&#x2F;&#x2F; å¼•å…¥ events æ¨¡å— var events &#x3D; require(â€˜eventsâ€™); &#x2F;&#x2F; åˆ›å»º eventEmitter å¯¹è±¡ var eventEmitter &#x3D; new events.EventEmitter();  &#x2F;&#x2F; åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åº var connectHandler &#x3D; function connected() {   console.log(â€˜è¿æ¥æˆåŠŸã€‚â€™);     &#x2F;&#x2F; è§¦å‘ data_received äº‹ä»¶    eventEmitter.emit(â€˜data_receivedâ€™); }  &#x2F;&#x2F; ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åº eventEmitter.on(â€˜connectionâ€™, connectHandler);  &#x2F;&#x2F; ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶ eventEmitter.on(â€˜data_receivedâ€™, function(){   console.log(â€˜æ•°æ®æ¥æ”¶æˆåŠŸã€‚â€™); });  &#x2F;&#x2F; è§¦å‘ connection äº‹ä»¶  eventEmitter.emit(â€˜connectionâ€™);  console.log(â€œç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚â€);</p>
<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ‰§è¡Œä»¥ä¸Šä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line">è¿æ¥æˆåŠŸã€‚</span><br><span class="line">æ•°æ®æ¥æ”¶æˆåŠŸã€‚</span><br><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>åœ¨ Node åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„å‡½æ•°å°†å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œ å›è°ƒå‡½æ•°æ¥æ”¶é”™è¯¯å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥é‡æ–°çœ‹ä¸‹å‰é¢çš„å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª input.txt ,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&quot;fs&quot;);</span><br><span class="line"></span><br><span class="line">fs.readFile(&#x27;input.txt&#x27;, function (err, data) &#123;</span><br><span class="line">   if (err)&#123;</span><br><span class="line">      console.log(err.stack);</span><br><span class="line">      return;</span><br><span class="line">   &#125;</span><br><span class="line">   console.log(data.toString());</span><br><span class="line">&#125;);</span><br><span class="line">console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šç¨‹åºä¸­ fs.readFile() æ˜¯å¼‚æ­¥å‡½æ•°ç”¨äºè¯»å–æ–‡ä»¶ã€‚ å¦‚æœåœ¨è¯»å–æ–‡ä»¶è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ err å¯¹è±¡å°±ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p>
<p>å¦‚æœæ²¡å‘ç”Ÿé”™è¯¯ï¼ŒreadFile è·³è¿‡ err å¯¹è±¡çš„è¾“å‡ºï¼Œæ–‡ä»¶å†…å®¹å°±é€šè¿‡å›è°ƒå‡½æ•°è¾“å‡ºã€‚</p>
<p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•</span><br><span class="line">èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬åˆ é™¤ input.txt æ–‡ä»¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•</span><br><span class="line">Error: ENOENT, open &#x27;input.txt&#x27;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæ–‡ä»¶ input.txt ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è¾“å‡ºäº†é”™è¯¯ä¿¡æ¯ã€‚</p>
<h1 id="Node-js-ä¸­çš„æµ-Stream-ã€ç¼“å†²åŒº-Buffer-ä¸æµè§ˆå™¨ä¸­çš„Blobå¯¹æ¯”"><a href="#Node-js-ä¸­çš„æµ-Stream-ã€ç¼“å†²åŒº-Buffer-ä¸æµè§ˆå™¨ä¸­çš„Blobå¯¹æ¯”" class="headerlink" title="Node.js ä¸­çš„æµ(Stream)ã€ç¼“å†²åŒº(Buffer)ä¸æµè§ˆå™¨ä¸­çš„Blobå¯¹æ¯”"></a>Node.js ä¸­çš„æµ(Stream)ã€ç¼“å†²åŒº(Buffer)ä¸æµè§ˆå™¨ä¸­çš„Blobå¯¹æ¯”</h1><h2 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”"><a href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”" class="headerlink" title="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”"></a>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”</h2><table>
<thead>
<tr>
<th align="left">æ¦‚å¿µ</th>
<th align="left">ç¯å¢ƒ</th>
<th align="left">æœ¬è´¨</th>
<th align="left">ä¸»è¦ç”¨é€”</th>
<th align="left">ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Stream</strong></td>
<td align="left">Node.js</td>
<td align="left">æ•°æ®å¤„ç†çš„æŠ½è±¡æ¥å£</td>
<td align="left">å¤„ç†å¤§é‡æ•°æ®æˆ–I&#x2F;Oæ“ä½œ</td>
<td align="left">åˆ†å—å¤„ç†ã€å†…å­˜é«˜æ•ˆ</td>
</tr>
<tr>
<td align="left"><strong>Buffer</strong></td>
<td align="left">Node.js</td>
<td align="left">å›ºå®šå¤§å°çš„äºŒè¿›åˆ¶æ•°æ®å—</td>
<td align="left">ä¸´æ—¶å­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®</td>
<td align="left">å†…å­˜æ“ä½œã€å¿«é€Ÿè®¿é—®</td>
</tr>
<tr>
<td align="left"><strong>Blob</strong></td>
<td align="left">æµè§ˆå™¨</td>
<td align="left">ä¸å¯å˜çš„ç±»æ–‡ä»¶å¯¹è±¡</td>
<td align="left">è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®(å¦‚å›¾ç‰‡ã€æ–‡ä»¶)</td>
<td align="left">æµè§ˆå™¨ç¯å¢ƒä¸“ç”¨ã€æ”¯æŒåˆ‡ç‰‡æ“ä½œ</td>
</tr>
</tbody></table>
<h2 id="äºŒã€Node-js-ä¸­çš„æµ-Stream-è¯¦è§£"><a href="#äºŒã€Node-js-ä¸­çš„æµ-Stream-è¯¦è§£" class="headerlink" title="äºŒã€Node.js ä¸­çš„æµ(Stream)è¯¦è§£"></a>äºŒã€Node.js ä¸­çš„æµ(Stream)è¯¦è§£</h2><h3 id="1-å››ç§æµç±»å‹"><a href="#1-å››ç§æµç±»å‹" class="headerlink" title="1. å››ç§æµç±»å‹"></a>1. å››ç§æµç±»å‹</h3><table>
<thead>
<tr>
<th align="left">æµç±»å‹</th>
<th align="left">æè¿°</th>
<th align="left">ç¤ºä¾‹åœºæ™¯</th>
<th align="left">å…³é”®æ–¹æ³•&#x2F;äº‹ä»¶</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Readable</strong></td>
<td align="left">å¯è¯»æ•°æ®æº</td>
<td align="left">æ–‡ä»¶è¯»å–ã€HTTPè¯·æ±‚</td>
<td align="left"><code>read()</code>, <code>data</code>, <code>end</code></td>
</tr>
<tr>
<td align="left"><strong>Writable</strong></td>
<td align="left">å¯å†™æ•°æ®ç›®æ ‡</td>
<td align="left">æ–‡ä»¶å†™å…¥ã€HTTPå“åº”</td>
<td align="left"><code>write()</code>, <code>end</code>, <code>drain</code></td>
</tr>
<tr>
<td align="left"><strong>Duplex</strong></td>
<td align="left">åŒå‘æµ(å¯è¯»å¯å†™)</td>
<td align="left">TCPå¥—æ¥å­—ã€WebSocket</td>
<td align="left">å…¼å…·è¯»å†™æ–¹æ³•</td>
</tr>
<tr>
<td align="left"><strong>Transform</strong></td>
<td align="left">è½¬æ¢æµ(è¯»å†™+æ•°æ®å¤„ç†)</td>
<td align="left">å‹ç¼©&#x2F;åŠ å¯†æµ</td>
<td align="left"><code>_transform()</code>, <code>_flush</code></td>
</tr>
</tbody></table>
<h3 id="2-æµçš„å·¥ä½œæ¨¡å¼"><a href="#2-æµçš„å·¥ä½œæ¨¡å¼" class="headerlink" title="2. æµçš„å·¥ä½œæ¨¡å¼"></a>2. æµçš„å·¥ä½œæ¨¡å¼</h3><p>javascript</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºå¯è¯»æµ</span><br><span class="line">const readable = fs.createReadStream(&#x27;input.txt&#x27;);</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºå¯å†™æµ</span><br><span class="line">const writable = fs.createWriteStream(&#x27;output.txt&#x27;);</span><br><span class="line"></span><br><span class="line">// ç®¡é“è¿æ¥ï¼ˆè‡ªåŠ¨å¤„ç†èƒŒå‹ï¼‰</span><br><span class="line">readable.pipe(writable);</span><br><span class="line"></span><br><span class="line">// æ‰‹åŠ¨å¤„ç†æ•°æ®å—</span><br><span class="line">readable.on(&#x27;data&#x27;, (chunk) =&gt; &#123;</span><br><span class="line">  console.log(`Received $&#123;chunk.length&#125; bytes`);</span><br><span class="line">  writable.write(chunk);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readable.on(&#x27;end&#x27;, () =&gt; &#123;</span><br><span class="line">  writable.end();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€Node-js-ä¸­çš„ç¼“å†²åŒº-Buffer"><a href="#ä¸‰ã€Node-js-ä¸­çš„ç¼“å†²åŒº-Buffer" class="headerlink" title="ä¸‰ã€Node.js ä¸­çš„ç¼“å†²åŒº(Buffer)"></a>ä¸‰ã€Node.js ä¸­çš„ç¼“å†²åŒº(Buffer)</h2><h3 id="1-Buffer-æ ¸å¿ƒç‰¹æ€§"><a href="#1-Buffer-æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="1. Buffer æ ¸å¿ƒç‰¹æ€§"></a>1. Buffer æ ¸å¿ƒç‰¹æ€§</h3><ul>
<li><strong>äºŒè¿›åˆ¶å®¹å™¨</strong>ï¼šå­˜å‚¨åŸå§‹äºŒè¿›åˆ¶æ•°æ®</li>
<li><strong>å›ºå®šå¤§å°</strong>ï¼šåˆ›å»ºæ—¶åˆ†é…å›ºå®šå†…å­˜</li>
<li><strong>é«˜æ•ˆæ“ä½œ</strong>ï¼šæä¾›å¤šç§æ•°æ®æ“ä½œAPI</li>
</ul>
<h3 id="2-å¸¸è§ä½¿ç”¨åœºæ™¯"><a href="#2-å¸¸è§ä½¿ç”¨åœºæ™¯" class="headerlink" title="2. å¸¸è§ä½¿ç”¨åœºæ™¯"></a>2. å¸¸è§ä½¿ç”¨åœºæ™¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºBuffer</span><br><span class="line">const buf1 = Buffer.alloc(10); // 10å­—èŠ‚ç¼“å†²åŒº</span><br><span class="line">const buf2 = Buffer.from(&#x27;Hello&#x27;); // ä»å­—ç¬¦ä¸²åˆ›å»º</span><br><span class="line"></span><br><span class="line">// å†™å…¥æ•°æ®</span><br><span class="line">buf1.write(&#x27;Node.js&#x27;);</span><br><span class="line"></span><br><span class="line">// è¯»å–æ•°æ®</span><br><span class="line">console.log(buf1.toString(&#x27;utf8&#x27;, 0, 6)); // &quot;Node.j&quot;</span><br><span class="line"></span><br><span class="line">// ä¸æµäº¤äº’</span><br><span class="line">readable.on(&#x27;data&#x27;, (chunk) =&gt; &#123;</span><br><span class="line">  // chunkæ˜¯Bufferå®ä¾‹</span><br><span class="line">  console.log(chunk.toString());</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-Buffer-ä¸-Stream-çš„å…³ç³»"><a href="#3-Buffer-ä¸-Stream-çš„å…³ç³»" class="headerlink" title="3. Buffer ä¸ Stream çš„å…³ç³»"></a>3. Buffer ä¸ Stream çš„å…³ç³»</h3><ul>
<li><p>æµå¤„ç†çš„æ•°æ®å—é»˜è®¤æ˜¯Bufferç±»å‹</p>
</li>
<li><p>å¯è®¾ç½®æµç¼–ç ç›´æ¥å¤„ç†å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">readable.setEncoding(&#x27;utf8&#x27;);</span><br><span class="line">readable.on(&#x27;data&#x27;, (str) =&gt; &#123;</span><br><span class="line">  // ç°åœ¨chunkæ˜¯å­—ç¬¦ä¸²</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å››ã€æµè§ˆå™¨ä¸­çš„-Blob"><a href="#å››ã€æµè§ˆå™¨ä¸­çš„-Blob" class="headerlink" title="å››ã€æµè§ˆå™¨ä¸­çš„ Blob"></a>å››ã€æµè§ˆå™¨ä¸­çš„ Blob</h2><h3 id="1-Blob-æ ¸å¿ƒç‰¹æ€§"><a href="#1-Blob-æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="1. Blob æ ¸å¿ƒç‰¹æ€§"></a>1. Blob æ ¸å¿ƒç‰¹æ€§</h3><ul>
<li><strong>ç±»æ–‡ä»¶å¯¹è±¡</strong>ï¼šè¡¨ç¤ºåŸå§‹æ•°æ®</li>
<li><strong>ä¸å¯å˜æ€§</strong>ï¼šåˆ›å»ºåå†…å®¹ä¸å¯æ›´æ”¹</li>
<li><strong>æµè§ˆå™¨ä¸“ç”¨</strong>ï¼šNode.js ä¸­ä¸å¯ç”¨</li>
</ul>
<h3 id="2-å¸¸è§ä½¿ç”¨åœºæ™¯-1"><a href="#2-å¸¸è§ä½¿ç”¨åœºæ™¯-1" class="headerlink" title="2. å¸¸è§ä½¿ç”¨åœºæ™¯"></a>2. å¸¸è§ä½¿ç”¨åœºæ™¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºBlob</span><br><span class="line">const blob = new Blob([&#x27;Hello, world!&#x27;], &#123; type: &#x27;text/plain&#x27; &#125;);</span><br><span class="line"></span><br><span class="line">// è¯»å–Blobå†…å®¹</span><br><span class="line">const reader = new FileReader();</span><br><span class="line">reader.onload = () =&gt; &#123;</span><br><span class="line">  console.log(reader.result); // &quot;Hello, world!&quot;</span><br><span class="line">&#125;;</span><br><span class="line">reader.readAsText(blob);</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºURL</span><br><span class="line">const url = URL.createObjectURL(blob);</span><br><span class="line">const a = document.createElement(&#x27;a&#x27;);</span><br><span class="line">a.href = url;</span><br><span class="line">a.download = &#x27;example.txt&#x27;;</span><br><span class="line">a.click();</span><br><span class="line"></span><br><span class="line">// åˆ‡ç‰‡å¤„ç†å¤§æ–‡ä»¶</span><br><span class="line">const slice = blob.slice(0, 1024); // å‰1KB</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€ä¸‰è€…å¯¹æ¯”ä¸è½¬æ¢"><a href="#äº”ã€ä¸‰è€…å¯¹æ¯”ä¸è½¬æ¢" class="headerlink" title="äº”ã€ä¸‰è€…å¯¹æ¯”ä¸è½¬æ¢"></a>äº”ã€ä¸‰è€…å¯¹æ¯”ä¸è½¬æ¢</h2><h3 id="1-Node-js-ç¯å¢ƒä¸­çš„è½¬æ¢"><a href="#1-Node-js-ç¯å¢ƒä¸­çš„è½¬æ¢" class="headerlink" title="1. Node.js ç¯å¢ƒä¸­çš„è½¬æ¢"></a>1. Node.js ç¯å¢ƒä¸­çš„è½¬æ¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Buffer è½¬ Blob (Node.js v15+)</span><br><span class="line">const &#123; Blob &#125; = require(&#x27;buffer&#x27;);</span><br><span class="line">const buffer = Buffer.from(&#x27;Hello&#x27;);</span><br><span class="line">const blob = new Blob([buffer]);</span><br><span class="line"></span><br><span class="line">// Stream è½¬ Buffer</span><br><span class="line">async function streamToBuffer(stream) &#123;</span><br><span class="line">  const chunks = [];</span><br><span class="line">  for await (const chunk of stream) &#123;</span><br><span class="line">    chunks.push(chunk);</span><br><span class="line">  &#125;</span><br><span class="line">  return Buffer.concat(chunks);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-æµè§ˆå™¨ç¯å¢ƒä¸­çš„è½¬æ¢"><a href="#2-æµè§ˆå™¨ç¯å¢ƒä¸­çš„è½¬æ¢" class="headerlink" title="2. æµè§ˆå™¨ç¯å¢ƒä¸­çš„è½¬æ¢"></a>2. æµè§ˆå™¨ç¯å¢ƒä¸­çš„è½¬æ¢</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// Blob è½¬ ReadableStream</span><br><span class="line">const readableStream = blob.stream();</span><br><span class="line"></span><br><span class="line">// Fetch å“åº”è½¬ Blob</span><br><span class="line">fetch(&#x27;image.png&#x27;)</span><br><span class="line">  .then(response =&gt; response.blob())</span><br><span class="line">  .then(blob =&gt; &#123;</span><br><span class="line">    // ä½¿ç”¨Blob</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<h1 id="Expressã€Koa-å’Œ-Egg-js"><a href="#Expressã€Koa-å’Œ-Egg-js" class="headerlink" title="Expressã€Koa å’Œ Egg.js"></a>Expressã€Koa å’Œ Egg.js</h1><p>æ˜¯ Node.js ç”Ÿæ€ä¸­ä¸‰ä¸ªé‡è¦çš„ Web æ¡†æ¶ï¼Œå®ƒä»¬åœ¨è®¾è®¡ç†å¿µã€åº•å±‚åŸç†å’Œé€‚ç”¨åœºæ™¯ä¸Šæœ‰æ˜¾è‘—å·®å¼‚ã€‚ä»¥ä¸‹ä»æ ¸å¿ƒåŸç†ã€å¼‚æ­¥å¤„ç†ã€ä¸­é—´ä»¶æœºåˆ¶ã€æ¶æ„è®¾è®¡å’Œé€‚ç”¨åœºæ™¯ç­‰ç»´åº¦è¿›è¡Œç»¼åˆå¯¹æ¯”ï¼š</p>
<hr>
<h3 id="âš™ï¸-ä¸€ã€æ ¸å¿ƒåŸç†ä¸å¼‚æ­¥å¤„ç†"><a href="#âš™ï¸-ä¸€ã€æ ¸å¿ƒåŸç†ä¸å¼‚æ­¥å¤„ç†" class="headerlink" title="âš™ï¸ ä¸€ã€æ ¸å¿ƒåŸç†ä¸å¼‚æ­¥å¤„ç†"></a>âš™ï¸ ä¸€ã€<strong>æ ¸å¿ƒåŸç†ä¸å¼‚æ­¥å¤„ç†</strong></h3><ol>
<li><strong>Express</strong><ul>
<li><strong>å›è°ƒé©±åŠ¨</strong>ï¼šåŸºäºå›è°ƒå‡½æ•°å¤„ç†å¼‚æ­¥ï¼Œæ˜“å¯¼è‡´â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰17ã€‚</li>
<li><strong>çº¿æ€§æ¨¡å‹</strong>ï¼šä¸­é—´ä»¶é¡ºåºæ‰§è¡Œï¼Œ<code>next()</code> ä»…è§¦å‘ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä½†æ— æ³•ç­‰å¾…åç»­ä¸­é—´ä»¶å®Œæˆå†å›æº¯78ã€‚</li>
<li><strong>å“åº”æ—¶æœº</strong>ï¼šè°ƒç”¨ <code>res.send()</code> ç«‹å³ç»“æŸå“åº”ï¼Œåç»­ä¸­é—´ä»¶æ— æ³•ä¿®æ”¹å“åº”38ã€‚</li>
</ul>
</li>
<li><strong>Koaï¼ˆKoa2ï¼‰</strong><ul>
<li><strong>Async&#x2F;Await é©±åŠ¨</strong>ï¼šåŸºäº Promise å’Œ Async&#x2F;Awaitï¼Œæ”¯æŒåŒæ­¥åŒ–ä¹¦å†™å¼‚æ­¥ä»£ç 16ã€‚</li>
<li><strong>æ´‹è‘±æ¨¡å‹</strong>ï¼šé€šè¿‡ <code>await next()</code> æ§åˆ¶æµç¨‹ï¼Œä¸­é—´ä»¶æ‰§è¡Œä¸¤æ¬¡ï¼ˆè¯·æ±‚ â†’ å“åº”ï¼‰ï¼Œæ”¯æŒåç½®å¤„ç†ï¼ˆå¦‚æ—¥å¿—è®°å½•ï¼‰18ã€‚</li>
<li><strong>å»¶è¿Ÿå“åº”</strong>ï¼š<code>ctx.body</code> è®¾ç½®å“åº”æ•°æ®ï¼Œä½†å®é™…å“åº”åœ¨æ‰€æœ‰ä¸­é—´ä»¶å®Œæˆåç”± Koa è§¦å‘38ã€‚</li>
</ul>
</li>
<li><strong>Egg.js</strong><ul>
<li><strong>åŸºäº Koa å°è£…</strong>ï¼šç»§æ‰¿ Koa çš„æ´‹è‘±æ¨¡å‹ï¼Œä½†æ‰©å±•äº†ä¼ä¸šçº§ç‰¹æ€§ï¼ˆå¦‚æ’ä»¶åŒ–ã€çº¦å®šå¼é…ç½®ï¼‰4ã€‚</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šæ²¿ç”¨ Async&#x2F;Awaitï¼Œä½†é€šè¿‡ <code>app/extend</code> æ‰©å±•ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼Œæä¾›æ›´å¤šå·¥å…·æ–¹æ³•4ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ğŸ”„-äºŒã€ä¸­é—´ä»¶æœºåˆ¶"><a href="#ğŸ”„-äºŒã€ä¸­é—´ä»¶æœºåˆ¶" class="headerlink" title="ğŸ”„ äºŒã€ä¸­é—´ä»¶æœºåˆ¶"></a>ğŸ”„ äºŒã€<strong>ä¸­é—´ä»¶æœºåˆ¶</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>æ¡†æ¶</strong></th>
<th align="left"><strong>æ‰§è¡Œæ¨¡å‹</strong></th>
<th align="left"><strong>ç‰¹ç‚¹</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Express</strong></td>
<td align="left">çº¿æ€§æ¨¡å‹</td>
<td align="left">ä¸­é—´ä»¶é¡ºåºæ‰§è¡Œï¼Œæ— å›æº¯æœºåˆ¶ï¼›ä¾èµ– <code>next()</code> æ‰‹åŠ¨ä¼ é€’æ§åˆ¶æƒ78ã€‚</td>
</tr>
<tr>
<td align="left"><strong>Koa</strong></td>
<td align="left">æ´‹è‘±æ¨¡å‹</td>
<td align="left">ä¸­é—´ä»¶åŒå‘æ‰§è¡Œï¼ˆè¯·æ±‚å‘ä¸‹ â†’ å“åº”å‘ä¸Šï¼‰ï¼Œæ”¯æŒå¼‚æ­¥ç­‰å¾…å›æº¯18ã€‚</td>
</tr>
<tr>
<td align="left"><strong>Egg</strong></td>
<td align="left">æ´‹è‘±æ¨¡å‹ï¼ˆå¢å¼ºç‰ˆï¼‰</td>
<td align="left">ç»§æ‰¿ Koa æ¨¡å‹ï¼Œä½†é€šè¿‡ä¸­é—´ä»¶åŠ è½½é¡ºåºå’Œæ’ä»¶æœºåˆ¶æä¾›æ›´ç²¾ç»†æ§åˆ¶4ã€‚</td>
</tr>
</tbody></table>
<p><strong>ç¤ºä¾‹å¯¹æ¯”</strong>ï¼š</p>
<p>javascript</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Expressï¼šnext() åæ— æ³•å†æ¬¡æ“ä½œå“åº”</span><br><span class="line">app.use((req, res, next) =&gt; &#123;</span><br><span class="line">  console.log(&quot;Start&quot;);</span><br><span class="line">  next();  // ç§»äº¤æ§åˆ¶æƒ</span><br><span class="line">  console.log(&quot;End&quot;);  // åœ¨å“åº”å‘é€åæ‰§è¡Œ</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// Koaï¼šawait next() å¯ç­‰å¾…åç»­ä¸­é—´ä»¶å®Œæˆ</span><br><span class="line">app.use(async (ctx, next) =&gt; &#123;</span><br><span class="line">  console.log(&quot;Start&quot;);</span><br><span class="line">  await next();  // ç­‰å¾…ä¸‹æ¸¸ä¸­é—´ä»¶æ‰§è¡Œå®Œæ¯•</span><br><span class="line">  console.log(&quot;End&quot;);  // å“åº”å‰å¯å†æ¬¡ä¿®æ”¹ ctx</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ğŸ—ï¸-ä¸‰ã€æ¶æ„è®¾è®¡ä¸æ‰©å±•æ€§"><a href="#ğŸ—ï¸-ä¸‰ã€æ¶æ„è®¾è®¡ä¸æ‰©å±•æ€§" class="headerlink" title="ğŸ—ï¸ ä¸‰ã€æ¶æ„è®¾è®¡ä¸æ‰©å±•æ€§"></a>ğŸ—ï¸ ä¸‰ã€<strong>æ¶æ„è®¾è®¡ä¸æ‰©å±•æ€§</strong></h3><ol>
<li><strong>Express</strong><ul>
<li><strong>å¤§è€Œå…¨</strong>ï¼šå†…ç½®è·¯ç”±ã€æ¨¡æ¿å¼•æ“ã€é™æ€æ–‡ä»¶æœåŠ¡ç­‰ï¼Œå¼€ç®±å³ç”¨26ã€‚</li>
<li><strong>å¼±æ‰©å±•æ€§</strong>ï¼šç¼ºå°‘ç»Ÿä¸€çš„æ‰©å±•æœºåˆ¶ï¼Œä¾èµ–ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ç»„åˆ6ã€‚</li>
</ul>
</li>
<li><strong>Koa</strong><ul>
<li><strong>æç®€å†…æ ¸</strong>ï¼šä»…å°è£… HTTP ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼Œä¸å†…ç½®ä»»ä½•ä¸­é—´ä»¶ï¼ˆè·¯ç”±éœ€é€šè¿‡ <code>koa-router</code> æ·»åŠ ï¼‰26ã€‚</li>
<li><strong>é«˜æ‰©å±•æ€§</strong>ï¼šé€šè¿‡ <code>app.context</code> å¯çµæ´»æ‰©å±•å…¨å±€å±æ€§6ã€‚</li>
</ul>
</li>
<li><strong>Egg.js</strong><ul>
<li><strong>ä¼ä¸šçº§æ¡†æ¶</strong>ï¼šåŸºäº Koa å°è£…ï¼Œæä¾›æ’ä»¶åŒ–æ¶æ„ã€çº¦å®šå¼ç›®å½•ç»“æ„å’Œé…ç½®ç®¡ç†4ã€‚</li>
<li><strong>æ‰©å±•ç‚¹ä¸°å¯Œ</strong>ï¼šæ”¯æŒ <code>app/extend/&#123;application, context, request, response&#125;</code> æ‰©å±•åŸå‹4ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h3 id="ğŸ›¡ï¸-å››ã€é”™è¯¯å¤„ç†"><a href="#ğŸ›¡ï¸-å››ã€é”™è¯¯å¤„ç†" class="headerlink" title="ğŸ›¡ï¸ å››ã€é”™è¯¯å¤„ç†"></a>ğŸ›¡ï¸ å››ã€<strong>é”™è¯¯å¤„ç†</strong></h3><ul>
<li><p><strong>Express</strong>ï¼šéœ€æ‰‹åŠ¨æ•è·å¼‚æ­¥é”™è¯¯ï¼Œæˆ–åœ¨ä¸­é—´ä»¶æœ«å°¾æ·»åŠ é”™è¯¯å¤„ç†å‡½æ•°7ã€‚</p>
</li>
<li><p><strong>Koa</strong>ï¼šå¯é€šè¿‡é¡¶å±‚ <code>try/catch</code> æ•è·æ•´ä¸ªæ´‹è‘±æ¨¡å‹çš„åŒæ­¥&#x2F;å¼‚æ­¥é”™è¯¯18ï¼š</p>
<p>javascript</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx, next) =&gt; &#123;</span><br><span class="line">  try &#123; await next(); &#125;</span><br><span class="line">  catch (err) &#123; ctx.status = 500; &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Egg.js</strong>ï¼šå†…ç½®ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼Œæ”¯æŒé…ç½®é”™è¯¯é¡µé¢å’Œæ—¥å¿—ä¸ŠæŠ¥4ã€‚</p>
</li>
</ul>
<hr>
<h3 id="ğŸ¯-äº”ã€é€‚ç”¨åœºæ™¯æ€»ç»“"><a href="#ğŸ¯-äº”ã€é€‚ç”¨åœºæ™¯æ€»ç»“" class="headerlink" title="ğŸ¯ äº”ã€é€‚ç”¨åœºæ™¯æ€»ç»“"></a>ğŸ¯ äº”ã€<strong>é€‚ç”¨åœºæ™¯æ€»ç»“</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>æ¡†æ¶</strong></th>
<th align="left"><strong>åœºæ™¯</strong></th>
<th align="left"><strong>ä»£è¡¨ç”¨æˆ·</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Express</strong></td>
<td align="left">ä¸­å°é¡¹ç›®å¿«é€Ÿå¼€å‘ï¼›éœ€å…¼å®¹æ—§ç‰ˆ Node.js æˆ–å›è°ƒé£æ ¼</td>
<td align="left">ä¼ ç»Ÿä¼ä¸šã€é—ç•™ç³»ç»Ÿ</td>
</tr>
<tr>
<td align="left"><strong>Koa</strong></td>
<td align="left">è¿½æ±‚ç°ä»£å¼‚æ­¥ç¼–ç¨‹ï¼›é«˜è‡ªç”±åº¦å®šåˆ¶ä¸­é—´ä»¶æ ˆ</td>
<td align="left">æŠ€æœ¯å‰æ²¿å›¢é˜Ÿã€å¼€æºé¡¹ç›®</td>
</tr>
<tr>
<td align="left"><strong>Egg.js</strong></td>
<td align="left">å¤§å‹ä¼ä¸šåº”ç”¨ï¼›éœ€æ’ä»¶åŒ–ç®¡ç†ã€å›¢é˜Ÿåä½œè§„èŒƒ</td>
<td align="left">é˜¿é‡Œç³»äº§å“ï¼ˆå¦‚èš‚èšé‡‘æœï¼‰</td>
</tr>
</tbody></table>
<hr>
<h3 id="ğŸ’-ä¸‰æ¡†æ¶æ ¸å¿ƒåŒºåˆ«æ€»ç»“"><a href="#ğŸ’-ä¸‰æ¡†æ¶æ ¸å¿ƒåŒºåˆ«æ€»ç»“" class="headerlink" title="ğŸ’ ä¸‰æ¡†æ¶æ ¸å¿ƒåŒºåˆ«æ€»ç»“"></a>ğŸ’ <strong>ä¸‰æ¡†æ¶æ ¸å¿ƒåŒºåˆ«æ€»ç»“</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>ç‰¹æ€§</strong></th>
<th align="left"><strong>Express</strong></th>
<th align="left"><strong>Koa</strong></th>
<th align="left"><strong>Egg.js</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>å¼‚æ­¥æ¨¡å‹</strong></td>
<td align="left">å›è°ƒå‡½æ•°</td>
<td align="left">Async&#x2F;Await</td>
<td align="left">Async&#x2F;Await</td>
</tr>
<tr>
<td align="left"><strong>ä¸­é—´ä»¶æœºåˆ¶</strong></td>
<td align="left">çº¿æ€§æ‰§è¡Œ</td>
<td align="left">æ´‹è‘±æ¨¡å‹</td>
<td align="left">æ´‹è‘±æ¨¡å‹ï¼ˆå¢å¼ºï¼‰</td>
</tr>
<tr>
<td align="left"><strong>è·¯ç”±&#x2F;è§†å›¾</strong></td>
<td align="left">å†…ç½®æ”¯æŒ</td>
<td align="left">éœ€æ’ä»¶</td>
<td align="left">å†…ç½® + æ’ä»¶æ‰©å±•</td>
</tr>
<tr>
<td align="left"><strong>æ‰©å±•æ€§</strong></td>
<td align="left">ä½ï¼ˆä¾èµ–ä¸­é—´ä»¶ï¼‰</td>
<td align="left">é«˜ï¼ˆè‡ªç”±ç»„åˆï¼‰</td>
<td align="left">æé«˜ï¼ˆæ’ä»¶åŒ–ï¼‰</td>
</tr>
<tr>
<td align="left"><strong>é€‚ç”¨è§„æ¨¡</strong></td>
<td align="left">ä¸­å°é¡¹ç›®</td>
<td align="left">ä¸­å°åˆ°å¤§å‹</td>
<td align="left">ä¸­å¤§å‹ä¼ä¸šçº§</td>
</tr>
<tr>
<td align="left"><strong>å­¦ä¹ æ›²çº¿</strong></td>
<td align="left">ä½</td>
<td align="left">ä¸­</td>
<td align="left">ä¸­é«˜</td>
</tr>
</tbody></table>
<h1 id="Node-js-å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡è¯¦è§£"><a href="#Node-js-å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡è¯¦è§£" class="headerlink" title="Node.js å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡è¯¦è§£"></a>Node.js å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡è¯¦è§£</h1><h2 id="Node-js-å…¨å±€å¯¹è±¡æ¦‚è§ˆ"><a href="#Node-js-å…¨å±€å¯¹è±¡æ¦‚è§ˆ" class="headerlink" title="Node.js å…¨å±€å¯¹è±¡æ¦‚è§ˆ"></a>Node.js å…¨å±€å¯¹è±¡æ¦‚è§ˆ</h2><p>Node.js ä¸­çš„å…¨å±€å¯¹è±¡ <code>global</code> ç±»ä¼¼äºæµè§ˆå™¨ä¸­çš„ <code>window</code> å¯¹è±¡ï¼Œæä¾›å¯¹å…¨å±€å˜é‡å’Œå‡½æ•°çš„è®¿é—®ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒå…¨å±€å¯¹è±¡å’Œå˜é‡ï¼š</p>
<h3 id="å…¨å±€å¯¹è±¡"><a href="#å…¨å±€å¯¹è±¡" class="headerlink" title="å…¨å±€å¯¹è±¡"></a>å…¨å±€å¯¹è±¡</h3><table>
<thead>
<tr>
<th align="left">å¯¹è±¡åç§°</th>
<th align="left">æè¿°</th>
<th align="left">ä½¿ç”¨ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>global</code></td>
<td align="left">é¡¶å±‚å…¨å±€å¯¹è±¡ï¼Œæ‰€æœ‰å…¨å±€å˜é‡éƒ½æ˜¯å®ƒçš„å±æ€§</td>
<td align="left"><code>global.console.log()</code></td>
</tr>
<tr>
<td align="left"><code>process</code></td>
<td align="left">æä¾›å½“å‰ Node.js è¿›ç¨‹çš„ä¿¡æ¯å’Œæ§åˆ¶</td>
<td align="left"><code>process.env.NODE_ENV</code></td>
</tr>
<tr>
<td align="left"><code>console</code></td>
<td align="left">æä¾›è°ƒè¯•è¾“å‡ºåŠŸèƒ½</td>
<td align="left"><code>console.error(&#39;Error!&#39;)</code></td>
</tr>
<tr>
<td align="left"><code>Buffer</code></td>
<td align="left">å¤„ç†äºŒè¿›åˆ¶æ•°æ®çš„ç±»</td>
<td align="left"><code>Buffer.from(&#39;hello&#39;)</code></td>
</tr>
<tr>
<td align="left"><code>module</code></td>
<td align="left">å½“å‰æ¨¡å—çš„å¼•ç”¨</td>
<td align="left"><code>module.exports = &#123;&#125;</code></td>
</tr>
<tr>
<td align="left"><code>exports</code></td>
<td align="left"><code>module.exports</code> çš„å¼•ç”¨</td>
<td align="left"><code>exports.func = () =&gt; &#123;&#125;</code></td>
</tr>
<tr>
<td align="left"><code>require()</code></td>
<td align="left">å¼•å…¥æ¨¡å—çš„å‡½æ•°</td>
<td align="left"><code>const fs = require(&#39;fs&#39;)</code></td>
</tr>
</tbody></table>
<h3 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h3><table>
<thead>
<tr>
<th align="left">å˜é‡åç§°</th>
<th align="left">æè¿°</th>
<th align="left">ä½¿ç”¨ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>__filename</code></td>
<td align="left">å½“å‰æ¨¡å—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</td>
<td align="left"><code>console.log(__filename)</code></td>
</tr>
<tr>
<td align="left"><code>__dirname</code></td>
<td align="left">å½“å‰æ¨¡å—æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„</td>
<td align="left"><code>console.log(__dirname)</code></td>
</tr>
<tr>
<td align="left"><code>setTimeout</code></td>
<td align="left">å®šæ—¶æ‰§è¡Œå‡½æ•°</td>
<td align="left"><code>setTimeout(fn, 1000)</code></td>
</tr>
<tr>
<td align="left"><code>setInterval</code></td>
<td align="left">å®šæ—¶å¾ªç¯æ‰§è¡Œå‡½æ•°</td>
<td align="left"><code>setInterval(fn, 1000)</code></td>
</tr>
<tr>
<td align="left"><code>setImmediate</code></td>
<td align="left">åœ¨å½“å‰äº‹ä»¶å¾ªç¯ç»“æŸæ—¶æ‰§è¡Œå‡½æ•°</td>
<td align="left"><code>setImmediate(fn)</code></td>
</tr>
<tr>
<td align="left"><code>clearTimeout</code></td>
<td align="left">å–æ¶ˆç”± <code>setTimeout()</code> åˆ›å»ºçš„å®šæ—¶å™¨</td>
<td align="left"><code>clearTimeout(timer)</code></td>
</tr>
<tr>
<td align="left"><code>clearInterval</code></td>
<td align="left">å–æ¶ˆç”± <code>setInterval()</code> åˆ›å»ºçš„å®šæ—¶å™¨</td>
<td align="left"><code>clearInterval(timer)</code></td>
</tr>
<tr>
<td align="left"><code>clearImmediate</code></td>
<td align="left">å–æ¶ˆç”± <code>setImmediate()</code> åˆ›å»ºçš„å®šæ—¶å™¨</td>
<td align="left"><code>clearImmediate(timer)</code></td>
</tr>
</tbody></table>
<h1 id="CommonJSå’ŒES6-Moduleçš„åŒºåˆ«æ—¶"><a href="#CommonJSå’ŒES6-Moduleçš„åŒºåˆ«æ—¶" class="headerlink" title="CommonJSå’ŒES6 Moduleçš„åŒºåˆ«æ—¶"></a>CommonJSå’ŒES6 Moduleçš„åŒºåˆ«æ—¶</h1><p>æˆ‘ä»¬å¯ä»¥å½’çº³å‡ºä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>è¯­æ³•å·®å¼‚</strong>ï¼šCommonJSä½¿ç”¨<code>require</code>å’Œ<code>module.exports</code>ï¼ŒES6 Moduleä½¿ç”¨<code>import</code>å’Œ<code>export</code>ã€‚</li>
<li><strong>åŠ è½½æœºåˆ¶</strong>ï¼šCommonJSæ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 Moduleæ˜¯é™æ€åŠ è½½ã€‚</li>
<li><strong>å€¼çš„å¤„ç†</strong>ï¼šCommonJSå¯¼å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼ŒES6 Moduleå¯¼å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚</li>
<li><strong>æ¨¡å—å¯¹è±¡</strong>ï¼šCommonJSä½¿ç”¨<code>module.exports</code>ï¼ŒES6 Moduleä½¿ç”¨<code>export</code>ã€‚</li>
<li><strong>thisæŒ‡å‘</strong>ï¼šCommonJSä¸­çš„<code>this</code>æŒ‡å‘æ¨¡å—å¯¹è±¡ï¼Œè€ŒES6 Moduleä¸­çš„<code>this</code>æ˜¯<code>undefined</code>ã€‚</li>
<li><strong>æ–‡ä»¶æ‰©å±•å</strong>ï¼šCommonJSå¯ä»¥çœç•¥<code>.js</code>ï¼Œè€ŒES6 Moduleå¿…é¡»å¸¦æ‰©å±•åã€‚</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/29/Node/" data-id="cmcygiiyo0003vgur37og0cy7" data-title="Node" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-å‰ç«¯å·¥ç¨‹åŒ–" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T09:09:27.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">å‰ç«¯å·¥ç¨‹åŒ–</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="npmã€yarn-å’Œ-pnpm"><a href="#npmã€yarn-å’Œ-pnpm" class="headerlink" title="npmã€yarn å’Œ pnpm"></a><code>npm</code>ã€<code>yarn</code> å’Œ <code>pnpm</code></h1><hr>
<p> <strong>ä¸€ã€æŠ€æœ¯åŸç†ä¸æ ¸å¿ƒåŒºåˆ«</strong></p>
<ol>
<li><strong>ä¾èµ–ç®¡ç†æœºåˆ¶</strong></li>
</ol>
<ul>
<li><strong>npm</strong><ul>
<li><strong>åµŒå¥—ç»“æ„ï¼ˆv2ï¼‰</strong>ï¼šä¾èµ–æ ‘æ·±å±‚åµŒå¥—ï¼Œç›¸åŒä¾èµ–é‡å¤å®‰è£…ï¼Œè·¯å¾„è¿‡é•¿æ˜“è¶… Windows é™åˆ¶ã€‚</li>
<li><strong>æ‰å¹³åŒ–ï¼ˆv3+ï¼‰</strong>ï¼šä¾èµ–æå‡è‡³é¡¶å±‚ï¼Œå‡å°‘é‡å¤ã€‚ä½†å¤šä¸ªç‰ˆæœ¬æ—¶ä»…æå‡ä¸€ä¸ªï¼Œå…¶ä½™ç‰ˆæœ¬ä»åµŒå¥—å®‰è£…ï¼Œå¯¼è‡´ <strong>ä¾èµ–åˆ†èº«</strong>ï¼ˆåŒä¸€åŒ…å¤šç‰ˆæœ¬é‡å¤å­˜å‚¨ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>yarn</strong><ul>
<li><strong>æ‰å¹³åŒ– + ç¼“å­˜</strong>ï¼šä¾èµ–æå‡è‡³é¡¶å±‚ï¼Œé€šè¿‡ <code>yarn.lock</code> é”å®šç‰ˆæœ¬ï¼›å¹¶è¡Œä¸‹è½½åŠ é€Ÿå®‰è£…ï¼Œç¼“å­˜æœºåˆ¶å‡å°‘é‡å¤ä¸‹è½½26ã€‚</li>
<li><strong>é—®é¢˜æœªæ ¹æ²»</strong>ï¼šä»å­˜åœ¨ <strong>å¹½çµä¾èµ–</strong>ï¼ˆæœªå£°æ˜çš„ä¾èµ–å› æå‡è¢«è®¿é—®ï¼‰å’Œ <strong>ä¾èµ–åˆ†èº«</strong>ã€‚</li>
</ul>
</li>
<li><strong>pnpm</strong><ul>
<li><strong>ç¡¬é“¾æ¥ + ç¬¦å·é“¾æ¥</strong>ï¼š<ul>
<li><strong>å…¨å±€å­˜å‚¨</strong>ï¼ˆ<code>~/.pnpm-store</code>ï¼‰ï¼šæ¯ä¸ªä¾èµ–ç‰ˆæœ¬ä»…å­˜ä¸€ä»½ã€‚</li>
<li><strong>ç¡¬é“¾æ¥</strong>ï¼šé¡¹ç›®ä¸­çš„ä¾èµ–é€šè¿‡ç¡¬é“¾æ¥æŒ‡å‘å…¨å±€å­˜å‚¨ï¼Œé¿å…ç£ç›˜å†—ä½™ã€‚</li>
<li><strong>ç¬¦å·é“¾æ¥</strong>ï¼š<code>node_modules</code> ä¸­åªåŒ…å«ç›´æ¥ä¾èµ–çš„ç¬¦å·é“¾æ¥ï¼Œå­ä¾èµ–é€šè¿‡ <code>.pnpm</code> ç›®å½•çš„è½¯é“¾æ¥ç»„ç»‡ï¼Œä¸¥æ ¼éš”ç¦»ä¾èµ–ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>æ€§èƒ½ä¸ç£ç›˜æ•ˆç‡</strong></li>
</ol>
<table>
<thead>
<tr>
<th align="left">å·¥å…·</th>
<th align="left">å®‰è£…é€Ÿåº¦</th>
<th align="left">ç£ç›˜å ç”¨</th>
<th align="left">åŸç†ä¼˜åŒ–</th>
</tr>
</thead>
<tbody><tr>
<td align="left">npm</td>
<td align="left">âš ï¸ æ…¢ï¼ˆä¸²è¡Œï¼‰</td>
<td align="left">âŒ é«˜ï¼ˆé‡å¤å­˜å‚¨ï¼‰</td>
<td align="left">æ‰å¹³åŒ–å‡å°‘åµŒå¥—é—®é¢˜</td>
</tr>
<tr>
<td align="left">yarn</td>
<td align="left">âœ… å¿«ï¼ˆå¹¶è¡Œï¼‰</td>
<td align="left">âš ï¸ ä¸­ï¼ˆç¼“å­˜å…±äº«ï¼‰</td>
<td align="left">å¹¶è¡Œä¸‹è½½ + ç¼“å­˜å¤ç”¨</td>
</tr>
<tr>
<td align="left">pnpm</td>
<td align="left">âœ… æå¿«ï¼ˆé“¾æ¥ï¼‰</td>
<td align="left">âœ… ä½ï¼ˆå…¨å±€å•ä»½å­˜å‚¨ï¼‰</td>
<td align="left">ç¡¬é“¾æ¥ + ç¬¦å·é“¾æ¥</td>
</tr>
</tbody></table>
<ol start="3">
<li><strong>å®‰å…¨æ€§ &amp; ä¸€è‡´æ€§</strong></li>
</ol>
<ul>
<li><strong>é”å®šæ–‡ä»¶</strong>ï¼š<ul>
<li><code>npm</code>ï¼š<code>package-lock.json</code>ï¼ˆé”å®šç‰ˆæœ¬ï¼Œä½†æ—©æœŸç‰ˆæœ¬å­˜åœ¨å®‰å…¨æ¼æ´ï¼‰ã€‚</li>
<li><code>yarn/pnpm</code>ï¼š<code>yarn.lock</code>&#x2F;<code>pnpm-lock.yaml</code>ï¼ˆä¸¥æ ¼é”å®šç‰ˆæœ¬åŠå“ˆå¸Œå€¼ï¼Œé˜²ç¯¡æ”¹ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä¾èµ–éš”ç¦»</strong>ï¼š<ul>
<li><code>pnpm</code> ä»…å…è®¸è®¿é—®æ˜¾å¼å£°æ˜çš„ä¾èµ–ï¼Œå½»åº•æœç»å¹½çµä¾èµ–ï¼›<code>npm/yarn</code> å› æ‰å¹³åŒ–æ— æ³•è§£å†³ã€‚</li>
</ul>
</li>
</ul>
<hr>
<p> <strong>äºŒã€ä¾ç„¶å­˜åœ¨çš„é—®é¢˜</strong></p>
<ol>
<li><strong>npm</strong></li>
</ol>
<ul>
<li><strong>ä¾èµ–ä¸ç¡®å®šæ€§</strong>ï¼šæ‰å¹³åŒ–å¯¼è‡´ä¾èµ–ç»“æ„å› å®‰è£…é¡ºåºå·®å¼‚å¯èƒ½ä¸åŒï¼Œéœ€ä¾èµ– <code>package-lock.json</code> è¡¥æ•‘36ã€‚</li>
<li><strong>ç£ç›˜å†—ä½™</strong>ï¼šç›¸åŒä¾èµ–åœ¨ä¸åŒé¡¹ç›®ä¸­é‡å¤å­˜å‚¨ã€‚</li>
</ul>
<ol start="2">
<li><strong>yarn</strong></li>
</ol>
<ul>
<li><strong>å¹½çµä¾èµ–</strong>ï¼šæœªå£°æ˜çš„ä¾èµ–ä»å¯è®¿é—®ï¼Œç§»é™¤çˆ¶ä¾èµ–åå¯èƒ½å¼•å‘è¿è¡Œæ—¶é”™è¯¯58ã€‚</li>
<li><strong>ä¾èµ–åˆ†èº«</strong>ï¼šå¤šç‰ˆæœ¬åŒ…çš„éæå‡ç‰ˆæœ¬ä»é‡å¤å®‰è£…ã€‚</li>
</ul>
<ol start="3">
<li><strong>pnpm</strong></li>
</ol>
<ul>
<li><strong>è½¯é“¾æ¥å…¼å®¹æ€§</strong>ï¼š<ul>
<li>ä¸æ”¯æŒè½¯é“¾æ¥çš„ç¯å¢ƒï¼ˆå¦‚éƒ¨åˆ† Electron åº”ç”¨ã€Windows å—é™æ¨¡å¼ï¼‰æ— æ³•ä½¿ç”¨ã€‚</li>
</ul>
</li>
<li><strong>è°ƒè¯•ä¸è¡¥ä¸å›°éš¾</strong>ï¼š<ul>
<li>ä¾èµ–æºæ–‡ä»¶åœ¨å…¨å±€å­˜å‚¨ï¼Œä¿®æ”¹éœ€é€šè¿‡ <code>pnpm patch</code> å‘½ä»¤ï¼Œä¸å¦‚ç›´æ¥ä¿®æ”¹ <code>node_modules</code> ç›´è§‚ã€‚</li>
</ul>
</li>
<li><strong>ç”Ÿæ€å…¼å®¹æ€§</strong>ï¼š<ul>
<li>å°‘æ•°ä¾èµ–è·¯å¾„ç¡¬ç¼–ç çš„åŒ…ï¼ˆå¦‚æŸäº› Webpack æ’ä»¶ï¼‰å¯èƒ½è¿è¡Œå¤±è´¥</li>
</ul>
</li>
</ul>
<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><p><strong>Webpackæ˜¯åŸºäºæ¨¡å—åŒ–æ‰“åŒ…çš„â¼¯å…·:</strong> â¾ƒåŠ¨åŒ–å¤„ç†æ¨¡å—ï¼ŒwebpackæŠŠâ¼€åˆ‡å½“æˆæ¨¡å—ï¼Œå½“ webpack å¤„ç†åº”â½¤ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºâ¼€ä¸ªä¾èµ–å…³ç³»å›¾ (dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”â½¤ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆâ¼€ä¸ªæˆ–å¤šä¸ª bundleã€‚ </p>
<h3 id="webpackçš„æ„å»ºæµç¨‹"><a href="#webpackçš„æ„å»ºæµç¨‹" class="headerlink" title="webpackçš„æ„å»ºæµç¨‹**?**"></a><strong>webpack</strong>çš„æ„å»ºæµç¨‹**?**</h3><p>Webpack çš„è¿â¾æµç¨‹æ˜¯â¼€ä¸ªä¸²â¾çš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§â¾ä»¥ä¸‹æµç¨‹ï¼š </p>
<ol>
<li><strong>åˆå§‹åŒ–å‚æ•°</strong>ï¼šä»é…ç½®â½‚ä»¶å’Œ Shell è¯­å¥ä¸­è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ï¼› </li>
<li><strong>å¼€å§‹ç¼–è¯‘</strong>ï¼šâ½¤ä¸Šâ¼€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§â¾å¯¹è±¡çš„ run â½…æ³•å¼€å§‹æ‰§â¾ç¼–è¯‘ï¼› </li>
<li><strong>ç¡®å®šâ¼Šâ¼</strong>ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„â¼Šâ¼â½‚ä»¶ï¼› </li>
<li><strong>ç¼–è¯‘æ¨¡å—</strong>ï¼šä»â¼Šâ¼â½‚ä»¶å‡ºå‘ï¼Œè°ƒâ½¤æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›â¾ç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰â¼Šâ¼ä¾èµ–çš„â½‚ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†ï¼› </li>
<li><strong>å®Œæˆæ¨¡å—ç¼–è¯‘</strong>ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿â½¤ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼› </li>
<li><strong>è¾“å‡ºèµ„æº</strong>ï¼šæ ¹æ®â¼Šâ¼å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆâ¼€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆâ¼€ä¸ªå•ç‹¬çš„â½‚ä»¶åŠ â¼Šåˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šï¼› </li>
<li><strong>è¾“å‡ºå®Œæˆ</strong>ï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œâ½‚ä»¶åï¼ŒæŠŠâ½‚ä»¶å†…å®¹å†™â¼Šåˆ°â½‚ä»¶ç³»ç»Ÿã€‚</li>
</ol>
<p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼ŒWebpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹â¼´æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§â¾ç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒâ½¤ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿â¾ç»“æœã€‚</p>
<h3 id="å¸¸â»…çš„Loader"><a href="#å¸¸â»…çš„Loader" class="headerlink" title="å¸¸â»…çš„Loader"></a>å¸¸â»…çš„<strong>Loader</strong></h3><ul>
<li>file-loaderï¼šæŠŠâ½‚ä»¶è¾“å‡ºåˆ°â¼€ä¸ªâ½‚ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•â½¤è¾“å‡ºçš„â½‚ä»¶ </li>
<li>url-loaderï¼šå’Œ file-loader ç±»ä¼¼ï¼Œä½†æ˜¯èƒ½åœ¨â½‚ä»¶å¾ˆâ¼©çš„æƒ…å†µä¸‹ä»¥ base64 çš„â½…å¼æŠŠâ½‚ä»¶å†…å®¹æ³¨â¼Šåˆ°ä»£ç ä¸­å» </li>
<li>source-map-loaderï¼šåŠ è½½é¢å¤–çš„ Source Map â½‚ä»¶ï¼Œä»¥â½…ä¾¿æ–­ç‚¹è°ƒè¯• </li>
<li>image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾â½šâ½‚ä»¶ </li>
<li>babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5 </li>
<li>css-loaderï¼šåŠ è½½ CSSï¼Œâ½€æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€â½‚ä»¶å¯¼â¼Šç­‰ç‰¹æ€§ </li>
<li>style-loaderï¼šæŠŠ CSS ä»£ç æ³¨â¼Šåˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSSã€‚ </li>
<li>eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç </li>
</ul>
<p><strong>æ³¨æ„ï¼š<strong>åœ¨Webpackä¸­ï¼Œloaderçš„æ‰§è¡Œé¡ºåºæ˜¯</strong>ä»å³å‘å·¦</strong>æ‰§è¡Œçš„ã€‚å› ä¸ºwebpacké€‰æ‹©äº†<strong>composeè¿™æ ·çš„å‡½æ•°å¼ç¼–ç¨‹æ–¹å¼</strong>ï¼Œè¿™ç§æ–¹å¼çš„è¡¨è¾¾å¼æ‰§è¡Œæ˜¯ä»å³å‘å·¦çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">// å¤„ç† JavaScript/TypeScript æ–‡ä»¶</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(js|jsx|ts|tsx)$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>, <span class="string">&#x27;@babel/preset-react&#x27;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å¤„ç† CSS æ–‡ä»¶</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>] <span class="comment">// ä»å³åˆ°å·¦æ‰§è¡Œ</span></span><br><span class="line">      &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å¤„ç† SCSS æ–‡ä»¶</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å¤„ç†å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(png|jpe?g|gif|svg)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;images/[hash][ext][query]&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// å¤„ç†å­—ä½“æ–‡ä»¶</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)$/</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">        <span class="attr">generator</span>: &#123;</span><br><span class="line">          <span class="attr">filename</span>: <span class="string">&#x27;fonts/[hash][ext][query]&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å¸¸â»…çš„Plugin"><a href="#å¸¸â»…çš„Plugin" class="headerlink" title="å¸¸â»…çš„Plugin"></a>å¸¸â»…çš„<strong>Plugin</strong></h3><ul>
<li>define-pluginï¼šå®šä¹‰ç¯å¢ƒå˜é‡ </li>
<li>html-webpack-pluginï¼šç®€åŒ–htmlâ½‚ä»¶åˆ›å»º </li>
<li>uglifyjs-webpack-pluginï¼šé€šè¿‡ UglifyES å‹ç¼© ES6 ä»£ç  </li>
<li>webpack-parallel-uglify-plugin: å¤šæ ¸å‹ç¼©ï¼Œæâ¾¼å‹ç¼©é€Ÿåº¦ </li>
<li>webpack-bundle-analyzer: å¯è§†åŒ–webpackè¾“å‡ºâ½‚ä»¶çš„ä½“ç§¯ </li>
<li>mini-css-extract-plugin: CSSæå–åˆ°å•ç‹¬çš„â½‚ä»¶ä¸­ï¼Œâ½€æŒæŒ‰éœ€åŠ è½½</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MiniCssExtractPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">BundleAnalyzerPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>).<span class="property">BundleAnalyzerPlugin</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨æ¸…ç†è¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶å¹¶æ³¨å…¥æ‰“åŒ…åçš„èµ„æº</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;My App&#x27;</span>,</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æå– CSS åˆ°å•ç‹¬æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">MiniCssExtractPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;css/[name].[contenthash:8].css&#x27;</span></span><br><span class="line">    &#125;),</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰“åŒ…åˆ†æå·¥å…·</span></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">BundleAnalyzerPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">analyzerMode</span>: <span class="string">&#x27;disabled&#x27;</span>, <span class="comment">// ä¸è‡ªåŠ¨æ‰“å¼€</span></span><br><span class="line">      <span class="attr">generateStatsFile</span>: <span class="literal">true</span> <span class="comment">// ç”Ÿæˆ stats.json æ–‡ä»¶</span></span><br><span class="line">    &#125;),</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å®šä¹‰ç¯å¢ƒå˜é‡</span></span><br><span class="line">    <span class="keyword">new</span> webpack.<span class="title class_">DefinePlugin</span>(&#123;</span><br><span class="line">      <span class="string">&#x27;process.env.NODE_ENV&#x27;</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(process.<span class="property">env</span>.<span class="property">NODE_ENV</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="Tree-shaking-åŸºæœ¬åŸç†"><a href="#Tree-shaking-åŸºæœ¬åŸç†" class="headerlink" title="Tree shaking åŸºæœ¬åŸç†"></a>Tree shaking åŸºæœ¬åŸç†</h3><ol>
<li><strong>é™æ€åˆ†æ</strong>ï¼š<ul>
<li>åœ¨ç¼–è¯‘é˜¶æ®µï¼ˆè€Œéè¿è¡Œæ—¶ï¼‰åˆ†æä»£ç çš„å¯¼å…¥å¯¼å‡ºå…³ç³»</li>
<li>é€šè¿‡ ES6 æ¨¡å—çš„é™æ€ç»“æ„ç‰¹æ€§ï¼ˆ<code>import/export</code> å¿…é¡»åœ¨é¡¶å±‚ä½œç”¨åŸŸï¼‰å®ç°</li>
</ul>
</li>
<li><strong>æ ‡è®°-æ¸…é™¤</strong>è¿‡ç¨‹ï¼š<ul>
<li><strong>æ ‡è®°é˜¶æ®µ</strong>ï¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œæ ‡è®°æ‰€æœ‰è¢«ä½¿ç”¨çš„å¯¼å‡º</li>
<li><strong>æ¸…é™¤é˜¶æ®µ</strong>ï¼šåˆ é™¤æ‰€æœ‰æœªè¢«æ ‡è®°çš„å¯¼å‡ºä»£ç </li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>, <span class="comment">// ç”Ÿäº§æ¨¡å¼è‡ªåŠ¨å¼€å¯ Tree Shaking</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">usedExports</span>: <span class="literal">true</span>, <span class="comment">// æ ‡è®°æœªä½¿ç”¨çš„å¯¼å‡º</span></span><br><span class="line">    <span class="attr">minimize</span>: <span class="literal">true</span>,    <span class="comment">// å¯ç”¨ä»£ç å‹ç¼©</span></span><br><span class="line">    <span class="attr">minimizer</span>: [</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">TerserPlugin</span>(), <span class="comment">// ä½¿ç”¨ Terser è¿›è¡Œå‹ç¼©</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CssMinimizerPlugin</span>() <span class="comment">// å‹ç¼© CSS</span></span><br><span class="line">    ],</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä»£ç åˆ†å‰²é…ç½®</span></span><br><span class="line">    <span class="attr">splitChunks</span>: &#123;</span><br><span class="line">      <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">      <span class="attr">cacheGroups</span>: &#123;</span><br><span class="line">        <span class="attr">vendors</span>: &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;vendors&#x27;</span>,</span><br><span class="line">          <span class="attr">chunks</span>: <span class="string">&#x27;all&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h2 id="å‰ç«¯å·¥ç¨‹åŒ–"><a href="#å‰ç«¯å·¥ç¨‹åŒ–" class="headerlink" title="å‰ç«¯å·¥ç¨‹åŒ–"></a>å‰ç«¯å·¥ç¨‹åŒ–</h2><blockquote>
<p>é¦–å…ˆè¿™å°±æ¶‰åŠåˆ°æˆ‘ä»¬ç¨‹åºå‘˜ç¼–å†™ä»£ç çš„æ€è·¯å’Œæ–¹å¼äº†</p>
</blockquote>
<blockquote>
<p>æˆ‘ä»¬éƒ½å–œæ¬¢å¤šæ¨¡å—ï¼ŒSASS&#x2F;LESSé¢„ç¼–è¯‘å™¨ï¼Œå‰æ²¿è¯­æ³•ï¼Œå‰è¨€APIï¼Œå‘½åå‹å¥½ï¼Œèµ„æºåˆ†ç»„ï¼Œæœ‰æ³¨é‡Šçš„æ–¹å¼</p>
</blockquote>
<blockquote>
<p>è€Œæµè§ˆå™¨å–œæ¬¢çš„æ˜¯å°‘é‡æ–‡ä»¶ï¼ŒCSSï¼Œå…¼å®¹è¯­æ³•ï¼Œå…¼å®¹APIï¼Œå•å­—èŠ‚å‘½åï¼Œèµ„æºé›†ä¸­ï¼Œæ— æ³¨é‡Šçš„æ–¹å¼ã€‚</p>
</blockquote>
<p><img src="https://ucc.alicdn.com/pic/developer-ecology/c7qqzppjlk64c_4fa1deb056684296a4303053b7227c8b.png" alt="image"></p>
<blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬å‰ç«¯å·¥ç¨‹åŒ–çš„æ„ä¹‰å’Œä½œç”¨å°±æ¥äº†ã€‚ä½¿ç”¨webpackå’Œviteæ¥å¸®åŠ©æˆ‘ä»¬æŠŠæˆ‘ä»¬å†™çš„ä»£ç è½¬æ¢æˆæµè§ˆå™¨èƒ½å¤Ÿè¯»å†™çš„æ¨¡å¼ã€‚è®©æˆ‘ä»¬å¯ä»¥éšæ„çš„ç¼–å†™æˆ‘ä»¬å–œæ¬¢çš„æ ¼å¼çš„ä»£ç </p>
</blockquote>
<h2 id="webpackçš„æ„å»ºæµç¨‹-1"><a href="#webpackçš„æ„å»ºæµç¨‹-1" class="headerlink" title="webpackçš„æ„å»ºæµç¨‹"></a>webpackçš„æ„å»ºæµç¨‹</h2><p><img src="https://ucc.alicdn.com/pic/developer-ecology/c7qqzppjlk64c_4cedd31a7a1444e0a62cfd5ae7ae2b94.png" alt="image"></p>
<ul>
<li><strong>åˆå§‹åŒ–å‚æ•°ï¼š</strong> ä»é…ç½®æ–‡ä»¶å’Œshellè¯­å¥ä¸­è¯»å–åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„é…ç½®å‚æ•°ã€‚</li>
<li><strong>å¼€å§‹ç¼–è¯‘ï¼š</strong> ä»ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ–compilerå¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„runæ–¹æ³•å¼€å§‹ç¼–è¯‘</li>
<li><strong>ç¡®å®šå…¥å£ï¼š</strong> é€šè¿‡entryæ‰¾å‡ºå…¥å£æ–‡ä»¶</li>
<li><strong>ç¼–è¯‘æ¨¡å—ï¼š</strong> ä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ <code>loader</code> å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œè¿™ä¸ªæ­¥éª¤æ˜¯é€’å½’æ‰§è¡Œçš„ï¼Œç›´è‡³æ‰€æœ‰å…¥å£ä¾èµ–çš„æ¨¡å—æ–‡ä»¶éƒ½ç»è¿‡æœ¬æ­¥éª¤çš„å¤„ç†ã€‚</li>
<li><strong>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼š</strong> ç»è¿‡ç¬¬ 4 æ­¥ä½¿ç”¨ loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</li>
<li><strong>è¾“å‡ºèµ„æºï¼š</strong> æ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ <code>chunk</code>ï¼Œå†æŠŠæ¯ä¸ª <code>chunk</code> è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™ä¸€æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼šã€‚</li>
<li><strong>è¾“å‡ºå®Œæˆï¼š</strong> åœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚</li>
</ul>
<p><img src="https://ucc.alicdn.com/pic/developer-ecology/c7qqzppjlk64c_846b80577af74866b212694e710cb593.png" alt="image"></p>
<h2 id="viteçš„æ„å»ºæµç¨‹"><a href="#viteçš„æ„å»ºæµç¨‹" class="headerlink" title="viteçš„æ„å»ºæµç¨‹"></a>viteçš„æ„å»ºæµç¨‹</h2><p>Vite çš„æ„å»ºæµç¨‹ä¸ä¼ ç»Ÿçš„æ‰“åŒ…å·¥å…·ï¼ˆå¦‚Webpackï¼‰æœ‰æ‰€ä¸åŒï¼Œä¸»è¦ä½“ç°åœ¨å¼€å‘é˜¶æ®µå’Œç”Ÿäº§ç¯å¢ƒé˜¶æ®µã€‚ä»¥ä¸‹æ˜¯ Vite çš„æ„å»ºæµç¨‹ï¼š</p>
<p><strong>å¼€å‘é˜¶æ®µï¼š</strong></p>
<ul>
<li><strong>å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š</strong> å½“ä½ å¯åŠ¨ Vite æ—¶ï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨æ¥ä¸ºä½ æä¾›æœåŠ¡ã€‚è¿™ä¸ªå¼€å‘æœåŠ¡å™¨åˆ©ç”¨ç°ä»£æµè§ˆå™¨å¯¹ ES æ¨¡å—çš„æœ¬åœ°æ”¯æŒï¼Œå®ç°äº†å¿«é€Ÿçš„å†·å¯åŠ¨å’Œçƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ã€‚</li>
<li><strong>è§£æå¹¶æä¾›æ–‡ä»¶ï¼š</strong> å½“æµè§ˆå™¨è¯·æ±‚æŸä¸ªæ–‡ä»¶æ—¶ï¼ŒVite ä¼šè§£æè¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œè½¬æ¢ã€‚ä¾‹å¦‚ï¼Œå¯¹äº Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ï¼ŒVite ä¼šå°†å…¶å®æ—¶ç¼–è¯‘æˆ JavaScriptï¼Œç„¶åè¿”å›ç»™æµè§ˆå™¨ã€‚</li>
<li><strong>å¤„ç†ä¾èµ–å…³ç³»ï¼š</strong> å½“æµè§ˆå™¨ä¸­çš„ä»£ç å¼•å…¥å…¶ä»–æ¨¡å—æ—¶ï¼ŒVite ä¼šåˆ†æè¿™äº›ä¾èµ–å…³ç³»ï¼Œå¹¶é€šè¿‡æµè§ˆå™¨åŸç”Ÿçš„ ES æ¨¡å—åŠ è½½åŠŸèƒ½æ¥åŠ¨æ€åœ°è·å–è¿™äº›æ¨¡å—ã€‚</li>
</ul>
<p><strong>ç”Ÿäº§ç¯å¢ƒé˜¶æ®µï¼š</strong></p>
<ul>
<li><strong>é¢„æ„å»ºï¼š</strong> åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒVite ä¼šé¢„å…ˆæ„å»ºä½ çš„åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿åœ¨éƒ¨ç½²æ—¶èƒ½å¤Ÿæä¾›å°½å¯èƒ½é«˜æ•ˆçš„ä»£ç ã€‚</li>
<li><strong>ä¼˜åŒ–å’Œå‹ç¼©ï¼š</strong> Vite ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–å’Œå‹ç¼©ï¼Œä»¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œå¹¶ç”Ÿæˆé€‚åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„é™æ€èµ„æºã€‚</li>
<li><strong>è¾“å‡ºï¼š</strong> å®Œæˆæ„å»ºåï¼ŒVite ä¼šå°†æœ€ç»ˆçš„ç”Ÿäº§ä»£ç è¾“å‡ºåˆ°æŒ‡å®šçš„ç›®å½•ï¼Œå‡†å¤‡ç”¨äºéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<h2 id="webpackå’Œviteçš„å¯¹æ¯”"><a href="#webpackå’Œviteçš„å¯¹æ¯”" class="headerlink" title="webpackå’Œviteçš„å¯¹æ¯”"></a>webpackå’Œviteçš„å¯¹æ¯”</h2><h3 id="æœåŠ¡å™¨å¯åŠ¨åŒºåˆ«"><a href="#æœåŠ¡å™¨å¯åŠ¨åŒºåˆ«" class="headerlink" title="æœåŠ¡å™¨å¯åŠ¨åŒºåˆ«"></a>æœåŠ¡å™¨å¯åŠ¨åŒºåˆ«</h3><ul>
<li><strong>wepack:</strong> å½“å†·å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ—¶ï¼ŒåŸºäºæ‰“åŒ…å™¨çš„æ–¹å¼æ˜¯åœ¨æä¾›æœåŠ¡å‰å»æ€¥åˆ‡åœ°æŠ“å–å’Œæ„å»ºä½ çš„æ•´ä¸ªåº”ç”¨ã€‚</li>
</ul>
<blockquote>
<p>è€Œ Vite æ˜¯é€šè¿‡åœ¨ä¸€å¼€å§‹å°†åº”ç”¨ä¸­çš„æ¨¡å—åŒºåˆ†ä¸º <strong>ä¾èµ–</strong> å’Œ <strong>æºç </strong> ä¸¤ç±»ï¼Œæ”¹è¿›äº†å¼€å‘æœåŠ¡å™¨å¯åŠ¨æ—¶é—´ã€‚</p>
</blockquote>
<blockquote>
<p><strong>ä¾èµ–</strong> å¤§å¤šä¸ºçº¯ JavaScript å¹¶åœ¨å¼€å‘æ—¶ä¸ä¼šå˜åŠ¨ã€‚ä¸€äº›è¾ƒå¤§çš„ä¾èµ–ï¼ˆä¾‹å¦‚æœ‰ä¸Šç™¾ä¸ªæ¨¡å—çš„ç»„ä»¶åº“ï¼‰å¤„ç†çš„ä»£ä»·ä¹Ÿå¾ˆé«˜ã€‚ä¾èµ–ä¹Ÿé€šå¸¸ä¼šä»¥æŸäº›æ–¹å¼ï¼ˆä¾‹å¦‚ ESM æˆ–è€… CommonJSï¼‰è¢«æ‹†åˆ†åˆ°å¤§é‡å°æ¨¡å—ä¸­ã€‚</p>
</blockquote>
<blockquote>
<p>Vite å°†ä¼šä½¿ç”¨ esbuild é¢„æ„å»ºä¾èµ–ã€‚<strong>Esbuild ä½¿ç”¨ Go ç¼–å†™</strong>ï¼Œå¹¶ä¸”æ¯”ä»¥ JavaScript ç¼–å†™çš„æ‰“åŒ…å™¨é¢„æ„å»ºä¾èµ–å¿« 10-100 å€ã€‚</p>
</blockquote>
<blockquote>
<p>æºç  é€šå¸¸åŒ…å«ä¸€äº›å¹¶éç›´æ¥æ˜¯ <strong>JavaScript</strong> çš„æ–‡ä»¶ï¼Œéœ€è¦è½¬æ¢ï¼ˆä¾‹å¦‚ JSXï¼ŒCSS æˆ–è€… Vue&#x2F;Svelte ç»„ä»¶ï¼‰ï¼Œæ—¶å¸¸ä¼šè¢«ç¼–è¾‘ã€‚åŒæ—¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æºç éƒ½éœ€è¦åŒæ—¶è¢«åŠ è½½ã€‚ï¼ˆä¾‹å¦‚åŸºäºè·¯ç”±æ‹†åˆ†çš„ä»£ç æ¨¡å—ï¼‰ã€‚</p>
</blockquote>
<blockquote>
<p>Vite ä»¥ åŸç”Ÿ <strong>ESM</strong> æ–¹å¼æœåŠ¡æºç ã€‚è¿™å®é™…ä¸Šæ˜¯è®©æµè§ˆå™¨æ¥ç®¡äº†æ‰“åŒ…ç¨‹åºçš„éƒ¨åˆ†å·¥ä½œï¼šVite åªéœ€è¦åœ¨æµè§ˆå™¨è¯·æ±‚æºç æ—¶è¿›è¡Œè½¬æ¢å¹¶<strong>æŒ‰éœ€æä¾›æºç </strong>ã€‚æ ¹æ®æƒ…æ™¯åŠ¨æ€å¯¼å…¥çš„ä»£ç ï¼Œå³åªåœ¨å½“å‰å±å¹•ä¸Šå®é™…ä½¿ç”¨æ—¶æ‰ä¼šè¢«å¤„ç†ã€‚</p>
</blockquote>
<h3 id="çƒ­æ›´æ–°çš„åŒºåˆ«"><a href="#çƒ­æ›´æ–°çš„åŒºåˆ«" class="headerlink" title="çƒ­æ›´æ–°çš„åŒºåˆ«"></a>çƒ­æ›´æ–°çš„åŒºåˆ«</h3><blockquote>
<p>webpack</p>
</blockquote>
<p><strong>å…¨å±€åˆ·æ–°ï¼š</strong> Webpack çš„ HMR é€šå¸¸ä¼šåœ¨ä»£ç å‘ç”Ÿå˜åŒ–æ—¶æ›¿æ¢æ•´ä¸ªæ¨¡å—ï¼Œç„¶åé€šè¿‡ HMR runtime æ¥è§¦å‘é¡µé¢çº§åˆ«çš„åˆ·æ–°æˆ–é‡æ–°æ¸²æŸ“ï¼Œè¿™å¯èƒ½å¯¼è‡´éƒ¨åˆ†é¡µé¢çŠ¶æ€çš„ä¸¢å¤±ã€‚</p>
<p><strong>è¾ƒæ…¢çš„å†·å¯åŠ¨ï¼š</strong> Webpack çš„å¼€å‘æ¨¡å¼ä¸‹ï¼Œç”±äºæ•´ä¸ªåº”ç”¨ç¨‹åºéœ€è¦è¢«æ‰“åŒ…å’Œæ„å»ºï¼Œå› æ­¤å†·å¯åŠ¨æ—¶é—´ç›¸å¯¹è¾ƒé•¿ï¼Œå°¤å…¶æ˜¯éšç€é¡¹ç›®è§„æ¨¡çš„å¢å¤§ï¼Œå†·å¯åŠ¨æ—¶é—´ä¼šè¿›ä¸€æ­¥å»¶é•¿ã€‚</p>
<p><strong>é…ç½®å¤æ‚ï¼š</strong> åœ¨ä½¿ç”¨ Webpack è¿›è¡Œ HMR æ—¶ï¼Œéœ€è¦è¿›è¡Œä¸€å®šçš„é…ç½®ï¼ŒåŒ…æ‹¬è®¾ç½® HMR æ’ä»¶ã€ç¼–å†™ HMR ç›¸å…³çš„ä»£ç ç­‰ï¼Œç›¸å¯¹æ¥è¯´ç•¥æ˜¾å¤æ‚ã€‚</p>
<blockquote>
<p><strong>vite</strong></p>
</blockquote>
<ul>
<li><p><strong>å±€éƒ¨æ›´æ–°ï¼š</strong> Vite çš„ HMR å®ç°äº†æ›´ç»†ç²’åº¦çš„æ¨¡å—æ›´æ–°ï¼Œå¯ä»¥å®ç°å±€éƒ¨æ¨¡å—çš„æ›´æ–°è€Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œä»è€Œå‡å°‘é¡µé¢çŠ¶æ€çš„ä¸¢å¤±ã€‚</p>
</li>
<li><p><strong>å¿«é€Ÿå†·å¯åŠ¨ï¼š</strong> Vite åˆ©ç”¨ç°ä»£æµè§ˆå™¨çš„åŸç”Ÿ ES æ¨¡å—åŠ è½½èƒ½åŠ›ï¼Œå®ç°äº†å¿«é€Ÿçš„å†·å¯åŠ¨æ—¶é—´ï¼Œå› ä¸ºå®ƒä¸éœ€è¦å°†æ•´ä¸ªåº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚</p>
</li>
<li><p><strong>æ— éœ€é¢å¤–é…ç½®ï¼š</strong> åœ¨ Vite ä¸­ï¼ŒHMR æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚Vite ä¼šè‡ªåŠ¨å¤„ç†æ¨¡å—çš„æ›´æ–°å’Œçƒ­æ›¿æ¢ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å¼€å‘ã€‚</p>
</li>
</ul>
<h3 id="åº•å±‚ä»£ç å®ç°çš„åŒºåˆ«ï¼Ÿ"><a href="#åº•å±‚ä»£ç å®ç°çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="åº•å±‚ä»£ç å®ç°çš„åŒºåˆ«ï¼Ÿ"></a>åº•å±‚ä»£ç å®ç°çš„åŒºåˆ«ï¼Ÿ</h3><blockquote>
<p>webpackæ˜¯ç”¨çš„node.jsæ¥å®ç°çš„ï¼Œnode.jsæ”¯æŒçš„ç”Ÿæ€åº“æ›´å¤šï¼Œå‰åç«¯çš„ä¸€è‡´æ€§æ¯”è¾ƒé«˜ï¼Œå¯¹äºå¼‚æ­¥ç¼–ç¨‹æœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œnode.jsçš„è·¨å¹³å°æ€§æ¯”è¾ƒå¥½ï¼Œåœ¨windowï¼ŒMac,å’Œlinuxç­‰ä¸åŒæ“ä½œç³»ç»Ÿä¸Šéƒ½å¯ä»¥è¿è¡Œ</p>
</blockquote>
<blockquote>
<p>viteæ˜¯ä½¿ç”¨çš„ esbuildï¼Œesbuild æ˜¯ç”¨ Go è¯­è¨€ç¼–å†™çš„ï¼Œä¸“æ³¨äºå¿«é€Ÿçš„æ„å»ºå’Œæ‰“åŒ…ï¼Œå®ƒçš„åº•å±‚å®ç°ç»è¿‡äº†é«˜åº¦ä¼˜åŒ–ï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨å’Œå…¶ä»–ç¡¬ä»¶èµ„æºï¼Œä»¥åŠé«˜æ•ˆçš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œä»è€Œå®ç°äº†æå¿«çš„æ„å»ºé€Ÿåº¦ã€‚</p>
</blockquote>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote>
<p>webpackæœåŠ¡å™¨å¯åŠ¨é€Ÿåº¦æ¯”viteæ…¢ï¼šç”±äºviteå¯åŠ¨çš„æ—¶å€™ä¸éœ€è¦æ‰“åŒ…ï¼Œä¹Ÿå°±<strong>æ— éœ€åˆ†ææ¨¡å—ä¾èµ–ã€ç¼–è¯‘</strong>ï¼Œæ‰€ä»¥å¯åŠ¨é€Ÿåº¦<strong>éå¸¸å¿«</strong>ã€‚å½“æµè§ˆå™¨è¯·æ±‚éœ€è¦çš„æ¨¡å—æ—¶ï¼Œå†å¯¹æ¨¡å—è¿›è¡Œç¼–è¯‘ï¼Œè¿™ç§æŒ‰éœ€åŠ¨æ€ç¼–è¯‘çš„æ¨¡å¼ï¼Œæå¤§ç¼©çŸ­äº†ç¼–è¯‘æ—¶é—´ï¼Œå½“é¡¹ç›®è¶Šå¤§ï¼Œæ–‡ä»¶è¶Šå¤šæ—¶ï¼Œviteçš„å¼€å‘æ—¶ä¼˜åŠ¿è¶Šæ˜æ˜¾</p>
</blockquote>
<blockquote>
<p>viteçƒ­æ›´æ–°æ¯”webpackå¿«:viteåœ¨<strong>HRM</strong>æ–¹é¢ï¼Œå½“æŸä¸ªæ¨¡å—å†…å®¹æ”¹å˜æ—¶ï¼Œè®©æµè§ˆå™¨å»<strong>é‡æ–°è¯·æ±‚è¯¥æ¨¡å—</strong>å³å¯ï¼Œè€Œä¸æ˜¯åƒwebpacké‡æ–°å°†è¯¥æ¨¡å—çš„æ‰€æœ‰ä¾èµ–<strong>é‡æ–°ç¼–è¯‘</strong>ï¼›</p>
</blockquote>
<blockquote>
<p>viteä½¿ç”¨<strong>esbuild(Go ç¼–å†™)</strong> é¢„æ„å»ºä¾èµ–ï¼Œè€ŒwebpackåŸºäº<strong>nodejs</strong>, esbuildæ¯”nodeå¿« 10-100 å€</p>
</blockquote>
<blockquote>
<p>viteç”Ÿæ€ä¸åŠwebpackï¼ŒåŠ è½½å™¨ã€æ’ä»¶ä¸å¤Ÿä¸°å¯Œ</p>
</blockquote>
<h2 id="viteçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#viteçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="viteçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>viteçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul>
<li><strong>ç”Ÿæ€ï¼Œç”Ÿæ€ï¼Œç”Ÿæ€ä¸å¦‚webpack</strong></li>
</ul>
<blockquote>
<p>wepbackå‰å®³ä¹‹å¤„åœ¨äºloaderå’Œpluginéå¸¸ä¸°å¯Œ,ä¸è¿‡æˆ‘è®¤ä¸ºç”Ÿæ€åªæ˜¯æ—¶é—´é—®é¢˜ï¼Œç°åœ¨çš„vite,æ›´åƒæ˜¯å½“æ—¶åˆšå‡ºæ¥çš„M1èŠ¯ç‰‡Macï¼Œä½œè€…å½“æ—¶éå¸¸å–œæ¬¢M1çš„Macï¼Œæ¯«ä¸çŠ¹è±«ä¹°äº†ï¼Œç°åœ¨ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç›¸ä¿¡viteåç»­æ›´æ–°ä¼šæ›´å¥½</p>
</blockquote>
<ul>
<li><strong>prodç¯å¢ƒçš„æ„å»ºï¼Œç›®å‰ç”¨çš„Rollup</strong></li>
</ul>
<blockquote>
<p>åŸå› åœ¨äºesbuildå¯¹äºcsså’Œä»£ç åˆ†å‰²ä¸æ˜¯å¾ˆå‹å¥½</p>
</blockquote>
<ul>
<li><strong>è¿˜æ²¡æœ‰è¢«å¤§è§„æ¨¡ä½¿ç”¨,å¾ˆå¤šé—®é¢˜æˆ–è€…è¯‰æ±‚æ²¡æœ‰çœŸæ­£æš´éœ²å‡ºæ¥</strong></li>
</ul>
<blockquote>
<p>viteçœŸæ­£å´›èµ·é‚£ä¸€å¤©ï¼Œæ˜¯è·Ÿvue3æœ‰å…³ç³»çš„,å½“vue3å¹¿æ³›å¼€å§‹ä½¿ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™ï¼Œviteä¹Ÿå°±å¤§æ¦‚ç‡æ„å‘³ç€è¢«å¤§å®¶æ…¢æ…¢å¼€å§‹æ¥å—äº†</p>
</blockquote>
<h2 id="viteä¸€å®šæ¯”webpackå¿«å—"><a href="#viteä¸€å®šæ¯”webpackå¿«å—" class="headerlink" title="viteä¸€å®šæ¯”webpackå¿«å—?"></a>viteä¸€å®šæ¯”webpackå¿«å—?</h2><blockquote>
<p>ä¸èƒ½è¯´viteä¸€å®šæ¯”webpackå¿«ï¼Œç›¸å¯¹äºä¸åŒçš„åœºæ™¯ï¼Œwebpackå’Œviteæœ‰ä¸åŒçš„é€Ÿåº¦ä¼˜åŠ¿å§ã€‚</p>
</blockquote>
<blockquote>
<p>viteç›¸å¯¹äºwebpackåœ¨å¼€å‘ç¯å¢ƒä¸‹æœ‰ç€æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦ï¼Œå› ä¸ºviteåº•å±‚æ˜¯ç”¨çš„esbuild,è¿™ç§è®¾è®¡ä½¿å¾— Vite èƒ½å¤Ÿä»¥éå¸¸ä½çš„å»¶è¿Ÿå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶ä¸”åœ¨ä¿®æ”¹æ–‡ä»¶æ—¶èƒ½å¤Ÿå®ç°è¿‘ä¹å³æ—¶çš„é‡æ–°åŠ è½½ã€‚</p>
</blockquote>
<blockquote>
<p>ç„¶è€Œï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒVite å’Œ Webpack çš„æ€§èƒ½å·®å¼‚å¯èƒ½ä¼šå˜å¾—ä¸é‚£ä¹ˆæ˜æ˜¾ã€‚Webpack é€šè¿‡ä½¿ç”¨é«˜åº¦ä¼˜åŒ–çš„æ„å»ºç®—æ³•å’Œå„ç§æ’ä»¶æ¥æä¾›å‡ºè‰²çš„æ‰“åŒ…æ€§èƒ½ï¼Œå°¤å…¶é€‚ç”¨äºå¤æ‚çš„é¡¹ç›®å’Œå¤§è§„æ¨¡çš„åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<blockquote>
<p>å› æ­¤ï¼Œæ˜¯å¦å¯ä»¥è¯´ Vite ä¸€å®šæ¯” Webpack å¿«ï¼Œå–å†³äºå…·ä½“çš„ä½¿ç”¨åœºæ™¯å’Œé¡¹ç›®éœ€æ±‚ã€‚å¯¹äºç®€å•çš„å°å‹é¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯æ–°é¡¹ç›®ï¼ŒVite é€šå¸¸ä¼šå…·æœ‰æ›´å¿«çš„å¯åŠ¨å’Œå¼€å‘é€Ÿåº¦ã€‚è€Œå¯¹äºå¤æ‚çš„é¡¹ç›®æˆ–éœ€è¦æ›´å¤šè‡ªå®šä¹‰é…ç½®å’ŒåŠŸèƒ½çš„æƒ…å†µï¼ŒWebpack å¯èƒ½ä¼šæ›´é€‚åˆï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¤šçš„çµæ´»æ€§å’Œæ‰©å±•æ€§ã€‚</p>
</blockquote>
<h2 id="åè¨€"><a href="#åè¨€" class="headerlink" title="åè¨€"></a>åè¨€</h2><h1 id="Babelçš„åŸç†"><a href="#Babelçš„åŸç†" class="headerlink" title="Babelçš„åŸç†"></a><strong>Babel</strong>çš„åŸç†</h1><p>babel çš„è½¬è¯‘è¿‡ç¨‹ä¹Ÿåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œè¿™ä¸‰æ­¥å…·ä½“æ˜¯ï¼š </p>
<ul>
<li><strong>è§£æ Parse</strong>: å°†ä»£ç è§£æâ½£æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œå³è¯æ³•åˆ†æä¸è¯­æ³•åˆ†æçš„è¿‡ç¨‹ï¼›</li>
<li><strong>è½¬æ¢ Transform</strong>: å¯¹äº AST è¿›â¾å˜æ¢â¼€ç³»åˆ—çš„æ“ä½œï¼Œbabel æ¥å—å¾—åˆ° AST å¹¶é€šè¿‡ babel-traverse å¯¹å…¶è¿›â¾éå†ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­è¿›â¾æ·»åŠ ã€æ›´æ–°åŠç§»é™¤ç­‰æ“ä½œï¼›</li>
<li><strong>â½£æˆ Generate</strong>: å°†å˜æ¢åçš„ AST å†è½¬æ¢ä¸º JS ä»£ç , ä½¿â½¤åˆ°çš„æ¨¡å—æ˜¯ babel-generatorã€‚</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/29/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/" data-id="cmcygiiyw000hvgur5vjyhqrw" data-title="å‰ç«¯å·¥ç¨‹åŒ–" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E3%80%81%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/" rel="tag">å‰ç«¯å·¥ç¨‹ã€åŒ…ç®¡ç†å™¨</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-å‰ç«¯æ€§èƒ½" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T06:44:38.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/29/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD/">å‰ç«¯æ€§èƒ½[C</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="æ€§èƒ½ç›‘æ§"><a href="#æ€§èƒ½ç›‘æ§" class="headerlink" title="æ€§èƒ½ç›‘æ§"></a>æ€§èƒ½ç›‘æ§</h1><p>å‰ç«¯ç›‘æ§çš„ç›®çš„æ˜¯ï¼š</p>
<p>*<strong>è·å–ç”¨æˆ·è¡Œä¸ºä»¥åŠè·Ÿè¸ªäº§å“åœ¨ç”¨æˆ·ç«¯çš„ä½¿ç”¨æƒ…å†µï¼Œå¹¶ä»¥ç›‘æ§æ•°æ®ä¸ºåŸºç¡€ï¼ŒæŒ‡æ˜äº§å“ä¼˜åŒ–çš„æ–¹å‘*</strong>ã€‚</p>
<p>å‰ç«¯ç›‘æ§å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šæ•°æ®ç›‘æ§ã€æ€§èƒ½ç›‘æ§å’Œå¼‚å¸¸ç›‘æ§ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€çš„äº†è§£ã€‚</p>
<h4 id="1-æ•°æ®ç›‘æ§"><a href="#1-æ•°æ®ç›‘æ§" class="headerlink" title="(1)æ•°æ®ç›‘æ§"></a>(1)æ•°æ®ç›‘æ§</h4><p>æ•°æ®ç›‘æ§ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ç›‘å¬ç”¨æˆ·çš„è¡Œä¸ºã€‚å¸¸è§çš„æ•°æ®ç›‘æ§åŒ…æ‹¬ï¼š</p>
<ul>
<li>PV&#x2F;UV:PV(page view)ï¼Œå³é¡µé¢æµè§ˆé‡æˆ–ç‚¹å‡»é‡ã€‚UV:æŒ‡è®¿é—®æŸä¸ªç«™ç‚¹æˆ–ç‚¹å‡»æŸæ¡æ–°é—»çš„ä¸åŒIPåœ°å€çš„äººæ•°</li>
<li>ç”¨æˆ·åœ¨æ¯ä¸€ä¸ªé¡µé¢çš„åœç•™æ—¶é—´</li>
<li>ç”¨æˆ·é€šè¿‡ä»€ä¹ˆå…¥å£æ¥è®¿é—®è¯¥ç½‘é¡µ</li>
<li>ç”¨æˆ·åœ¨ç›¸åº”çš„é¡µé¢ä¸­è§¦å‘çš„è¡Œä¸º</li>
</ul>
<p>ç»Ÿè®¡è¿™äº›æ•°æ®æ˜¯æœ‰æ„ä¹‰çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬çŸ¥é“äº†ç”¨æˆ·æ¥æºçš„æ¸ é“ï¼Œå¯ä»¥ä¿ƒè¿›äº§å“çš„æ¨å¹¿ï¼ŒçŸ¥é“ç”¨æˆ·åœ¨æ¯ä¸€ä¸ªé¡µé¢åœç•™çš„æ—¶é—´ï¼Œå¯ä»¥é’ˆå¯¹åœç•™è¾ƒé•¿çš„é¡µé¢ï¼Œå¢åŠ å¹¿å‘Šæ¨é€ç­‰ç­‰ã€‚</p>
<h4 id="2-æ€§èƒ½ç›‘æ§"><a href="#2-æ€§èƒ½ç›‘æ§" class="headerlink" title="(2)æ€§èƒ½ç›‘æ§"></a>(2)æ€§èƒ½ç›‘æ§</h4><p>æ€§èƒ½ç›‘æ§æŒ‡çš„æ˜¯ç›‘å¬å‰ç«¯çš„æ€§èƒ½ï¼Œä¸»è¦åŒ…æ‹¬ç›‘å¬ç½‘é¡µæˆ–è€…è¯´äº§å“åœ¨ç”¨æˆ·ç«¯çš„ä½“éªŒã€‚å¸¸è§çš„æ€§èƒ½ç›‘æ§æ•°æ®åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¸åŒç”¨æˆ·ï¼Œä¸åŒæœºå‹å’Œä¸åŒç³»ç»Ÿä¸‹çš„é¦–å±åŠ è½½æ—¶é—´</li>
<li>ç™½å±æ—¶é—´</li>
<li>httpç­‰è¯·æ±‚çš„å“åº”æ—¶é—´</li>
<li>é™æ€èµ„æºæ•´ä½“ä¸‹è½½æ—¶é—´</li>
<li>é¡µé¢æ¸²æŸ“æ—¶é—´</li>
<li>é¡µé¢äº¤äº’åŠ¨ç”»å®Œæˆæ—¶é—´</li>
</ul>
<p>è¿™äº›æ€§èƒ½ç›‘æ§çš„ç»“æœï¼Œå¯ä»¥å±•ç¤ºå‰ç«¯æ€§èƒ½çš„å¥½åï¼Œæ ¹æ®æ€§èƒ½ç›‘æµ‹çš„ç»“æœå¯ä»¥è¿›ä¸€æ­¥çš„å»ä¼˜åŒ–å‰ç«¯æ€§èƒ½ï¼Œæ¯”å¦‚å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŠ¨ç”»æ•ˆæœï¼ŒåŠ å¿«é¦–å±åŠ è½½ç­‰ç­‰ã€‚</p>
<h4 id="3-å¼‚å¸¸ç›‘æ§"><a href="#3-å¼‚å¸¸ç›‘æ§" class="headerlink" title="(3)å¼‚å¸¸ç›‘æ§"></a>(3)å¼‚å¸¸ç›‘æ§</h4><p>æ­¤å¤–ï¼Œäº§å“çš„å‰ç«¯ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œå› æ­¤éœ€è¦å¼•å…¥å¼‚å¸¸ç›‘æ§ã€‚åŠæ—¶çš„ä¸ŠæŠ¥å¼‚å¸¸æƒ…å†µï¼Œå¯ä»¥é¿å…çº¿ä¸Šæ•…éšœçš„å‘ä¸Šã€‚è™½ç„¶å¤§éƒ¨åˆ†å¼‚å¸¸å¯ä»¥é€šè¿‡try catchçš„æ–¹å¼æ•è·ï¼Œä½†æ˜¯æ¯”å¦‚å†…å­˜æ³„æ¼ä»¥åŠå…¶ä»–å¶ç°çš„å¼‚å¸¸éš¾ä»¥æ•è·ã€‚å¸¸è§çš„éœ€è¦ç›‘æ§çš„å¼‚å¸¸åŒ…æ‹¬ï¼š</p>
<ul>
<li>Javascriptçš„å¼‚å¸¸ç›‘æ§</li>
<li>æ ·å¼ä¸¢å¤±çš„å¼‚å¸¸ç›‘æ§</li>
</ul>
<h1 id="å‰ç«¯å®‰å…¨è¡¥å……"><a href="#å‰ç«¯å®‰å…¨è¡¥å……" class="headerlink" title="å‰ç«¯å®‰å…¨è¡¥å……"></a>å‰ç«¯å®‰å…¨è¡¥å……</h1><h2 id="DoS-Denial-of-Service-Attack-æ‹’ç»æœåŠ¡æ”»å‡»"><a href="#DoS-Denial-of-Service-Attack-æ‹’ç»æœåŠ¡æ”»å‡»" class="headerlink" title="DoS (Denial-of-Service Attack - æ‹’ç»æœåŠ¡æ”»å‡»)"></a>DoS (Denial-of-Service Attack - æ‹’ç»æœåŠ¡æ”»å‡»)</h2><ul>
<li><strong>æ ¸å¿ƒç›®æ ‡ï¼š</strong> ä½¿ç›®æ ‡ç³»ç»Ÿï¼ˆæœåŠ¡å™¨ã€ç½‘ç»œã€æœåŠ¡ã€åº”ç”¨ç¨‹åºç­‰ï¼‰<strong>æ— æ³•ä¸ºåˆæ³•ç”¨æˆ·æä¾›æ­£å¸¸çš„æœåŠ¡</strong>ã€‚é€šå¸¸æ˜¯é€šè¿‡è€—å°½ç›®æ ‡çš„å…³é”®èµ„æºï¼ˆå¦‚å¸¦å®½ã€CPUã€å†…å­˜ã€è¿æ¥æ•°ã€ç£ç›˜I&#x2F;Oç­‰ï¼‰æ¥å®ç°ã€‚</li>
<li><strong>åŸºæœ¬åŸç†ï¼š</strong><ul>
<li><strong>å•æºæ”»å‡»ï¼š</strong> æ”»å‡»æµé‡<strong>ä¸»è¦æ¥æºäºä¸€ä¸ªæ”»å‡»è€…æˆ–ä¸€å°è¢«æ”»å‡»è€…æ§åˆ¶çš„æœºå™¨</strong>ã€‚</li>
<li><strong>èµ„æºè€—å°½ï¼š</strong> æ”»å‡»è€…åˆ©ç”¨åè®®æ¼æ´ã€è®¾è®¡ç¼ºé™·æˆ–å•çº¯å‘é€æµ·é‡åƒåœ¾è¯·æ±‚ï¼Œè¯•å›¾å‹å®ç›®æ ‡çš„æŸé¡¹æˆ–å¤šé¡¹èµ„æºï¼š<ul>
<li><strong>å¸¦å®½è€—å°½ï¼š</strong> å‘é€å·¨å¤§çš„æ•°æ®æµï¼ˆå¦‚UDPæ´ªæ°´ã€ICMPæ´ªæ°´&#x2F;Ping of Deathï¼‰å µå¡ç›®æ ‡çš„ç½‘ç»œç®¡é“ã€‚</li>
<li><strong>è¿æ¥è€—å°½ï¼š</strong> å»ºç«‹å¤§é‡åŠå¼€è¿æ¥ï¼ˆå¦‚SYNæ´ªæ°´æ”»å‡»ï¼‰ï¼Œè€—å°½æœåŠ¡å™¨çš„TCPè¿æ¥æ± ï¼Œé˜»æ­¢æ–°çš„åˆæ³•è¿æ¥ã€‚</li>
<li><strong>CPU&#x2F;å†…å­˜è€—å°½ï¼š</strong> å‘é€éœ€è¦å¤§é‡è®¡ç®—èµ„æºæ‰èƒ½å¤„ç†çš„è¯·æ±‚ï¼ˆå¦‚å¤æ‚çš„æ•°æ®åº“æŸ¥è¯¢ã€åŠ å¯†è§£å¯†æ“ä½œã€ç‰¹å®šæ ¼å¼çš„ç•¸å½¢æ•°æ®åŒ…ï¼‰ï¼Œå¯¼è‡´æœåŠ¡å™¨å¿™äºå¤„ç†æ”»å‡»è¯·æ±‚è€Œæ— æ³•å“åº”æ­£å¸¸è¯·æ±‚ã€‚</li>
<li><strong>åº”ç”¨å±‚æ”»å‡»ï¼š</strong> é’ˆå¯¹ç‰¹å®šçš„åº”ç”¨åè®®ï¼ˆå¦‚HTTPã€DNSã€SMTPï¼‰ï¼Œå‘é€çœ‹ä¼¼åˆæ³•ä½†ç²¾å¿ƒæ„é€ çš„è¯·æ±‚ï¼ˆå¦‚Slowlorisæ”»å‡»ã€HTTPæ´ªæ°´æ”»å‡»ã€CCæ”»å‡»ï¼‰ï¼Œæ¶ˆè€—åº”ç”¨æœåŠ¡å™¨èµ„æºï¼ˆçº¿ç¨‹ã€ä¼šè¯ï¼‰æˆ–åç«¯èµ„æºï¼ˆæ•°æ®åº“è¿æ¥ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>åè®®åˆ©ç”¨ï¼š</strong> åˆ©ç”¨æŸäº›ç½‘ç»œåè®®æœ¬èº«çš„è®¾è®¡å¼±ç‚¹ï¼ˆå¦‚TCPçš„ä¸‰æ¬¡æ¡æ‰‹åœ¨SYNæ´ªæ°´ä¸­çš„è„†å¼±æ€§ã€UDPçš„æ— è¿æ¥æ€§åœ¨åå°„æ”¾å¤§æ”»å‡»ä¸­çš„ä½œç”¨ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h2 id="DDoS-Distributed-Denial-of-Service-Attack-åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»"><a href="#DDoS-Distributed-Denial-of-Service-Attack-åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»" class="headerlink" title="DDoS (Distributed Denial-of-Service Attack - åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»)"></a>DDoS (Distributed Denial-of-Service Attack - åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»)</h2><ul>
<li><strong>æ ¸å¿ƒç›®æ ‡ï¼š</strong> ä¸DoSç›¸åŒï¼Œä¹Ÿæ˜¯ä½¿ç›®æ ‡ç³»ç»Ÿç˜«ç—ªï¼Œæ— æ³•æä¾›æ­£å¸¸æœåŠ¡ã€‚</li>
<li><strong>åŸºæœ¬åŸç†ï¼š</strong> <strong>DoSæ”»å‡»çš„è¿›åŒ–ç‰ˆå’ŒåŠ å¼ºç‰ˆ</strong>ã€‚<ul>
<li><strong>å¤šæºæ”»å‡»ï¼š</strong> æ”»å‡»æµé‡<strong>æ¥æºäºå¤§é‡ï¼ˆæˆåƒä¸Šä¸‡ç”šè‡³æ•°ç™¾ä¸‡ï¼‰åˆ†å¸ƒåœ¨å…¨çƒä¸åŒåœ°ç†ä½ç½®çš„ã€è¢«æ”»å‡»è€…æ§åˆ¶çš„è®¾å¤‡</strong>ã€‚è¿™äº›è®¾å¤‡ç»„æˆäº†ä¸€ä¸ª <strong>â€œåƒµå°¸ç½‘ç»œâ€</strong> ã€‚</li>
<li><strong>åƒµå°¸ç½‘ç»œï¼š</strong> æ”»å‡»è€…é€šè¿‡æ¶æ„è½¯ä»¶ï¼ˆç—…æ¯’ã€è •è™«ã€ç‰¹æ´›ä¼Šæœ¨é©¬ï¼‰æ„ŸæŸ“å’Œæ§åˆ¶äº†å¤§é‡æ™®é€šç”¨æˆ·çš„è®¡ç®—æœºã€æœåŠ¡å™¨ã€IoTè®¾å¤‡ï¼ˆæ‘„åƒå¤´ã€è·¯ç”±å™¨ã€æ™ºèƒ½å®¶å±…ï¼‰ç­‰ã€‚è¿™äº›è¢«æ§åˆ¶çš„è®¾å¤‡ç§°ä¸º <strong>â€œåƒµå°¸â€</strong> æˆ– <strong>â€œè‚‰é¸¡â€</strong> ã€‚</li>
<li><strong>é›†ä¸­æŒ‡æŒ¥ï¼š</strong> æ”»å‡»è€…é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ª <strong>â€œå‘½ä»¤ä¸æ§åˆ¶æœåŠ¡å™¨â€</strong> å‘åƒµå°¸ç½‘ç»œä¸­çš„è®¾å¤‡å‘é€æ”»å‡»æŒ‡ä»¤ã€‚</li>
<li><strong>æ”¾å¤§æ•ˆåº”ï¼š</strong><ul>
<li><strong>æ•°é‡æ”¾å¤§ï¼š</strong> æˆåƒä¸Šä¸‡çš„åƒµå°¸åŒæ—¶å‘èµ·æ”»å‡»ï¼Œæµé‡è§„æ¨¡è¿œè¶…å•æºDoSã€‚</li>
<li><strong>åå°„æ”¾å¤§ï¼š</strong> åˆ©ç”¨ä¸€äº›åè®®ï¼ˆå¦‚DNSã€NTPã€SSDPã€Memcachedï¼‰çš„å“åº”åŒ…è¿œå¤§äºè¯·æ±‚åŒ…çš„ç‰¹æ€§ï¼Œ<strong>ä¼ªé€ å—å®³è€…çš„IPåœ°å€</strong> å‘è¿™äº›æœåŠ¡çš„å¼€æ”¾æœåŠ¡å™¨å‘é€å¤§é‡å°è¯·æ±‚ï¼Œå¯¼è‡´è¿™äº›æœåŠ¡å™¨å°†å·¨å¤§çš„å“åº”æµé‡åå°„å›å—å®³è€…ï¼Œä»è€Œ<strong>æ”¾å¤§æ”»å‡»æµé‡</strong>ï¼ˆå¯èƒ½æ”¾å¤§å‡ åå€ç”šè‡³æ•°ä¸‡å€ï¼‰ã€‚è¿™æ˜¯DDoSä¸­æå…·ç ´ååŠ›çš„ä¸€ç§å½¢å¼ã€‚</li>
</ul>
</li>
<li><strong>éšè”½æ€§ä¸é˜²å¾¡éš¾åº¦ï¼š</strong><ul>
<li>æµé‡æ¥æºåˆ†æ•£ä¸”é€šå¸¸æ˜¯åˆæ³•çš„è¢«åŠ«æŒè®¾å¤‡ï¼Œéš¾ä»¥ç›´æ¥å®šä½çœŸæ­£çš„æ”»å‡»è€…ã€‚</li>
<li>æµ·é‡æµé‡æ¥è‡ªä¸åŒIPï¼Œä¼ ç»Ÿçš„åŸºäºIPé»‘åå•çš„è¿‡æ»¤æ–¹æ³•æ•ˆæœæœ‰é™ã€‚</li>
<li>æ”»å‡»æµé‡å¯èƒ½æ¨¡ä»¿æ­£å¸¸æµé‡ï¼Œå¢åŠ äº†åŒºåˆ†éš¾åº¦ã€‚</li>
<li>æ”»å‡»è§„æ¨¡å¯ä»¥è½»æ˜“è¾¾åˆ°æ•°ç™¾Gbpsç”šè‡³æ•°Tbpsï¼Œè¿œè¶…å•ä¸ªç½‘ç»œçš„æ‰¿å—èƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="æ€»ç»“æ”»å‡»åŸç†çš„æ ¸å¿ƒå·®å¼‚"><a href="#æ€»ç»“æ”»å‡»åŸç†çš„æ ¸å¿ƒå·®å¼‚" class="headerlink" title="æ€»ç»“æ”»å‡»åŸç†çš„æ ¸å¿ƒå·®å¼‚"></a>æ€»ç»“æ”»å‡»åŸç†çš„æ ¸å¿ƒå·®å¼‚</h3><table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">DoS (æ‹’ç»æœåŠ¡)</th>
<th align="left">DDoS (åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>æ”»å‡»æº</strong></td>
<td align="left"><strong>å•ä¸€</strong> æˆ– <strong>å°‘é‡</strong> æºå¤´</td>
<td align="left"><strong>æµ·é‡åˆ†å¸ƒå¼</strong> æºå¤´ (åƒµå°¸ç½‘ç»œ)</td>
</tr>
<tr>
<td align="left"><strong>æµé‡è§„æ¨¡</strong></td>
<td align="left">ç›¸å¯¹è¾ƒå°ï¼Œé€šå¸¸èƒ½è¢«å•ç‚¹é˜²å¾¡é˜»æŒ¡</td>
<td align="left"><strong>æå…¶å·¨å¤§</strong> (Gbps&#x2F;Tbps çº§åˆ«)ï¼Œéš¾ä»¥å•ç‚¹é˜²å¾¡</td>
</tr>
<tr>
<td align="left"><strong>å¤æ‚æ€§</strong></td>
<td align="left">è¾ƒä½ï¼ŒæŠ€æœ¯é—¨æ§›ä¸é«˜</td>
<td align="left"><strong>é«˜</strong>ï¼Œéœ€è¦æ„å»º&#x2F;ç§Ÿç”¨åƒµå°¸ç½‘ç»œï¼Œç»„ç»‡å¤æ‚</td>
</tr>
<tr>
<td align="left"><strong>éšè”½æ€§</strong></td>
<td align="left">è¾ƒä½ï¼Œæºå¤´æ˜“è¢«è¿½è¸ªå’Œå±è”½</td>
<td align="left"><strong>é«˜</strong>ï¼Œæºå¤´åˆ†æ•£ä¸”å¤šä¸ºè¢«åŠ«æŒè®¾å¤‡</td>
</tr>
<tr>
<td align="left"><strong>é˜²å¾¡éš¾åº¦</strong></td>
<td align="left"><strong>è¾ƒä½</strong></td>
<td align="left"><strong>æé«˜</strong></td>
</tr>
<tr>
<td align="left"><strong>æ”»å‡»å¨åŠ›</strong></td>
<td align="left"><strong>æœ‰é™</strong></td>
<td align="left"><strong>æ¯ç­æ€§</strong></td>
</tr>
</tbody></table>
<h2 id="D-DOS-é˜²èŒƒæªæ–½"><a href="#D-DOS-é˜²èŒƒæªæ–½" class="headerlink" title="D&#x2F;DOS é˜²èŒƒæªæ–½"></a>D&#x2F;DOS é˜²èŒƒæªæ–½</h2><p>é˜²èŒƒD&#x2F;DoSæ”»å‡»æ˜¯ä¸€ä¸ª<strong>å¤šå±‚æ¬¡ã€æŒç»­æ€§çš„ç»¼åˆå·¥ç¨‹</strong>ï¼Œæ²¡æœ‰é“¶å¼¹ã€‚ä¸»è¦ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<h3 id="1-åŸºç¡€è®¾æ–½å±‚é˜²æŠ¤"><a href="#1-åŸºç¡€è®¾æ–½å±‚é˜²æŠ¤" class="headerlink" title="1. åŸºç¡€è®¾æ–½å±‚é˜²æŠ¤"></a>1. åŸºç¡€è®¾æ–½å±‚é˜²æŠ¤</h3><ul>
<li><strong>å¢åŠ å¸¦å®½å†—ä½™ï¼š</strong> è™½ç„¶æ— æ³•å®Œå…¨æŠµå¾¡å¤§å‹DDoSï¼Œä½†æ›´å¤§çš„å¸¦å®½èƒ½äº‰å–æ›´å¤šå“åº”æ—¶é—´ï¼Œå¯¹å°è§„æ¨¡æ”»å‡»æœ‰æ•ˆã€‚è¿™æ˜¯åŸºç¡€ã€‚</li>
<li><strong>éƒ¨ç½²å†…å®¹åˆ†å‘ç½‘ç»œï¼š</strong> CDNå°†ç½‘ç«™å†…å®¹ç¼“å­˜åˆ°å…¨çƒåˆ†å¸ƒçš„è¾¹ç¼˜èŠ‚ç‚¹ã€‚ç”¨æˆ·è®¿é—®è¾¹ç¼˜èŠ‚ç‚¹ï¼Œå¤§å¤§å‡å°‘ç›´æ¥æ”»å‡»æºç«™çš„æœºä¼šã€‚CDNæä¾›å•†é€šå¸¸è‡ªèº«å…·å¤‡å¼ºå¤§çš„DDoSç¼“è§£èƒ½åŠ›ï¼Œèƒ½å¸æ”¶å’Œè¿‡æ»¤å¤§é‡æ”»å‡»æµé‡ã€‚</li>
<li><strong>ä½¿ç”¨äº‘é˜²æŠ¤&#x2F;æ¸…æ´—æœåŠ¡ï¼š</strong> <strong>(æœ€æœ‰æ•ˆä¸”ä¸»æµçš„æ–¹å¼)</strong><ul>
<li><strong>æµé‡æ¸…æ´—ä¸­å¿ƒï¼š</strong> æ‰€æœ‰æµé‡å…ˆç»è¿‡æœåŠ¡æä¾›å•†çš„æ¸…æ´—ä¸­å¿ƒã€‚åœ¨è¿™é‡Œï¼Œåˆ©ç”¨å¤§æ•°æ®åˆ†æã€è¡Œä¸ºåˆ†æã€æœºå™¨å­¦ä¹ ç­‰æŠ€æœ¯<strong>å®æ—¶åŒºåˆ†æ¶æ„æµé‡å’Œåˆæ³•æµé‡</strong>ï¼Œåªå°†æ¸…æ´—åçš„å¹²å‡€æµé‡è½¬å‘ç»™ç›®æ ‡æœåŠ¡å™¨ã€‚é˜¿é‡Œäº‘DDoSé˜²æŠ¤ã€è…¾è®¯äº‘å¤§ç¦¹ã€AWS Shield Advancedã€Cloudflareã€Akamai Prolexic ç­‰éƒ½æ˜¯è¿™ç±»æœåŠ¡ã€‚</li>
<li><strong>Anycast ç½‘ç»œï¼š</strong> äº‘é˜²æŠ¤æä¾›å•†é€šå¸¸ä½¿ç”¨AnycastæŠ€æœ¯ï¼Œå°†æ”»å‡»æµé‡åˆ†æ•£åˆ°å…¨çƒå¤šä¸ªæ•°æ®ä¸­å¿ƒå…¥å£ç‚¹è¿›è¡Œå¤„ç†ï¼Œç¨€é‡Šæ”»å‡»å¨åŠ›ã€‚</li>
</ul>
</li>
<li><strong>åˆ†å¸ƒå¼æ¶æ„ï¼š</strong> è®¾è®¡ç³»ç»Ÿæ—¶é¿å…å•ç‚¹æ•…éšœï¼Œé‡‡ç”¨è´Ÿè½½å‡è¡¡å°†æµé‡åˆ†æ•£åˆ°å¤šä¸ªæœåŠ¡å™¨æˆ–æ•°æ®ä¸­å¿ƒã€‚</li>
</ul>
<h3 id="2-ç½‘ç»œä¸ç³»ç»Ÿå±‚åŠ å›º"><a href="#2-ç½‘ç»œä¸ç³»ç»Ÿå±‚åŠ å›º" class="headerlink" title="2. ç½‘ç»œä¸ç³»ç»Ÿå±‚åŠ å›º"></a>2. ç½‘ç»œä¸ç³»ç»Ÿå±‚åŠ å›º</h3><ul>
<li><strong>é˜²ç«å¢™é…ç½®ï¼š</strong><ul>
<li>ä¸¥æ ¼é…ç½®å…¥ç«™&#x2F;å‡ºç«™è§„åˆ™ã€‚</li>
<li>å¯ç”¨æŠ—DDoSæ¨¡å¼ï¼ˆå¦‚SYN Cookie&#x2F;Cookie Challengeï¼‰ã€‚</li>
<li>é™åˆ¶ç‰¹å®šåè®®ï¼ˆå¦‚ICMPã€UDPï¼‰çš„é€Ÿç‡æˆ–ç›´æ¥å±è”½ã€‚</li>
<li>è®¾ç½®è¿æ¥æ•°é™åˆ¶å’Œæ–°å»ºè¿æ¥é€Ÿç‡é™åˆ¶ã€‚</li>
</ul>
</li>
<li><strong>è·¯ç”±å™¨&#x2F;äº¤æ¢æœºé…ç½®ï¼š</strong><ul>
<li>å¯ç”¨è®¿é—®æ§åˆ¶åˆ—è¡¨é™åˆ¶æ¥æºã€‚</li>
<li>é…ç½®æµé‡é™é€Ÿã€‚</li>
<li>å¯ç”¨æºIPéªŒè¯ï¼Œé˜²æ­¢IPæ¬ºéª—ã€‚</li>
</ul>
</li>
<li><strong>æœåŠ¡å™¨ä¼˜åŒ–ï¼š</strong><ul>
<li><strong>åŠæ—¶æ‰“è¡¥ä¸ï¼š</strong> ä¿®å¤æ“ä½œç³»ç»Ÿã€WebæœåŠ¡å™¨ã€æ•°æ®åº“ç­‰è½¯ä»¶æ¼æ´ï¼Œé˜²æ­¢æ”»å‡»è€…åˆ©ç”¨æ¼æ´å‘åŠ¨DoSã€‚</li>
<li><strong>èµ„æºé™åˆ¶ï¼š</strong> è°ƒæ•´å†…æ ¸å‚æ•°ï¼ˆå¦‚<code>net.core.somaxconn</code>, <code>net.ipv4.tcp_max_syn_backlog</code>ï¼‰ï¼Œä¼˜åŒ–TCP&#x2F;IPæ ˆæ€§èƒ½ï¼Œå¢åŠ åŠè¿æ¥é˜Ÿåˆ—å¤§å°ã€‚</li>
<li><strong>å…³é—­ä¸å¿…è¦çš„æœåŠ¡ï¼š</strong> å‡å°‘æ”»å‡»é¢ã€‚</li>
<li><strong>å¯ç”¨SYN Cookiesï¼š</strong> æœ‰æ•ˆé˜²å¾¡SYNæ´ªæ°´æ”»å‡»ã€‚</li>
</ul>
</li>
<li><strong>å…¥ä¾µæ£€æµ‹&#x2F;é˜²å¾¡ç³»ç»Ÿï¼š</strong> éƒ¨ç½²NIDS&#x2F;NIPSï¼Œé…ç½®è§„åˆ™æ£€æµ‹å¸¸è§DoSæ”»å‡»æ¨¡å¼ï¼ˆå¦‚SYN Flood, UDP Floodï¼‰å¹¶è‡ªåŠ¨é˜»æ–­ã€‚</li>
</ul>
<h3 id="3-åº”ç”¨å±‚é˜²æŠ¤"><a href="#3-åº”ç”¨å±‚é˜²æŠ¤" class="headerlink" title="3. åº”ç”¨å±‚é˜²æŠ¤"></a>3. åº”ç”¨å±‚é˜²æŠ¤</h3><ul>
<li><strong>Webåº”ç”¨é˜²ç«å¢™ï¼š</strong> WAFèƒ½æœ‰æ•ˆé˜²å¾¡åº”ç”¨å±‚DDoSæ”»å‡»ï¼ˆå¦‚HTTP Floodã€Slowlorisã€CCæ”»å‡»ï¼‰ä»¥åŠåˆ©ç”¨åº”ç”¨æ¼æ´çš„æ”»å‡»ã€‚å®ƒå¯ä»¥è¯†åˆ«æ¶æ„Botæµé‡ã€è®¾ç½®è¯·æ±‚é€Ÿç‡é™åˆ¶ã€éªŒè¯æŒ‘æˆ˜ç­‰ã€‚</li>
<li><strong>è¾“å…¥éªŒè¯ä¸è¿‡æ»¤ï¼š</strong> ä¸¥æ ¼æ£€æŸ¥æ‰€æœ‰ç”¨æˆ·è¾“å…¥ï¼Œé˜²æ­¢ç•¸å½¢æ•°æ®åŒ…å¯¼è‡´æœåŠ¡å´©æºƒæˆ–èµ„æºè€—å°½ã€‚</li>
<li><strong>ä¼šè¯ç®¡ç†ï¼š</strong> åˆç†è®¾ç½®ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢åƒµå°¸ä¼šè¯å ç”¨èµ„æºã€‚</li>
<li><strong>èµ„æºä½¿ç”¨é™åˆ¶ï¼š</strong> å¯¹APIè°ƒç”¨ã€æ–‡ä»¶ä¸Šä¼ ã€æ•°æ®åº“æŸ¥è¯¢ç­‰æ“ä½œå®æ–½ä¸¥æ ¼çš„é¢‘ç‡å’Œèµ„æºæ¶ˆè€—é™åˆ¶ã€‚</li>
<li><strong>éªŒè¯ç ï¼š</strong> åœ¨å¯ç–‘æµé‡æˆ–é«˜é¢‘ç‡æ“ä½œæ—¶å¼•å…¥éªŒè¯ç ï¼ŒåŒºåˆ†äººæœºã€‚</li>
<li><strong>é™åˆ¶ç‰¹å®šUser-Agentæˆ–çˆ¬è™«è¡Œä¸ºã€‚</strong></li>
</ul>
<h3 id="4-ç›‘æ§ä¸å“åº”"><a href="#4-ç›‘æ§ä¸å“åº”" class="headerlink" title="4. ç›‘æ§ä¸å“åº”"></a>4. ç›‘æ§ä¸å“åº”</h3><ul>
<li><strong>å®æ—¶ç›‘æ§ï¼š</strong> éƒ¨ç½²å…¨é¢çš„ç½‘ç»œæµé‡ç›‘æ§ç³»ç»Ÿï¼Œå¯†åˆ‡å…³æ³¨å¸¦å®½ä½¿ç”¨ç‡ã€è¿æ¥æ•°ã€CPU&#x2F;å†…å­˜è´Ÿè½½ã€ç‰¹å®šåè®®æµé‡ç­‰å…³é”®æŒ‡æ ‡ã€‚è®¾ç½®å‘Šè­¦é˜ˆå€¼ã€‚</li>
<li><strong>æµé‡åˆ†æå·¥å…·ï¼š</strong> ä½¿ç”¨NetFlow&#x2F;sFlow&#x2F;IPFIXã€æ·±åº¦åŒ…æ£€æµ‹ç­‰æŠ€æœ¯åˆ†ææµé‡æ¨¡å¼ï¼Œè¯†åˆ«å¼‚å¸¸ã€‚</li>
<li><strong>åˆ¶å®šåº”æ€¥é¢„æ¡ˆï¼š</strong> æ˜ç¡®åœ¨é­å—æ”»å‡»æ—¶å„ä¸ªå›¢é˜Ÿï¼ˆç½‘ç»œã€å®‰å…¨ã€è¿ç»´ã€åº”ç”¨å¼€å‘ï¼‰çš„èŒè´£å’Œæ“ä½œæµç¨‹ã€‚åŒ…æ‹¬ï¼š<ul>
<li>å¦‚ä½•å¿«é€Ÿç¡®è®¤æ”»å‡»ç±»å‹å’Œè§„æ¨¡ã€‚</li>
<li>å¦‚ä½•å¯åŠ¨äº‘æ¸…æ´—æœåŠ¡æˆ–è”ç³»ISPååŠ©ã€‚</li>
<li>å¦‚ä½•è°ƒæ•´é˜²ç«å¢™&#x2F;WAFè§„åˆ™è¿›è¡Œä¸´æ—¶å°å µï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ã€‚</li>
<li>å¦‚ä½•ä¸ä¸šåŠ¡éƒ¨é—¨æ²Ÿé€šã€‚</li>
<li>æ”»å‡»ç¼“è§£åçš„æ¢å¤æ­¥éª¤å’Œæ ¹å› åˆ†æã€‚</li>
</ul>
</li>
<li><strong>å®šæœŸæ¼”ç»ƒï¼š</strong> æµ‹è¯•åº”æ€¥é¢„æ¡ˆçš„æœ‰æ•ˆæ€§ã€‚</li>
</ul>
<h3 id="5-å…¶ä»–é‡è¦æªæ–½"><a href="#5-å…¶ä»–é‡è¦æªæ–½" class="headerlink" title="5. å…¶ä»–é‡è¦æªæ–½"></a>5. å…¶ä»–é‡è¦æªæ–½</h3><ul>
<li><strong>éšè—çœŸå®IPï¼š</strong> å°½å¯èƒ½ä¸è¦è®©å…³é”®æœåŠ¡çš„çœŸå®æœåŠ¡å™¨IPç›´æ¥æš´éœ²åœ¨å…¬ç½‘ä¸Šã€‚ä½¿ç”¨CDNã€äº‘WAFã€åå‘ä»£ç†æˆ–é«˜é˜²IPä½œä¸ºå‰ç«¯ã€‚</li>
<li><strong>ISPåˆä½œï¼š</strong> ä¸ä½ çš„äº’è”ç½‘æœåŠ¡æä¾›å•†å»ºç«‹è”ç³»ã€‚å¤§å‹ISPé€šå¸¸å…·å¤‡åœ¨æ›´ä¸Šæ¸¸ï¼ˆé è¿‘æ”»å‡»æºï¼‰ç¼“è§£å¤§è§„æ¨¡DDoSçš„èƒ½åŠ›ã€‚åœ¨æ”»å‡»å‘ç”Ÿæ—¶ï¼ŒåŠæ—¶å‘å…¶æŠ¥å‘Šå¹¶å¯»æ±‚ååŠ©ã€‚</li>
<li><strong>å‡å°‘åå°„æ”¾å¤§é¢ï¼š</strong> ç¡®ä¿ä½ ç®¡ç†çš„æœåŠ¡å™¨ï¼ˆå¦‚DNSé€’å½’è§£æå™¨ã€NTPæœåŠ¡å™¨ã€MemcachedæœåŠ¡å™¨ï¼‰ä¸ä¼šè¢«æ»¥ç”¨ä¸ºåå°„æºã€‚æ­£ç¡®é…ç½®å®ƒä»¬ï¼ˆå¦‚é™åˆ¶é€’å½’æŸ¥è¯¢æ¥æºã€ç¦ç”¨ä¸å¿…è¦åŠŸèƒ½ã€æ›´æ–°è½¯ä»¶ï¼‰ã€‚</li>
<li><strong>å®‰å…¨æ„è¯†ï¼š</strong> é˜²æ­¢å†…éƒ¨è®¾å¤‡æˆä¸ºåƒµå°¸ç½‘ç»œæˆå‘˜ï¼ˆå®‰è£…æ€æ¯’è½¯ä»¶ã€åŠæ—¶æ›´æ–°ã€å¼ºå¯†ç ï¼‰ã€‚</li>
</ul>
<h2 id="ä¸‰ã€-é‡è¦æ€»ç»“"><a href="#ä¸‰ã€-é‡è¦æ€»ç»“" class="headerlink" title="ä¸‰ã€ é‡è¦æ€»ç»“"></a>ä¸‰ã€ é‡è¦æ€»ç»“</h2><ol>
<li><strong>DDoSæ˜¯æ›´å¼ºå¤§ã€æ›´ä¸»æµçš„å¨èƒï¼š</strong> å¦‚ä»Šå•çº¯çš„DoSæ”»å‡»å·²è¾ƒå°‘è§ï¼ŒDDoSåˆ©ç”¨åƒµå°¸ç½‘ç»œçš„è§„æ¨¡å’Œåå°„æ”¾å¤§æŠ€æœ¯æˆä¸ºå¸¸æ€ã€‚</li>
<li><strong>äº‘é˜²æŠ¤æ˜¯æ ¸å¿ƒï¼š</strong> é¢å¯¹å¤§å‹DDoSæ”»å‡»ï¼Œä¾é è‡ªèº«ç½‘ç»œå’Œè®¾å¤‡å‡ ä¹æ— æ³•æŠµå¾¡ã€‚ä¸“ä¸šçš„äº‘DDoSé˜²æŠ¤&#x2F;æ¸…æ´—æœåŠ¡æ˜¯<strong>æœ€æœ‰æ•ˆå’Œæœ€ä¸»æµ</strong>çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>çºµæ·±é˜²å¾¡ï¼š</strong> æ²¡æœ‰å•ä¸€å®Œç¾çš„é˜²å¾¡æ‰‹æ®µã€‚éœ€è¦ç»“åˆ<strong>åŸºç¡€è®¾æ–½å†—ä½™ã€ç½‘ç»œè®¾å¤‡åŠ å›ºã€æœåŠ¡å™¨ä¼˜åŒ–ã€åº”ç”¨å±‚é˜²æŠ¤ã€æŒç»­ç›‘æ§å’Œæˆç†Ÿçš„åº”æ€¥å“åº”è®¡åˆ’</strong>ï¼Œæ„å»ºå¤šå±‚æ¬¡é˜²å¾¡ä½“ç³»ã€‚</li>
<li><strong>æŒç»­æ€§ä¸æˆæœ¬ï¼š</strong> DDoSé˜²å¾¡æ˜¯ä¸€ä¸ªæŒç»­æŠ•å…¥çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æŠ€æœ¯ã€äººåŠ›å’ŒæœåŠ¡æˆæœ¬ã€‚éœ€è¦æ ¹æ®ä¸šåŠ¡çš„é‡è¦æ€§æ¥è¯„ä¼°æ‰€éœ€çš„é˜²æŠ¤ç­‰çº§ã€‚</li>
<li><strong>Miraiåƒµå°¸ç½‘ç»œçš„è­¦ç¤ºï¼š</strong> MiraiåŠå…¶å˜ç§åˆ©ç”¨å¤§é‡å®‰å…¨æ€§è–„å¼±çš„IoTè®¾å¤‡å‘åŠ¨äº†å²ä¸Šæœ€å¤§è§„æ¨¡çš„DDoSæ”»å‡»ä¹‹ä¸€ï¼Œå‡¸æ˜¾äº†IoTå®‰å…¨é—®é¢˜å’Œåå°„æ”¾å¤§æ”»å‡»çš„å¨åŠ›ã€‚</li>
</ol>
<h1 id="Jsé”™è¯¯"><a href="#Jsé”™è¯¯" class="headerlink" title="Jsé”™è¯¯"></a>Jsé”™è¯¯</h1><h2 id="JavaScript-é”™è¯¯ç±»å‹æ€»è§ˆ"><a href="#JavaScript-é”™è¯¯ç±»å‹æ€»è§ˆ" class="headerlink" title="JavaScript é”™è¯¯ç±»å‹æ€»è§ˆ"></a>JavaScript é”™è¯¯ç±»å‹æ€»è§ˆ</h2><table>
<thead>
<tr>
<th align="left">é”™è¯¯ç±»å‹</th>
<th align="left">è§¦å‘åœºæ™¯</th>
<th align="left">ç¤ºä¾‹ä»£ç </th>
<th align="left">è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>SyntaxError</strong></td>
<td align="left">è¯­æ³•é”™è¯¯</td>
<td align="left"><code>if (a) &#123;</code></td>
<td align="left">ä¿®å¤ä»£ç è¯­æ³•</td>
</tr>
<tr>
<td align="left"><strong>ReferenceError</strong></td>
<td align="left">è®¿é—®æœªå£°æ˜å˜é‡</td>
<td align="left"><code>console.log(undeclaredVar);</code></td>
<td align="left">å£°æ˜å˜é‡æˆ–æ£€æŸ¥å˜é‡ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td align="left"><strong>TypeError</strong></td>
<td align="left">ç±»å‹ä¸åŒ¹é…æ“ä½œ</td>
<td align="left"><code>null.func();</code></td>
<td align="left">æ·»åŠ ç±»å‹æ£€æŸ¥</td>
</tr>
<tr>
<td align="left"><strong>RangeError</strong></td>
<td align="left">æ•°å€¼è¶…å‡ºæœ‰æ•ˆèŒƒå›´</td>
<td align="left"><code>new Array(-1);</code></td>
<td align="left">éªŒè¯è¾“å…¥å€¼èŒƒå›´</td>
</tr>
<tr>
<td align="left"><strong>URIError</strong></td>
<td align="left">URIå¤„ç†å‡½æ•°ä½¿ç”¨æ— æ•ˆå‚æ•°</td>
<td align="left"><code>decodeURIComponent(&#39;%&#39;);</code></td>
<td align="left">éªŒè¯URIå‚æ•°</td>
</tr>
<tr>
<td align="left"><strong>EvalError</strong></td>
<td align="left"><code>eval()</code> å‡½æ•°ä½¿ç”¨ä¸å½“</td>
<td align="left"><code>new eval();</code></td>
<td align="left">é¿å…ä½¿ç”¨eval</td>
</tr>
<tr>
<td align="left"><strong>AggregateError</strong></td>
<td align="left">å¤šä¸ªé”™è¯¯ç»„åˆ</td>
<td align="left"><code>Promise.any([rejectedPromises]);</code></td>
<td align="left">å¤„ç†å¤šä¸ªé”™è¯¯</td>
</tr>
<tr>
<td align="left"><strong>è‡ªå®šä¹‰é”™è¯¯</strong></td>
<td align="left">å¼€å‘è€…ä¸»åŠ¨æŠ›å‡º</td>
<td align="left"><code>throw new CustomError(&#39;msg&#39;);</code></td>
<td align="left">å®ç°ç‰¹å®šé”™è¯¯å¤„ç†é€»è¾‘</td>
</tr>
</tbody></table>
<h3 id="1-SyntaxErrorï¼ˆè¯­æ³•é”™è¯¯ï¼‰"><a href="#1-SyntaxErrorï¼ˆè¯­æ³•é”™è¯¯ï¼‰" class="headerlink" title="1. SyntaxErrorï¼ˆè¯­æ³•é”™è¯¯ï¼‰"></a>1. SyntaxErrorï¼ˆè¯­æ³•é”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼šä»£ç è§£æé˜¶æ®µ<br><strong>å¸¸è§åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç¼ºå°‘æ‹¬å·ã€å¼•å·æˆ–èŠ±æ‹¬å·</li>
<li>é”™è¯¯ä½¿ç”¨ä¿ç•™å­—</li>
<li>æ— æ•ˆçš„è¡¨è¾¾å¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1: ç¼ºå°‘æ‹¬å·</span></span><br><span class="line"><span class="keyword">if</span> (a &#123;  <span class="comment">// Uncaught SyntaxError: Unexpected token &#x27;&#123;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2: æ— æ•ˆèµ‹å€¼</span></span><br><span class="line"><span class="keyword">const</span> 123<span class="keyword">var</span> = <span class="string">&quot;test&quot;</span>;  <span class="comment">// Uncaught SyntaxError: Invalid or unexpected token</span></span><br></pre></td></tr></table></figure>

<h3 id="2-ReferenceErrorï¼ˆå¼•ç”¨é”™è¯¯ï¼‰"><a href="#2-ReferenceErrorï¼ˆå¼•ç”¨é”™è¯¯ï¼‰" class="headerlink" title="2. ReferenceErrorï¼ˆå¼•ç”¨é”™è¯¯ï¼‰"></a>2. ReferenceErrorï¼ˆå¼•ç”¨é”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼šè¿è¡Œæ—¶<br><strong>å¸¸è§åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è®¿é—®æœªå£°æ˜çš„å˜é‡</li>
<li>è®¿é—®å—ä½œç”¨åŸŸå˜é‡ï¼ˆlet&#x2F;constï¼‰çš„TDZï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰</li>
<li>æ¨¡å—å¯¼å…¥é”™è¯¯</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1: æœªå£°æ˜å˜é‡</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(undeclaredVar);  <span class="comment">// Uncaught ReferenceError</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2: TDZè®¿é—®</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);  <span class="comment">// Uncaught ReferenceError</span></span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-TypeErrorï¼ˆç±»å‹é”™è¯¯ï¼‰"><a href="#3-TypeErrorï¼ˆç±»å‹é”™è¯¯ï¼‰" class="headerlink" title="3. TypeErrorï¼ˆç±»å‹é”™è¯¯ï¼‰"></a>3. TypeErrorï¼ˆç±»å‹é”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼šæ“ä½œä¸ç¬¦åˆå˜é‡ç±»å‹<br><strong>å¸¸è§åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è°ƒç”¨éå‡½æ•°å€¼</li>
<li>è®¿é—®null&#x2F;undefinedçš„å±æ€§</li>
<li>å°è¯•ä¿®æ”¹å¸¸é‡å€¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1: è°ƒç”¨éå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> num = <span class="number">42</span>;</span><br><span class="line"><span class="title function_">num</span>();  <span class="comment">// Uncaught TypeError: num is not a function</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2: è®¿é—®nullå±æ€§</span></span><br><span class="line"><span class="keyword">const</span> obj = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">property</span>);  <span class="comment">// Uncaught TypeError: Cannot read property</span></span><br></pre></td></tr></table></figure>

<h3 id="4-RangeErrorï¼ˆèŒƒå›´é”™è¯¯ï¼‰"><a href="#4-RangeErrorï¼ˆèŒƒå›´é”™è¯¯ï¼‰" class="headerlink" title="4. RangeErrorï¼ˆèŒƒå›´é”™è¯¯ï¼‰"></a>4. RangeErrorï¼ˆèŒƒå›´é”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼šå‚æ•°è¶…å‡ºæœ‰æ•ˆèŒƒå›´<br><strong>å¸¸è§åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æ— æ•ˆæ•°ç»„é•¿åº¦</li>
<li>æ•°å­—æ–¹æ³•å‚æ•°è¶Šç•Œ</li>
<li>é€’å½’æ·±åº¦è¿‡å¤§</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹1: æ— æ•ˆæ•°ç»„é•¿åº¦</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(-<span class="number">1</span>);  <span class="comment">// Uncaught RangeError: Invalid array length</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹2: æ•°å­—ç²¾åº¦è¶…é™</span></span><br><span class="line">(<span class="number">123.456</span>).<span class="title function_">toFixed</span>(<span class="number">101</span>);  <span class="comment">// Uncaught RangeError: toFixed() digits argument must be between 0 and 100</span></span><br></pre></td></tr></table></figure>

<h3 id="5-URIErrorï¼ˆURIé”™è¯¯ï¼‰"><a href="#5-URIErrorï¼ˆURIé”™è¯¯ï¼‰" class="headerlink" title="5. URIErrorï¼ˆURIé”™è¯¯ï¼‰"></a>5. URIErrorï¼ˆURIé”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼šURIå¤„ç†å‡½æ•°å‚æ•°æ— æ•ˆ<br><strong>ä»…å½±å“</strong>ï¼š<code>encodeURI()</code>, <code>decodeURI()</code>, <code>encodeURIComponent()</code>, <code>decodeURIComponent()</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¤ºä¾‹: æ— æ•ˆURIè§£ç </span></span><br><span class="line"><span class="built_in">decodeURIComponent</span>(<span class="string">&#x27;%&#x27;</span>);  <span class="comment">// Uncaught URIError: URI malformed</span></span><br></pre></td></tr></table></figure>

<h3 id="6-EvalErrorï¼ˆevalé”™è¯¯ï¼‰"><a href="#6-EvalErrorï¼ˆevalé”™è¯¯ï¼‰" class="headerlink" title="6. EvalErrorï¼ˆevalé”™è¯¯ï¼‰"></a>6. EvalErrorï¼ˆevalé”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼š<code>eval()</code> å‡½æ•°ä½¿ç”¨ä¸å½“<br><strong>æ³¨æ„</strong>ï¼šç°ä»£JavaScriptä¸­å¾ˆå°‘è§ï¼Œä¿ç•™ç”¨äºå…¼å®¹æ€§</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†å²ç”¨æ³• (ç°ä»£JSå¼•æ“ä¸å†æŠ›å‡º)</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">EvalError</span>(<span class="string">&quot;Eval error&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e <span class="keyword">instanceof</span> <span class="title class_">EvalError</span>);  <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-AggregateErrorï¼ˆèšåˆé”™è¯¯ï¼‰"><a href="#7-AggregateErrorï¼ˆèšåˆé”™è¯¯ï¼‰" class="headerlink" title="7. AggregateErrorï¼ˆèšåˆé”™è¯¯ï¼‰"></a>7. AggregateErrorï¼ˆèšåˆé”™è¯¯ï¼‰</h3><p><strong>è§¦å‘æ—¶æœº</strong>ï¼šå¤šä¸ªé”™è¯¯éœ€è¦åŒæ—¶æŠ¥å‘Š<br><strong>å¸¸è§äº</strong>ï¼š<code>Promise.any()</code> å…¨éƒ¨æ‹’ç»æ—¶</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">any</span>([</span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Error 1&quot;</span>)),</span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Error 2&quot;</span>))</span><br><span class="line">]).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e <span class="keyword">instanceof</span> <span class="title class_">AggregateError</span>);  <span class="comment">// true</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">errors</span>.<span class="property">length</span>);  <span class="comment">// 2</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="WebIDLå’Œecma-262ä¸­çš„é”™è¯¯ç±»å‹"><a href="#WebIDLå’Œecma-262ä¸­çš„é”™è¯¯ç±»å‹" class="headerlink" title="WebIDLå’Œecma-262ä¸­çš„é”™è¯¯ç±»å‹"></a>WebIDLå’Œecma-262ä¸­çš„é”™è¯¯ç±»å‹</h4><ul>
<li><p><a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=WCsyJ0SbM68nFUfknuxc4g==.suEaakDxsFgunJR89KoRM2icTf23NuhbkJlXUUrVWbBpYg3tSQ3Qcro+8NlH58ZUTRaKRVPug72ITCAseJfwzPkhe/P6CqFiA14nNIjGM7E=">ECMAScript exceptions</a> &lt;&#x3D;&#x3D;&gt; <a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=PKwXx59Icv2HdaKCGITj+w==.ZkwDXSwbBVZSMF94vbPpyK+w3iC2bcBf19ml+tcJNstSYLackci+BgNMsdSmvchdLjCH5bbjMMICt01dZB8DuA==">IDL çš„ç®€å•å¼‚å¸¸</a></p>
<p>å½“è„šæœ¬ä»£ç è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯ï¼Œä¼šåˆ›å»ºErrorå¯¹è±¡ï¼Œå¹¶å°†å…¶æŠ›å‡ºï¼Œé™¤äº†é€šç”¨çš„Erroræ„é€ å‡½æ•°å¤–ï¼Œä»¥ä¸‹æ˜¯å¦å¤–å‡ ä¸ªECMAScript 2015ä¸­å®šä¹‰çš„é”™è¯¯æ„é€ å‡½æ•°ã€‚</p>
<ul>
<li><strong>EvalError</strong> evalé”™è¯¯</li>
<li><strong>RangeError</strong> èŒƒå›´é”™è¯¯</li>
<li><strong>ReferenceError</strong> å¼•ç”¨é”™è¯¯</li>
<li><strong>TypeError</strong> ç±»å‹é”™è¯¯</li>
<li><strong>URIError</strong> URIé”™è¯¯</li>
<li><strong>SyntaxError</strong> è¯­æ³•é”™è¯¯ (è¿™ä¸ªé”™è¯¯WebIDLä¸­æ•…æ„çœç•¥ï¼Œä¿ç•™ç»™ESè§£æå™¨ä½¿ç”¨)</li>
<li><strong>Error</strong> é€šç”¨é”™è¯¯ ï¼ˆè¿™ä¸ªé”™è¯¯WebIDLä¸­æ•…æ„çœç•¥ï¼Œä¿ç•™ç»™å¼€å‘è€…ä½¿ç”¨ä½¿ç”¨ï¼‰</li>
</ul>
</li>
<li><p><a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=Qaux4NrI17y7bOplFMyitw==.cL487ezp3TEsLOuy+TKH9OHDliMsEWajxxayEUwyqYIqv9RbXRCkouXogfTnmFZbGfw3Oo476yuXgMBVsvAeEQ==">DOMException</a> æœ€æ–°çš„DOMè§„èŒƒå®šä¹‰çš„é”™è¯¯ç±»å‹é›†ï¼Œå…¼å®¹æ—§æµè§ˆçš„DOMErroræ¥å£, å®Œå–„å’Œè§„èŒƒåŒ–DOMé”™è¯¯ç±»å‹ã€‚</p>
<ul>
<li><strong>IndexSizeError</strong> ç´¢å¼•ä¸åœ¨å…è®¸çš„èŒƒå›´å†…</li>
<li><strong>HierarchyRequestError</strong> èŠ‚ç‚¹æ ‘å±‚æ¬¡ç»“æ„æ˜¯ä¸æ­£ç¡®çš„ã€‚</li>
<li><strong>WrongDocumentError</strong> å¯¹è±¡æ˜¯é”™è¯¯çš„</li>
<li><strong>InvalidCharacterError</strong> å­—ç¬¦ä¸²åŒ…å«æ— æ•ˆå­—ç¬¦ã€‚</li>
<li><strong>NoModificationAllowedError</strong> å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚</li>
<li><strong>NotFoundError</strong> å¯¹è±¡ä¸èƒ½åœ¨è¿™é‡Œè¢«æ‰¾åˆ°ã€‚</li>
<li><strong>NotSupportedError</strong> ä¸æ”¯æŒçš„æ“ä½œ</li>
<li><strong>InvalidStateError</strong> å¯¹è±¡æ˜¯ä¸€ä¸ªæ— æ•ˆçš„çŠ¶æ€ã€‚</li>
<li><strong>SyntaxError</strong> å­—ç¬¦ä¸²ä¸åŒ¹é…é¢„æœŸçš„æ¨¡å¼</li>
<li><strong>InvalidModificationError</strong> å¯¹è±¡ä¸èƒ½ä»¥è¿™ç§æ–¹å¼è¢«ä¿®æ”¹</li>
<li><strong>NamespaceError</strong> æ“ä½œåœ¨XMLå‘½åç©ºé—´å†…æ˜¯ä¸è¢«å…è®¸çš„</li>
<li><strong>InvalidAccessError</strong> å¯¹è±¡ä¸æ”¯æŒè¿™ç§æ“ä½œæˆ–å‚æ•°ã€‚</li>
<li><strong>TypeMismatchError</strong> å¯¹è±¡çš„ç±»å‹ä¸åŒ¹é…é¢„æœŸçš„ç±»å‹ã€‚</li>
<li><strong>SecurityError</strong> æ­¤æ“ä½œæ˜¯ä¸å®‰å…¨çš„ã€‚</li>
<li><strong>NetworkError</strong> å‘ç”Ÿç½‘ç»œé”™è¯¯</li>
<li><strong>AbortError</strong> æ“ä½œè¢«ä¸­æ­¢</li>
<li><strong>URLMismatchError</strong> ç»™å®šçš„URLä¸åŒ¹é…å¦ä¸€ä¸ªURLã€‚</li>
<li><strong>QuotaExceededError</strong> å·²ç»è¶…è¿‡ç»™å®šé…é¢ã€‚</li>
<li><strong>TimeoutError</strong> æ“ä½œè¶…æ—¶ã€‚</li>
<li><strong>InvalidNodeTypeError</strong> è¿™ä¸ªæ“ä½œçš„ èŠ‚ç‚¹æˆ–èŠ‚ç‚¹ç¥–å…ˆ æ˜¯ä¸æ­£ç¡®çš„</li>
<li><strong>DataCloneError</strong> å¯¹è±¡ä¸èƒ½å…‹éš†ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å‰ç«¯é”™è¯¯å¼‚å¸¸æŒ‰ç…§æ•è·æ–¹å¼åˆ†ç±»"><a href="#å‰ç«¯é”™è¯¯å¼‚å¸¸æŒ‰ç…§æ•è·æ–¹å¼åˆ†ç±»" class="headerlink" title="å‰ç«¯é”™è¯¯å¼‚å¸¸æŒ‰ç…§æ•è·æ–¹å¼åˆ†ç±»"></a>å‰ç«¯é”™è¯¯å¼‚å¸¸æŒ‰ç…§æ•è·æ–¹å¼åˆ†ç±»</h3><ul>
<li><input checked="" disabled="" type="checkbox"> è¯­æ³•é”™è¯¯</li>
<li><input checked="" disabled="" type="checkbox"> è¿è¡Œæ—¶å¼‚å¸¸</li>
<li><input checked="" disabled="" type="checkbox"> èµ„æºåŠ è½½å¼‚å¸¸<ul>
<li>img</li>
<li>script</li>
<li>link</li>
<li>audio</li>
<li>video</li>
<li>iframe</li>
<li>â€¦å¤–é“¾èµ„æºçš„DOMå…ƒç´ </li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> å¼‚æ­¥è¯·æ±‚å¼‚å¸¸<ul>
<li>XMLHttpRequest</li>
<li>fetch</li>
</ul>
</li>
<li><input checked="" disabled="" type="checkbox"> Promiseå¼‚å¸¸</li>
<li><input disabled="" type="checkbox"> <del>CSSä¸­èµ„æºå¼‚å¸¸</del><ul>
<li>@font-face</li>
<li>background-image</li>
<li>â€¦æš‚æ—¶æ— æ³•æ•è·</li>
</ul>
</li>
</ul>
<h3 id="å‰ç«¯é”™è¯¯å¼‚å¸¸çš„æ•è·æ–¹å¼"><a href="#å‰ç«¯é”™è¯¯å¼‚å¸¸çš„æ•è·æ–¹å¼" class="headerlink" title="å‰ç«¯é”™è¯¯å¼‚å¸¸çš„æ•è·æ–¹å¼"></a>å‰ç«¯é”™è¯¯å¼‚å¸¸çš„æ•è·æ–¹å¼</h3><ul>
<li>try-catch (ESæä¾›åŸºæœ¬çš„é”™è¯¯æ•è·è¯­æ³•)<ul>
<li>åªèƒ½æ•è·åŒæ­¥ä»£ç çš„å¼‚å¸¸</li>
<li><del>å›è°ƒ</del></li>
<li><del>setTimeout</del></li>
<li><del>promise</del></li>
</ul>
</li>
<li><strong>window.onerror &#x3D; cb (DOM0)</strong><ul>
<li>img</li>
<li>script</li>
<li>link</li>
</ul>
</li>
<li>window.addEventListener(â€˜errorâ€™, cb, true) (DOM2)</li>
<li>window.addEventListener(â€œunhandledrejectionâ€, cb) (DOM4)</li>
<li>Promise.then().catch(cb)</li>
<li>å°è£…XMLHttpRequest&amp;fetch | è¦†å†™è¯·æ±‚æ¥å£å¯¹è±¡</li>
</ul>
<h4 id="try-catch-finally"><a href="#try-catch-finally" class="headerlink" title="try-catch-finally"></a>try-catch-finally</h4><p>å°†èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç å—æ”¾åˆ°tryä¸­ï¼Œå¹¶å¯¹åº”ä¸€ä¸ªå“åº”ï¼Œç„¶åæœ‰å¼‚å¸¸ä¼šè¢«æ•è·</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿä¸€æ®µå¯èƒ½æœ‰é”™è¯¯çš„ä»£ç </span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;ä¼šæœ‰é”™è¯¯çš„ä»£ç å—&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span>(e)&#123;</span><br><span class="line">  <span class="comment">// æ•è·åˆ°tryä¸­ä»£ç å—çš„é”™è¯¯å¾—åˆ°ä¸€ä¸ªé”™è¯¯å¯¹è±¡eï¼Œè¿›è¡Œå¤„ç†åˆ†æ</span></span><br><span class="line">  <span class="title function_">report</span>(e)</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finally&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="onerroräº‹ä»¶"><a href="#onerroräº‹ä»¶" class="headerlink" title="onerroräº‹ä»¶"></a>onerroräº‹ä»¶</h4><h5 id="window-onerror"><a href="#window-onerror" class="headerlink" title="window.onerror"></a>window.onerror</h5><p>å½“JavaScriptè¿è¡Œæ—¶é”™è¯¯ï¼ˆåŒ…æ‹¬è¯­æ³•é”™è¯¯ï¼‰å‘ç”Ÿæ—¶ï¼Œwindowä¼šè§¦å‘ä¸€ä¸ªErrorEventæ¥å£çš„äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œwindow.onerror();</p>
<p>ä½†è¿™é‡Œæœ‰ä¸ªä¿¡æ¯è¦æ³¨æ„ï¼Œè¯­æ³•é”™è¯¯ä¼šå¯¼è‡´å‡ºç°è¯­æ³•é”™è¯¯çš„é‚£ä¸ªè„šæœ¬å—æ‰§è¡Œå¤±è´¥ï¼Œæ‰€ä»¥è¯­æ³•é”™è¯¯ä¼šå¯¼è‡´å½“å‰ä»£ç å—è¿è¡Œç»ˆæ­¢ï¼Œä»è€Œå¯¼è‡´æ•´ä¸ªç¨‹åºè¿è¡Œä¸­æ–­ï¼Œå¦‚æœè¯­æ³•é”™è¯¯è¿™ä¸ªå‘ç”Ÿåœ¨æˆ‘ä»¬çš„é”™è¯¯ç›‘æ§è¯­å¥å—ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»€ä¹ˆä¹Ÿç›‘æ§ä¸åˆ°äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> è¿è¡Œæ—¶é”™è¯¯å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; message é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; source å‘ç”Ÿé”™è¯¯çš„è„šæœ¬URL</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; lineno å‘ç”Ÿé”™è¯¯çš„è¡Œå·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; colno å‘ç”Ÿé”™è¯¯çš„åˆ—å·</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">object</span>&#125; error Errorå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">err</span>(<span class="params">message,source,lineno,colno,error</span>) &#123;...&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onerror</span> = err</span><br></pre></td></tr></table></figure>

<h5 id="element-onerror"><a href="#element-onerror" class="headerlink" title="element.onerror"></a>element.onerror</h5><p>å½“ä¸€é¡¹èµ„æºï¼ˆå¦‚<code>&lt;img&gt;</code>æˆ–<code>&lt;script&gt;</code>ï¼‰åŠ è½½å¤±è´¥ï¼ŒåŠ è½½èµ„æºçš„å…ƒç´ ä¼šè§¦å‘ä¸€ä¸ªEventæ¥å£çš„erroräº‹ä»¶ï¼Œå¹¶æ‰§è¡Œè¯¥å…ƒç´ ä¸Šçš„onerror()å¤„ç†å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">event</span>) &#123; ... &#125; <span class="comment">//æ³¨æ„å’Œwindow.onerrorçš„å‚æ•°ä¸åŒ</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šè¿™äº›erroräº‹ä»¶ä¸ä¼šå‘ä¸Šå†’æ³¡åˆ°windowï¼Œä¸è¿‡èƒ½è¢«å•ä¸€çš„window.addEventListeneræ•è·ã€‚</p>
<h5 id="window-addEventListener"><a href="#window-addEventListener" class="headerlink" title="window.addEventListener"></a>window.addEventListener</h5><h5 id="addEventListenerç›¸å…³çš„ä¸€äº›å†…å®¹"><a href="#addEventListenerç›¸å…³çš„ä¸€äº›å†…å®¹" class="headerlink" title="addEventListenerç›¸å…³çš„ä¸€äº›å†…å®¹"></a>addEventListenerç›¸å…³çš„ä¸€äº›å†…å®¹</h5><p>W3C DOM2 <a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=t0fRx2nVaR1eu7VXBZ0Oyw==./f7iMYPHVLL1SJ7Tsr8UBsyS07dvVmnWFnPkFkJMUE383Svkr3So82kOIjNpQpQl">Events</a>è§„èŒƒä¸­æä¾›çš„æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨çš„æ–¹æ³•, åœ¨è¿™ä¹‹å‰å‡ä½¿ç”¨<br><code>el.onclick</code>çš„å½¢å¼ï¼ˆDOM0 è§„èŒƒçš„åŸºæœ¬å†…å®¹ï¼Œå‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒï¼‰ã€‚</p>
<p>æ³¨æ„ï¼š <a target="_blank" rel="noopener" href="https://link.segmentfault.com/?enc=jhXgag8h/rd9UmLYcpREUw==.gyww6nUd6BCIKiObOuusn+K7pdiHTFxvnJrdeLqnQ2YuJAup9f50b3dTfzUjfcWVmy/T+2pz16NB64TCAJStAbOv8JVXfXroRUjMA3B3dXo=">æ¥å£çš„å‡ ç§è¯­æ³•</a></p>
<h5 id="erroräº‹ä»¶æ•è·èµ„æºåŠ è½½é”™è¯¯"><a href="#erroräº‹ä»¶æ•è·èµ„æºåŠ è½½é”™è¯¯" class="headerlink" title="erroräº‹ä»¶æ•è·èµ„æºåŠ è½½é”™è¯¯"></a>erroräº‹ä»¶æ•è·èµ„æºåŠ è½½é”™è¯¯</h5><p>èµ„æºåŠ è½½å¤±è´¥ï¼Œä¸ä¼šå†’æ³¡ï¼Œä½†æ˜¯ä¼šè¢«addEventListeneræ•è·ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‡å®šåœ¨åŠ è½½å¤±è´¥äº‹ä»¶çš„æ•è·é˜¶æ®µæ•è·è¯¥é”™è¯¯ã€‚</p>
<p>æ³¨æ„: æ¥å£åŒæ—¶ä¹Ÿèƒ½æ•è·è¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;error&quot;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> eventType = [].<span class="property">toString</span>.<span class="title function_">call</span>(e, e);</span><br><span class="line">    <span class="keyword">if</span> (eventType === <span class="string">&quot;[object Event]&quot;</span>) &#123; <span class="comment">// è¿‡æ»¤æ‰è¿è¡Œæ—¶é”™è¯¯</span></span><br><span class="line">      <span class="comment">// ä¸ŠæŠ¥åŠ è½½é”™è¯¯</span></span><br><span class="line">      <span class="title function_">report</span>(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="unhandledrejectionäº‹ä»¶æ•è·Promiseå¼‚å¸¸"><a href="#unhandledrejectionäº‹ä»¶æ•è·Promiseå¼‚å¸¸" class="headerlink" title="unhandledrejectionäº‹ä»¶æ•è·Promiseå¼‚å¸¸"></a>unhandledrejectionäº‹ä»¶æ•è·Promiseå¼‚å¸¸</h5><p>æœ€æ–°çš„è§„èŒƒä¸­å®šä¹‰äº† unhandledrejectionäº‹ä»¶ç”¨äºå…¨å±€æ•è·promiseå¯¹è±¡æ²¡æœ‰rejectionå¤„ç†å™¨æ—¶å¼‚å¸¸æƒ…å†µã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;unhandledrejection&quot;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="comment">// ...your code here to handle the unhandled rejection...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Prevent the default handling (error in console)</span></span><br><span class="line">    event.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Promise-then-catch-cb-finally"><a href="#Promise-then-catch-cb-finally" class="headerlink" title="Promise.then().catch(cb).finally()"></a>Promise.then().catch(cb).finally()</h4><p>Promiseä¸­çš„é”™è¯¯ä¼šè¢«Promise.prototype.catchæ•è·ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡è¿™ç§æ–¹å¼æ•è·é”™è¯¯ï¼Œè¿™åŒ…æ‹¬ä¸€äº›ä¸æ”¯æŒunhandledrejectionäº‹ä»¶çš„ç¯å¢ƒä¸­promisede polyfillå®ç°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">&#x27;Uncaught Exception!&#x27;</span>;</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e); <span class="comment">// Uncaught Exception!</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="å°è£…XMLHttpRequest-fetch-è¦†å†™è¯·æ±‚æ¥å£å¯¹è±¡"><a href="#å°è£…XMLHttpRequest-fetch-è¦†å†™è¯·æ±‚æ¥å£å¯¹è±¡" class="headerlink" title="å°è£…XMLHttpRequest&amp;fetch | è¦†å†™è¯·æ±‚æ¥å£å¯¹è±¡"></a>å°è£…XMLHttpRequest&amp;fetch | è¦†å†™è¯·æ±‚æ¥å£å¯¹è±¡</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¦†å†™XMLHttpRequest API</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">var</span> xmlhttp = <span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>;</span><br><span class="line">  <span class="keyword">var</span> _oldSend = xmlhttp.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">send</span>;</span><br><span class="line">  <span class="keyword">var</span> _handleEvent = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (event &amp;&amp; event.<span class="property">currentTarget</span> &amp;&amp; event.<span class="property">currentTarget</span>.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="title function_">report</span>(event)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  xmlhttp.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">send</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>[<span class="string">&#x27;addEventListener&#x27;</span>]) &#123;</span><br><span class="line">          <span class="variable language_">this</span>[<span class="string">&#x27;addEventListener&#x27;</span>](<span class="string">&#x27;error&#x27;</span>, _handleEvent);</span><br><span class="line">          <span class="variable language_">this</span>[<span class="string">&#x27;addEventListener&#x27;</span>](<span class="string">&#x27;load&#x27;</span>, _handleEvent);</span><br><span class="line">          <span class="variable language_">this</span>[<span class="string">&#x27;addEventListener&#x27;</span>](<span class="string">&#x27;abort&#x27;</span>, _handleEvent);</span><br><span class="line">          <span class="variable language_">this</span>[<span class="string">&#x27;addEventListener&#x27;</span>](<span class="string">&#x27;close&#x27;</span>, _handleEvent);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> _oldStateChange = <span class="variable language_">this</span>[<span class="string">&#x27;onreadystatechange&#x27;</span>];</span><br><span class="line">          <span class="variable language_">this</span>[<span class="string">&#x27;onreadystatechange&#x27;</span>] = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">                  <span class="title function_">_handleEvent</span>(event);</span><br><span class="line">              &#125;</span><br><span class="line">              _oldStateChange &amp;&amp; _oldStateChange.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">          &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> _oldSend.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦†å†™fetch API</span></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">fetch</span>) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">var</span> _oldFetch = <span class="variable language_">window</span>.<span class="property">fetch</span>;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">fetch</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> _oldFetch</span><br><span class="line">    .<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span> (!res.<span class="property">ok</span>) &#123;</span><br><span class="line">        <span class="comment">// True if status is HTTP 2xx</span></span><br><span class="line">        <span class="title function_">report</span>(res)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">      <span class="title function_">report</span>(res)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ—¥å¿—ä¸ŠæŠ¥çš„æ–¹å¼"><a href="#æ—¥å¿—ä¸ŠæŠ¥çš„æ–¹å¼" class="headerlink" title="æ—¥å¿—ä¸ŠæŠ¥çš„æ–¹å¼"></a>æ—¥å¿—ä¸ŠæŠ¥çš„æ–¹å¼</h3><ul>
<li>å¼‚æ­¥è¯·æ±‚ä¸ŠæŠ¥, åç«¯æä¾›æ¥å£ï¼Œæˆ–è€…ç›´æ¥å‘åˆ°æ—¥å¿—æœåŠ¡å™¨</li>
<li>imgè¯·æ±‚ä¸ŠæŠ¥, urlå‚æ•°å¸¦ä¸Šé”™è¯¯ä¿¡æ¯<ul>
<li><code>eg:(new Image()).src = &#39;http://baidu.com/tesjk?r=tksjk&#39;</code></li>
</ul>
</li>
</ul>
<h4 id="æ³¨æ„è·¨æºè„šæœ¬å¼‚å¸¸"><a href="#æ³¨æ„è·¨æºè„šæœ¬å¼‚å¸¸" class="headerlink" title="æ³¨æ„è·¨æºè„šæœ¬å¼‚å¸¸"></a>æ³¨æ„è·¨æºè„šæœ¬å¼‚å¸¸</h4><p>å½“åŠ è½½è‡ªä¸åŒåŸŸçš„è„šæœ¬ä¸­å‘ç”Ÿè¯­æ³•é”™è¯¯æ—¶ï¼Œä¸ºé¿å…ä¿¡æ¯æ³„éœ²ï¼Œè¯­æ³•é”™è¯¯çš„ç»†èŠ‚å°†ä¸ä¼šæŠ¥å‘Šï¼Œè€Œä»£ä¹‹ç®€å•çš„ â€œScript error.â€</p>
<p>ç”±äºåŒæºç­–ç•¥å½±å“ï¼Œæµè§ˆå™¨é™åˆ¶è·¨æºè„šæœ¬çš„é”™è¯¯è®¿é—®ï¼Œè¿™æ ·è·¨æºè„šæœ¬é”™è¯¯æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://segmentfault.com/img/bV7tjY?w=372&h=126" alt="è·¨æºçš„è„šæœ¬çš„å¼‚å¸¸"></p>
<p>åœ¨H5çš„è§„å®šä¸­ï¼Œåªè¦æ»¡è¶³ä¸‹é¢ä¿©ä¸ªæ¡ä»¶ï¼Œæ˜¯å…è®¸è·å–è·¨æºè„šæœ¬çš„é”™è¯¯ä¿¡æ¯çš„ã€‚</p>
<ol>
<li>å®¢æˆ·ç«¯åœ¨scriptæ ‡ç­¾ä¸Šå¢åŠ crossoriginå±æ€§ï¼›</li>
<li>æœåŠ¡ç«¯è®¾ç½®jsèµ„æºå“åº”å¤´Access-Control-Origin:*ï¼ˆæˆ–è€…æ˜¯åŸŸåï¼‰ã€‚</li>
</ol>
<h3 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h3><h4 id="ä¸šç•Œå·²ç»æœ‰çš„ç›‘æ§å¹³å°"><a href="#ä¸šç•Œå·²ç»æœ‰çš„ç›‘æ§å¹³å°" class="headerlink" title="ä¸šç•Œå·²ç»æœ‰çš„ç›‘æ§å¹³å°"></a>ä¸šç•Œå·²ç»æœ‰çš„ç›‘æ§å¹³å°</h4><ul>
<li>Sentryå¼€æº</li>
<li>é˜¿é‡Œçš„ARMS</li>
<li>fundebug</li>
<li>FrontJS</li>
</ul>
<h4 id="å‡ ä¸ªå¼‚å¸¸ç›‘æ§çš„é—®é¢˜"><a href="#å‡ ä¸ªå¼‚å¸¸ç›‘æ§çš„é—®é¢˜" class="headerlink" title="å‡ ä¸ªå¼‚å¸¸ç›‘æ§çš„é—®é¢˜"></a>å‡ ä¸ªå¼‚å¸¸ç›‘æ§çš„é—®é¢˜</h4><ul>
<li><p>å¦‚ä½•ä¿è¯å¤§å®¶æäº¤çš„ä»£ç æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Ÿ å¦‚ä½•äº†è§£å‰ç«¯é¡¹ç›®çš„è¿è¡Œæ˜¯å¦æ­£å¸¸ï¼Œæ˜¯å¦å­˜åœ¨é”™è¯¯ï¼Ÿ</p>
<p>ä»£ç è´¨é‡ä½“ç³»æ§åˆ¶å’Œé”™è¯¯ç›‘æ§ä»¥åŠæ€§èƒ½åˆ†æ</p>
</li>
<li><p>å¦‚æœç”¨æˆ·ä½¿ç”¨ç½‘é¡µï¼Œå‘ç°ç™½å±ï¼Œç°åœ¨è”ç³»ä¸Šäº†ä½ ä»¬ï¼Œä½ ä»¬ä¼šå‘ä»–è¯¢é—®ä»€ä¹ˆä¿¡æ¯å‘¢ï¼Ÿå…ˆæƒ³ä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šç™½å±ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»¥ç”¨æˆ·è®¿é—®é¡µé¢çš„è¿‡ç¨‹ä¸ºé¡ºåºï¼Œå¤§è‡´æ’æŸ¥ä¸€ä¸‹</p>
<ol>
<li>ç”¨æˆ·æ²¡æ‰“å¼€ç½‘ç»œ</li>
<li>DNSåŸŸååŠ«æŒ</li>
<li>httpåŠ«æŒ</li>
<li>cdnæˆ–æ˜¯å…¶ä»–èµ„æºæ–‡ä»¶è®¿é—®å‡ºé”™</li>
<li>æœåŠ¡å™¨é”™è¯¯</li>
<li>å‰ç«¯ä»£ç é”™è¯¯</li>
<li>å‰ç«¯å…¼å®¹æ€§é—®é¢˜</li>
<li>ç”¨æˆ·æ“ä½œå‡ºé”™</li>
</ol>
</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šå¯èƒ½å‘ç”Ÿé”™è¯¯çš„ç¯èŠ‚ï¼Œæˆ‘ä»¬éœ€è¦å‘ç”¨æˆ·æ‰‹æœºä¸€ä¸‹ä»¥ä¸‹çš„ç”¨æˆ·ä¿¡æ¯</p>
<ol>
<li>å½“å‰çš„ç½‘ç»œçŠ¶æ€</li>
<li>è¿è¥å•†</li>
<li>åœ°ç†ä½ç½®</li>
<li>è®¿é—®æ—¶é—´</li>
<li>å®¢æˆ·ç«¯çš„ç‰ˆæœ¬(å¦‚æœæ˜¯é€šè¿‡å®¢æˆ·ç«¯è®¿é—®)</li>
<li>ç³»ç»Ÿç‰ˆæœ¬</li>
<li>æµè§ˆå™¨ä¿¡æ¯</li>
<li>è®¾å¤‡åˆ†è¾¨ç‡</li>
<li>é¡µé¢çš„æ¥æº</li>
<li>ç”¨æˆ·çš„è´¦å·ä¿¡æ¯</li>
<li>é€šè¿‡performance APIæ”¶é›†ç”¨æˆ·å„ä¸ªé¡µé¢è®¿é—®æµç¨‹æ‰€æ¶ˆè€—çš„æ—¶é—´</li>
<li>æ”¶é›†ç”¨æˆ·jsä»£ç æŠ¥é”™çš„ä¿¡æ¯</li>
</ol>
<ul>
<li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†è„šæœ¬ä»£ç å‹ç¼©ï¼Œç„¶è€Œæˆ‘ä»¬åˆä¸æƒ³å°†sourcemapæ–‡ä»¶å‘å¸ƒåˆ°çº¿ä¸Šï¼Œæˆ‘ä»¬æ€ä¹ˆæ•è·åˆ°é”™è¯¯çš„å…·ä½“ä¿¡æ¯ï¼Ÿ</li>
<li>CSSæ–‡ä»¶ä¸­ä¹Ÿå­˜åœ¨å¼•ç”¨èµ„æºï¼Œ@font-face, background-image â€¦ç­‰è¿™äº›è¯·æ±‚é”™è¯¯è¯¥å¦‚ä½•è¿›è¡Œé”™è¯¯æ•è·ï¼Ÿ</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li>Webè§„èŒƒä¸­ç›¸å…³å‰ç«¯å¼‚å¸¸<ul>
<li>DOMå¤„ç†å¼‚å¸¸</li>
<li>ECMAScriptå¤„ç†å¼‚å¸¸</li>
</ul>
</li>
<li>å¼‚å¸¸æŒ‰ç…§æ•è·æ–¹å¼åˆ†ç±»<ul>
<li>è¿è¡Œæ—¶å¼‚å¸¸</li>
<li>èµ„æºåŠ è½½å¼‚å¸¸</li>
<li>å¼‚æ­¥è¯·æ±‚å¼‚å¸¸</li>
<li>Promiseå¼‚å¸¸</li>
</ul>
</li>
<li>å¼‚å¸¸çš„æ•è·æ–¹å¼<ul>
<li>try-catch (ESæä¾›åŸºæœ¬çš„é”™è¯¯æ•è·è¯­æ³•)<ul>
<li>åªèƒ½æ•è·åŒæ­¥ä»£ç çš„å¼‚å¸¸</li>
<li><del>å›è°ƒ</del></li>
<li><del>setTimeout</del></li>
<li><del>promise</del></li>
</ul>
</li>
<li>window.onerror &#x3D; cb (DOM0)<ul>
<li>img</li>
<li>script</li>
<li>link</li>
</ul>
</li>
<li>window.addEventListener(â€˜errorâ€™, cb, true) (DOM2)</li>
<li>window.addEventListener(â€œunhandledrejectionâ€, cb) (DOM4)</li>
<li>Promise.then().catch(cb)</li>
<li>å°è£…XMLHttpRequest&amp;fetch | è¦†å†™è¯·æ±‚æ¥å£å¯¹è±¡</li>
</ul>
</li>
</ul>
<p>æ³¨æ„ç‚¹ï¼šè·¨æºè„šæœ¬å¼‚å¸¸çš„æ•è·</p>
<ul>
<li><p>æ—¥å¿—ä¸ŠæŠ¥çš„æ–¹å¼</p>
<ul>
<li>å¼‚æ­¥è¯·æ±‚ä¸ŠæŠ¥</li>
<li>new imgä¸ŠæŠ¥ é¿å…è·¨åŸŸé—®é¢˜</li>
</ul>
</li>
<li><p>æ‰©å±•é˜…è¯»</p>
<ul>
<li>ä¸šç•Œå·²æœ‰çš„å¼‚å¸¸ç›‘æ§å¹³å°</li>
<li>å‡ ä¸ªè·Ÿå¼‚å¸¸ç›‘æ§æœ‰å…³çš„é—®é¢˜</li>
</ul>
</li>
</ul>
<p>ä¸ºäº†åœ¨ç§»åŠ¨ç«¯é¡¹ç›®ä¸­å®ç°å‰ç«¯é”™è¯¯ç›‘æ§ï¼Œå¹¶è€ƒè™‘æç«¯æ–­ç½‘ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªå¥å£®ä¸”å…¨é¢çš„æŠ€æœ¯æ–¹æ¡ˆã€‚ç§»åŠ¨ç«¯ç¯å¢ƒå…·æœ‰ç½‘ç»œä¸ç¨³å®šï¼ˆå¼±ç½‘ã€æ–­ç½‘ï¼‰ã€è®¾å¤‡å¤šæ ·æ€§ã€æ“ä½œç³»ç»Ÿå·®å¼‚ç­‰ç‰¹ç‚¹ï¼Œå› æ­¤æ–¹æ¡ˆéœ€è¦å…·å¤‡ä»¥ä¸‹èƒ½åŠ›ï¼š</p>
<ol>
<li><p>é”™è¯¯æ•è·ï¼šå…¨é¢æ•è·JSé”™è¯¯ã€èµ„æºåŠ è½½é”™è¯¯ã€æ¥å£é”™è¯¯ã€æ¡†æ¶é”™è¯¯ï¼ˆå¦‚React&#x2F;Vueï¼‰ã€Promiseé”™è¯¯ç­‰ã€‚</p>
</li>
<li><p>æ•°æ®å­˜å‚¨ï¼šåœ¨æ–­ç½‘æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå°†é”™è¯¯ä¿¡æ¯æš‚å­˜æœ¬åœ°ï¼Œå¾…ç½‘ç»œæ¢å¤åä¸ŠæŠ¥ã€‚</p>
</li>
<li><p>ä¸ŠæŠ¥æœºåˆ¶ï¼šæ”¯æŒé‡è¯•æœºåˆ¶ï¼Œé¿å…å› ç½‘ç»œé—®é¢˜å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>
</li>
<li><p>æ•°æ®å‹ç¼©ä¸æ‰¹å¤„ç†ï¼šå‡å°‘ç½‘ç»œè¯·æ±‚ï¼ŒèŠ‚çœæµé‡ã€‚</p>
</li>
<li><p>åŒºåˆ†é”™è¯¯ç±»å‹ï¼šå¯¹é”™è¯¯è¿›è¡Œåˆ†ç±»ï¼Œä¾¿äºåˆ†æã€‚</p>
</li>
</ol>
<p> æˆ‘ä»¬å°†ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œè®¾è®¡ï¼š</p>
<p> ä¸€ã€é”™è¯¯æ•è·</p>
<p> äºŒã€é”™è¯¯ä¿¡æ¯å¤„ç†</p>
<p> ä¸‰ã€æœ¬åœ°å­˜å‚¨ä¸ä¸ŠæŠ¥</p>
<p> å››ã€ç½‘ç»œæ¢å¤åçš„å¤„ç†</p>
<p> äº”ã€å…¶ä»–ä¼˜åŒ–æªæ–½</p>
<p> è¯¦ç»†æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<p> ä¸€ã€é”™è¯¯æ•è·</p>
<ol>
<li>JavaScriptè¿è¡Œæ—¶é”™è¯¯</li>
</ol>
<p>â€‹    - ä½¿ç”¨ <code>window.onerror</code> æ•è·å…¨å±€åŒæ­¥é”™è¯¯ã€‚</p>
<p>â€‹    - æ³¨æ„ï¼š<code>window.onerror</code> æ— æ³•æ•è·è¯­æ³•é”™è¯¯ï¼ˆä¸€èˆ¬ä¼šåœ¨ç¼–è¯‘é˜¶æ®µå‘ç°ï¼Œä¸ä¼šè¿›å…¥çº¿ä¸Šç¯å¢ƒï¼‰å’Œè·¨åŸŸè„šæœ¬é”™è¯¯ï¼ˆéœ€è¦ä¸ºè·¨åŸŸè„šæœ¬æ·»åŠ  <code>crossorigin</code> å±æ€§ï¼‰ã€‚</p>
<ol start="2">
<li>Promiseé”™è¯¯</li>
</ol>
<p>â€‹    - ä½¿ç”¨ <code>unhandledrejection</code> äº‹ä»¶æ•è·æœªå¤„ç†çš„Promiseæ‹’ç»ã€‚</p>
<ol start="3">
<li>èµ„æºåŠ è½½é”™è¯¯</li>
</ol>
<p>â€‹    - ä½¿ç”¨ <code>window.addEventListener(&#39;error&#39;, callback, true)</code> æ•è·èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€è„šæœ¬ã€æ ·å¼ï¼‰åŠ è½½é”™è¯¯ã€‚æ³¨æ„ç¬¬ä¸‰ä¸ªå‚æ•°ä¸º <code>true</code>ï¼ˆæ•è·é˜¶æ®µï¼‰ã€‚</p>
<ol start="4">
<li>æ¡†æ¶é”™è¯¯</li>
</ol>
<p>â€‹    - Reactï¼šä½¿ç”¨ <code>ErrorBoundary</code> ç»„ä»¶æ•è·ç»„ä»¶æ ‘ä¸­çš„é”™è¯¯ã€‚</p>
<p>â€‹    - Vueï¼šä½¿ç”¨ <code>Vue.config.errorHandler</code> å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°ã€‚</p>
<ol start="5">
<li>æ§åˆ¶å°é”™è¯¯ï¼ˆå¯é€‰ï¼‰</li>
</ol>
<p>â€‹    - é‡å†™ <code>console.error</code> æ–¹æ³•ï¼Œæ•è·é€šè¿‡ <code>console.error</code> è¾“å‡ºçš„é”™è¯¯ã€‚</p>
<ol start="6">
<li>æ¥å£é”™è¯¯</li>
</ol>
<p>â€‹    - é‡å†™ <code>XMLHttpRequest</code> å’Œ <code>fetch</code> æ–¹æ³•ï¼Œæ‹¦æˆªè¯·æ±‚å¹¶ç›‘å¬é”™è¯¯ã€‚</p>
<p> äºŒã€é”™è¯¯ä¿¡æ¯å¤„ç†</p>
<p> å¯¹æ•è·åˆ°çš„é”™è¯¯ä¿¡æ¯è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œæå–å…³é”®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<p>   - é”™è¯¯ç±»å‹ï¼ˆå¦‚JSé”™è¯¯ã€èµ„æºé”™è¯¯ã€Promiseé”™è¯¯ç­‰ï¼‰</p>
<p>   - é”™è¯¯æ¶ˆæ¯</p>
<p>   - é”™è¯¯å †æ ˆï¼ˆå°½å¯èƒ½å®Œæ•´ï¼‰</p>
<p>   - å‘ç”Ÿé”™è¯¯çš„é¡µé¢URL</p>
<p>   - è®¾å¤‡ä¿¡æ¯ï¼ˆå¦‚UAã€å±å¹•åˆ†è¾¨ç‡ã€è®¾å¤‡å‹å·ç­‰ï¼Œé€šè¿‡navigatorè·å–ï¼‰</p>
<p>   - ç”¨æˆ·ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ç™»å½•ç”¨æˆ·ï¼‰</p>
<p>   - å‘ç”Ÿæ—¶é—´</p>
<p>   - å…¶ä»–ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚å½“å‰è·¯ç”±ã€å‰ç«¯ç‰ˆæœ¬å·ç­‰ï¼‰</p>
<p> ä¸‰ã€æœ¬åœ°å­˜å‚¨ä¸ä¸ŠæŠ¥</p>
<ol>
<li>æœ¬åœ°å­˜å‚¨</li>
</ol>
<p>â€‹    - ä½¿ç”¨æµè§ˆå™¨æä¾›çš„æŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚IndexedDBï¼‰æ¥å­˜å‚¨é”™è¯¯æ—¥å¿—ã€‚å› ä¸ºIndexedDBå­˜å‚¨å®¹é‡è¾ƒå¤§ï¼ˆé€šå¸¸50MBä»¥ä¸Šï¼‰ï¼Œä¸”æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p>â€‹    - åœ¨æ–­ç½‘æƒ…å†µä¸‹ï¼Œå°†é”™è¯¯æ—¥å¿—å­˜å…¥IndexedDBï¼Œå¹¶æ ‡è®°ä¸ºå¾…ä¸ŠæŠ¥çŠ¶æ€ã€‚</p>
<ol start="2">
<li>ä¸ŠæŠ¥æœºåˆ¶</li>
</ol>
<p>â€‹    - æ¯æ¬¡å‘ç”Ÿé”™è¯¯ï¼Œå…ˆå°è¯•ç«‹å³ä¸ŠæŠ¥ï¼ˆå¦‚æœç½‘ç»œæ­£å¸¸ï¼‰ã€‚</p>
<p>â€‹    - å¦‚æœä¸ŠæŠ¥å¤±è´¥ï¼ˆç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨é”™è¯¯ï¼‰ï¼Œåˆ™å°†é”™è¯¯æ—¥å¿—å­˜å…¥IndexedDBã€‚</p>
<p>â€‹    - å®šæ—¶æ£€æŸ¥ï¼ˆä¾‹å¦‚æ¯5åˆ†é’Ÿï¼‰IndexedDBä¸­æ˜¯å¦æœ‰å¾…ä¸ŠæŠ¥çš„é”™è¯¯æ—¥å¿—ï¼Œå¦‚æœæœ‰ä¸”ç½‘ç»œå¯ç”¨ï¼Œåˆ™è¿›è¡Œä¸ŠæŠ¥ã€‚</p>
<p>â€‹    - åœ¨é¡µé¢å¯è§æ€§å˜åŒ–æ—¶ï¼ˆä¾‹å¦‚ç”¨æˆ·åˆ‡æ¢å›åº”ç”¨ï¼‰æ£€æŸ¥å¹¶ä¸ŠæŠ¥ã€‚</p>
<p>â€‹    - åœ¨é¡µé¢å…³é—­å‰ï¼ˆ<code>visibilitychange</code> å’Œ <code>pagehide</code> äº‹ä»¶ï¼‰å°è¯•ä¸ŠæŠ¥ï¼Œä½†è¦æ³¨æ„æ­¤æ—¶ä¸èƒ½ä½¿ç”¨åŒæ­¥çš„XHRï¼ˆæ¨èä½¿ç”¨ <code>navigator.sendBeacon</code> æ–¹æ³•ï¼‰ã€‚</p>
<ol start="3">
<li>é‡è¯•æœºåˆ¶</li>
</ol>
<p>â€‹    - æ¯æ¡é”™è¯¯æ—¥å¿—è®¾ç½®é‡è¯•æ¬¡æ•°ï¼ˆå¦‚3æ¬¡ï¼‰ï¼Œè¶…è¿‡é‡è¯•æ¬¡æ•°åˆ™ä¸¢å¼ƒï¼ˆé¿å…å­˜å‚¨çˆ†æ»¡ï¼‰ã€‚</p>
<p>â€‹    - æ¯æ¬¡é‡è¯•é—´éš”æ—¶é—´é€’å¢ï¼ˆæŒ‡æ•°é€€é¿ç­–ç•¥ï¼‰ã€‚</p>
<p> å››ã€ç½‘ç»œæ¢å¤åçš„å¤„ç†</p>
<p>   ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–ï¼ˆ<code>navigator.onLine</code>ï¼‰ï¼Œå½“ç½‘ç»œæ¢å¤æ—¶ï¼Œè§¦å‘ä¸€æ¬¡ä¸ŠæŠ¥ã€‚</p>
<p> äº”ã€å…¶ä»–ä¼˜åŒ–æªæ–½</p>
<ol>
<li><p>æ•°æ®å‹ç¼©ï¼šåœ¨å­˜å‚¨å’Œä¸ŠæŠ¥å‰ï¼Œå¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼ˆå¦‚ä½¿ç”¨gzipï¼Œä½†å‰ç«¯å‹ç¼©é€šå¸¸ç”¨lz-stringç­‰åº“è¿›è¡Œç®€å•å‹ç¼©ï¼Œæˆ–ä½¿ç”¨JSONå­—ç¬¦ä¸²å‡å°‘å†—ä½™å­—æ®µåï¼‰ã€‚</p>
</li>
<li><p>æ‰¹é‡ä¸ŠæŠ¥ï¼šå°†å¤šä¸ªé”™è¯¯æ—¥å¿—åˆå¹¶ä¸ºä¸€ä¸ªè¯·æ±‚ä¸ŠæŠ¥ï¼Œå‡å°‘è¯·æ±‚æ¬¡æ•°ã€‚</p>
</li>
<li><p>é‡‡æ ·ç‡ï¼šæ ¹æ®é”™è¯¯ç±»å‹å’Œä¸¥é‡ç¨‹åº¦è®¾ç½®é‡‡æ ·ç‡ï¼Œé¿å…å¤§é‡é‡å¤é”™è¯¯å¯¼è‡´å­˜å‚¨å’Œä¸ŠæŠ¥å‹åŠ›ã€‚</p>
</li>
<li><p>å­˜å‚¨ä¸Šé™ï¼šè®¾ç½®IndexedDBå­˜å‚¨ä¸Šé™ï¼ˆå¦‚æœ€å¤šå­˜å‚¨1000æ¡é”™è¯¯æ—¥å¿—ï¼‰ï¼Œè¶…è¿‡æ—¶ä¸¢å¼ƒæ—§æ—¥å¿—ã€‚</p>
</li>
<li><p>åŒºåˆ†ç¯å¢ƒï¼šå¼€å‘ç¯å¢ƒä¸ä¸ŠæŠ¥ï¼Œé¿å…å¼€å‘è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¤§é‡é”™è¯¯ä¸ŠæŠ¥ã€‚</p>
</li>
</ol>
<h1 id="å‰ç«¯åœºæ™¯"><a href="#å‰ç«¯åœºæ™¯" class="headerlink" title="å‰ç«¯åœºæ™¯"></a>å‰ç«¯åœºæ™¯</h1><p>å‚è€ƒæ€è·¯ï¼š<a href="%5B%E5%89%8D%E7%AB%AF%E5%8D%8F%E5%90%8C%E6%96%87%E6%A1%A3%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF_%E5%89%8D%E7%AB%AF%E6%96%87%E6%A1%A3%E5%8D%8F%E5%90%8C-CSDN%E5%8D%9A%E5%AE%A2%5D" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;Bruce__taotao&#x2F;article&#x2F;details&#x2F;148200821#:~:text&#x3D;æœ¬æ–‡ä»‹ç»äº†å‰ç«¯ååŒæ–‡æ¡£ç³»ç»Ÿçš„å®ç°æŠ€æœ¯å’Œæ–¹æ³•ï¼Œä¸»è¦åŒ…æ‹¬å®æ—¶åŒæ­¥æœºåˆ¶ï¼ˆWebSocketã€OTå’ŒCRDTç®—æ³•ï¼‰ã€å®æ—¶æ–‡æœ¬ç¼–è¾‘ï¼ˆDiffç®—æ³•å’Œåä½œæ¡†æ¶ï¼‰ã€åç«¯å®ç°ï¼ˆæ•°æ®åº“åŒæ­¥ä¸æŠ€æœ¯æ ˆï¼‰ä»¥åŠå‰ç«¯æŠ€æœ¯ï¼ˆReact%2FVueå’ŒWebRTCï¼‰ã€‚ æ­¤å¤–ï¼Œè¿˜è®¨è®ºäº†åŠŸèƒ½æ‰©å±•å¦‚ç‰ˆæœ¬æ§åˆ¶å’Œæƒé™ç®¡ç†ï¼Œå¹¶æä¾›äº†åŸºäºVue.jså’ŒNode.jsçš„ç®€å•å®ç°ç¤ºä¾‹ã€‚,ååŒæ–‡æ¡£å¼€å‘éœ€ç»“åˆå¤šç§æŠ€æœ¯ï¼Œç¡®ä¿å®æ—¶æ€§å’Œæ•°æ®ä¸€è‡´æ€§ã€‚ _å‰ç«¯ååŒç®—æ³•">å‰ç«¯ååŒæ–‡æ¡£å®ç°æ€è·¯</a></p>
<h2 id="RNå®¹å™¨ä¸æµè§ˆå™¨å®¹å™¨çš„åŒºåˆ«"><a href="#RNå®¹å™¨ä¸æµè§ˆå™¨å®¹å™¨çš„åŒºåˆ«" class="headerlink" title="RNå®¹å™¨ä¸æµè§ˆå™¨å®¹å™¨çš„åŒºåˆ«"></a>RNå®¹å™¨ä¸æµè§ˆå™¨å®¹å™¨çš„åŒºåˆ«</h2><ol>
<li><strong>RNå®¹å™¨ (React Native å®¹å™¨)</strong><ul>
<li><strong>ç›®æ ‡ï¼š</strong> åœ¨**åŸç”Ÿç§»åŠ¨åº”ç”¨ï¼ˆiOS&#x2F;Androidï¼‰**ä¸­è¿è¡Œã€‚</li>
<li><strong>æ ¸å¿ƒï¼š</strong> å®ƒæ˜¯ä¸€ä¸ª<strong>åŸç”Ÿåº”ç”¨æ¡†æ¶</strong>ï¼ˆè™½ç„¶ä½¿ç”¨äº†JavaScriptï¼‰ã€‚React Native åº”ç”¨æœ€ç»ˆä¼šè¢«ç¼–è¯‘&#x2F;æ‰“åŒ…æˆåŒ…å«åŸç”Ÿä»£ç ï¼ˆObjective-C&#x2F;Swift for iOS, Java&#x2F;Kotlin for Androidï¼‰çš„å®‰è£…åŒ…ï¼ˆ.ipa&#x2F;.apkï¼‰ã€‚</li>
<li><strong>æ¸²æŸ“ï¼š</strong> <strong>ä¸ä¾èµ–æµè§ˆå™¨å¼•æ“</strong>ã€‚RN çš„æ ¸å¿ƒåœ¨äºå…¶<strong>åŸç”Ÿæ¡¥æ¥</strong>ã€‚ä½ çš„ JavaScript ä»£ç ï¼ˆæè¿°UIå’Œé€»è¾‘ï¼‰é€šè¿‡è¿™ä¸ªæ¡¥æ¥ä¸<strong>åŸç”ŸUIç»„ä»¶</strong>é€šä¿¡ã€‚å½“ä½ åœ¨ RN ä¸­å†™ä¸€ä¸ª <code>&lt;View&gt;</code> æˆ– <code>&lt;Text&gt;</code> æ—¶ï¼Œæœ€ç»ˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„æ˜¯å¹³å°å¯¹åº”çš„åŸç”Ÿè§†å›¾ï¼ˆ<code>UIView</code> on iOS, <code>android.view.View</code> on Androidï¼‰ã€‚JavaScript çº¿ç¨‹è®¡ç®—å¸ƒå±€å’Œé€»è¾‘ï¼Œç„¶åé€šè¿‡æ¡¥æ¥å°†æŒ‡ä»¤å‘é€åˆ°åŸç”Ÿä¸»çº¿ç¨‹è¿›è¡Œå®é™…çš„æ¸²æŸ“ã€‚</li>
<li><strong>èƒ½åŠ›ï¼š</strong> å¯ä»¥<strong>ç›´æ¥è®¿é—®ç»å¤§éƒ¨åˆ†åŸç”Ÿè®¾å¤‡åŠŸèƒ½</strong>ï¼ˆæ‘„åƒå¤´ã€åœ°ç†ä½ç½®ã€ä¼ æ„Ÿå™¨ã€æ–‡ä»¶ç³»ç»Ÿã€è“ç‰™ç­‰ï¼‰ï¼Œé€šè¿‡ JavaScript æ¡¥æ¥è°ƒç”¨åŸç”Ÿæ¨¡å—å®ç°ã€‚æ€§èƒ½é€šå¸¸æ¥è¿‘çº¯åŸç”Ÿåº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚UIå’ŒåŠ¨ç”»æ–¹é¢ã€‚</li>
<li><strong>æ‰“åŒ…ï¼š</strong> æœ€ç»ˆæ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„ã€éœ€è¦å®‰è£…çš„<strong>åŸç”Ÿç§»åŠ¨åº”ç”¨</strong>ã€‚</li>
<li><strong>å¼€å‘ä½“éªŒï¼š</strong> ä½¿ç”¨ JavaScript (æˆ– TypeScript) å’Œ React èŒƒå¼å¼€å‘ï¼Œä½†éœ€è¦ç†è§£åŸç”Ÿæ¦‚å¿µï¼ˆå¦‚æ¡¥æ¥ã€çº¿ç¨‹ã€åŸç”Ÿæ¨¡å—ï¼‰ä»¥åŠç‰¹å®šå¹³å°çš„å·®å¼‚ã€‚å¯ä»¥ä½¿ç”¨çƒ­é‡è½½ã€‚</li>
<li><strong>ä¾‹å­ï¼š</strong> Facebookã€Instagramã€Discordã€Shopify çš„éƒ¨åˆ†åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li><strong>æµè§ˆå™¨å®¹å™¨ (Browser Container &#x2F; WebView)</strong><ul>
<li><strong>ç›®æ ‡ï¼š</strong> åœ¨<strong>ä»»ä½•æœ‰å…¼å®¹æµè§ˆå™¨ï¼ˆæˆ– WebView æ§ä»¶ï¼‰</strong> çš„ç¯å¢ƒï¼ˆæ¡Œé¢ã€ç§»åŠ¨ã€ç”µè§†ã€ç”šè‡³æŸäº›åµŒå…¥å¼è®¾å¤‡ï¼‰ä¸­è¿è¡Œã€‚</li>
<li><strong>æ ¸å¿ƒï¼š</strong> å®ƒæ˜¯ä¸€ä¸ª<strong>ç½‘é¡µæ¸²æŸ“å¼•æ“</strong>ï¼ˆå¦‚ WebKit, Blink, Geckoï¼‰ã€‚æµè§ˆå™¨å®¹å™¨ï¼ˆå¦‚ Chrome, Safari, Firefoxï¼Œæˆ–è€…ç§»åŠ¨ App å†…åµŒçš„ <code>UIWebView</code>&#x2F;<code>WKWebView</code> on iOS, <code>WebView</code> on Androidï¼‰çš„å·¥ä½œå°±æ˜¯ä¸‹è½½ã€è§£æ HTML&#x2F;CSS&#x2F;JavaScript ä»£ç ï¼Œå¹¶æ ¹æ® Web æ ‡å‡†å°†å…¶æ¸²æŸ“æˆå¯è§†åŒ–çš„ç½‘é¡µã€‚</li>
<li><strong>æ¸²æŸ“ï¼š</strong> <strong>å®Œå…¨ä¾èµ–æµè§ˆå™¨å¼•æ“</strong>ã€‚å®ƒæ¸²æŸ“çš„æ˜¯ <strong>HTML DOM å…ƒç´ </strong> å’Œ <strong>CSS æ ·å¼</strong>ã€‚JavaScript è¿è¡Œåœ¨æµè§ˆå™¨æä¾›çš„æ²™ç›’ç¯å¢ƒä¸­ï¼Œæ“ä½œ DOM å’Œ CSSOM æ¥å®ç°äº¤äº’å’ŒåŠ¨æ€æ•ˆæœã€‚</li>
<li><strong>èƒ½åŠ›ï¼š</strong> é€šè¿‡ Web APIsï¼ˆå¦‚ <code>Geolocation API</code>, <code>Camera API (getUserMedia)</code>, <code>Web Bluetooth</code> ç­‰ï¼‰è®¿é—®è®¾å¤‡åŠŸèƒ½ï¼Œä½†è¿™äº› API çš„<strong>æ”¯æŒåº¦ã€æƒé™æ¨¡å‹å’Œæ€§èƒ½é€šå¸¸ä¸å¦‚åŸç”Ÿè®¿é—®ç›´æ¥å’Œå¼ºå¤§</strong>ï¼Œä¸”ä¾èµ–äºæµè§ˆå™¨å‚å•†çš„å®ç°ã€‚æ€§èƒ½å—é™äºæµè§ˆå™¨æ¸²æŸ“å¼•æ“å’Œ JavaScript å¼•æ“ã€‚</li>
<li><strong>æ‰“åŒ…ï¼š</strong> æœ¬è´¨ä¸Šæ˜¯<strong>ç½‘é¡µ</strong>ï¼Œé€šè¿‡ URL è®¿é—®ï¼ˆåœ¨çº¿æˆ–ç¦»çº¿åŒ…ï¼‰ã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œå¯ä»¥é€šè¿‡ <strong>PWA</strong> æŠ€æœ¯æˆ–ç®€å•çš„ <strong>WebView å°è£…</strong> ä½¿å…¶çœ‹èµ·æ¥æ›´åƒä¸€ä¸ª Appï¼ˆæœ‰å›¾æ ‡ã€å¯åŠ¨å±ç­‰ï¼‰ï¼Œä½†å…¶æ ¸å¿ƒä»æ˜¯ç½‘é¡µã€‚</li>
<li><strong>å¼€å‘ä½“éªŒï¼š</strong> ä½¿ç”¨æ ‡å‡†çš„ Web æŠ€æœ¯ï¼ˆHTML, CSS, JavaScriptï¼‰ã€‚ä¸€æ¬¡ç¼–å†™ï¼Œç†è®ºä¸Šå¯ä»¥åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ä¸Šè¿è¡Œï¼ˆè™½ç„¶å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼‰ã€‚å¼€å‘å·¥å…·é“¾æˆç†Ÿï¼ˆæµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼‰ã€‚çƒ­é‡è½½æ˜¯æ ‡å‡†åŠŸèƒ½ã€‚</li>
<li><strong>ä¾‹å­ï¼š</strong> ä»»ä½•ç½‘ç«™æˆ– Web Appã€‚ç§»åŠ¨ç«¯å†…åµŒ WebView çš„æ··åˆåº”ç”¨ï¼ˆHybrid Appï¼‰ï¼Œæˆ–è€… PWAï¼ˆå¦‚ Twitter Lite, Starbucks PWAï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š</strong></p>
<table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">RN å®¹å™¨ (React Native App)</th>
<th align="left">æµè§ˆå™¨å®¹å™¨ (Web App &#x2F; WebView)</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>æœ¬è´¨</strong></td>
<td align="left"><strong>åŸç”Ÿåº”ç”¨æ¡†æ¶</strong> (JSé©±åŠ¨åŸç”ŸUI)</td>
<td align="left"><strong>ç½‘é¡µæ¸²æŸ“å¼•æ“</strong> (æ¸²æŸ“ HTML&#x2F;CSS&#x2F;JS DOM)</td>
</tr>
<tr>
<td align="left"><strong>ç›®æ ‡å¹³å°</strong></td>
<td align="left"><strong>åŸç”Ÿç§»åŠ¨å¹³å° (iOS&#x2F;Android)</strong></td>
<td align="left"><strong>ä»»ä½•æœ‰å…¼å®¹æµè§ˆå™¨&#x2F;WebViewçš„å¹³å°</strong></td>
</tr>
<tr>
<td align="left"><strong>æœ€ç»ˆäº§ç‰©</strong></td>
<td align="left">åŸç”Ÿå®‰è£…åŒ… (.ipa&#x2F;.apk)</td>
<td align="left">ç½‘é¡µèµ„æº (HTML&#x2F;CSS&#x2F;JS)ï¼Œé€šè¿‡ URL è®¿é—®</td>
</tr>
<tr>
<td align="left"><strong>æ¸²æŸ“æ–¹å¼</strong></td>
<td align="left"><strong>åŸç”ŸUIç»„ä»¶</strong> (é€šè¿‡JSæ¡¥æ¥é©±åŠ¨)</td>
<td align="left"><strong>HTML DOM &#x2F; CSSOM</strong> (ç”±æµè§ˆå™¨å¼•æ“æ¸²æŸ“)</td>
</tr>
<tr>
<td align="left"><strong>æ€§èƒ½</strong></td>
<td align="left"><strong>æ¥è¿‘åŸç”Ÿ</strong>ï¼Œå¤æ‚UI&#x2F;åŠ¨ç”»æ›´æµç•…</td>
<td align="left">å—é™äºæµè§ˆå™¨å¼•æ“ï¼Œå¤æ‚åœºæ™¯å¯èƒ½è¾ƒå·®</td>
</tr>
<tr>
<td align="left"><strong>è®¾å¤‡è®¿é—®</strong></td>
<td align="left"><strong>ç›´æ¥ã€å¼ºå¤§</strong> (é€šè¿‡åŸç”Ÿæ¡¥æ¥æ¨¡å—)</td>
<td align="left"><strong>é€šè¿‡ Web APIs</strong>ï¼Œæ”¯æŒåº¦å’Œèƒ½åŠ›æœ‰é™</td>
</tr>
<tr>
<td align="left"><strong>å¼€å‘æŠ€æœ¯</strong></td>
<td align="left">JS&#x2F;TS + React + åŸç”Ÿæ¦‚å¿µ</td>
<td align="left">HTML + CSS + JS&#x2F;TS</td>
</tr>
<tr>
<td align="left"><strong>è·¨å¹³å°</strong></td>
<td align="left">éœ€ä¸ºiOS&#x2F;Androidåˆ†åˆ«æ„å»ºï¼Œä»£ç å¯å…±äº«</td>
<td align="left"><strong>ä¸€æ¬¡ç¼–å†™ï¼Œéšå¤„è¿è¡Œ</strong> (ç†è®ºï¼Œéœ€é€‚é…)</td>
</tr>
<tr>
<td align="left"><strong>å®‰è£…</strong></td>
<td align="left">éœ€è¦ä»åº”ç”¨å•†åº—ä¸‹è½½å®‰è£…</td>
<td align="left">é€šè¿‡URLè®¿é—®ï¼ŒPWAå¯â€œå®‰è£…â€åˆ°æ¡Œé¢&#x2F;ä¸»å±</td>
</tr>
<tr>
<td align="left"><strong>æ›´æ–°</strong></td>
<td align="left">éœ€é€šè¿‡åº”ç”¨å•†åº—å®¡æ ¸æ›´æ–°</td>
<td align="left"><strong>å³æ—¶æ›´æ–°</strong> (æœåŠ¡å™¨ç«¯æ›´æ–°èµ„æºå³å¯)</td>
</tr>
</tbody></table>
<p><strong>ç®€å•ç±»æ¯”ï¼š</strong></p>
<ul>
<li><strong>RNå®¹å™¨ï¼š</strong> åƒä¸€ä¸ªç”¨JavaScriptç¼–å†™çš„â€œè¯´æ˜ä¹¦â€ï¼Œäº¤ç»™å½“åœ°ï¼ˆiOS&#x2F;Androidï¼‰çš„â€œæ–½å·¥é˜Ÿâ€ï¼ˆåŸç”Ÿæ¡¥æ¥å’Œç»„ä»¶ï¼‰æŒ‰ç…§è¯´æ˜ä¹¦ï¼Œç”¨å½“åœ°æœ€å¥½çš„â€œå»ºæâ€ï¼ˆåŸç”ŸUIç»„ä»¶ï¼‰æ¥å»ºé€ æˆ¿å­ï¼ˆAppï¼‰ã€‚ç»“æœæ˜¯æœ¬åœ°åŒ–çš„ã€é«˜è´¨é‡çš„æˆ¿å­ã€‚</li>
<li><strong>æµè§ˆå™¨å®¹å™¨ï¼š</strong> åƒä¸€ä¸ªé¢„åˆ¶çš„â€œæ´»åŠ¨æ¿æˆ¿â€ï¼ˆç½‘é¡µï¼‰ã€‚æ–½å·¥é˜Ÿï¼ˆæµè§ˆå™¨å¼•æ“ï¼‰æŒ‰ç…§ç»Ÿä¸€çš„â€œå›½é™…æ ‡å‡†â€ï¼ˆWebæ ‡å‡†ï¼‰ï¼Œç”¨è‡ªå¸¦çš„â€œæ ‡å‡†åŒ–æ¿æâ€ï¼ˆHTML&#x2F;CSSï¼‰åœ¨ä»»ä½•åœ°æ–¹å¿«é€Ÿæ­å»ºã€‚æˆ¿å­å¯ä»¥å¿«é€Ÿæ­å»ºå’Œä¿®æ”¹ï¼Œä½†å¯èƒ½ä¸å¦‚æœ¬åœ°å®šåˆ¶çš„é‚£ä¹ˆåšå›ºæˆ–è´´åˆå½“åœ°ç¯å¢ƒã€‚</li>
</ul>
<p><strong>é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿ</strong></p>
<p>éœ€è¦<strong>æœ€ä½³æ€§èƒ½ã€æ·±åº¦è®¾å¤‡é›†æˆã€åŸç”Ÿç”¨æˆ·ä½“éªŒ</strong> -&gt; <strong>React Native</strong>ã€‚</p>
<p>éœ€è¦<strong>æœ€å¹¿æ³›çš„è·¨å¹³å°è¦†ç›–ï¼ˆåŒ…æ‹¬Webï¼‰ã€æœ€å¿«çš„å¼€å‘è¿­ä»£é€Ÿåº¦ã€å³æ—¶æ›´æ–°</strong> -&gt; <strong>æµè§ˆå™¨å®¹å™¨ (WebæŠ€æœ¯&#x2F;PWA)</strong>ã€‚</p>
<p>æ··åˆæ–¹æ¡ˆï¼šåœ¨åŸç”ŸAppä¸­åµŒå…¥<strong>WebView</strong>æ¥å±•ç¤ºéƒ¨åˆ†å†…å®¹ï¼ˆå¦‚å¸®åŠ©é¡µé¢ã€è¥é”€æ´»åŠ¨é¡µï¼‰ï¼Œç»“åˆä¸¤è€…ä¼˜åŠ¿ã€‚React Native æœ¬èº«ä¹Ÿæä¾›äº† <code>WebView</code> ç»„ä»¶æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<h2 id="é™æ€èµ„æºå¤±æ•ˆ"><a href="#é™æ€èµ„æºå¤±æ•ˆ" class="headerlink" title="é™æ€èµ„æºå¤±æ•ˆ"></a>é™æ€èµ„æºå¤±æ•ˆ</h2><h3 id="æ–¹æ³•ä¸€ï¼šåŸºç¡€è€Œæœ‰æ•ˆçš„-onerror-äº‹ä»¶é™çº§"><a href="#æ–¹æ³•ä¸€ï¼šåŸºç¡€è€Œæœ‰æ•ˆçš„-onerror-äº‹ä»¶é™çº§" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŸºç¡€è€Œæœ‰æ•ˆçš„ onerror äº‹ä»¶é™çº§"></a><strong>æ–¹æ³•ä¸€ï¼šåŸºç¡€è€Œæœ‰æ•ˆçš„ onerror äº‹ä»¶é™çº§</strong></h3><h3 id="å…ˆè®²ä¸ªå°æ•…äº‹ï¼š"><a href="#å…ˆè®²ä¸ªå°æ•…äº‹ï¼š" class="headerlink" title="å…ˆè®²ä¸ªå°æ•…äº‹ï¼š"></a><strong>å…ˆè®²ä¸ªå°æ•…äº‹ï¼š</strong></h3><p>æœ‰æ¬¡ä¸Šçº¿å‰æˆ‘è‡ªä¿¡æ»¡æ»¡ï¼Œåˆšå‘ç‰ˆå°±é‚€è¯·äº§å“ç»ç†æ¥éªŒæ”¶ã€‚ç»“æœå°´å°¬çš„æ˜¯ï¼ŒCDNå›¾ç‰‡èµ„æºåŒæ­¥å»¶è¿Ÿäº†ï¼Œå¤´åƒå…¨è£‚å¼€ã€‚äº§å“ç»ç†æŠ¬å¤´é—®æˆ‘ï¼šâ€œè¿™æ˜¯ä¸ªå•¥ï¼Ÿâ€ã€‚æˆ‘èµ¶ç´§å®‰æŠšåï¼Œé©¬ä¸Šæƒ³åˆ°çš„åº”æ€¥æ–¹æ¡ˆå°±æ˜¯ <code>onerror</code>ï¼š</p>
<h3 id="åŸç†è¯´æ˜ï¼š"><a href="#åŸç†è¯´æ˜ï¼š" class="headerlink" title="åŸç†è¯´æ˜ï¼š"></a><strong>åŸç†è¯´æ˜ï¼š</strong></h3><p><code>onerror</code> äº‹ä»¶ä¼šåœ¨èµ„æºåŠ è½½å¤±è´¥æ—¶è¢«è§¦å‘ï¼Œæˆ‘ä»¬åªè¦æ•è·åˆ°è¿™ä¸ªé”™è¯¯ï¼Œå°±å¯ä»¥ç«‹å³åˆ‡æ¢åˆ°å¤‡ç”¨èµ„æºã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å›¾ç‰‡åŠ è½½å¤±è´¥ç”¨é»˜è®¤å¤´åƒè¡¥æ•‘ --&gt;</span><br><span class="line">&lt;img src=&quot;https://cdn.example.com/avatar.png&quot;</span><br><span class="line">     alt=&quot;ç”¨æˆ·å¤´åƒ&quot;</span><br><span class="line">     onerror=&quot;this.onerror=null;this.src=&#x27;/static/default-avatar.png&#x27;;&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>JSè„šæœ¬çš„æ–¹æ¡ˆç±»ä¼¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const script = document.createElement(&#x27;script&#x27;);</span><br><span class="line">script.src = &#x27;https://cdn.example.com/app.js&#x27;;</span><br><span class="line">script.onerror = () =&gt; &#123;</span><br><span class="line">  console.warn(&#x27;CDNæŒ‚äº†ï¼Œæ­£åœ¨åŠ è½½æœ¬åœ°è„šæœ¬...&#x27;);</span><br><span class="line">  const localScript = document.createElement(&#x27;script&#x27;);</span><br><span class="line">  localScript.src = &#x27;/static/app.js&#x27;;</span><br><span class="line">  document.head.appendChild(localScript);</span><br><span class="line">&#125;;</span><br><span class="line">document.head.appendChild(script);</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šç®€å•ã€ç›´æ¥ï¼Œè€Œä¸”å¯¹ç”¨æˆ·å‡ ä¹æ— æ„ŸçŸ¥ã€‚</p>
<p>ä¸è¿‡ç¼ºç‚¹ä¹Ÿæ˜æ˜¾ï¼Œæ¯ä¸ªèµ„æºéƒ½éœ€è¦å•ç‹¬å¤„ç†ï¼Œç®¡ç†èµ·æ¥ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚</p>
<h3 id="æ–¹æ³•äºŒï¼šService-Worker-ç¼“å­˜å…œåº•æ–¹æ¡ˆ"><a href="#æ–¹æ³•äºŒï¼šService-Worker-ç¼“å­˜å…œåº•æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ³•äºŒï¼šService Worker ç¼“å­˜å…œåº•æ–¹æ¡ˆ"></a><strong>æ–¹æ³•äºŒï¼šService Worker ç¼“å­˜å…œåº•æ–¹æ¡ˆ</strong></h3><h3 id="å†èŠä¸ªçœŸå®åœºæ™¯ï¼š"><a href="#å†èŠä¸ªçœŸå®åœºæ™¯ï¼š" class="headerlink" title="å†èŠä¸ªçœŸå®åœºæ™¯ï¼š"></a><strong>å†èŠä¸ªçœŸå®åœºæ™¯ï¼š</strong></h3><p>å»å¹´è´Ÿè´£åšä¸€ä¸ªPWAåº”ç”¨ï¼Œä¸Šçº¿åæœ‰ç”¨æˆ·ç‰¹æ„åé¦ˆï¼šâ€œä½ ä»¬çš„ç½‘ç«™ç‰›å•Šï¼Œè¿›ç”µæ¢¯æ²¡ç½‘è¿˜èƒ½æ‰“å¼€ï¼â€æˆ‘å½“æ—¶ç‰¹åˆ«å¾—æ„ï¼Œå› ä¸ºè¿™æ­£æ˜¯ Service Worker ç¼“å­˜ç­–ç•¥å‘æŒ¥äº†ä½œç”¨ã€‚</p>
<h3 id="åŸç†è¯´æ˜ï¼š-1"><a href="#åŸç†è¯´æ˜ï¼š-1" class="headerlink" title="åŸç†è¯´æ˜ï¼š"></a><strong>åŸç†è¯´æ˜ï¼š</strong></h3><p>Service Worker ä¼šåœ¨åå°æ‹¦æˆªé¡µé¢çš„ç½‘ç»œè¯·æ±‚ï¼Œå®ç°ã€Œç¼“å­˜ä¼˜å…ˆï¼ˆCache Firstï¼‰ã€ï¼Œè®©é¡µé¢çš„å…³é”®èµ„æºéƒ½é¢„å…ˆå­˜å¥½ï¼Œç¦»çº¿ä¹Ÿèƒ½æ‰“å¼€ã€‚</p>
<p>æ ¸å¿ƒä»£ç ç¤ºæ„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">self.addEventListener(&#x27;install&#x27;, event =&gt; &#123;</span><br><span class="line">  event.waitUntil(</span><br><span class="line">    caches.open(&#x27;v1&#x27;).then(cache =&gt; cache.addAll([</span><br><span class="line">      &#x27;/index.html&#x27;, &#x27;/styles.css&#x27;, &#x27;/app.js&#x27;</span><br><span class="line">    ]))</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.addEventListener(&#x27;fetch&#x27;, event =&gt; &#123;</span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request).then(cachedResponse =&gt; &#123;</span><br><span class="line">      return cachedResponse || fetch(event.request).then(networkResponse =&gt; &#123;</span><br><span class="line">        caches.open(&#x27;v1&#x27;).then(cache =&gt; cache.put(event.request, networkResponse.clone()));</span><br><span class="line">        return networkResponse;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œé¦–æ¬¡è®¿é—®åå…³é”®æ–‡ä»¶éƒ½ä¼šè¢«ç¼“å­˜ï¼Œåç»­è®¿é—®å³ä¾¿ç½‘ç»œä¸ä½³ï¼Œä½“éªŒä¾æ—§ç¨³å®šã€‚</p>
<p>ä¸è¿‡è¦æ³¨æ„ç¼“å­˜ç‰ˆæœ¬ç®¡ç†ï¼Œå®šæœŸæ›´æ–°ç¼“å­˜ç‰ˆæœ¬ï¼Œæ¯”å¦‚<code>v1</code>å˜æ›´ä¸º<code>v2</code>æ—¶è¦åŠæ—¶æ¸…ç†æ—§ç¼“å­˜ã€‚</p>
<h3 id="æ–¹æ³•ä¸‰ï¼šCSSèµ„æºçš„ä¼˜é›…é™çº§ï¼ˆé˜²æ­¢é¡µé¢å˜ä¸‘ï¼‰"><a href="#æ–¹æ³•ä¸‰ï¼šCSSèµ„æºçš„ä¼˜é›…é™çº§ï¼ˆé˜²æ­¢é¡µé¢å˜ä¸‘ï¼‰" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šCSSèµ„æºçš„ä¼˜é›…é™çº§ï¼ˆé˜²æ­¢é¡µé¢å˜ä¸‘ï¼‰"></a><strong>æ–¹æ³•ä¸‰ï¼šCSSèµ„æºçš„ä¼˜é›…é™çº§ï¼ˆé˜²æ­¢é¡µé¢å˜ä¸‘ï¼‰</strong></h3><h3 id="è¯´ä¸ªå›§äº‹å„¿ï¼š"><a href="#è¯´ä¸ªå›§äº‹å„¿ï¼š" class="headerlink" title="è¯´ä¸ªå›§äº‹å„¿ï¼š"></a><strong>è¯´ä¸ªå›§äº‹å„¿ï¼š</strong></h3><p>ä¹‹å‰èµ¶ä¸Šçº¿ï¼Œæœ‰æ¬¡CSSæ–‡ä»¶è¢«é”™è¯¯åˆ é™¤äº†ï¼Œç”¨æˆ·æ‰“å¼€ç½‘é¡µä¸€ç¬é—´ä»¥ä¸ºç”µè„‘åäº†ï¼Œæ»¡å±éƒ½æ˜¯ä¹±æ‰çš„å…ƒç´ ã€‚æˆ‘èµ¶ç´§ä¸´æ—¶è¡¥æ•‘â€”â€”å¡äº†ä¸€æ®µæœ€å°å¯ç”¨çš„å†…è”æ ·å¼ï¼Œå‹‰å¼ºæŒ½æ•‘äº†åœºé¢ã€‚</p>
<h3 id="åŸç†è¯´æ˜ï¼š-2"><a href="#åŸç†è¯´æ˜ï¼š-2" class="headerlink" title="åŸç†è¯´æ˜ï¼š"></a><strong>åŸç†è¯´æ˜ï¼š</strong></h3><p>CSSå‡ºé—®é¢˜å®¹æ˜“å¯¼è‡´â€œæ— æ ·å¼å†…å®¹é—ªç°â€ï¼ˆFOUCï¼‰ï¼Œè§£å†³æ–¹æ³•æ˜¯åˆ©ç”¨ preload æå‰åŠ è½½å…³é”® CSSï¼Œå¹¶é…åˆè¶…æ—¶ç­–ç•¥å†…è”å…œåº•ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;/critical.css&quot; as=&quot;style&quot; onload=&quot;this.rel=&#x27;stylesheet&#x27;&quot;&gt;</span><br><span class="line">&lt;noscript&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;/critical.css&quot;&gt;&lt;/noscript&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  if (!document.querySelector(&#x27;link[href=&quot;/critical.css&quot;]&#x27;)) &#123;</span><br><span class="line">    const style = document.createElement(&#x27;style&#x27;);</span><br><span class="line">    style.textContent = `</span><br><span class="line">      body &#123; font-family: sans-serif; background-color: #fff; &#125;</span><br><span class="line">      h1, p &#123; margin: 0; padding: 10px; &#125;</span><br><span class="line">    `;</span><br><span class="line">    document.head.appendChild(style);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, 3000);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç­–ç•¥è®©é¡µé¢è‡³å°‘èƒ½ä¿è¯åŸºç¡€çš„æ ·å¼æ•ˆæœã€‚ç”¨æˆ·ç”šè‡³ä¸ä¼šè§‰å¯Ÿå‡ºåŸå§‹æ ·å¼åŠ è½½å¤±è´¥ã€‚</p>
<h3 id="æ–¹æ³•å››ï¼šReact-Vue-ç»„ä»¶çš„é”™è¯¯è¾¹ç•Œ"><a href="#æ–¹æ³•å››ï¼šReact-Vue-ç»„ä»¶çš„é”™è¯¯è¾¹ç•Œ" class="headerlink" title="æ–¹æ³•å››ï¼šReact&#x2F;Vue ç»„ä»¶çš„é”™è¯¯è¾¹ç•Œ"></a><strong>æ–¹æ³•å››ï¼šReact&#x2F;Vue ç»„ä»¶çš„é”™è¯¯è¾¹ç•Œ</strong></h3><h3 id="ç°åœºå†ç°ï¼š"><a href="#ç°åœºå†ç°ï¼š" class="headerlink" title="ç°åœºå†ç°ï¼š"></a><strong>ç°åœºå†ç°ï¼š</strong></h3><p>æœ‰ä¸€æ¬¡åå°é¡¹ç›®æ¼”ç¤ºï¼Œæˆ‘ç”¨äº†ä¸ªç‰¹åˆ«é‡çš„å›¾è¡¨ç»„ä»¶ï¼Œç»“æœç½‘ç»œä¸å¥½åŠ è½½å¤±è´¥ã€‚</p>
<p>å¦‚æœæ•´ä¸ªé¡µé¢è·Ÿç€ç™½å±ï¼Œä¼°è®¡å½“åœºæƒ³æ­»çš„å¿ƒéƒ½æœ‰ã€‚ä¸è¿‡æˆ‘æå‰ç”¨äº† React çš„ Error Boundary åŒ…è£¹è¿™ä¸ªç»„ä»¶ï¼Œå®ƒæ˜¾ç¤ºäº†ä¸€å¥å‹å¥½çš„â€œåŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•â€ï¼Œæ•´ä¸ªé¡µé¢è¿˜èƒ½ç”¨ã€‚æœ€åè€æ¿å°±åªæäº†ä¸€å˜´çœ‹çœ‹å•¥æƒ…å†µï¼ˆè¿˜å¥½è¿˜å¥½ï¼‰ã€‚</p>
<h3 id="åŸç†è¯´æ˜ï¼š-3"><a href="#åŸç†è¯´æ˜ï¼š-3" class="headerlink" title="åŸç†è¯´æ˜ï¼š"></a><strong>åŸç†è¯´æ˜ï¼š</strong></h3><p>React çš„ Error Boundary å°±æ˜¯æ•è·ç»„ä»¶æ¸²æŸ“æˆ–åŠ è½½é”™è¯¯çš„è¾¹ç•Œç»„ä»¶ï¼Œå¸¸é…åˆæ‡’åŠ è½½ (<code>React.lazy</code>) ä½¿ç”¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// ErrorBoundary.jsx</span><br><span class="line">class ErrorBoundary extends React.Component &#123;</span><br><span class="line">  state = &#123; hasError: false &#125;;</span><br><span class="line">static getDerivedStateFromError() &#123; return &#123; hasError: true &#125;; &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    if (this.state.hasError) &#123;</span><br><span class="line">      return&lt;div&gt;åŠ è½½å¤±è´¥ï¼Œç¨åé‡è¯•ä¸€ä¸‹~&lt;/div&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">    returnthis.props.children;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// App.jsx</span><br><span class="line">const Chart = React.lazy(() =&gt;import(&#x27;./Chart&#x27;));</span><br><span class="line">function App() &#123;</span><br><span class="line">return (</span><br><span class="line">    &lt;ErrorBoundary&gt;</span><br><span class="line">      &lt;Suspense fallback=&#123;&lt;div&gt;åŠ è½½ä¸­...&lt;/div&gt;&#125;&gt;</span><br><span class="line">        &lt;Chart /&gt;</span><br><span class="line">      &lt;/Suspense&gt;</span><br><span class="line">    &lt;/ErrorBoundary&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸç†ç®€å•è€Œå®ç”¨ï¼šä¸€ä¸ªç»„ä»¶å¤±è´¥ï¼Œä¸ä¼šå½±å“æ•´ä½“é¡µé¢ã€‚ç±»ä¼¼çš„ï¼ŒVueä¸­ä¹Ÿæœ‰ <code>defineAsyncComponent</code> åšç±»ä¼¼çš„é™çº§å¤„ç†ã€‚</p>
<h3 id="æ·±åº¦æ€»ç»“ï¼šé™çº§å¤„ç†çš„ç²¾é«“æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ·±åº¦æ€»ç»“ï¼šé™çº§å¤„ç†çš„ç²¾é«“æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ·±åº¦æ€»ç»“ï¼šé™çº§å¤„ç†çš„ç²¾é«“æ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>æ·±åº¦æ€»ç»“ï¼šé™çº§å¤„ç†çš„ç²¾é«“æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3><p>å…¶å®ï¼Œèµ„æºé™çº§çœŸæ­£çš„æ ¸å¿ƒæ€è·¯å°±ä¸‰ä¸ªå­—ï¼š</p>
<ol>
<li><strong>ç¨³</strong>ï¼šç¡®ä¿é¡µé¢åŸºæœ¬åŠŸèƒ½ç»ä¸æŒ‚æ‰ï¼›</li>
<li><strong>å¿«</strong>ï¼šç”¨æˆ·å°½é‡æ— æ„ŸçŸ¥ï¼Œå¤‡ç”¨æ–¹æ¡ˆç§’çº§åˆ‡æ¢ï¼›</li>
<li><strong>çœ</strong>ï¼šå…œåº•ç­–ç•¥ç®€å•æ˜“ç»´æŠ¤ï¼Œä¸åˆ¶é€ æ–°éº»çƒ¦ã€‚</li>
</ol>
<p>ä»<code>onerror</code>äº‹ä»¶ã€Service Workerç¼“å­˜ï¼Œåˆ°CSSä¼˜é›…é™çº§å’Œç»„ä»¶çº§é”™è¯¯è¾¹ç•Œï¼Œè¿™äº›æ–¹æ¡ˆæ˜¯é€æ­¥æ·±å…¥çš„ï¼Œå½¢æˆä¸€æ•´å¥—å®Œæ•´çš„å®¹é”™æœºåˆ¶ã€‚æ­¤å¤–ï¼Œè¿˜è¦é…åˆå‰ç«¯ç›‘æ§ï¼ˆå¦‚ä¸ŠæŠ¥åŠ è½½å¤±è´¥ç‡ï¼‰ï¼Œå½¢æˆåé¦ˆé—­ç¯ï¼Œç¡®ä¿é•¿æœŸç¨³å®šè¿è¡Œã€‚</p>
<h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><h3 id="ä¸€ã€è¡¡é‡å‰ç«¯æ€§èƒ½"><a href="#ä¸€ã€è¡¡é‡å‰ç«¯æ€§èƒ½" class="headerlink" title="ä¸€ã€è¡¡é‡å‰ç«¯æ€§èƒ½"></a><strong>ä¸€ã€è¡¡é‡å‰ç«¯æ€§èƒ½</strong></h3><p>è¦åšå‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œé¦–è¦å·¥ä½œæ˜¯<strong>åˆ†æå’Œè¡¡é‡</strong>é¡µé¢å†…å®¹ï¼Œæ‰¾å‡ºç½‘ç«™ä¸­éœ€è¦ä¼˜åŒ–çš„éƒ¨åˆ†ï¼Œå¯¹ç—‡ä¸‹è¯ã€‚</p>
<p>è¡¡é‡æ€§èƒ½çš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li>åŠ è½½æ—¶é—´</li>
<li>æ€§èƒ½æŒ‡æ ‡</li>
<li>é•¿ä»»åŠ¡å¡é¡¿</li>
<li>æµè§ˆå™¨ Performance é€‰é¡¹å¡</li>
</ol>
<h4 id="1ã€åŠ è½½æ—¶é—´"><a href="#1ã€åŠ è½½æ—¶é—´" class="headerlink" title="1ã€åŠ è½½æ—¶é—´"></a><strong>1ã€åŠ è½½æ—¶é—´</strong></h4><p>æµè§ˆå™¨ <code>PerformanceNavigationTiming</code> å¯¹è±¡æä¾›äº†å…³äºé¡µé¢åŠ è½½æ€§èƒ½å„ç§è®¡æ—¶çš„è¯¦ç»†ä¿¡æ¯ã€‚ï¼ˆ<code>å¯¹åº”æ—§ç‰ˆæœ¬çš„ performance.timing å¯¹è±¡</code>ï¼‰æ¯”å¦‚å¯ä»¥åˆ†æ <strong>DOM æ ‘æ„å»ºå®Œæˆçš„æ—¶é—´ï¼ˆ<code>DOMContentLoaded</code>ï¼‰ å’Œ é¡µé¢å®Œæ•´çš„åŠ è½½æ—¶é—´ï¼ˆ<code>load</code>ï¼‰</strong>ã€‚</p>
<p>å¦‚ä¸‹ç¤ºä¾‹ï¼Œåœ¨ DOM æ ‘ä¸­å¢åŠ ä¸€ä¸ª  æ ‡ç­¾æ¥æ¸²æŸ“å›¾ç‰‡ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>DOMContentLoaded</code>ï¼Œæ˜¯ä¸€ä¸ª DOM äº‹ä»¶ï¼Œå½“æµè§ˆå™¨å®Œæˆ HTML æ–‡æ¡£çš„è§£æï¼Œæ„å»ºå®Œæˆ DOM æ ‘åè§¦å‘ï¼Œä½†ä¸åŒ…å«å›¾ç‰‡ã€CSSã€JavaScript ç­‰å¤–éƒ¨èµ„æºçš„åŠ è½½ã€‚</li>
<li><code>onLoad</code>ï¼Œæ˜¯ä¸€ä¸ª JS äº‹ä»¶ï¼Œå®ƒåœ¨é¡µé¢çš„æ‰€æœ‰èµ„æºï¼ˆåŒ…æ‹¬ HTMLã€CSSã€å›¾ç‰‡ã€JavaScript ç­‰ï¼‰å®Œå…¨åŠ è½½å®Œæˆåè§¦å‘ã€‚</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://picsum.photos/200/300&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ–°ç‰ˆæµè§ˆå™¨ APIï¼šPerformanceNavigationTiming æä¾›äº†å…³äºé¡µé¢åŠ è½½æ€§èƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ›¿ä»£æ—§çš„ performance.timing</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (performance.<span class="property">getEntriesByType</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> perfEntries = performance.<span class="title function_">getEntriesByType</span>(<span class="string">&quot;navigation&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (perfEntries.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> navigationEntry = perfEntries[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> &#123; domContentLoadedEventStart, loadEventStart, fetchStart &#125; = navigationEntry;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> <span class="title class_">DOMContentLoadedTime</span> = domContentLoadedEventStart - fetchStart;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`DOMContentLoaded çš„æ‰§è¡Œæ—¶é—´ï¼š<span class="subst">$&#123;DOMContentLoadedTime&#125;</span>ms`</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> loadTime = loadEventStart - fetchStart;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`load é¡µé¢å®Œæ•´çš„åŠ è½½æ—¶é—´ï¼š<span class="subst">$&#123;loadTime&#125;</span>ms`</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// æ—§ç‰ˆæµè§ˆå™¨é™çº§ä½¿ç”¨ performance.timing</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> &#123; fetchStart, domContentLoadedEventStart, loadEventStart &#125; = performance.<span class="property">timing</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> <span class="title class_">DOMContentLoadedTime</span> = domContentLoadedEventStart - fetchStart;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`---DOMContentLoaded çš„æ‰§è¡Œæ—¶é—´ï¼š<span class="subst">$&#123;DOMContentLoadedTime&#125;</span>ms`</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> loadTime = loadEventStart - fetchStart;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`load é¡µé¢å®Œæ•´çš„åŠ è½½æ—¶é—´ï¼š<span class="subst">$&#123;loadTime&#125;</span>ms`</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>PSï¼šé¡µé¢åŠ è½½æ€§èƒ½è¯¦ç»†ä¿¡æ¯å‚è€ƒèµ„æ–™ï¼š<strong>PerformanceNavigationTiming</strong>[1]</p>
<h3 id="2ã€æ€§èƒ½æŒ‡æ ‡"><a href="#2ã€æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="2ã€æ€§èƒ½æŒ‡æ ‡"></a><strong>2ã€æ€§èƒ½æŒ‡æ ‡</strong></h3><p>åˆ†æä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æŒ‡æ ‡ï¼ŒåŒ…å« <strong>FPï¼ˆé¦–æ¬¡åƒç´ ç»˜åˆ¶ï¼‰ã€FCPï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰ã€FMPï¼ˆé¦–æ¬¡æœ‰æ„ä¹‰å†…å®¹ç»˜åˆ¶ï¼‰ã€LCPï¼ˆé¡µé¢ä¸­æœ€å¤§å¯è§ å›¾ç‰‡æˆ–è€…æ–‡æœ¬å— åŠ è½½æ—¶é—´ï¼‰ç­‰</strong>ã€‚</p>
<p>ä¸€èˆ¬åœ¨ <strong>å®¢æˆ·ç«¯æ¸²æŸ“å•é¡µé¢åº”ç”¨</strong> ä¸­ï¼Œä¸ºäº†ä¼˜åŒ–<strong>é¦–å±æ¸²æŸ“ç™½å±æ—¶é—´</strong>ï¼Œä¼šé‡ç‚¹å…³æ³¨ <strong>FCPï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰</strong> æ€§èƒ½æŒ‡æ ‡ã€‚è¯¥ç»˜åˆ¶æ—¶é•¿è¶ŠçŸ­ï¼Œè¯´æ˜ç™½å±æ—¶é—´è¶Šå°‘ï¼Œç”¨æˆ·æ‰“å¼€ç½‘ç«™çš„ä½¿ç”¨ä½“éªŒå°±è¶Šå¥½ã€‚</p>
<blockquote>
<p>è¯´æ˜ï¼š<strong>FCP é¦–æ¬¡å†…å®¹ç»˜åˆ¶</strong> æ˜¯æŒ‡ç”¨æˆ·åœ¨é¡µé¢ä¸­çœ‹åˆ°äº†æœ‰æ•ˆå†…å®¹ã€‚æ¯”å¦‚åœ¨ React æ¡†æ¶ä¸­ï¼Œåˆå§‹æ—¶ä¼šæœ‰ä¸€ä¸ªç©º id&#x3D;root div å…ƒç´ ï¼Œæ­¤æ—¶ä¸ä¼šè®¡ç®— FCPï¼Œåªæœ‰ç­‰ id&#x3D;root ç»è¿‡ ReactDOM render ä»¥åï¼Œé¡µé¢å‘ˆç°äº†æ–‡æœ¬ç­‰æœ‰æ•ˆå†…å®¹ï¼Œè¿™æ—¶ä¼šè®¡ç®—å‡º FCPã€‚</p>
</blockquote>
<p>JS å¯ä»¥é€šè¿‡ <code>PerformanceObserver</code> è§‚å¯Ÿ <code>event type paint</code> æ¥è·å– FCP æŒ‡æ ‡ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼Œåˆå§‹æ”¾ç½®ä¸€ä¸ªç©º divï¼Œåœ¨ 1s ä»¥åç»™ div ä¸­æ·»åŠ æœ‰æ•ˆå†…å®¹ï¼ˆæ¨¡æ‹Ÿæ¡†æ¶æ¸²æŸ“ï¼‰ï¼ŒFCP æŒ‡æ ‡ä¼šåœ¨è¿™æ—¶ç”Ÿæˆã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="comment">/* è®¾ç½®èƒŒæ™¯å›¾ï¼Œç”Ÿæˆ FP æŒ‡æ ‡ */</span></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#root</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>: <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// æ¨¡æ‹Ÿæ¡†æ¶æ¸²æŸ“ï¼Œ1s ååœ¨é¡µé¢å‘ˆç°æœ‰æ•ˆå†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        root.<span class="property">innerHTML</span> = <span class="string">&quot;content&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> observer = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="keyword">function</span>(<span class="params">entryList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> perfEntries = entryList.<span class="title function_">getEntries</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">for</span> (<span class="keyword">const</span> perfEntry <span class="keyword">of</span> perfEntries) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (perfEntry.<span class="property">name</span> === <span class="string">&quot;first-paint&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">const</span> <span class="variable constant_">FP</span> = perfEntry;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é¦–æ¬¡åƒç´ ç»˜åˆ¶ æ—¶é—´ï¼š&quot;</span>, <span class="variable constant_">FP</span>?.<span class="property">startTime</span>); <span class="comment">// 674msï¼ˆdiv è®¾æœ‰èƒŒæ™¯å›¾ï¼Œä¼šåœ¨å…ƒç´ æ¸²æŸ“æ—¶ç”Ÿæˆ FP æŒ‡æ ‡ï¼‰</span></span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="title function_">elseif</span> (perfEntry.<span class="property">name</span> === <span class="string">&quot;first-contentful-paint&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">const</span> <span class="variable constant_">FCP</span> = perfEntry;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é¦–æ¬¡å†…å®¹ç»˜åˆ¶ æ—¶é—´ï¼š&quot;</span>, <span class="variable constant_">FCP</span>?.<span class="property">startTime</span>); <span class="comment">// 1174ms</span></span></span><br><span class="line"><span class="language-javascript">              observer.<span class="title function_">disconnect</span>(); <span class="comment">// æ–­å¼€è§‚å¯Ÿï¼Œä¸å†è§‚å¯Ÿäº†</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è§‚å¯Ÿ paint ç›¸å…³æ€§èƒ½æŒ‡æ ‡</span></span></span><br><span class="line"><span class="language-javascript">        observer.<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&quot;paint&quot;</span>] &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3ã€é¡µé¢å¡é¡¿"><a href="#3ã€é¡µé¢å¡é¡¿" class="headerlink" title="3ã€é¡µé¢å¡é¡¿"></a><strong>3ã€é¡µé¢å¡é¡¿</strong></h3><p>å½“ä¸€æ®µä»£ç çš„æ‰§è¡Œå ç”¨ä¸»çº¿ç¨‹æ—¶é—´è¿‡é•¿æ—¶ï¼Œç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„äº¤äº’å°±ä¼šå‡ºç°å¡é¡¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘æ§è¿™ç±»é•¿ä»»åŠ¡ï¼Œé’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>å¦‚ä¸‹ç¤ºä¾‹ï¼Œç‚¹å‡»æŒ‰é’®æ‰§è¡Œä¸€ä¸ª 1000ms é•¿ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>PerformanceObserver</code> è§‚å¯Ÿ <code>event type longtask</code> å¹¶è®¾ç½®é˜ˆå€¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;longTaskBtn&quot;</span>&gt;</span>æ‰§è¡ŒlongTask<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// é»˜è®¤é•¿ä»»åŠ¡</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> longTaskBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;longTaskBtn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">longTask</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> start = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;longTaskå¼€å§‹ start&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">while</span> (<span class="title class_">Date</span>.<span class="title function_">now</span>() &lt; <span class="number">1000</span> + start) &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;longTaskç»“æŸ endï¼Œè€—æ—¶ï¼š&quot;</span>, <span class="title class_">Date</span>.<span class="title function_">now</span>() - start);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      longTaskBtn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, longTask);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// è§‚å¯Ÿé•¿ä»»åŠ¡</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        list.<span class="title function_">getEntries</span>().<span class="title function_">forEach</span>(<span class="function">(<span class="params">entry</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// è®¾å®šå¡é¡¿é˜ˆå€¼ï¼šæ‰§è¡Œæ—¶é•¿å¤§äº 500 ms</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (entry.<span class="property">duration</span> &gt; <span class="number">500</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ‰§è¡Œçš„é•¿ä»»åŠ¡è€—æ—¶ï¼š&quot;</span>, entry.<span class="property">duration</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;).<span class="title function_">observe</span>(&#123; <span class="attr">entryTypes</span>: [<span class="string">&quot;longtask&quot;</span>] &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4ã€æµè§ˆå™¨-Performance-é€‰é¡¹å¡"><a href="#4ã€æµè§ˆå™¨-Performance-é€‰é¡¹å¡" class="headerlink" title="4ã€æµè§ˆå™¨ Performance é€‰é¡¹å¡"></a><strong>4ã€æµè§ˆå™¨ Performance é€‰é¡¹å¡</strong></h3><p>é™¤äº†ä¸Šè¿°é€šè¿‡ä»£ç è¿›è¡Œåº¦é‡æ€§èƒ½å¤–ï¼Œè¿˜å¯ä»¥åœ¨ <strong>æµè§ˆå™¨æ§åˆ¶å° - Performance é€‰é¡¹å¡</strong> ä¸­æŸ¥çœ‹å’Œåˆ†æé¡µé¢æ€§èƒ½ã€‚å…¶ä¸­åŒ…å« <strong>FCP æ€§èƒ½æŒ‡æ ‡ã€é¡µé¢å†…å®¹ç»˜åˆ¶ çš„è€—æ—¶ç»Ÿè®¡</strong> ç­‰ã€‚</p>
<p><img src="C:\Users\Zhangwenye\Desktop\åšå®¢\source\img\640.jpg" alt="image.png"></p>
<h3 id="äºŒã€ä»£ç é€»è¾‘"><a href="#äºŒã€ä»£ç é€»è¾‘" class="headerlink" title="äºŒã€ä»£ç é€»è¾‘"></a><strong>äºŒã€ä»£ç é€»è¾‘</strong></h3><p>åœ¨ç‰¹å®šéœ€æ±‚åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº› <strong>ç¼–ç¨‹æŠ€å·§</strong> æ¥æå‡æ€§èƒ½ç½‘ç«™çš„è¿è¡Œæ—¶æ€§èƒ½ã€‚å¦‚ï¼š<strong>é˜²æŠ–&#x2F;èŠ‚æµã€å›¾ç‰‡æ‡’åŠ è½½ã€æ—¶é—´åˆ‡ç‰‡</strong>ç­‰ã€‚</p>
<h4 id="1ã€å…³æ³¨å¤æ‚åº¦åˆ†æ"><a href="#1ã€å…³æ³¨å¤æ‚åº¦åˆ†æ" class="headerlink" title="1ã€å…³æ³¨å¤æ‚åº¦åˆ†æ"></a><strong>1ã€å…³æ³¨å¤æ‚åº¦åˆ†æ</strong></h4><p>æˆ‘ä»¬åœ¨å­¦ä¹ ç®—æ³•çš„æ—¶å€™å…¥é—¨è¯¾å°±æ˜¯æ¥è§¦<strong>å¤æ‚åº¦åˆ†æ(å¤§ O è¡¨ç¤ºæ³•)</strong>ï¼Œé€šè¿‡å®ƒæ¥åˆ†æä¸€ä¸ªç®—æ³•çš„ æ‰§è¡Œæ•ˆç‡ å’Œ å ç”¨å†…å­˜ çš„å¥½åã€‚</p>
<p>å¤æ‚åº¦åˆ†æåŒæ ·å¯ä»¥åº”ç”¨åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå®ƒèƒ½çº¦æŸä½ çš„ä»£ç ç¼–å†™é€»è¾‘ï¼Œä¹Ÿä¼šè€ƒå¯Ÿä½ çš„ ç¼–ç¨‹æ€ç»´ å’Œ åŸºç¡€å†…åŠŸã€‚</p>
<p>ç°æœ‰ä¸€ä¸ªéœ€æ±‚ï¼šåœ¨ä¸€ç»„æ•°æ®ä¸­æŸ¥è¯¢ç›®æ ‡å€¼ã€‚</p>
<p>å¦‚æœä¸æ³¨é‡ä»£ç æ‰§è¡Œæ•ˆç‡ï¼Œå¯èƒ½ä¼šå†™æˆä¸‹é¢è¿™æ ·ï¼ŒæŸ¥æ‰¾ N ä¸ªç›®æ ‡å€¼å°±è¦æ‰§è¡Œ N éå¾ªç¯ï¼Œå¦‚æœä¸å¿½ç•¥ç³»æ•°ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;bj&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;åŒ—äº¬&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;sh&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;ä¸Šæµ·&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;gz&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;å¹¿å·&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;sz&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;æ·±åœ³&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bj = list.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">cityId</span> === <span class="string">&quot;bj&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> sh = list.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">cityId</span> === <span class="string">&quot;sh&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> gz = list.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">cityId</span> === <span class="string">&quot;gz&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> sz = list.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">cityId</span> === <span class="string">&quot;sz&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è€Œå¯¹äºæ³¨é‡ç¼–ç¨‹æ€ç»´çš„å·¥ç¨‹å¸ˆï¼Œåªéœ€è¿›è¡Œä¸€è½®éå†å¹¶å°†ç»“æœå­˜å‚¨åœ¨ <code>Map</code> ä¸­å®ç°éœ€æ±‚ï¼ˆæ—¶é—´å¤æ‚åº¦ O(n) ï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;bj&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;åŒ—äº¬&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;sh&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;ä¸Šæµ·&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;gz&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;å¹¿å·&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">cityId</span>: <span class="string">&quot;sz&quot;</span>, <span class="attr">cityName</span>: <span class="string">&quot;æ·±åœ³&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cityMap = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">city</span>) =&gt;</span> &#123;</span><br><span class="line">  cityMap[city.<span class="property">cityId</span>] = city;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; bj, sh, gz, sz &#125; = cityMap;</span><br></pre></td></tr></table></figure>

<h4 id="2ã€é˜²æŠ–å’ŒèŠ‚æµ"><a href="#2ã€é˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="2ã€é˜²æŠ–å’ŒèŠ‚æµ"></a><strong>2ã€é˜²æŠ–å’ŒèŠ‚æµ</strong></h4><p>é˜²æŠ–å’ŒèŠ‚æµå¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œåœ¨ç”¨æˆ·é¢‘ç¹æ“ä½œä¸€ä¸ªåŠŸèƒ½æ—¶ï¼Œå¯ä»¥é€‚å½“ä½¿ç”¨ <strong>é˜²æŠ–å’ŒèŠ‚æµ</strong> ä¼˜åŒ–é€»è¾‘æ‰§è¡Œæ—¶æœºï¼Œé¿å…é‡å¤æ‰§è¡Œ JS é€»è¾‘é€ æˆé¡µé¢äº¤äº’é˜»å¡ã€‚</p>
<ul>
<li>å¯¹äºé˜²æŠ–ï¼Œå¸¸è§çš„åœºæ™¯æ˜¯ <strong>è¾“å…¥æ¡†æœç´¢æŸ¥è¯¢</strong>ï¼ŒçŸ­æ—¶é—´å†…é‡å¤æ“ä½œä¼š <strong>æ¸…é™¤å¹¶é‡æ–°è®¡æ—¶</strong> æ¥æ‰§è¡Œå›è°ƒä»»åŠ¡ï¼›</li>
<li>å¯¹äºèŠ‚æµï¼Œå¸¸è§çš„åœºæ™¯æ˜¯ <strong>è°ƒæ•´çª—å£å¤§å°</strong>ï¼Œä»¥ <strong>å›ºå®šçš„çŸ­é—´éš”é¢‘ç‡</strong> æ‰§è¡Œå›è°ƒä»»åŠ¡ã€‚</li>
</ul>
<h4 id="3ã€å›¾ç‰‡æ‡’åŠ è½½"><a href="#3ã€å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="3ã€å›¾ç‰‡æ‡’åŠ è½½"></a><strong>3ã€å›¾ç‰‡æ‡’åŠ è½½</strong></h4><p>å›¾ç‰‡æ‡’åŠ è½½ä¹Ÿæ˜¯ä¸€ç§ç½‘ç«™ä¼˜åŒ–æ‰‹æ®µã€‚å¦‚æœä¸åšæ§åˆ¶ï¼Œå›¾ç‰‡å…¨éƒ¨åŠ è½½å‘é€ HTTP è¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´ç½‘ç«™å¡é¡¿å´©æºƒã€‚</p>
<p>é¦–æ¬¡è¿›å…¥é¡µé¢ï¼Œæˆ‘ä»¬åªéœ€è¦åŠ è½½å‡ºé¦–å±åŒºåŸŸçš„å›¾ç‰‡ï¼Œå…¶ä»–åŒºåŸŸçš„å›¾ç‰‡æ”¾ç½®ä¸€ä¸ªå°çš„é»˜è®¤å›¾ï¼Œåç»­å°†å›¾ç‰‡æ»‘åŠ¨åˆ°å¯è§†åŒºåŸŸåå†åŠ è½½å®é™…çš„å›¾ç‰‡ã€‚</p>
<p>æ‡’åŠ è½½å¯ä»¥ä½¿ç”¨ <strong>IntersectionObserver API</strong> å®ç°ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./loading-url.png&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;./url.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">const imgList = [...document.querySelectorAll(&#x27;img&#x27;)];</span><br><span class="line">const io = new IntersectionObserver((entries) =&gt;&#123;</span><br><span class="line">  entries.forEach(item =&gt; &#123;</span><br><span class="line">    // isIntersecting æ˜¯ä¸€ä¸ª Boolean å€¼ï¼Œåˆ¤æ–­ç›®æ ‡å…ƒç´ å½“å‰æ˜¯å¦è¿›å…¥ root è§†çª—ï¼ˆé»˜è®¤ root æ˜¯ window çª—å£å¯è§†åŒºåŸŸï¼‰</span><br><span class="line">    if (item.isIntersecting) &#123;</span><br><span class="line">      item.target.src = item.target.dataset.src; // çœŸå®çš„å›¾ç‰‡åœ°å€å­˜æ”¾åœ¨ data-src è‡ªå®šä¹‰å±æ€§ä¸Š</span><br><span class="line">      // å›¾ç‰‡åŠ è½½ååœæ­¢ç›‘å¬è¯¥å…ƒç´ ï¼Œé‡Šæ”¾å†…å­˜</span><br><span class="line">      io.unobserve(item.target);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">// observe ç›‘å¬æ‰€æœ‰ img èŠ‚ç‚¹</span><br><span class="line">imgList.forEach(img =&gt; io.observe(img));</span><br></pre></td></tr></table></figure>

<h4 id="4ã€æ—¶é—´åˆ‡ç‰‡"><a href="#4ã€æ—¶é—´åˆ‡ç‰‡" class="headerlink" title="4ã€æ—¶é—´åˆ‡ç‰‡"></a><strong>4ã€æ—¶é—´åˆ‡ç‰‡</strong></h4><p>æˆ‘ä»¬çŸ¥é“ æµè§ˆå™¨çš„æ¸²æŸ“ å’Œ JS è¿è¡Œåœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸Šï¼Œå¦‚æœ JS æ‰§è¡Œä¸€ä¸ª <strong>LongTask é•¿ä»»åŠ¡</strong>ï¼ŒåŠ¿å¿…ä¼šé˜»å¡æµè§ˆå™¨æ¸²æŸ“ï¼Œå¯¼è‡´ç”¨æˆ·åœ¨ç•Œé¢äº¤äº’å‡ºç°å¡é¡¿ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦é¿å…é•¿ä»»åŠ¡çš„æ‰§è¡Œï¼Œæˆ–æŒ‰ç…§ä¸€å®šè§„åˆ™æ‹†åˆ†æˆä¸€ä¸ªä¸ªå°ä»»åŠ¡é€šè¿‡ <strong>æ—¶é—´åˆ‡ç‰‡</strong> æ¥ç®¡ç†å’Œæ‰§è¡Œã€‚</p>
<h4 id="5ã€Web-Worker-å­çº¿ç¨‹"><a href="#5ã€Web-Worker-å­çº¿ç¨‹" class="headerlink" title="5ã€Web Worker å­çº¿ç¨‹"></a><strong>5ã€Web Worker å­çº¿ç¨‹</strong></h4><p>å¦‚æœè¯´ä¸€ä¸ªé•¿ä»»åŠ¡ä»…æ˜¯åšä¸€äº›è®¡ç®—çš„é€»è¾‘ï¼Œå¹¶ä¸ä¸€å®šéè¦åœ¨ä¸»çº¿ç¨‹ä¸Šè¿è¡Œï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©ä½¿ç”¨ Worker å¼€å¯å­çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œè®¡ç®—ä»»åŠ¡ã€‚</p>
<p>å¸¸è§çš„åœºæ™¯æ˜¯ <strong>å¤§æ–‡ä»¶åˆ‡ç‰‡ä¸Šä¼  - è®¡ç®—æ–‡ä»¶ hash</strong>ï¼Œæ–‡ä»¶è¶Šå¤§è®¡ç®— hash è€—æ—¶å°±è¶Šé•¿ï¼Œå› æ­¤è¿™ç§è€—æ—¶çš„å·¥ä½œå¯ä»¥äº¤ç»™ Web Workerã€‚</p>
<h4 id="6ã€LRU-ç®—æ³•"><a href="#6ã€LRU-ç®—æ³•" class="headerlink" title="6ã€LRU ç®—æ³•"></a><strong>6ã€LRU ç®—æ³•</strong></h4><p>åœ¨åšä¸šåŠ¡åŠŸèƒ½æ—¶ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼ˆæå‡äºŒæ¬¡è®¿é—®é€Ÿåº¦ï¼‰ï¼Œä¼šæ¶‰åŠ <strong>å¯¹å·²è®¿é—®æ•°æ®è¿›è¡Œç¼“å­˜</strong> çš„æ“ä½œï¼Œç¼“å­˜å­˜å‚¨å¯ä»¥æ˜¯åœ¨ <strong>å†…å­˜å˜é‡ æˆ– æµè§ˆå™¨æœ¬åœ°ç¼“å­˜</strong> ä¸­ã€‚</p>
<p>æ— è®ºæ˜¯å“ªç§å­˜æ”¾ä½ç½®ï¼Œéƒ½ä¸å®œæ— é™åˆ¶çš„å‘ç¼“å­˜ä¸­å­˜å‚¨æ•°æ®ï¼Œå­˜å‚¨çš„è¶Šå¤šï¼Œå°±ä¼šå¯¼è‡´è®¡ç®—æœºè¿è¡Œè¶Šæ¥è¶Šæ…¢ã€‚</p>
<p><strong>LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•ç”¨äºç®¡ç†ç¼“å­˜ä¸­çš„æ•°æ®</strong>ï¼Œç¡®ä¿ç¼“å­˜é›†åˆä¸­æ•°æ®çš„æ¡ç›®åœ¨ä¸€ä¸ªå¯æ§çš„èŒƒå›´å†…ã€‚</p>
<p>é€šè¿‡ <strong>é˜Ÿåˆ—</strong> å¯ä»¥å®ç° LRU ç®—æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LRUCache</span> &#123;</span><br><span class="line"><span class="title function_">constructor</span>(<span class="params">max</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">max</span> = max; <span class="comment">// ç¼“å­˜å®¹é‡</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cache</span> = <span class="title function_">newMap</span>(); <span class="comment">// å®šä¹‰ç¼“å­˜ Mapï¼Œä¼˜åŒ–æŸ¥æ‰¾é€Ÿåº¦</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">keys</span> = []; <span class="comment">// é˜Ÿåˆ—ï¼Œè®°å½•æœ€è¿‘èŠ‚ç‚¹çš„ key</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¿é—®æ•°æ®</span></span><br><span class="line"><span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) &#123;</span><br><span class="line">      <span class="comment">// æ›´æ–°èŠ‚ç‚¹åˆ°é˜Ÿåˆ—å°¾éƒ¨</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">update</span>(key);</span><br><span class="line">      <span class="keyword">const</span> val = <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">get</span>(key);</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line">    returnundefined;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ /æ›´æ–°æ•°æ®</span></span><br><span class="line">  <span class="title function_">put</span>(<span class="params">key, val</span>) &#123;</span><br><span class="line">    <span class="comment">// 1ã€æ›´æ–°æ•°æ®ï¼ˆå’Œ get ç›¸ä¼¼éƒ½æ˜¯æ›´æ–°èŠ‚ç‚¹åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼Œä¸è¿‡å¤šäº†æ›´æ–° val æ“ä½œï¼‰</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">has</span>(key)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, val);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">update</span>(key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2ã€æ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">set</span>(key, val); <span class="comment">// è®°å½•åˆ° Map ä¸­</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">keys</span>.<span class="title function_">push</span>(key); <span class="comment">// æ·»åŠ åˆ°é˜Ÿåˆ—å°¾éƒ¨</span></span><br><span class="line">      <span class="comment">// è€ƒè™‘å®¹é‡æ˜¯å¦è¶…å‡º</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">keys</span>.<span class="property">length</span> &gt; <span class="variable language_">this</span>.<span class="property">max</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> oldKey = <span class="variable language_">this</span>.<span class="property">keys</span>.<span class="title function_">shift</span>(); <span class="comment">// åˆ é™¤é˜Ÿåˆ—å¤´éƒ¨</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">cache</span>.<span class="title function_">delete</span>(oldKey);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»åŠ¨åˆ°é˜Ÿåˆ—å°¾éƒ¨</span></span><br><span class="line">  <span class="title function_">update</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">keys</span>.<span class="title function_">indexOf</span>(key);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">keys</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>); <span class="comment">// åˆ é™¤æ—§çš„ä½ç½®</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">keys</span>.<span class="title function_">push</span>(key); <span class="comment">// æ·»åŠ åˆ°é˜Ÿåˆ—å°¾éƒ¨</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="title class_">LRUCache</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. æ·»åŠ æ–°æ•°æ®ï¼Œæ­¤æ—¶ç¼“å­˜æœªæ»¡</span></span><br><span class="line">cache.<span class="title function_">put</span>(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>);</span><br><span class="line">cache.<span class="title function_">put</span>(<span class="string">&quot;b&quot;</span>, <span class="number">2</span>);</span><br><span class="line">cache.<span class="title function_">put</span>(<span class="string">&quot;c&quot;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(cache.<span class="property">keys</span>); <span class="comment">// [a, b, c]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. è®¿é—®å·²æœ‰æ•°æ®</span></span><br><span class="line">cache.<span class="title function_">get</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(cache.<span class="property">keys</span>); <span class="comment">// [a, c, b]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. æ·»åŠ æ–°æ•°æ®ï¼Œæ­¤æ—¶ç¼“å­˜å·²æ»¡</span></span><br><span class="line">cache.<span class="title function_">put</span>(<span class="string">&quot;d&quot;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(cache.<span class="property">keys</span>); <span class="comment">// [c, b, d]</span></span><br></pre></td></tr></table></figure>

<h4 id="7ã€è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨"><a href="#7ã€è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨" class="headerlink" title="7ã€è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨"></a><strong>7ã€è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨</strong></h4><p><strong>è™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨</strong> æ˜¯ä¸€ç§ç”¨äºä¼˜åŒ–é•¿åˆ—è¡¨æˆ–å¤§é‡æ•°æ®å±•ç¤ºçš„å‰ç«¯æŠ€æœ¯ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯åªæ¸²æŸ“å½“å‰å¯è§†åŒºåŸŸå†…çš„æ•°æ®é¡¹ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ã€‚</p>
<p>è¿™ç§æ–¹å¼å¯ä»¥æ˜¾è‘—å‡å°‘DOMæ“ä½œï¼Œé™ä½æµè§ˆå™¨çš„æ¸²æŸ“è´Ÿæ‹…ï¼Œä»è€Œæé«˜æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p>å‡è®¾æˆ‘ä»¬å‘æœåŠ¡ç«¯æŸ¥è¯¢åˆ° 1000 æ¡æ•°æ®ï¼Œ<strong>å¦‚æœåŸæ ·å°†è¿™ 1000 ä¸ªæ•°æ®æ¸²æŸ“åœ¨é¡µé¢ä¸Šï¼Œå°±ä¼šç”Ÿæˆ 1000 ä¸ª DOM èŠ‚ç‚¹</strong>ã€‚</p>
<p>å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œå…¶å®å¹¶ä¸å…³å¿ƒæ˜¯å¦æ˜¯ä¸€æ¬¡æ€§å°†æ•°æ®å…¨éƒ¨æ¸²æŸ“åˆ°åˆ—è¡¨å®¹å™¨ä¸­ï¼Œåªè¦åœ¨å®¹å™¨çš„å¯è§†åŒºåŸŸå†…çš„ DOM æ•°æ®èƒ½å¤Ÿæ­£å¸¸çœ‹åˆ°å°±è¡Œã€‚</p>
<p>è™šæ‹Ÿæ»šåŠ¨çš„æ ¸å¿ƒä¼˜åŒ–æ€è·¯ï¼š<strong>ç»“åˆæ»šåŠ¨æ¡ top ä½ç½®å’Œå®¹å™¨çš„å¯è§†åŒºåŸŸï¼Œè®¡ç®—å‡ºè¿™ä¸ªåŒºé—´çš„æ•°æ®é¡¹ï¼Œæ¸²æŸ“åˆ°æ»šåŠ¨å®¹å™¨ä¸­</strong>ã€‚</p>
<p>å¦å¤–è¿˜æœ‰ä¸€ä¸ª <strong>è™šæ‹Ÿæ»‘åŠ¨åˆ—è¡¨</strong> ä¹Ÿç§°ä¸º æ— é™æ»‘åŠ¨åˆ—è¡¨ï¼Œå’Œè™šæ‹Ÿæ»šåŠ¨åˆ—è¡¨çš„å®ç°ç›¸ä¼¼ï¼Œé€‚åˆåº”ç”¨åœ¨ H5 ç§»åŠ¨ç«¯ï¼Œç±»ä¼¼æŠ–éŸ³çš„ çŸ­è§†é¢‘ æ¨èåˆ—è¡¨ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/29/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD/" data-id="cmcygiiyz000nvgur64bs96mu" data-title="å‰ç«¯æ€§èƒ½[C" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E3%80%81%E9%94%99%E8%AF%AF%E7%9B%91%E6%8E%A7%E3%80%81/" rel="tag">å‰ç«¯é¡µé¢ã€é”™è¯¯ç›‘æ§ã€</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html-css-javascript/" rel="tag">html css javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/" rel="tag">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E3%80%81%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/" rel="tag">å‰ç«¯å·¥ç¨‹ã€åŒ…ç®¡ç†å™¨</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E3%80%81%E9%94%99%E8%AF%AF%E7%9B%91%E6%8E%A7%E3%80%81/" rel="tag">å‰ç«¯é¡µé¢ã€é”™è¯¯ç›‘æ§ã€</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E7%90%86/" rel="tag">åŸç†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1/" rel="tag">åœºæ™¯è®¾è®¡</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/" rel="tag">å¤§æ¨¡å‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/" rel="tag">è®¡ç®—æœºç½‘ç»œï¼Œæµè§ˆå™¨åŸç†</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Node-js/" style="font-size: 10px;">Node.js</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/html-css-javascript/" style="font-size: 10px;">html css javascript</a> <a href="/tags/typescript/" style="font-size: 10px;">typescript</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E3%80%81%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/" style="font-size: 10px;">å‰ç«¯å·¥ç¨‹ã€åŒ…ç®¡ç†å™¨</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E3%80%81%E9%94%99%E8%AF%AF%E7%9B%91%E6%8E%A7%E3%80%81/" style="font-size: 10px;">å‰ç«¯é¡µé¢ã€é”™è¯¯ç›‘æ§ã€</a> <a href="/tags/%E5%8E%9F%E7%90%86/" style="font-size: 10px;">åŸç†</a> <a href="/tags/%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1/" style="font-size: 10px;">åœºæ™¯è®¾è®¡</a> <a href="/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/" style="font-size: 10px;">å¤§æ¨¡å‹</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/" style="font-size: 10px;">è®¡ç®—æœºç½‘ç»œï¼Œæµè§ˆå™¨åŸç†</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">July 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">June 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/07/12/React-Native/">React Native</a>
          </li>
        
          <li>
            <a href="/2025/07/04/%E4%B8%9A%E5%8A%A1/">ä¸šåŠ¡</a>
          </li>
        
          <li>
            <a href="/2025/07/03/Vue/">Vue</a>
          </li>
        
          <li>
            <a href="/2025/07/01/AI/">AI</a>
          </li>
        
          <li>
            <a href="/2025/07/01/React%E8%A1%A5%E5%85%85/">Reactè¡¥å……</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>